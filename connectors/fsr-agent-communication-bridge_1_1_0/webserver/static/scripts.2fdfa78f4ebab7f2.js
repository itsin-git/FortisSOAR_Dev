(function(){"use strict";var da=function(n){if(null===n)return"null";if(void 0===n)return"undefined";var o=typeof n;return"object"===o&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===o&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":o},Dr=function(n){return{eq:n}},Wr=Dr(function(n,o){return n===o}),Ks=function(n){return Dr(function(o,s){if(o.length!==s.length)return!1;for(var a=o.length,i=0;i<a;i++)if(!n.eq(o[i],s[i]))return!1;return!0})},Os=function(n){return Dr(function(o,s){var p,w,S,a=Object.keys(o),i=Object.keys(s);if(!(p=Wr,w=Ks(p),S=function(w){return Array.prototype.slice.call(w).sort(void 0)},Dr(function(_,N){return w.eq(S(_),S(N))})).eq(a,i))return!1;for(var u=a.length,m=0;m<u;m++){var h=a[m];if(!n.eq(o[h],s[h]))return!1}return!0})},vr=Dr(function(n,o){if(n===o)return!0;var s=da(n);return s===da(o)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(s)?n===o:"array"===s?Ks(vr).eq(n,o):"object"===s&&Os(vr).eq(n,o))});const As=Object.getPrototypeOf,bn=(n,o,s)=>{var a;return!!s(n,o.prototype)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name},qn=n=>o=>(s=>{const a=typeof s;return null===s?"null":"object"===a&&Array.isArray(s)?"array":"object"===a&&bn(s,String,(i,u)=>u.isPrototypeOf(i))?"string":a})(o)===n,qo=n=>o=>typeof o===n,Oo=n=>o=>n===o,ys=(n,o)=>Mo(n)&&bn(n,o,(s,a)=>As(s)===a),zt=qn("string"),Mo=qn("object"),Ro=n=>ys(n,Object),Wn=qn("array"),_t=Oo(null),Ln=qo("boolean"),en=Oo(void 0),ve=n=>null==n,Le=n=>!ve(n),mo=qo("function"),Vo=qo("number"),re=(n,o)=>{if(Wn(n)){for(let s=0,a=n.length;s<a;++s)if(!o(n[s]))return!1;return!0}return!1},gt=()=>{},Is=(n,o)=>(...s)=>n(o.apply(null,s)),ko=(n,o)=>s=>n(o(s)),qe=n=>()=>n,Se=n=>n,dr=(n,o)=>n===o;function De(n,...o){return(...s)=>{const a=o.concat(s);return n.apply(null,a)}}const Ot=n=>o=>!n(o),B=n=>()=>{throw new Error(n)},An=n=>n(),oo=n=>{n()},yn=qe(!1),Lt=qe(!0);class U{constructor(o,s){this.tag=o,this.value=s}static some(o){return new U(!0,o)}static none(){return U.singletonNone}fold(o,s){return this.tag?s(this.value):o()}isSome(){return this.tag}isNone(){return!this.tag}map(o){return this.tag?U.some(o(this.value)):U.none()}bind(o){return this.tag?o(this.value):U.none()}exists(o){return this.tag&&o(this.value)}forall(o){return!this.tag||o(this.value)}filter(o){return!this.tag||o(this.value)?this:U.none()}getOr(o){return this.tag?this.value:o}or(o){return this.tag?this:o}getOrThunk(o){return this.tag?this.value:o()}orThunk(o){return this.tag?this:o()}getOrDie(o){if(this.tag)return this.value;throw new Error(o??"Called getOrDie on None")}static from(o){return Le(o)?U.some(o):U.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(o){this.tag&&o(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}U.singletonNone=new U(!1);const xo=Array.prototype.slice,Ys=Array.prototype.indexOf,bt=Array.prototype.push,vn=(n,o)=>Ys.call(n,o),Be=(n,o)=>vn(n,o)>-1,lt=(n,o)=>{for(let s=0,a=n.length;s<a;s++)if(o(n[s],s))return!0;return!1},ln=(n,o)=>{const s=n.length,a=new Array(s);for(let i=0;i<s;i++)a[i]=o(n[i],i);return a},Je=(n,o)=>{for(let s=0,a=n.length;s<a;s++)o(n[s],s)},so=(n,o)=>{for(let s=n.length-1;s>=0;s--)o(n[s],s)},jn=(n,o)=>{const s=[],a=[];for(let i=0,u=n.length;i<u;i++){const m=n[i];(o(m,i)?s:a).push(m)}return{pass:s,fail:a}},Ht=(n,o)=>{const s=[];for(let a=0,i=n.length;a<i;a++){const u=n[a];o(u,a)&&s.push(u)}return s},ro=(n,o,s)=>(so(n,(a,i)=>{s=o(s,a,i)}),s),fo=(n,o,s)=>(Je(n,(a,i)=>{s=o(s,a,i)}),s),mr=(n,o,s)=>{for(let a=0,i=n.length;a<i;a++){const u=n[a];if(o(u,a))return U.some(u);if(s(u,a))break}return U.none()},En=(n,o)=>mr(n,o,yn),No=(n,o)=>{for(let s=0,a=n.length;s<a;s++)if(o(n[s],s))return U.some(s);return U.none()},yr=n=>{const o=[];for(let s=0,a=n.length;s<a;++s){if(!Wn(n[s]))throw new Error("Arr.flatten item "+s+" was not an array, input: "+n);bt.apply(o,n[s])}return o},Ao=(n,o)=>yr(ln(n,o)),Ls=(n,o)=>{for(let s=0,a=n.length;s<a;++s)if(!0!==o(n[s],s))return!1;return!0},Qr=n=>{const o=xo.call(n,0);return o.reverse(),o},zo=(n,o)=>Ht(n,s=>!Be(o,s)),Mr=(n,o)=>{const s={};for(let a=0,i=n.length;a<i;a++){const u=n[a];s[String(u)]=o(u,a)}return s},Hs=(n,o)=>{const s=xo.call(n,0);return s.sort(o),s},Ps=(n,o)=>o>=0&&o<n.length?U.some(n[o]):U.none(),or=n=>Ps(n,0),wr=n=>Ps(n,n.length-1),$o=mo(Array.from)?Array.from:n=>xo.call(n),Xo=(n,o)=>{for(let s=0;s<n.length;s++){const a=o(n[s],s);if(a.isSome())return a}return U.none()},Vs=Object.keys,Ye=Object.hasOwnProperty,Ke=(n,o)=>{const s=Vs(n);for(let a=0,i=s.length;a<i;a++){const u=s[a];o(n[u],u)}},Sn=(n,o)=>tn(n,(s,a)=>({k:a,v:o(s,a)})),tn=(n,o)=>{const s={};return Ke(n,(a,i)=>{const u=o(a,i);s[u.k]=u.v}),s},Kn=n=>(o,s)=>{n[s]=o},Xs=(n,o,s,a)=>{Ke(n,(i,u)=>{(o(i,u)?s:a)(i,u)})},sr=(n,o)=>{const s={};return Xs(n,o,Kn(s),gt),s},jr=(n,o)=>{const s=[];return Ke(n,(a,i)=>{s.push(o(a,i))}),s},Es=n=>jr(n,Se),Uo=(n,o)=>rt(n,o)?U.from(n[o]):U.none(),rt=(n,o)=>Ye.call(n,o),Qn=(n,o)=>rt(n,o)&&null!=n[o],_r=n=>{const o={};return Je(n,s=>{o[s]={}}),Vs(o)},ea=n=>void 0!==n.length,Gr=Array.isArray,Vr=(n,o,s)=>{if(!n)return!1;if(s=s||n,ea(n)){for(let a=0,i=n.length;a<i;a++)if(!1===o.call(s,n[a],a,n))return!1}else for(const a in n)if(rt(n,a)&&!1===o.call(s,n[a],a,n))return!1;return!0},as=(n,o)=>{const s=[];return Vr(n,(a,i)=>{s.push(o(a,i,n))}),s},Sa=(n,o)=>{const s=[];return Vr(n,(a,i)=>{o&&!o(a,i,n)||s.push(a)}),s},Fr=(n,o,s,a)=>{let i=en(s)?n[0]:s;for(let u=0;u<n.length;u++)i=o.call(a,i,n[u],u);return i},qa=(n,o,s)=>{for(let a=0,i=n.length;a<i;a++)if(o.call(s,n[a],a,n))return a;return-1},rr=n=>n[n.length-1],zs=n=>{let o,s=!1;return(...a)=>(s||(s=!0,o=n.apply(null,a)),o)},qr=()=>Da(0,0),Da=(n,o)=>({major:n,minor:o}),Ma={nu:Da,detect:(n,o)=>{const s=String(o).toLowerCase();return 0===n.length?qr():((a,i)=>{const u=((h,p)=>{for(let y=0;y<h.length;y++){const w=h[y];if(w.test(p))return w}})(a,i);if(!u)return{major:0,minor:0};const m=h=>Number(i.replace(u,"$"+h));return Da(m(1),m(2))})(n,s)},unknown:qr},ar=(n,o)=>{const s=String(o).toLowerCase();return En(n,a=>a.search(s))},ts=(n,o,s)=>""===o||n.length>=o.length&&n.substr(s,s+o.length)===o,Rs=(n,o)=>ms(n,o)?n.substring(o.length):n,cs=(n,o,s=0,a)=>{const i=n.indexOf(o,s);return-1!==i&&(!!en(a)||i+o.length<=a)},ms=(n,o)=>ts(n,o,0),Ss=(n,o)=>ts(n,o,n.length-o.length),le=n=>o=>o.replace(n,""),ie=le(/^\s+|\s+$/g),je=le(/^\s+/g),et=le(/\s+$/g),Kt=n=>n.length>0,hn=n=>!Kt(n),Rn=(n,o=10)=>{const s=parseInt(n,o);return isNaN(s)?U.none():U.some(s)},ps=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,be=n=>o=>cs(o,n),Vn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>cs(n,"edge/")&&cs(n,"chrome")&&cs(n,"safari")&&cs(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ps],search:n=>cs(n,"chrome")&&!cs(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>cs(n,"msie")||cs(n,"trident")},{name:"Opera",versionRegexes:[ps,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:be("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:be("firefox")},{name:"Safari",versionRegexes:[ps,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(cs(n,"safari")||cs(n,"mobile/"))&&cs(n,"applewebkit")}],ge=[{name:"Windows",search:be("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>cs(n,"iphone")||cs(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:be("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:be("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:be("linux"),versionRegexes:[]},{name:"Solaris",search:be("sunos"),versionRegexes:[]},{name:"FreeBSD",search:be("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:be("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],he={browsers:qe(Vn),oses:qe(ge)},ht="Chromium",gn="Firefox",rn=n=>{const o=n.current,a=i=>()=>o===i;return{current:o,version:n.version,isEdge:a("Edge"),isChromium:a(ht),isIE:a("IE"),isOpera:a("Opera"),isFirefox:a(gn),isSafari:a("Safari")}},Mn=()=>rn({current:void 0,version:Ma.unknown()}),ao=rn,To=(qe("Edge"),qe(ht),qe("IE"),qe("Opera"),qe(gn),qe("Safari"),"Windows"),ws="Android",Ka="Solaris",co="FreeBSD",Wo="ChromeOS",gs=n=>{const o=n.current,a=i=>()=>o===i;return{current:o,version:n.version,isWindows:a(To),isiOS:a("iOS"),isAndroid:a(ws),isMacOS:a("macOS"),isLinux:a("Linux"),isSolaris:a(Ka),isFreeBSD:a(co),isChromeOS:a(Wo)}},ma=()=>gs({current:void 0,version:Ma.unknown()}),ga=gs,hc=(qe(To),qe("iOS"),qe(ws),qe("Linux"),qe("macOS"),qe(Ka),qe(co),qe(Wo),n=>window.matchMedia(n).matches);let is=zs(()=>((n,o,s)=>{const a=he.browsers(),i=he.oses(),u=o.bind(p=>{return y=a,Xo(p.brands,S=>{const _=S.brand.toLowerCase();return En(y,N=>{var A;return _===(null===(A=N.brand)||void 0===A?void 0:A.toLowerCase())}).map(N=>({current:N.name,version:Ma.nu(parseInt(S.version,10),0)}))});var y}).orThunk(()=>{return ar(a,y=n).map(w=>{const S=Ma.detect(w.versionRegexes,y);return{current:w.name,version:S}});var y}).fold(Mn,ao),m=(p=i,y=n,ar(p,y).map(w=>{const S=Ma.detect(w.versionRegexes,y);return{current:w.name,version:S}})).fold(ma,ga),h=((p,y,w,S)=>{const _=p.isiOS()&&!0===/ipad/i.test(w),N=p.isiOS()&&!_,A=p.isiOS()||p.isAndroid(),$=A||S("(pointer:coarse)"),D=_||!N&&A&&S("(min-device-width:768px)"),L=N||A&&!D,j=y.isSafari()&&p.isiOS()&&!1===/safari/i.test(w),q=!L&&!D&&!j;return{isiPad:qe(_),isiPhone:qe(N),isTablet:qe(D),isPhone:qe(L),isTouch:qe($),isAndroid:p.isAndroid,isiOS:p.isiOS,isWebView:qe(j),isDesktop:qe(q)}})(m,u,n,s);var p,y;return{browser:u,os:m,deviceType:h}})(navigator.userAgent,U.from(navigator.userAgentData),hc));const Sc=()=>is(),Qi=navigator.userAgent,Jo=Sc(),Cr=Jo.browser,cr=Jo.os,Us=Jo.deviceType,xi=-1!==Qi.indexOf("Windows Phone"),wo={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Cr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Cr.isIE(),windowsPhone:xi,browser:{current:Cr.current,version:Cr.version,isChromium:Cr.isChromium,isEdge:Cr.isEdge,isFirefox:Cr.isFirefox,isIE:Cr.isIE,isOpera:Cr.isOpera,isSafari:Cr.isSafari},os:{current:cr.current,version:cr.version,isAndroid:cr.isAndroid,isChromeOS:cr.isChromeOS,isFreeBSD:cr.isFreeBSD,isiOS:cr.isiOS,isLinux:cr.isLinux,isMacOS:cr.isMacOS,isSolaris:cr.isSolaris,isWindows:cr.isWindows},deviceType:{isDesktop:Us.isDesktop,isiPad:Us.isiPad,isiPhone:Us.isiPhone,isPhone:Us.isPhone,isTablet:Us.isTablet,isTouch:Us.isTouch,isWebView:Us.isWebView}},Kr=/^\s*|\s*$/g,Ic=n=>ve(n)?"":(""+n).replace(Kr,""),Tc=function(n,o,s,a){a=a||this,n&&(s&&(n=n[s]),Vr(n,(i,u)=>!1!==o.call(a,i,u,s)&&(Tc(i,o,s,a),!0)))},wt={trim:Ic,isArray:Gr,is:(n,o)=>o?!("array"!==o||!Gr(n))||typeof n===o:void 0!==n,toArray:n=>{if(Gr(n))return n;{const o=[];for(let s=0,a=n.length;s<a;s++)o[s]=n[s];return o}},makeMap:(n,o,s={})=>{const a=zt(n)?n.split(o||","):n||[];let i=a.length;for(;i--;)s[a[i]]={};return s},each:Vr,map:as,grep:Sa,inArray:(n,o)=>{if(n)for(let s=0,a=n.length;s<a;s++)if(n[s]===o)return s;return-1},hasOwn:rt,extend:(n,...o)=>{for(let s=0;s<o.length;s++){const a=o[s];for(const i in a)if(rt(a,i)){const u=a[i];void 0!==u&&(n[i]=u)}}return n},walk:Tc,resolve:(n,o=window)=>{const s=n.split(".");for(let a=0,i=s.length;a<i&&(o=o[s[a]]);a++);return o},explode:(n,o)=>Wn(n)?n:""===n?[]:as(n.split(o||","),Ic),_addCacheSuffix:n=>{const o=wo.cacheSuffix;return o&&(n+=(-1===n.indexOf("?")?"?":"&")+o),n}},kc=(n,o,s=dr)=>n.exists(a=>s(a,o)),Qc=(n,o,s=dr)=>Ds(n,o,s).getOr(n.isNone()&&o.isNone()),Ds=(n,o,s)=>n.isSome()&&o.isSome()?U.some(s(n.getOrDie(),o.getOrDie())):U.none(),Ia=(n,o)=>n?U.some(o):U.none(),Si=typeof window<"u"?window:Function("return this;")(),Ec=(n,o)=>((s,a)=>{let i=a??Si;for(let u=0;u<s.length&&null!=i;++u)i=i[s[u]];return i})(n.split("."),o),Vl=Object.getPrototypeOf,ce=n=>n.dom.nodeName.toLowerCase(),Ae=n=>n.dom.nodeType,Ve=n=>o=>Ae(o)===n,vt=n=>an(n)&&(n=>{const o=Ec("ownerDocument.defaultView",n);return Mo(n)&&((s=o,((a,i)=>{const u=Ec("HTMLElement",i);if(null==u)throw new Error("HTMLElement not available on this browser");return u})(0,s)).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(Vl(n).constructor.name));var s})(n.dom),an=Ve(1),Eo=Ve(3),xr=Ve(9),hs=Ve(11),Zs=n=>o=>an(o)&&ce(o)===n,ns=(n,o,s)=>{if(!(zt(s)||Ln(s)||Vo(s)))throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",s,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(o,s+"")},ls=(n,o,s)=>{ns(n.dom,o,s)},Lc=(n,o)=>{const s=n.dom;Ke(o,(a,i)=>{ns(s,i,a)})},zr=(n,o)=>{const s=n.dom.getAttribute(o);return null===s?void 0:s},Bn=(n,o)=>U.from(zr(n,o)),pl=(n,o)=>{const s=n.dom;return!(!s||!s.hasAttribute)&&s.hasAttribute(o)},Bo=(n,o)=>{n.dom.removeAttribute(o)},z=n=>fo(n.dom.attributes,(o,s)=>(o[s.name]=s.value,o),{}),ne=(n,o)=>{const s=zr(n,o);return void 0===s||""===s?[]:s.split(" ")},ae=n=>void 0!==n.dom.classList,Ze=n=>ne(n,"class"),It=(n,o)=>((s,a,i)=>{const u=ne(s,a).concat([i]);return ls(s,a,u.join(" ")),!0})(n,"class",o),go=(n,o)=>((s,a,i)=>{const u=Ht(ne(s,a),m=>m!==i);return u.length>0?ls(s,a,u.join(" ")):Bo(s,a),!1})(n,"class",o),Xt=(n,o)=>{ae(n)?n.dom.classList.add(o):It(n,o)},Ms=n=>{0===(ae(n)?n.dom.classList:Ze(n)).length&&Bo(n,"class")},ka=(n,o)=>{ae(n)?n.dom.classList.remove(o):go(n,o),Ms(n)},Ns=(n,o)=>ae(n)&&n.dom.classList.contains(o),ha=n=>{if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},Ws=(n,o)=>{const s=(o||document).createElement("div");if(s.innerHTML=n,!s.hasChildNodes()||s.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,n),new Error(a)}return ha(s.childNodes[0])},Nr=(n,o)=>{const s=(o||document).createElement(n);return ha(s)},fc=(n,o)=>{const s=(o||document).createTextNode(n);return ha(s)},F=ha,Pe=(n,o)=>{const s=[],a=u=>(s.push(u),o(u));let i=o(n);do{i=i.bind(a)}while(i.isSome());return s},ot=(n,o)=>{const s=n.dom;if(1!==s.nodeType)return!1;{const a=s;if(void 0!==a.matches)return a.matches(o);if(void 0!==a.msMatchesSelector)return a.msMatchesSelector(o);if(void 0!==a.webkitMatchesSelector)return a.webkitMatchesSelector(o);if(void 0!==a.mozMatchesSelector)return a.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")}},Ut=n=>1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount,cn=(n,o)=>n.dom===o.dom,bs=(n,o)=>{const s=n.dom,a=o.dom;return s!==a&&s.contains(a)},ta=n=>F(n.dom.ownerDocument),po=n=>xr(n)?n:ta(n),Sr=n=>F(po(n).dom.defaultView),Ts=n=>U.from(n.dom.parentNode).map(F),$r=n=>U.from(n.dom.parentElement).map(F),_c=(n,o)=>{const s=mo(o)?o:yn;let a=n.dom;const i=[];for(;null!=a.parentNode;){const u=a.parentNode,m=F(u);if(i.push(m),!0===s(m))break;a=u}return i},Hc=n=>U.from(n.dom.previousSibling).map(F),Ti=n=>U.from(n.dom.nextSibling).map(F),Fs=n=>Qr(Pe(n,Hc)),fa=n=>Pe(n,Ti),Na=n=>ln(n.dom.childNodes,F),js=(n,o)=>U.from(n.dom.childNodes[o]).map(F),bd=n=>js(n,0),zl=n=>js(n,n.dom.childNodes.length-1),jm=n=>n.dom.childNodes.length,bl=n=>hs(n)&&Le(n.dom.host),ei=mo(Element.prototype.attachShadow)&&mo(Node.prototype.getRootNode),Fu=qe(ei),Ir=ei?n=>F(n.dom.getRootNode()):po,vd=n=>bl(n)?n:(o=>{const s=o.dom.head;if(null==s)throw new Error("Head is not available yet");return F(s)})(po(n)),Jd=n=>F(n.dom.host),Vg=n=>{if(Fu()&&Le(n.target)){const o=F(n.target);if(an(o)&&na(o)&&n.composed&&n.composedPath){const s=n.composedPath();if(s)return or(s)}}return U.from(n.target)},na=n=>Le(n.dom.shadowRoot),ki=n=>{const o=Eo(n)?n.dom.parentNode:n.dom;if(null==o||null===o.ownerDocument)return!1;const s=o.ownerDocument;return(a=>{const i=Ir(a);return bl(i)?U.some(i):U.none()})(F(o)).fold(()=>s.body.contains(o),ko(ki,Jd))};var Oc=(n,o,s,a,i)=>n(s,a)?U.some(s):mo(i)&&i(s)?U.none():o(s,a,i);const Vc=(n,o,s)=>{let a=n.dom;const i=mo(s)?s:yn;for(;a.parentNode;){a=a.parentNode;const u=F(a);if(o(u))return U.some(u);if(i(u))break}return U.none()},el=(n,o,s)=>Oc((a,i)=>i(a),Vc,n,o,s),fu=(n,o,s)=>Vc(n,a=>ot(a,o),s),Ul=(n,o)=>((s,a)=>{const i=void 0===a?document:a.dom;return Ut(i)?U.none():U.from(i.querySelector(s)).map(F)})(o,n),Ba=(n,o,s)=>Oc((a,i)=>ot(a,i),fu,n,o,s),vl=(n,o=!1)=>{return ki(n)?n.dom.isContentEditable:(s=n,Ba(s,"[contenteditable]")).fold(qe(o),a=>"true"===zc(a));var s},zc=n=>n.dom.contentEditable,ui=n=>void 0!==n.style&&mo(n.style.getPropertyValue),$u=(n,o,s)=>{if(!zt(s))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",s,":: Element ",n),new Error("CSS value must be a string: "+s);ui(n)&&n.style.setProperty(o,s)},Qd=(n,o,s)=>{$u(n.dom,o,s)},Iu=(n,o)=>{const s=n.dom;Ke(o,(a,i)=>{$u(s,i,a)})},Ei=(n,o)=>{const s=n.dom,a=window.getComputedStyle(s).getPropertyValue(o);return""!==a||ki(n)?a:Gm(s,o)},Gm=(n,o)=>ui(n)?n.style.getPropertyValue(o):"",tl=(n,o)=>{const a=Gm(n.dom,o);return U.from(a).filter(i=>i.length>0)},qm=n=>{const o={},s=n.dom;if(ui(s))for(let a=0;a<s.style.length;a++){const i=s.style.item(a);o[i]=s.style[i]}return o},yd=(n,o)=>{var s,a;a=o,ui(s=n.dom)&&s.style.removeProperty(a),kc(Bn(n,"style").map(ie),"")&&Bo(n,"style")},Ya=(n,o)=>{Ts(n).each(s=>{s.dom.insertBefore(o.dom,n.dom)})},nl=(n,o)=>{Ti(n).fold(()=>{Ts(n).each(s=>{Or(s,o)})},s=>{Ya(s,o)})},em=(n,o)=>{bd(n).fold(()=>{Or(n,o)},s=>{n.dom.insertBefore(o.dom,s.dom)})},Or=(n,o)=>{n.dom.appendChild(o.dom)},Lu=(n,o)=>{Ya(n,o),Or(o,n)},pu=(n,o)=>{Je(o,s=>{Or(n,s)})},bu=n=>{n.dom.textContent="",Je(Na(n),o=>{gr(o)})},gr=n=>{const o=n.dom;null!==o.parentNode&&o.parentNode.removeChild(o)},Zl=n=>{const o=Na(n);var s,a;o.length>0&&(s=n,Je(a=o,(i,u)=>{nl(0===u?s:a[u-1],i)})),gr(n)},Hu=n=>ln(n,F),ol=n=>n.dom.innerHTML,_i=(n,o)=>{const s=ta(n).dom,a=F(s.createDocumentFragment()),i=((u,m)=>{const h=(m||document).createElement("div");return h.innerHTML=u,Na(F(h))})(o,s);pu(a,i),bu(n),Or(n,a)},zg=(n,o,s,a)=>{n.dom.removeEventListener(o,s,a)},Km=(n,o)=>({left:n,top:o,translate:(s,a)=>Km(n+s,o+a)}),Wl=Km,wd=(n,o)=>void 0!==n?n:void 0!==o?o:0,Cd=n=>{const o=n.dom,s=o.ownerDocument.body;return s===o?Wl(s.offsetLeft,s.offsetTop):ki(n)?(a=>{const i=a.getBoundingClientRect();return Wl(i.left,i.top)})(o):Wl(0,0)},Ug=n=>{const o=void 0!==n?n.dom:document;return Wl(o.body.scrollLeft||o.documentElement.scrollLeft,o.body.scrollTop||o.documentElement.scrollTop)},vu=(n,o,s)=>{const a=(void 0!==s?s.dom:document).defaultView;a&&a.scrollTo(n,o)},Uh=(n,o)=>{Sc().browser.isSafari()&&mo(n.dom.scrollIntoViewIfNeeded)?n.dom.scrollIntoViewIfNeeded(!1):n.dom.scrollIntoView(o)},Ym=(n,o,s,a)=>({x:n,y:o,width:s,height:a,right:n+s,bottom:o+a}),Ac=n=>{const o=void 0===n?window:n,a=Ug(F(o.document));return(i=>{const u=void 0===i?window:i;return Sc().browser.isFirefox()?U.none():U.from(u.visualViewport)})(o).fold(()=>{const i=o.document.documentElement;return Ym(a.left,a.top,i.clientWidth,i.clientHeight)},i=>Ym(Math.max(i.pageLeft,a.left),Math.max(i.pageTop,a.top),i.width,i.height))},Zg=(n,o)=>{let s=[];return Je(Na(n),a=>{o(a)&&(s=s.concat([a])),s=s.concat(Zg(a,o))}),s},Ea=(n,o)=>((s,a)=>{const i=void 0===a?document:a.dom;return Ut(i)?[]:ln(i.querySelectorAll(s),F)})(o,n),nm=(n,o,s)=>fu(n,o,s).isSome();class ir{constructor(o,s){this.node=o,this.rootNode=s,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(o){return this.node=this.findSibling(this.node,"firstChild","nextSibling",o),this.node}prev(o){return this.node=this.findSibling(this.node,"lastChild","previousSibling",o),this.node}prev2(o){return this.node=this.findPreviousNode(this.node,o),this.node}findSibling(o,s,a,i){if(o){if(!i&&o[s])return o[s];if(o!==this.rootNode){let u=o[a];if(u)return u;for(let m=o.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[a],u)return u}}}findPreviousNode(o,s){if(o){const a=o.previousSibling;if(this.rootNode&&a===this.rootNode)return;if(a){if(!s)for(let u=a.lastChild;u;u=u.lastChild)if(!u.lastChild)return u;return a}const i=o.parentNode;if(i&&i!==this.rootNode)return i}}}const La=n=>o=>!!o&&o.nodeType===n,xd=n=>!!n&&!Object.getPrototypeOf(n),Qt=La(1),jl=n=>{const o=n.toLowerCase();return s=>Le(s)&&s.nodeName.toLowerCase()===o},di=n=>{const o=n.map(s=>s.toLowerCase());return s=>{if(s&&s.nodeName){const a=s.nodeName.toLowerCase();return Be(o,a)}return!1}},Vu=(n,o)=>{const s=o.toLowerCase().split(" ");return a=>{if(Qt(a)){const i=a.ownerDocument.defaultView;if(i)for(let u=0;u<s.length;u++){const m=i.getComputedStyle(a,null);if((m?m.getPropertyValue(n):null)===s[u])return!0}}return!1}},Xm=n=>o=>Qt(o)&&o.hasAttribute(n),zu=n=>Qt(n)&&n.hasAttribute("data-mce-bogus"),Gl=n=>Qt(n)&&"TABLE"===n.tagName,Wg=n=>o=>!(!Qt(o)||o.contentEditable!==n&&o.getAttribute("data-mce-contenteditable")!==n),om=di(["textarea","input"]),yt=La(3),Jm=La(4),Zh=La(7),_s=La(8),oa=La(9),sl=La(11),Tr=jl("br"),M=jl("img"),H=Wg("true"),K=Wg("false"),me=di(["td","th"]),Ce=di(["td","th","caption"]),Tt=di(["video","audio","object","embed"]),Rt=jl("li"),Hn=jl("details"),io=jl("summary"),jo="\xa0",Xa=n=>"\ufeff"===n,Ur=((n,o)=>{const s=a=>n(a)?U.from(a.dom.nodeValue):U.none();return{get:a=>{if(!n(a))throw new Error("Can only get text value of a text node");return s(a).getOr("")},getOption:s,set:(a,i)=>{if(!n(a))throw new Error("Can only set raw text value of a text node");a.dom.nodeValue=i}}})(Eo),sa=n=>Ur.get(n),Oi=n=>Ur.getOption(n),Ja=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),yu=n=>{let o;return s=>(o=o||Mr(n,Lt),rt(o,ce(s)))},ti=yu(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Br=n=>an(n)&&!ti(n),Ai=n=>an(n)&&"br"===ce(n),Wh=yu(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),sm=yu(["ul","ol","dl"]),jg=yu(["li","dd","dt"]),W1=yu(["thead","tbody","tfoot"]),Qm=yu(["td","th"]),Js=yu(["pre","script","textarea","style"]),Gg=yu(Ja),ni=n=>Gg(n)||Br(n),yl=()=>{const n=Nr("br");return ls(n,"data-mce-bogus","1"),n},Ri=n=>{bu(n),Or(n,yl())},eg=n=>{zl(n).each(o=>{Hc(o).each(s=>{ti(n)&&Ai(o)&&ti(s)&&gr(o)})})},Pn="\ufeff",rm=Xa,ql=n=>n.replace(/\uFEFF/g,""),ep=Qt,qg=yt,am=n=>(qg(n)&&(n=n.parentNode),ep(n)&&n.hasAttribute("data-mce-caret")),Kl=n=>qg(n)&&rm(n.data),mi=n=>am(n)||Kl(n),tg=n=>n.firstChild!==n.lastChild||!Tr(n.firstChild),Sd=n=>{const o=n.container();return!!yt(o)&&(o.data.charAt(n.offset())===Pn||n.isAtStart()&&Kl(o.previousSibling))},tp=n=>{const o=n.container();return!!yt(o)&&(o.data.charAt(n.offset()-1)===Pn||n.isAtEnd()&&Kl(o.nextSibling))},Kg=n=>qg(n)&&n.data[0]===Pn,wl=n=>qg(n)&&n.data[n.data.length-1]===Pn,np=n=>n&&n.hasAttribute("data-mce-caret")?((o=>{var s;const a=o.getElementsByTagName("br"),i=a[a.length-1];zu(i)&&(null===(s=i.parentNode)||void 0===s||s.removeChild(i))})(n),n.removeAttribute("data-mce-caret"),n.removeAttribute("data-mce-bogus"),n.removeAttribute("style"),n.removeAttribute("data-mce-style"),n.removeAttribute("_moz_abspos"),n):null,Yg=n=>am(n.startContainer),Cl=H,j1=K,G1=Tr,op=yt,sp=di(["script","style","textarea"]),rp=di(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ap=di(["table"]),q1=mi,gi=n=>!q1(n)&&(op(n)?!sp(n.parentNode):rp(n)||G1(n)||ap(n)||K1(n)),K1=n=>{return!(Qt(o=n)&&"true"===o.getAttribute("unselectable"))&&j1(n);var o},Di=(n,o)=>gi(n)&&((s,a)=>{for(let i=s.parentNode;i&&i!==a;i=i.parentNode){if(K1(i))return!1;if(Cl(i))return!0}return!0})(n,o),Tn=/^[ \t\r\n]*$/,Mi=n=>Tn.test(n),Xg=n=>{for(const o of n)if(!Xa(o))return!1;return!0},jh=n=>"\n"===n||"\r"===n,cp=(n,o=4,s=!0,a=!0)=>{const i=(p=o)<=0?"":new Array(p+1).join(" "),u=n.replace(/\t/g,i);var p;return fo(u,(h,p)=>{return-1!==" \f\t\v".indexOf(p)||p===jo?h.pcIsSpace||""===h.str&&s||h.str.length===u.length-1&&a||(w=h.str.length+1)<(y=u).length&&w>=0&&jh(y[w])?{pcIsSpace:!1,str:h.str+jo}:{pcIsSpace:!0,str:h.str+" "}:{pcIsSpace:jh(p),str:h.str+p};var y,w},{pcIsSpace:!1,str:""}).str},Uu=(n,o)=>{return gi(n)&&(a=o,!(yt(s=n)&&Mi(s.data)&&!((i,u)=>{const m=F(u),h=F(i);return nm(h,"pre,code",De(cn,m))})(s,a)))||(s=>Qt(s)&&"A"===s.nodeName&&!s.hasAttribute("href")&&(s.hasAttribute("name")||s.hasAttribute("id")))(n)||hi(n);var s,a},hi=Xm("data-mce-bookmark"),ng=Xm("data-mce-bogus"),Gh=n=>Qt(n)&&"all"===n.getAttribute("data-mce-bogus"),os=(n,o=!0)=>((s,a)=>{let i=0;if(Uu(s,s))return!1;{let u=s.firstChild;if(!u)return!0;const m=new ir(u,s);do{if(a){if(Gh(u)){u=m.next(!0);continue}if(ng(u)){u=m.next();continue}}if(Tr(u))i++,u=m.next();else{if(Uu(u,s))return!1;u=m.next()}}while(u);return i<=1}})(n.dom,o),Td="data-mce-block",og=n=>{return(o=n,Ht(Vs(o),s=>!/[A-Z]/.test(s))).join(",");var o},ip=(n,o)=>Le(o.querySelector(n))?(o.setAttribute(Td,"true"),"inline-boundary"===o.getAttribute("data-mce-selected")&&o.removeAttribute("data-mce-selected"),!0):(o.removeAttribute(Td),!1),Y1=(n,o)=>{const s=og(n.getTransparentElements()),a=og(n.getBlockElements());return Ht(o.querySelectorAll(s),i=>ip(a,i))},qh=(n,o)=>{var s;const a=o?"lastChild":"firstChild";for(let i=n[a];i;i=i[a])if(os(F(i)))return void(null===(s=i.parentNode)||void 0===s||s.removeChild(i))},Kh=(n,o)=>{const s=Y1(n,o);var a,i,u;((n,o,s)=>{const a=n.getBlockElements(),i=F(o),u=h=>ce(h)in a,m=h=>cn(h,i);Je(Hu(s),h=>{Vc(h,u,m).each(p=>{const y=Ht(Na(h),_=>u(_)&&!n.isValidChild(ce(p),ce(_)));if(y.length>0){const w=$r(p);Je(y,S=>{Vc(S,u,m).each(_=>{((N,A)=>{const $=document.createRange(),D=N.parentNode;if(D){$.setStartBefore(N),$.setEndBefore(A);const L=$.extractContents();qh(L,!0),$.setStartAfter(A),$.setEndAfter(N);const j=$.extractContents();qh(j,!1),os(F(L))||D.insertBefore(L,N),os(F(A))||D.insertBefore(A,N),os(F(j))||D.insertBefore(j,N),D.removeChild(N)}})(_.dom,S.dom)})}),w.each(S=>Y1(n,S.dom))}})})})(n,o,s),a=n,i=o,u=s,Je([...u,...Uc(a,i)?[i]:[]],m=>Je(Ea(F(m),m.nodeName.toLowerCase()),h=>{oi(a,h.dom)&&Zl(h)}))},kd=(n,o)=>{if(Ar(n,o)){const s=og(n.getBlockElements());ip(s,o)}},Yh=n=>n.hasAttribute(Td),lp=(n,o)=>rt(n.getTransparentElements(),o),Ar=(n,o)=>Qt(o)&&lp(n,o.nodeName),Uc=(n,o)=>Ar(n,o)&&Yh(o),oi=(n,o)=>Ar(n,o)&&!Yh(o),Zu=(n,o)=>1===o.type&&lp(n,o.name)&&zt(o.attr(Td)),Qa=Sc().browser,Xh=n=>En(n,an),Ha=(n,o)=>n.children&&Be(n.children,o),pc=(n,o={})=>{let s=0;const a={},i=F(n),u=po(i),m=p=>new Promise((y,w)=>{let S;const _=wt._addCacheSuffix(p),N=Uo(a,_).getOrThunk(()=>({id:"mce-u"+s++,passed:[],failed:[],count:0}));a[_]=N,N.count++;const A=(q,ee)=>{Je(q,oo),N.status=ee,N.passed=[],N.failed=[],S&&(S.onload=null,S.onerror=null,S=null)},$=()=>A(N.passed,2),D=()=>A(N.failed,3);if(y&&N.passed.push(y),w&&N.failed.push(w),1===N.status)return;if(2===N.status)return void $();if(3===N.status)return void D();N.status=1;const L=Nr("link",u.dom);var j;Lc(L,{rel:"stylesheet",type:"text/css",id:N.id}),o.contentCssCors&&ls(L,"crossOrigin","anonymous"),o.referrerPolicy&&ls(L,"referrerpolicy",o.referrerPolicy),S=L.dom,S.onload=$,S.onerror=D,j=L,Or(vd(i),j),ls(L,"href",_)}),h=p=>{const y=wt._addCacheSuffix(p);Uo(a,y).each(w=>{0==--w.count&&(delete a[y],(S=>{const _=vd(i);Ul(_,"#"+S).each(gr)})(w.id))})};return{load:m,loadAll:p=>Promise.allSettled(ln(p,y=>m(y).then(qe(y)))).then(y=>{const w=jn(y,S=>"fulfilled"===S.status);return w.fail.length>0?Promise.reject(ln(w.fail,S=>S.reason)):ln(w.pass,S=>S.value)}),unload:h,unloadAll:p=>{Je(p,y=>{h(y)})},_setReferrerPolicy:p=>{o.referrerPolicy=p},_setContentCssCors:p=>{o.contentCssCors=p}}},Jg=(()=>{const n=new WeakMap;return{forElement:(o,s)=>{const a=Ir(o).dom;return U.from(n.get(a)).getOrThunk(()=>{const i=pc(a,s);return n.set(a,i),i})}}})(),dt=(n,o)=>Le(n)&&(Uu(n,o)||Br(F(n))),si=n=>"span"===n.nodeName.toLowerCase()&&"bookmark"===n.getAttribute("data-mce-type"),up=(n,o,s)=>{var a;const i=s||o;if(Qt(o)&&si(o))return o;const u=o.childNodes;for(let m=u.length-1;m>=0;m--)up(n,u[m],i);if(Qt(o)){const m=o.childNodes;1===m.length&&si(m[0])&&(null===(a=o.parentNode)||void 0===a||a.insertBefore(m[0],o))}return sl(m=o)||oa(m)||Uu(o,i)||(m=>!!Qt(m)&&m.childNodes.length>0)(o)||((m,h)=>yt(m)&&m.data.length>0&&((p,y)=>{const w=new ir(p,y).prev(!1),S=new ir(p,y).next(!1),_=en(w)||dt(w,y),N=en(S)||dt(S,y);return _&&N})(m,h))(o,i)||n.remove(o),o;var m},ra=wt.makeMap,xl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qg=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sl=/[<>&\"\']/g,hv=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Wu={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ed={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ni={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},us=(n,o)=>{const s={};if(n){const a=n.split(",");o=o||10;for(let i=0;i<a.length;i+=2){const u=String.fromCharCode(parseInt(a[i],o));if(!Ed[u]){const m="&"+a[i+1]+";";s[u]=m,s[m]=u}}return s}},Tl=us("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),_d=(n,o)=>n.replace(o?xl:Qg,s=>Ed[s]||s),ec=(n,o)=>n.replace(o?xl:Qg,s=>s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":Ed[s]||"&#"+s.charCodeAt(0)+";"),eh=(n,o,s)=>{const a=s||Tl;return n.replace(o?xl:Qg,i=>Ed[i]||a[i]||i)},Bi={encodeRaw:_d,encodeAllRaw:n=>(""+n).replace(Sl,o=>Ed[o]||o),encodeNumeric:ec,encodeNamed:eh,getEncodeFunc:(n,o)=>{const s=us(o)||Tl,a=ra(n.replace(/\+/g,","));return a.named&&a.numeric?(i,u)=>i.replace(u?xl:Qg,m=>void 0!==Ed[m]?Ed[m]:void 0!==s[m]?s[m]:m.length>1?"&#"+(1024*(m.charCodeAt(0)-55296)+(m.charCodeAt(1)-56320)+65536)+";":"&#"+m.charCodeAt(0)+";"):a.named?o?(i,u)=>eh(i,u,s):eh:a.numeric?ec:_d},decode:n=>n.replace(hv,(o,s)=>s?(s="x"===s.charAt(0).toLowerCase()?parseInt(s.substr(1),16):parseInt(s,10))>65535?(s-=65536,String.fromCharCode(55296+(s>>10),56320+(1023&s))):Wu[s]||String.fromCharCode(s):Ni[o]||Tl[o]||(a=>{const i=Nr("div").dom;return i.innerHTML=a,i.textContent||i.innerText||a})(o))},tc=(n,o)=>(n=wt.trim(n))?n.split(o||" "):[],Rc=n=>new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$"),th={},$e=wt.makeMap,pa=wt.each,Yl=wt.extend,Pi=wt.explode,rl=(n,o={})=>{const s=$e(n," ",$e(n.toUpperCase()," "));return Yl(s,o)},Va=n=>rl("td th li dt dd figcaption caption details summary",n.getTextBlockElements()),ba=(n,o)=>{if(n){const s={};return zt(n)&&(n={"*":n}),pa(n,(a,i)=>{s[i]=s[i.toUpperCase()]="map"===o?$e(a,/[, ]/):Pi(a,/[, ]/)}),s}},ju=(n={})=>{var o;const s={},a={};let i=[];const u={},m={},h=(Fe,xt,Nt)=>{const Bt=n[Fe];if(Bt)return $e(Bt,/[, ]/,$e(Bt.toUpperCase(),/[, ]/));{let Vt=th[Fe];return Vt||(Vt=rl(xt,Nt),th[Fe]=Vt),Vt}},p=null!==(o=n.schema)&&void 0!==o?o:"html5",y=(Fe=>{const{globalAttributes:xt,phrasingContent:Nt,flowContent:Bt}=(xs=>{let Ki,dc,ua,Yi;return Ki="id accesskey class dir lang style tabindex title role",dc="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",ua="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==xs&&(Ki+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",dc+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",ua+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==xs&&(Ki+=" xml:lang",ua=[ua,"acronym applet basefont big font strike tt"].join(" "),dc=[dc,"center dir isindex noframes"].join(" "),Yi=[dc,ua].join(" ")),Yi=Yi||[dc,ua].join(" "),{globalAttributes:Ki,blockContent:dc,phrasingContent:ua,flowContent:Yi}})(Fe),Vt={},Pt=(xs,Ki="",dc="")=>{const ua=tc(dc),Yi=tc(xs);let Nu=Yi.length;for(;Nu--;){const Gc=tc([xt,Ki].join(" "));Vt[Yi[Nu]]={attributes:Mr(Gc,qe({})),attributesOrder:Gc,children:Mr(ua,qe({}))}}},Zn=(xs,Ki)=>{const dc=tc(xs),ua=tc(Ki);let Yi=dc.length;for(;Yi--;){const Nu=Vt[dc[Yi]];for(let Gc=0,Bg=ua.length;Gc<Bg;Gc++)Nu.attributes[ua[Gc]]={},Nu.attributesOrder.push(ua[Gc])}};return"html5-strict"!==Fe&&(Je(tc("acronym applet basefont big font strike tt"),xs=>{Pt(xs,"",Nt)}),Je(tc("center dir isindex noframes"),xs=>{Pt(xs,"",Bt)})),Pt("html","manifest","head body"),Pt("head","","base command link meta noscript script style title"),Pt("title hr noscript br"),Pt("base","href target"),Pt("link","href rel media hreflang type sizes hreflang"),Pt("meta","name http-equiv content charset"),Pt("style","media type scoped"),Pt("script","src async defer type charset"),Pt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Bt),Pt("dd div","",Bt),Pt("address dt caption","","html4"===Fe?Nt:Bt),Pt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Nt),Pt("blockquote","cite",Bt),Pt("ol","reversed start type","li"),Pt("ul","","li"),Pt("li","value",Bt),Pt("dl","","dt dd"),Pt("a","href target rel media hreflang type","html4"===Fe?Nt:Bt),Pt("q","cite",Nt),Pt("ins del","cite datetime",Bt),Pt("img","src sizes srcset alt usemap ismap width height"),Pt("iframe","src name width height",Bt),Pt("embed","src type width height"),Pt("object","data type typemustmatch name usemap form width height",[Bt,"param"].join(" ")),Pt("param","name value"),Pt("map","name",[Bt,"area"].join(" ")),Pt("area","alt coords shape href target rel media hreflang type"),Pt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Fe?" col":"")),Pt("colgroup","span","col"),Pt("col","span"),Pt("tbody thead tfoot","","tr"),Pt("tr","","td th"),Pt("td","colspan rowspan headers",Bt),Pt("th","colspan rowspan headers scope abbr",Bt),Pt("form","accept-charset action autocomplete enctype method name novalidate target",Bt),Pt("fieldset","disabled form name",[Bt,"legend"].join(" ")),Pt("label","form for",Nt),Pt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Pt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Fe?Bt:Nt),Pt("select","disabled form multiple name required size","option optgroup"),Pt("optgroup","disabled label","option"),Pt("option","disabled label selected value"),Pt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Pt("menu","type label",[Bt,"li"].join(" ")),Pt("noscript","",Bt),"html4"!==Fe&&(Pt("wbr"),Pt("ruby","",[Nt,"rt rp"].join(" ")),Pt("figcaption","",Bt),Pt("mark rt rp summary bdi","",Nt),Pt("canvas","width height",Bt),Pt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Bt,"track source"].join(" ")),Pt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Bt,"track source"].join(" ")),Pt("picture","","img source"),Pt("source","src srcset type media sizes"),Pt("track","kind src srclang label default"),Pt("datalist","",[Nt,"option"].join(" ")),Pt("article section nav aside main header footer","",Bt),Pt("hgroup","","h1 h2 h3 h4 h5 h6"),Pt("figure","",[Bt,"figcaption"].join(" ")),Pt("time","datetime",Nt),Pt("dialog","open",Bt),Pt("command","type label icon disabled checked radiogroup command"),Pt("output","for form name",Nt),Pt("progress","value max",Nt),Pt("meter","value min max low high optimum",Nt),Pt("details","open",[Bt,"summary"].join(" ")),Pt("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==Fe&&(Zn("script","language xml:space"),Zn("style","xml:space"),Zn("object","declare classid code codebase codetype archive standby align border hspace vspace"),Zn("embed","align name hspace vspace"),Zn("param","valuetype type"),Zn("a","charset name rev shape coords"),Zn("br","clear"),Zn("applet","codebase archive code object alt name width height align hspace vspace"),Zn("img","name longdesc align border hspace vspace"),Zn("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Zn("font basefont","size color face"),Zn("input","usemap align"),Zn("select"),Zn("textarea"),Zn("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Zn("ul","type compact"),Zn("li","type"),Zn("ol dl menu dir","compact"),Zn("pre","width xml:space"),Zn("hr","align noshade size width"),Zn("isindex","prompt"),Zn("table","summary width frame rules cellspacing cellpadding align bgcolor"),Zn("col","width align char charoff valign"),Zn("colgroup","width align char charoff valign"),Zn("thead","align char charoff valign"),Zn("tr","align char charoff valign bgcolor"),Zn("th","axis align char charoff valign nowrap bgcolor width height"),Zn("form","accept"),Zn("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Zn("tfoot","align char charoff valign"),Zn("tbody","align char charoff valign"),Zn("area","nohref"),Zn("body","background bgcolor text link vlink alink")),"html4"!==Fe&&(Zn("input button select textarea","autofocus"),Zn("input textarea","placeholder"),Zn("a","download"),Zn("link script img","crossorigin"),Zn("img","loading"),Zn("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==Fe&&Je([Vt.video,Vt.audio],xs=>{delete xs.children.audio,delete xs.children.video}),Je(tc("a form meter progress dfn"),xs=>{Vt[xs]&&delete Vt[xs].children[xs]}),delete Vt.caption.children.table,delete Vt.script,Vt})(p);!1===n.verify_html&&(n.valid_elements="*[*]");const w=ba(n.valid_styles),S=ba(n.invalid_styles,"map"),_=ba(n.valid_classes,"map"),N=h("whitespace_elements","pre script noscript style textarea video audio iframe object code"),A=h("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),$=h("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),D=h("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),L="td th iframe video audio object script code",j=h("non_empty_elements",L+" pre",$),q=h("move_caret_before_on_enter_elements",L+" table",$),ee=h("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Q=h("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",ee),de=h("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Oe=h("transparent_elements","a ins del canvas map");pa("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Fe=>{m[Fe]=new RegExp("</"+Fe+"[^>]*>","gi")});const Re=Fe=>{const xt=U.from(s["@"]),Nt=/[*?+]/;Je(((Bt,Vt)=>{const Pt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ao(tc(Vt,","),Zn=>{const xs=Pt.exec(Zn);if(xs){const Ki=xs[1],dc=xs[2],ua=xs[3],Yi=xs[4],Nu=xs[5],Gc={attributes:{},attributesOrder:[]};if(Bt.each(Bg=>{return Xi=Gc,Ke((Jr=Bg).attributes,(qc,Gf)=>{Xi.attributes[Gf]=qc}),void Xi.attributesOrder.push(...Jr.attributesOrder);var Jr,Xi}),"#"===Ki?Gc.paddEmpty=!0:"-"===Ki&&(Gc.removeEmpty=!0),"!"===Yi&&(Gc.removeEmptyAttrs=!0),Nu&&((Bg,Jr)=>{const Xi=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,qc=/[*?+]/,{attributes:Gf,attributesOrder:nv}=Jr;Je(tc(Bg,"|"),qS=>{const Ph=Xi.exec(qS);if(Ph){const Fh={},ov=Ph[1],Bu=Ph[2].replace(/[\\:]:/g,":"),md=Ph[3],Pg=Ph[4];if("!"===ov&&(Jr.attributesRequired=Jr.attributesRequired||[],Jr.attributesRequired.push(Bu),Fh.required=!0),"-"===ov)return delete Gf[Bu],void nv.splice(wt.inArray(nv,Bu),1);if(md&&("="===md?(Jr.attributesDefault=Jr.attributesDefault||[],Jr.attributesDefault.push({name:Bu,value:Pg}),Fh.defaultValue=Pg):"~"===md?(Jr.attributesForced=Jr.attributesForced||[],Jr.attributesForced.push({name:Bu,value:Pg}),Fh.forcedValue=Pg):"<"===md&&(Fh.validValues=wt.makeMap(Pg,"?"))),qc.test(Bu)){const K2=Fh;Jr.attributePatterns=Jr.attributePatterns||[],K2.pattern=Rc(Bu),Jr.attributePatterns.push(K2)}else Gf[Bu]||nv.push(Bu),Gf[Bu]=Fh}})})(Nu,Gc),ua&&(Gc.outputName=dc),"@"===dc){if(!Bt.isNone())return[];Bt=U.some(Gc)}return[ua?{name:dc,element:Gc,aliasName:ua}:{name:dc,element:Gc}]}return[]})})(xt,Fe??""),({name:Bt,element:Vt,aliasName:Pt})=>{if(Pt&&(s[Pt]=Vt),Nt.test(Bt)){const Zn=Vt;Zn.pattern=Rc(Bt),i.push(Zn)}else s[Bt]=Vt})},Ne=Fe=>{i=[],Je(Vs(s),xt=>{delete s[xt]}),Re(Fe)},We=Fe=>{delete th.text_block_elements,delete th.block_elements,Je((xt=>{const Nt=/^(~)?(.+)$/;return Ao(tc(xt,","),Bt=>{const Vt=Nt.exec(Bt);if(Vt){const Pt="~"===Vt[1];return[{inline:Pt,cloneName:Pt?"span":"div",name:Vt[2]}]}return[]})})(Fe??""),({inline:xt,name:Nt,cloneName:Bt})=>{if(a[Nt]=a[Bt],u[Nt]=Bt,j[Nt.toUpperCase()]={},j[Nt]={},xt||(Q[Nt.toUpperCase()]={},Q[Nt]={}),!s[Nt]){let Vt=s[Bt];Vt=Yl({},Vt),delete Vt.removeEmptyAttrs,delete Vt.removeEmpty,s[Nt]=Vt}Ke(a,(Vt,Pt)=>{Vt[Bt]&&(a[Pt]=Vt=Yl({},a[Pt]),Vt[Nt]=Vt[Bt])})})},we=Fe=>{Je((xt=>{const Nt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ao(tc(xt,","),Bt=>{const Vt=Nt.exec(Bt);if(Vt){const Pt=Vt[1];return[{operation:Pt?(xs=Pt,"-"===xs?"remove":"add"):"replace",name:Vt[2],validChildren:tc(Vt[3],"|")}]}var xs;return[]})})(Fe??""),({operation:xt,name:Nt,validChildren:Bt})=>{const Vt="replace"===xt?{"#comment":{}}:a[Nt];Je(Bt,Pt=>{"remove"===xt?delete Vt[Pt]:Vt[Pt]={}}),a[Nt]=Vt})},Ee=Fe=>{const xt=s[Fe];if(xt)return xt;let Nt=i.length;for(;Nt--;){const Bt=i[Nt];if(Bt.pattern.test(Fe))return Bt}};n.valid_elements?(Ne(n.valid_elements),pa(y,(Fe,xt)=>{a[xt]=Fe.children})):(pa(y,(Fe,xt)=>{s[xt]={attributes:Fe.attributes,attributesOrder:Fe.attributesOrder},a[xt]=Fe.children}),pa(tc("strong/b em/i"),Fe=>{const xt=tc(Fe,"/");s[xt[1]].outputName=xt[0]}),pa(de,(Fe,xt)=>{s[xt]&&(n.padd_empty_block_inline_children&&(s[xt].paddInEmptyBlock=!0),s[xt].removeEmpty=!0)}),pa(tc("ol ul blockquote a table tbody"),Fe=>{s[Fe]&&(s[Fe].removeEmpty=!0)}),pa(tc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Fe=>{s[Fe]&&(s[Fe].paddEmpty=!0)}),pa(tc("span"),Fe=>{s[Fe].removeEmptyAttrs=!0})),We(n.custom_elements),we(n.valid_children),Re(n.extended_valid_elements),we("+ol[ul|ol],+ul[ul|ol]"),pa({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Fe,xt)=>{s[xt]&&(s[xt].parentsRequired=tc(Fe))}),n.invalid_elements&&pa(Pi(n.invalid_elements),Fe=>{s[Fe]&&delete s[Fe]}),Ee("span")||Re("span[!data-mce-type|*]");const ze=qe(w),ct=qe(S),Yt=qe(_),kt=qe(D),Cn=qe(Q),dn=qe(ee),ho=qe(de),bo=qe(Object.seal($)),Jt=qe(A),$n=qe(j),lo=qe(q),ke=qe(N),_e=qe(Oe),nt=qe(Object.seal(m)),mt=qe(u);return{type:p,children:a,elements:s,getValidStyles:ze,getValidClasses:Yt,getBlockElements:Cn,getInvalidStyles:ct,getVoidElements:bo,getTextBlockElements:dn,getTextInlineElements:ho,getBoolAttrs:kt,getElementRule:Ee,getSelfClosingElements:Jt,getNonEmptyElements:$n,getMoveCaretBeforeOnEnterElements:lo,getWhitespaceElements:ke,getTransparentElements:_e,getSpecialElements:nt,isValidChild:(Fe,xt)=>{const Nt=a[Fe.toLowerCase()];return!(!Nt||!Nt[xt.toLowerCase()])},isValid:(Fe,xt)=>{const Nt=Ee(Fe);if(Nt){if(!xt)return!0;{if(Nt.attributes[xt])return!0;const Bt=Nt.attributePatterns;if(Bt){let Vt=Bt.length;for(;Vt--;)if(Bt[Vt].pattern.test(xt))return!0}}}return!1},getCustomElements:mt,addValidElements:Re,setValidElements:Ne,addCustomElements:We,addValidChildren:we}},Fi=(n={},o)=>{const s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let m,h;o&&(m=o.getValidStyles(),h=o.getInvalidStyles());const y="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let S=0;S<y.length;S++)u[y[S]]="\ufeff"+S,u["\ufeff"+S]=y[S];const w={parse:S=>{const _={};let N=!1;const A=n.url_converter,$=n.url_converter_scope||w,D=(We,we,Ee)=>{const ze=_[We+"-top"+we];if(!ze)return;const ct=_[We+"-right"+we];if(!ct)return;const Yt=_[We+"-bottom"+we];if(!Yt)return;const kt=_[We+"-left"+we];if(!kt)return;const Cn=[ze,ct,Yt,kt];let dn=Cn.length-1;for(;dn--&&Cn[dn]===Cn[dn+1];);dn>-1&&Ee||(_[We+we]=-1===dn?Cn[0]:Cn.join(" "),delete _[We+"-top"+we],delete _[We+"-right"+we],delete _[We+"-bottom"+we],delete _[We+"-left"+we])},L=We=>{const we=_[We];if(!we)return;const Ee=we.indexOf(",")>-1?[we]:we.split(" ");let ze=Ee.length;for(;ze--;)if(Ee[ze]!==Ee[0])return!1;return _[We]=Ee[0],!0},j=We=>(N=!0,u[We]),q=(We,we)=>(N&&(We=We.replace(/\uFEFF[0-9]/g,Ee=>u[Ee])),we||(We=We.replace(/\\([\'\";:])/g,"$1")),We),ee=We=>String.fromCharCode(parseInt(We.slice(1),16)),Q=We=>We.replace(/\\[0-9a-f]+/gi,ee),de=(We,we,Ee,ze,ct,Yt)=>{if(ct=ct||Yt)return"'"+(ct=q(ct)).replace(/\'/g,"\\'")+"'";if(we=q(we||Ee||ze||""),!n.allow_script_urls){const kt=we.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(kt)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(kt))return""}return A&&(we=A.call($,we,"style")),"url('"+we.replace(/\'/g,"\\'")+"')"};if(S){let We;for(S=(S=S.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,j).replace(/\"[^\"]+\"|\'[^\']+\'/g,we=>we.replace(/[;:]/g,j));We=a.exec(S);){a.lastIndex=We.index+We[0].length;let we=We[1].replace(i,"").toLowerCase(),Ee=We[2].replace(i,"");if(we&&Ee){if(we=Q(we),Ee=Q(Ee),-1!==we.indexOf("\ufeff")||-1!==we.indexOf('"')||!n.allow_script_urls&&("behavior"===we||/expression\s*\(|\/\*|\*\//.test(Ee)))continue;"font-weight"===we&&"700"===Ee?Ee="bold":"color"!==we&&"background-color"!==we||(Ee=Ee.toLowerCase()),Ee=Ee.replace(s,de),_[we]=N?q(Ee,!0):Ee}}D("border","",!0),D("border","-width"),D("border","-color"),D("border","-style"),D("padding",""),D("margin",""),Re="border-style",Ne="border-color",L(Oe="border-width")&&L(Re)&&L(Ne)&&(_.border=_[Oe]+" "+_[Re]+" "+_[Ne],delete _[Oe],delete _[Re],delete _[Ne]),"medium none"===_.border&&delete _.border,"none"===_["border-image"]&&delete _["border-image"]}var Oe,Re,Ne;return _},serialize:(S,_)=>{let N="";const A=($,D)=>{const L=D[$];if(L)for(let j=0,q=L.length;j<q;j++){const ee=L[j],Q=S[ee];Q&&(N+=(N.length>0?" ":"")+ee+": "+Q+";")}};return _&&m?(A("*",m),A(_,m)):Ke(S,($,D)=>{$&&((L,j)=>{if(!h||!j)return!0;let q=h["*"];return!(q&&q[L]||(q=h[j],q&&q[L]))})(D,_)&&(N+=(N.length>0?" ":"")+D+": "+$+";")}),N}};return w},dp={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},_n=(n,o)=>{const s=o??{};for(const a in n)rt(dp,a)||(s[a]=n[a]);return Le(n.composedPath)&&(s.composedPath=()=>n.composedPath()),s},T=(n,o,s,a)=>{var i;const u=_n(o,a);return u.type=n,ve(u.target)&&(u.target=null!==(i=u.srcElement)&&void 0!==i?i:s),(ve((m=o).preventDefault)||(h=m)instanceof Event||mo(h.initEvent))&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Lt,mo(o.preventDefault)&&o.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Lt,mo(o.stopPropagation)&&o.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Lt,u.stopPropagation()},(m=>m.isDefaultPrevented===Lt||m.isDefaultPrevented===yn)(u)||(u.isDefaultPrevented=!0===u.defaultPrevented?Lt:yn,u.isPropagationStopped=!0===u.cancelBubble?Lt:yn,u.isImmediatePropagationStopped=yn)),u;var m,h},O=/^(?:mouse|contextmenu)|click/,G=(n,o,s,a)=>{n.addEventListener(o,s,a||!1)},te=(n,o,s,a)=>{n.removeEventListener(o,s,a||!1)},ye=(n,o)=>{const s=T(n.type,n,document,o);if(Le(a=n)&&O.test(a.type)&&en(n.pageX)&&!en(n.clientX)){const a=s.target.ownerDocument||document,i=a.documentElement,u=a.body,m=s;m.pageX=n.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),m.pageY=n.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}var a;return s},st=(n,o,s)=>{const a=n.document,i={type:"ready"};if(s.domLoaded)return void o(i);const u=()=>{te(n,"DOMContentLoaded",u),te(n,"load",u),s.domLoaded||(s.domLoaded=!0,o(i)),n=null};"complete"===a.readyState||"interactive"===a.readyState&&a.body?u():G(n,"DOMContentLoaded",u),s.domLoaded||G(n,"load",u)};class Ct{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,s,a,i){const u=this;let m;const h=window,p=_=>{u.executeHandlers(ye(_||h.event),y)};if(!o||yt(o)||_s(o))return a;let y;o[u.expando]?y=o[u.expando]:(y=u.count++,o[u.expando]=y,u.events[y]={}),i=i||o;const w=s.split(" ");let S=w.length;for(;S--;){let _=w[S],N=p,A=!1,$=!1;"DOMContentLoaded"===_&&(_="ready"),u.domLoaded&&"ready"===_&&"complete"===o.readyState?a.call(i,ye({type:_})):(u.hasFocusIn||"focusin"!==_&&"focusout"!==_||(A=!0,$="focusin"===_?"focus":"blur",N=D=>{const L=ye(D||h.event);L.type="focus"===L.type?"focusin":"focusout",u.executeHandlers(L,y)}),m=u.events[y][_],m?"ready"===_&&u.domLoaded?a(ye({type:_})):m.push({func:a,scope:i}):(u.events[y][_]=m=[{func:a,scope:i}],m.fakeName=$,m.capture=A,m.nativeHandler=N,"ready"===_?st(o,N,u):G(o,$||_,N,A)))}return o=m=null,a}unbind(o,s,a){if(!o||yt(o)||_s(o))return this;const i=o[this.expando];if(i){let u=this.events[i];if(s){const m=s.split(" ");let h=m.length;for(;h--;){const p=m[h],y=u[p];if(y){if(a){let w=y.length;for(;w--;)if(y[w].func===a){const S=y.nativeHandler,_=y.fakeName,N=y.capture,A=y.slice(0,w).concat(y.slice(w+1));A.nativeHandler=S,A.fakeName=_,A.capture=N,u[p]=A}}a&&0!==y.length||(delete u[p],te(o,y.fakeName||p,y.nativeHandler,y.capture))}}}else Ke(u,(m,h)=>{te(o,m.fakeName||h,m.nativeHandler,m.capture)}),u={};for(const m in u)if(rt(u,m))return this;delete this.events[i];try{delete o[this.expando]}catch{o[this.expando]=null}}return this}fire(o,s,a){return this.dispatch(o,s,a)}dispatch(o,s,a){if(!o||yt(o)||_s(o))return this;const i=ye({type:s,target:o},a);do{const u=o[this.expando];u&&this.executeHandlers(i,u),o=o.parentNode||o.ownerDocument||o.defaultView||o.parentWindow}while(o&&!i.isPropagationStopped());return this}clean(o){if(!o||yt(o)||_s(o))return this;if(o[this.expando]&&this.unbind(o),o.getElementsByTagName||(o=o.document),o&&o.getElementsByTagName){this.unbind(o);const s=o.getElementsByTagName("*");let a=s.length;for(;a--;)(o=s[a])[this.expando]&&this.unbind(o)}return this}destroy(){this.events={}}cancel(o){return o&&(o.preventDefault(),o.stopImmediatePropagation()),!1}executeHandlers(o,s){const a=this.events[s],i=a&&a[o.type];if(i)for(let u=0,m=i.length;u<m;u++){const h=i[u];if(h&&!1===h.func.call(h.scope,o)&&o.preventDefault(),o.isImmediatePropagationStopped())return}}}Ct.Event=new Ct;const Zt=wt.each,Fn=wt.grep,eo="data-mce-style",Lr=wt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Qo=(n,o,s)=>{ve(s)||""===s?Bo(n,o):ls(n,o,s)},hr=n=>n.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),nc=(n,o)=>{let s=0;if(n)for(let a=n.nodeType,i=n.previousSibling;i;i=i.previousSibling){const u=i.nodeType;(!o||!yt(i)||u!==a&&i.data.length)&&(s++,a=u)}return s},$i=(n,o)=>{const s=zr(o,"style"),a=n.serialize(n.parse(s),ce(o));Qo(o,eo,a)},Xl=(n,o,s)=>{const a=hr(o);var i,u;ve(s)||""===s?yd(n,a):Qd(n,a,(u=a,Vo(i=s)?rt(Lr,u)?i+"":i+"px":i))},vs=(n,o={})=>{const s={},a=window,i={};let u=0;const m=Jg.forElement(F(n),{contentCssCors:o.contentCssCors,referrerPolicy:o.referrerPolicy}),h=[],p=o.schema?o.schema:ju({}),y=Fi({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope},o.schema),w=o.ownEvents?new Ct:Ct.Event,S=p.getBlockElements(),_=ke=>ke&&n&&zt(ke)?n.getElementById(ke):ke,N=ke=>{const _e=_(ke);return Le(_e)?F(_e):null},A=(ke,_e,nt="")=>{let mt;const Fe=N(ke);if(Le(Fe)&&an(Fe)){const xt=lo[_e];mt=xt&&xt.get?xt.get(Fe.dom,_e):zr(Fe,_e)}return Le(mt)?mt:nt},$=ke=>{const _e=_(ke);return ve(_e)?[]:_e.attributes},D=(ke,_e,nt)=>{Re(ke,mt=>{if(Qt(mt)){const Fe=F(mt),xt=""===nt?null:nt,Nt=zr(Fe,_e),Bt=lo[_e];Bt&&Bt.set?Bt.set(Fe.dom,xt,_e):Qo(Fe,_e,xt),Nt!==xt&&o.onSetAttrib&&o.onSetAttrib({attrElm:Fe.dom,attrName:_e,attrValue:xt})}})},L=()=>o.root_element||n.body,j=(ke,_e)=>((nt,mt,Fe)=>{let xt=0,Nt=0;const Bt=nt.ownerDocument;if(Fe=Fe||nt,mt){if(Fe===nt&&mt.getBoundingClientRect&&"static"===Ei(F(nt),"position")){const Pt=mt.getBoundingClientRect();return xt=Pt.left+(Bt.documentElement.scrollLeft||nt.scrollLeft)-Bt.documentElement.clientLeft,Nt=Pt.top+(Bt.documentElement.scrollTop||nt.scrollTop)-Bt.documentElement.clientTop,{x:xt,y:Nt}}let Vt=mt;for(;Vt&&Vt!==Fe&&Vt.nodeType&&!Ha(Vt,Fe);)xt+=Vt.offsetLeft||0,Nt+=Vt.offsetTop||0,Vt=Vt.offsetParent;for(Vt=mt.parentNode;Vt&&Vt!==Fe&&Vt.nodeType&&!Ha(Vt,Fe);)xt-=Vt.scrollLeft||0,Nt-=Vt.scrollTop||0,Vt=Vt.parentNode;Nt+=(Pt=F(mt),Qa.isFirefox()&&"table"===ce(Pt)?Xh(Na(Pt)).filter(Zn=>"caption"===ce(Zn)).bind(Zn=>Xh(fa(Zn)).map(xs=>xs.dom.offsetTop<=Zn.dom.offsetTop?-Zn.dom.offsetHeight:0)).getOr(0):0)}var Pt;return{x:xt,y:Nt}})(n.body,_(ke),_e),q=(ke,_e,nt)=>{const mt=_(ke);if(!ve(mt)&&Qt(mt))return nt?Ei(F(mt),hr(_e)):("float"===(_e=_e.replace(/-(\D)/g,(Fe,xt)=>xt.toUpperCase()))&&(_e="cssFloat"),mt.style?mt.style[_e]:void 0)},ee=ke=>{const _e=_(ke);if(!_e)return{w:0,h:0};let nt=q(_e,"width"),mt=q(_e,"height");return nt&&-1!==nt.indexOf("px")||(nt="0"),mt&&-1!==mt.indexOf("px")||(mt="0"),{w:parseInt(nt,10)||_e.offsetWidth||_e.clientWidth,h:parseInt(mt,10)||_e.offsetHeight||_e.clientHeight}},Q=(ke,_e)=>{if(!ke)return!1;const nt=Wn(ke)?ke:[ke];return lt(nt,mt=>ot(F(mt),_e))},de=(ke,_e,nt,mt)=>{const Fe=[];let xt=_(ke);mt=void 0===mt;const Nt=nt||("BODY"!==L().nodeName?L().parentNode:null);if(zt(_e))if("*"===_e)_e=Qt;else{const Bt=_e;_e=Vt=>Q(Vt,Bt)}for(;xt&&!(xt===Nt||ve(xt.nodeType)||oa(xt)||sl(xt));){if(!_e||_e(xt)){if(!mt)return[xt];Fe.push(xt)}xt=xt.parentNode}return mt?Fe:null},Oe=(ke,_e,nt)=>{let mt=_e;if(ke){zt(_e)&&(mt=Fe=>Q(Fe,_e));for(let Fe=ke[nt];Fe;Fe=Fe[nt])if(mo(mt)&&mt(Fe))return Fe}return null},Re=function(ke,_e,nt){const mt=nt??this;if(Wn(ke)){const Fe=[];return Zt(ke,(xt,Nt)=>{const Bt=_(xt);Bt&&Fe.push(_e.call(mt,Bt,Nt))}),Fe}{const Fe=_(ke);return!!Fe&&_e.call(mt,Fe)}},Ne=(ke,_e)=>{Re(ke,nt=>{Ke(_e,(mt,Fe)=>{D(nt,Fe,mt)})})},We=(ke,_e)=>{Re(ke,nt=>{const mt=F(nt);_i(mt,_e)})},we=(ke,_e,nt,mt,Fe)=>Re(ke,xt=>{const Nt=zt(_e)?n.createElement(_e):_e;return Le(nt)&&Ne(Nt,nt),mt&&(!zt(mt)&&mt.nodeType?Nt.appendChild(mt):zt(mt)&&We(Nt,mt)),Fe?Nt:xt.appendChild(Nt)}),Ee=(ke,_e,nt)=>we(n.createElement(ke),ke,_e,nt,!0),ze=Bi.encodeAllRaw,ct=(ke,_e)=>Re(ke,nt=>{const mt=F(nt);return _e&&Je(Na(mt),Fe=>{Eo(Fe)&&0===Fe.dom.length?gr(Fe):Ya(mt,Fe)}),gr(mt),mt.dom}),Yt=(ke,_e,nt)=>{Re(ke,mt=>{if(Qt(mt)){const Fe=F(mt),xt=_e.split(" ");Je(xt,Nt=>{var Bt,Vt,Zn,xs;Le(nt)?(nt?Xt:ka)(Fe,Nt):(Vt=Nt,ae(Bt=Fe)?Bt.dom.classList.toggle(Vt):(xs=Vt,Be(Ze(Zn=Bt),xs)?go(Zn,xs):It(Zn,xs)),Ms(Bt))})}})},kt=(ke,_e,nt)=>Re(_e,mt=>{var Fe;const xt=Wn(_e)?ke.cloneNode(!0):ke;return nt&&Zt(Fn(mt.childNodes),Nt=>{xt.appendChild(Nt)}),null===(Fe=mt.parentNode)||void 0===Fe||Fe.replaceChild(xt,mt),mt}),Cn=ke=>{if(Qt(ke)){const _e="a"===ke.nodeName.toLowerCase()&&!A(ke,"href")&&A(ke,"id");if(A(ke,"name")||A(ke,"data-mce-bookmark")||_e)return!0}return!1},dn=()=>n.createRange(),ho=(ke,_e,nt,mt)=>{if(Wn(ke)){let Fe=ke.length;const xt=[];for(;Fe--;)xt[Fe]=ho(ke[Fe],_e,nt,mt);return xt}return!o.collect||ke!==n&&ke!==a||h.push([ke,_e,nt,mt]),w.bind(ke,_e,nt,mt||$n)},bo=(ke,_e,nt)=>{if(Wn(ke)){let mt=ke.length;const Fe=[];for(;mt--;)Fe[mt]=bo(ke[mt],_e,nt);return Fe}if(h.length>0&&(ke===n||ke===a)){let mt=h.length;for(;mt--;){const[Fe,xt,Nt]=h[mt];ke!==Fe||_e&&_e!==xt||nt&&nt!==Nt||w.unbind(Fe,xt,Nt)}}return w.unbind(ke,_e,nt)},Jt=ke=>{if(ke&&Qt(ke)){const _e=ke.getAttribute("data-mce-contenteditable");return _e&&"inherit"!==_e?_e:"inherit"!==ke.contentEditable?ke.contentEditable:null}return null},$n={doc:n,settings:o,win:a,files:i,stdMode:!0,boxModel:!0,styleSheetLoader:m,boundEvents:h,styles:y,schema:p,events:w,isBlock:ke=>zt(ke)?rt(S,ke):Qt(ke)&&(rt(S,ke.nodeName)||Uc(p,ke)),root:null,clone:(ke,_e)=>ke.cloneNode(_e),getRoot:L,getViewPort:ke=>{const _e=Ac(ke);return{x:_e.x,y:_e.y,w:_e.width,h:_e.height}},getRect:ke=>{const _e=_(ke),nt=j(_e),mt=ee(_e);return{x:nt.x,y:nt.y,w:mt.w,h:mt.h}},getSize:ee,getParent:(ke,_e,nt)=>{const mt=de(ke,_e,nt,!1);return mt&&mt.length>0?mt[0]:null},getParents:de,get:_,getNext:(ke,_e)=>Oe(ke,_e,"nextSibling"),getPrev:(ke,_e)=>Oe(ke,_e,"previousSibling"),select:(ke,_e)=>{var nt,mt;const Fe=null!==(mt=null!==(nt=_(_e))&&void 0!==nt?nt:o.root_element)&&void 0!==mt?mt:n;return mo(Fe.querySelectorAll)?$o(Fe.querySelectorAll(ke)):[]},is:Q,add:we,create:Ee,createHTML:(ke,_e,nt="")=>{let mt="<"+ke;for(const Fe in _e)Qn(_e,Fe)&&(mt+=" "+Fe+'="'+ze(_e[Fe])+'"');return hn(nt)&&rt(p.getVoidElements(),ke)?mt+" />":mt+">"+nt+"</"+ke+">"},createFragment:ke=>{const _e=n.createElement("div"),nt=n.createDocumentFragment();let mt;for(nt.appendChild(_e),ke&&(_e.innerHTML=ke);mt=_e.firstChild;)nt.appendChild(mt);return nt.removeChild(_e),nt},remove:ct,setStyle:(ke,_e,nt)=>{Re(ke,mt=>{const Fe=F(mt);Xl(Fe,_e,nt),o.update_styles&&$i(y,Fe)})},getStyle:q,setStyles:(ke,_e)=>{Re(ke,nt=>{const mt=F(nt);Ke(_e,(Fe,xt)=>{Xl(mt,xt,Fe)}),o.update_styles&&$i(y,mt)})},removeAllAttribs:ke=>Re(ke,_e=>{const nt=_e.attributes;for(let mt=nt.length-1;mt>=0;mt--)_e.removeAttributeNode(nt.item(mt))}),setAttrib:D,setAttribs:Ne,getAttrib:A,getPos:j,parseStyle:ke=>y.parse(ke),serializeStyle:(ke,_e)=>y.serialize(ke,_e),addStyle:ke=>{if($n!==vs.DOM&&n===document){if(s[ke])return;s[ke]=!0}let _e=n.getElementById("mceDefaultStyles");if(!_e){_e=n.createElement("style"),_e.id="mceDefaultStyles",_e.type="text/css";const nt=n.head;nt.firstChild?nt.insertBefore(_e,nt.firstChild):nt.appendChild(_e)}_e.styleSheet?_e.styleSheet.cssText+=ke:_e.appendChild(n.createTextNode(ke))},loadCSS:ke=>{ke||(ke=""),Je(ke.split(","),_e=>{i[_e]=!0,m.load(_e).catch(gt)})},addClass:(ke,_e)=>{Yt(ke,_e,!0)},removeClass:(ke,_e)=>{Yt(ke,_e,!1)},hasClass:(ke,_e)=>{const nt=N(ke),mt=_e.split(" ");return Le(nt)&&Ls(mt,Fe=>Ns(nt,Fe))},toggleClass:Yt,show:ke=>{Re(ke,_e=>yd(F(_e),"display"))},hide:ke=>{Re(ke,_e=>Qd(F(_e),"display","none"))},isHidden:ke=>{const _e=N(ke);return Le(_e)&&kc(tl(_e,"display"),"none")},uniqueId:ke=>(ke||"mce_")+u++,setHTML:We,getOuterHTML:ke=>{const _e=N(ke);return Le(_e)?Qt(_e.dom)?_e.dom.outerHTML:(nt=>{const mt=Nr("div"),Fe=F(nt.dom.cloneNode(!0));return Or(mt,Fe),ol(mt)})(_e):""},setOuterHTML:(ke,_e)=>{Re(ke,nt=>{Qt(nt)&&(nt.outerHTML=_e)})},decode:Bi.decode,encode:ze,insertAfter:(ke,_e)=>{const nt=_(_e);return Re(ke,mt=>{const Fe=nt?.parentNode,xt=nt?.nextSibling;return Fe&&(xt?Fe.insertBefore(mt,xt):Fe.appendChild(mt)),mt})},replace:kt,rename:(ke,_e)=>{if(ke.nodeName!==_e.toUpperCase()){const nt=Ee(_e);return Zt($(ke),mt=>{D(nt,mt.nodeName,A(ke,mt.nodeName))}),kt(nt,ke,!0),nt}return ke},findCommonAncestor:(ke,_e)=>{let nt=ke;for(;nt;){let mt=_e;for(;mt&&nt!==mt;)mt=mt.parentNode;if(nt===mt)break;nt=nt.parentNode}return!nt&&ke.ownerDocument?ke.ownerDocument.documentElement:nt},run:Re,getAttribs:$,isEmpty:(ke,_e,nt)=>{let mt=0;if(Cn(ke))return!1;const Fe=ke.firstChild;if(Fe){const xt=new ir(Fe,ke),Nt=p?p.getWhitespaceElements():{},Bt=_e||(p?p.getNonEmptyElements():null);let Vt=Fe;do{if(Qt(Vt)){const Pt=Vt.getAttribute("data-mce-bogus");if(Pt){Vt=xt.next("all"===Pt);continue}const Zn=Vt.nodeName.toLowerCase();if(Bt&&Bt[Zn]){if("br"===Zn){mt++,Vt=xt.next();continue}return!1}if(Cn(Vt))return!1}if(_s(Vt)||yt(Vt)&&!Mi(Vt.data)&&(!nt?.includeZwsp||!Xg(Vt.data))||yt(Vt)&&Vt.parentNode&&Nt[Vt.parentNode.nodeName]&&Mi(Vt.data))return!1;Vt=xt.next()}while(Vt)}return mt<=1},createRng:dn,nodeIndex:nc,split:(ke,_e,nt)=>{let mt,Fe,xt=dn();if(ke&&_e&&ke.parentNode&&_e.parentNode){const Nt=ke.parentNode;return xt.setStart(Nt,nc(ke)),xt.setEnd(_e.parentNode,nc(_e)),mt=xt.extractContents(),xt=dn(),xt.setStart(_e.parentNode,nc(_e)+1),xt.setEnd(Nt,nc(ke)+1),Fe=xt.extractContents(),Nt.insertBefore(up($n,mt),ke),Nt.insertBefore(nt||_e,ke),Nt.insertBefore(up($n,Fe),ke),ct(ke),nt||_e}},bind:ho,unbind:bo,fire:(ke,_e,nt)=>w.dispatch(ke,_e,nt),dispatch:(ke,_e,nt)=>w.dispatch(ke,_e,nt),getContentEditable:Jt,getContentEditableParent:ke=>{const _e=L();let nt=null;for(let mt=ke;mt&&mt!==_e&&(nt=Jt(mt),null===nt);mt=mt.parentNode);return nt},isEditable:ke=>{if(Le(ke)){const _e=Qt(ke)?ke:ke.parentElement;return Le(_e)&&vl(F(_e))}return!1},destroy:()=>{if(h.length>0){let ke=h.length;for(;ke--;){const[_e,nt,mt]=h[ke];w.unbind(_e,nt,mt)}}Ke(i,(ke,_e)=>{m.unload(_e),delete i[_e]})},isChildOf:(ke,_e)=>ke===_e||_e.contains(ke),dumpRng:ke=>"startContainer: "+ke.startContainer.nodeName+", startOffset: "+ke.startOffset+", endContainer: "+ke.endContainer.nodeName+", endOffset: "+ke.endOffset},lo=((ke,_e,nt)=>{const mt=_e.keep_values,xt={style:{set:(Nt,Bt)=>{const Vt=F(Nt);mt&&Qo(Vt,eo,Bt),Bo(Vt,"style"),zt(Bt)&&Iu(Vt,ke.parse(Bt))},get:Nt=>{const Bt=F(Nt),Vt=zr(Bt,eo)||zr(Bt,"style");return ke.serialize(ke.parse(Vt),ce(Bt))}}};return mt&&(xt.href=xt.src={set:(Nt,Bt,Vt)=>{const Pt=F(Nt);mo(_e.url_converter)&&Le(Bt)&&(Bt=_e.url_converter.call(_e.url_converter_scope||nt(),String(Bt),Vt,Nt)),Qo(Pt,"data-mce-"+Vt,Bt),Qo(Pt,Vt,Bt)},get:(Nt,Bt)=>{const Vt=F(Nt);return zr(Vt,"data-mce-"+Bt)||zr(Vt,Bt)}}),xt})(y,o,qe($n));return $n};vs.DOM=vs(document),vs.nodeIndex=nc;const Gu=vs.DOM;class kl{constructor(o={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=o}_setReferrerPolicy(o){this.settings.referrerPolicy=o}loadScript(o){return new Promise((s,a)=>{const i=Gu;let u;const m=()=>{i.remove(h),u&&(u.onerror=u.onload=u=null)},h=i.uniqueId();u=document.createElement("script"),u.id=h,u.type="text/javascript",u.src=wt._addCacheSuffix(o),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=()=>{m(),s()},u.onerror=()=>{m(),a("Failed to load script: "+o)},(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(o){return 2===this.states[o]}markDone(o){this.states[o]=2}add(o){const s=this;return s.queue.push(o),void 0===s.states[o]&&(s.states[o]=0),new Promise((a,i)=>{s.scriptLoadedCallbacks[o]||(s.scriptLoadedCallbacks[o]=[]),s.scriptLoadedCallbacks[o].push({resolve:a,reject:i})})}load(o){return this.add(o)}remove(o){delete this.states[o],delete this.scriptLoadedCallbacks[o]}loadQueue(){const o=this.queue;return this.queue=[],this.loadScripts(o)}loadScripts(o){const s=this,a=(p,y)=>{Uo(s.scriptLoadedCallbacks,y).each(w=>{Je(w,S=>S[p](y))}),delete s.scriptLoadedCallbacks[y]},i=p=>{const y=Ht(p,w=>"rejected"===w.status);return y.length>0?Promise.reject(Ao(y,({reason:w})=>Wn(w)?w:[w])):Promise.resolve()},u=p=>Promise.allSettled(ln(p,y=>2===s.states[y]?(a("resolve",y),Promise.resolve()):3===s.states[y]?(a("reject",y),Promise.reject(y)):(s.states[y]=1,s.loadScript(y).then(()=>{s.states[y]=2,a("resolve",y);const w=s.queue;return w.length>0?(s.queue=[],u(w).then(i)):Promise.resolve()},()=>(s.states[y]=3,a("reject",y),Promise.reject(y)))))),m=p=>(s.loading=!0,u(p).then(y=>{s.loading=!1;const w=s.queueLoadedCallbacks.shift();return U.from(w).each(oo),i(y)})),h=_r(o);return s.loading?new Promise((p,y)=>{s.queueLoadedCallbacks.push(()=>{m(h).then(p,y)})}):m(h)}}kl.ScriptLoader=new kl;const aa=n=>{let o=n;return{get:()=>o,set:s=>{o=s}}},Jl={},im=aa("en"),ca=()=>Uo(Jl,im.get()),_a={getData:()=>Sn(Jl,n=>({...n})),setCode:n=>{n&&im.set(n)},getCode:()=>im.get(),add:(n,o)=>{let s=Jl[n];s||(Jl[n]=s={});const a=ln(Vs(o),i=>i.toLowerCase());Ke(o,(i,u)=>{const m=u.toLowerCase();m!==u&&((h,p)=>{const y=h.indexOf(p);return-1!==y&&h.indexOf(p,y+1)>y})(a,m)?(rt(o,m)||(s[m]=i),s[u]=i):s[m]=i})},translate:n=>{const o=ca().getOr({}),s=h=>mo(h)?Object.prototype.toString.call(h):a(h)?"":""+h,a=h=>""===h||null==h,i=h=>{const p=s(h);return rt(o,p)?s(o[p]):Uo(o,p.toLowerCase()).map(s).getOr(p)},u=h=>h.replace(/{context:\w+}$/,"");if(a(n))return"";if(Mo(m=n)&&rt(m,"raw"))return s(n.raw);var m,h;if(Wn(h=n)&&h.length>1){const h=n.slice(1);return u(i(n[0]).replace(/\{([0-9]+)\}/g,(p,y)=>rt(h,y)?s(h[y]):p))}return u(i(n))},isRtl:()=>ca().bind(n=>Uo(n,"_dir")).exists(n=>"rtl"===n),hasCode:n=>rt(Jl,n)},za=()=>{const n=[],o={},s={},a=[],i=(p,y)=>{const w=Ht(a,S=>S.name===p&&S.state===y);Je(w,S=>S.resolve())},u=p=>rt(o,p),m=(p,y)=>{const w=_a.getCode();!w||y&&-1===(","+(y||"")+",").indexOf(","+w+",")||kl.ScriptLoader.add(o[p]+"/langs/"+w+".js")},h=(p,y="added")=>"added"===y&&rt(s,p)||"loaded"===y&&u(p)?Promise.resolve():new Promise(w=>{a.push({name:p,state:y,resolve:w})});return{items:n,urls:o,lookup:s,get:p=>{if(s[p])return s[p].instance},requireLangPack:(p,y)=>{!1!==za.languageLoad&&(u(p)?m(p,y):h(p,"loaded").then(()=>m(p,y)))},add:(p,y)=>(n.push(y),s[p]={instance:y},i(p,"added"),y),remove:p=>{delete o[p],delete s[p]},createUrl:(p,y)=>zt(y)?zt(p)?{prefix:"",resource:y,suffix:""}:{prefix:p.prefix,resource:y,suffix:p.suffix}:y,load:(p,y)=>{if(o[p])return Promise.resolve();let w=zt(y)?y:y.prefix+y.resource+y.suffix;0!==w.indexOf("/")&&-1===w.indexOf("://")&&(w=za.baseURL+"/"+w),o[p]=w.substring(0,w.lastIndexOf("/"));const S=()=>(i(p,"loaded"),Promise.resolve());return s[p]?S():kl.ScriptLoader.add(w).then(S)},waitFor:h}};za.languageLoad=!0,za.baseURL="",za.PluginManager=za(),za.ThemeManager=za(),za.ModelManager=za();const lm=n=>{const o=aa(U.none()),s=()=>o.get().each(a=>clearInterval(a));return{clear:()=>{s(),o.set(U.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:a=>{s(),o.set(U.some(setInterval(a,n)))}}},Po=()=>{const n=(o=>{const s=aa(U.none()),a=()=>s.get().each(o);return{clear:()=>{a(),s.set(U.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:i=>{a(),s.set(U.some(i))}}})(gt);return{...n,on:o=>n.get().each(o)}},ds=(n,o)=>{let s=null;return{cancel:()=>{_t(s)||(clearTimeout(s),s=null)},throttle:(...a)=>{_t(s)&&(s=setTimeout(()=>{s=null,n.apply(null,a)},o))}}},Oa=(n,o)=>{let s=null;const a=()=>{_t(s)||(clearTimeout(s),s=null)};return{cancel:a,throttle:(...i)=>{a(),s=setTimeout(()=>{s=null,n.apply(null,i)},o)}}},oc=qe("mce-annotation"),qu=qe("data-mce-annotation"),Ii=qe("data-mce-annotation-uid"),Pa=qe("data-mce-annotation-active"),wu=qe("data-mce-annotation-classes"),Li=qe("data-mce-annotation-attrs"),mw=n=>o=>cn(o,n),sg=(n,o)=>{const s=n.selection.getRng(),a=F(s.startContainer),i=F(n.getBody()),u=o.fold(()=>"."+oc(),h=>`[${qu()}="${h}"]`),m=js(a,s.startOffset).getOr(a);return Ba(m,u,mw(i)).bind(h=>Bn(h,`${Ii()}`).bind(p=>Bn(h,`${qu()}`).map(y=>{const w=um(n,p);return{uid:p,name:y,elements:w}})))},nh=(n,o)=>pl(n,"data-mce-bogus")||nm(n,'[data-mce-bogus="all"]',mw(o)),um=(n,o)=>{const s=F(n.getBody()),a=Ea(s,`[${Ii()}="${o}"]`);return Ht(a,i=>!nh(i,s))},gw=(n,o)=>{const s=F(n.getBody()),a=Ea(s,`[${qu()}="${o}"]`),i={};return Je(a,u=>{if(!nh(u,s)){const m=zr(u,Ii()),h=Uo(i,m).getOr([]);i[m]=h.concat([u])}}),i};let oh=0;const sh=n=>{const o=(new Date).getTime(),s=Math.floor(1e9*Math.random());return oh++,n+"_"+s+oh+String(o)},fv=(n,o)=>F(n.dom.cloneNode(o)),kr=n=>fv(n,!1),X1=n=>fv(n,!0),Cu=(n,o,s=yn)=>{const a=new ir(n,o),i=u=>{let m;do{m=a[u]()}while(m&&!yt(m)&&!s(m));return U.from(m).filter(yt)};return{current:()=>U.from(a.current()).filter(yt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},El=(n,o)=>{const s=o||(i=>n.isBlock(i)||Tr(i)||K(i)),a=(i,u,m,h)=>{if(yt(i)){const p=h(i,u,i.data);if(-1!==p)return U.some({container:i,offset:p})}return m().bind(p=>a(p.container,p.offset,m,h))};return{backwards:(i,u,m,h)=>{const p=Cu(i,h??n.getRoot(),s);return a(i,u,()=>p.prev().map(y=>({container:y,offset:y.length})),m).getOrNull()},forwards:(i,u,m,h)=>{const p=Cu(i,h??n.getRoot(),s);return a(i,u,()=>p.next().map(y=>({container:y,offset:0})),m).getOrNull()}}},xu=Math.round,Ql=n=>n?{left:xu(n.left),top:xu(n.top),bottom:xu(n.bottom),right:xu(n.right),width:xu(n.width),height:xu(n.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Hi=(n,o)=>(n=Ql(n),o||(n.left=n.left+n.width),n.right=n.left,n.width=0,n),Jh=(n,o,s)=>n>=0&&n<=Math.min(o.height,s.height)/2,dm=(n,o)=>{const s=Math.min(o.height/2,n.height/2);return n.bottom-s<o.top||!(n.top>o.bottom)&&Jh(o.top-n.bottom,n,o)},mp=(n,o)=>n.top>o.bottom||!(n.bottom<o.top)&&Jh(o.bottom-n.top,n,o),gp=(n,o,s)=>{const a=Math.max(Math.min(o,n.left+n.width),n.left),i=Math.max(Math.min(s,n.top+n.height),n.top);return Math.sqrt((o-a)*(o-a)+(s-i)*(s-i))},rh=n=>{const o=n.startContainer,s=n.startOffset;return o===n.endContainer&&o.hasChildNodes()&&n.endOffset===s+1?o.childNodes[s]:null},al=(n,o)=>{if(Qt(n)&&n.hasChildNodes()){const s=n.childNodes;return s[(m=s.length-1,Math.min(Math.max(o,0),m))]}var m;return n},hw=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),hp=n=>zt(n)&&n.charCodeAt(0)>=768&&hw.test(n),mm=Qt,Od=gi,_l=Vu("display","block table"),ah=Vu("float","left right"),Su=((...n)=>o=>{for(let s=0;s<n.length;s++)if(!n[s](o))return!1;return!0})(mm,Od,Ot(ah)),fw=Ot(Vu("white-space","pre pre-line pre-wrap")),rg=yt,fp=Tr,pp=vs.nodeIndex,bp=(n,o)=>o<0&&Qt(n)&&n.hasChildNodes()?void 0:al(n,o),J1=n=>n?n.createRange():vs.DOM.createRng(),Q1=n=>zt(n)&&/[\r\n\t ]/.test(n),eb=n=>!!n.setStart&&!!n.setEnd,es=n=>{const o=n.startContainer,s=n.startOffset;if(Q1(n.toString())&&fw(o.parentNode)&&yt(o)){const a=o.data;if(Q1(a[s-1])||Q1(a[s+1]))return!0}return!1},wn=n=>0===n.left&&0===n.right&&0===n.top&&0===n.bottom,Ol=n=>{var o;let s;const a=n.getClientRects();return s=Ql(a.length>0?a[0]:n.getBoundingClientRect()),!eb(n)&&fp(n)&&wn(s)?(i=>{const u=i.ownerDocument,m=J1(u),h=u.createTextNode(jo),p=i.parentNode;p.insertBefore(h,i),m.setStart(h,0),m.setEnd(h,1);const y=Ql(m.getBoundingClientRect());return p.removeChild(h),y})(n):wn(s)&&eb(n)&&null!==(o=(i=>{const m=i.endContainer,h=i.startOffset,p=i.endOffset;if(i.startContainer===m&&yt(m)&&0===h&&1===p){const y=i.cloneRange();return y.setEndAfter(m),Ol(y)}return null})(n))&&void 0!==o?o:s},Ad=(n,o)=>{const s=Hi(n,o);return s.width=1,s.right=s.left+1,s},Xe=(n,o,s)=>{const a=()=>(s||(s=(i=>{const u=[],m=w=>{var S,_;0!==w.height&&(u.length>0&&(S=w).left===(_=u[u.length-1]).left&&S.top===_.top&&S.bottom===_.bottom&&S.right===_.right||u.push(w))},h=(w,S)=>{const _=J1(w.ownerDocument);if(S<w.data.length){if(hp(w.data[S]))return;if(hp(w.data[S-1])&&(_.setStart(w,S),_.setEnd(w,S+1),!es(_)))return void m(Ad(Ol(_),!1))}S>0&&(_.setStart(w,S-1),_.setEnd(w,S),es(_)||m(Ad(Ol(_),!1))),S<w.data.length&&(_.setStart(w,S),_.setEnd(w,S+1),es(_)||m(Ad(Ol(_),!0)))},p=i.container(),y=i.offset();if(rg(p))return h(p,y),u;if(mm(p))if(i.isAtEnd()){const w=bp(p,y);rg(w)&&h(w,w.data.length),Su(w)&&!fp(w)&&m(Ad(Ol(w),!1))}else{const w=bp(p,y);if(rg(w)&&h(w,0),Su(w)&&i.isAtEnd())return m(Ad(Ol(w),!1)),u;const S=bp(i.container(),i.offset()-1);Su(S)&&!fp(S)&&(_l(S)||_l(w)||!Su(w))&&m(Ad(Ol(S),!1)),Su(w)&&m(Ad(Ol(w),!0))}return u})(Xe(n,o))),s);return{container:qe(n),offset:qe(o),toRange:()=>{const i=J1(n.ownerDocument);return i.setStart(n,o),i.setEnd(n,o),i},getClientRects:a,isVisible:()=>a().length>0,isAtStart:()=>(rg(n),0===o),isAtEnd:()=>rg(n)?o>=n.data.length:o>=n.childNodes.length,isEqual:i=>i&&n===i.container()&&o===i.offset(),getNode:i=>bp(n,i?o-1:o)}};Xe.fromRangeStart=n=>Xe(n.startContainer,n.startOffset),Xe.fromRangeEnd=n=>Xe(n.endContainer,n.endOffset),Xe.after=n=>Xe(n.parentNode,pp(n)+1),Xe.before=n=>Xe(n.parentNode,pp(n)),Xe.isAbove=(n,o)=>Ds(or(o.getClientRects()),wr(n.getClientRects()),dm).getOr(!1),Xe.isBelow=(n,o)=>Ds(wr(o.getClientRects()),or(n.getClientRects()),mp).getOr(!1),Xe.isAtStart=n=>!!n&&n.isAtStart(),Xe.isAtEnd=n=>!!n&&n.isAtEnd(),Xe.isTextPosition=n=>!!n&&yt(n.container()),Xe.isElementPosition=n=>!Xe.isTextPosition(n);const tb=(n,o)=>{yt(o)&&0===o.data.length&&n.remove(o)},nb=(n,o,s)=>{var a,u;sl(s)?((a,i,u)=>{const m=U.from(u.firstChild),h=U.from(u.lastChild);i.insertNode(u),m.each(p=>tb(a,p.previousSibling)),h.each(p=>tb(a,p.nextSibling))})(n,o,s):(a=n,o.insertNode(u=s),tb(a,u.previousSibling),tb(a,u.nextSibling))},ss=yt,pv=zu,vp=vs.nodeIndex,bv=n=>{const o=n.parentNode;return pv(o)?bv(o):o},ut=n=>n?Fr(n.childNodes,(o,s)=>(pv(s)&&"BR"!==s.nodeName?o=o.concat(ut(s)):o.push(s),o),[]):[],ob=n=>o=>n===o,pw=n=>(ss(n)?"text()":n.nodeName.toLowerCase())+"["+(o=>{let s,a;s=ut(bv(o)),a=qa(s,ob(o),o),s=s.slice(0,a+1);const i=Fr(s,(u,m,h)=>(ss(m)&&ss(s[h-1])&&u++,u),0);return s=Sa(s,di([o.nodeName])),a=qa(s,ob(o),o),a-i})(n)+"]",yp=(n,o)=>{let s,a=[],i=o.container(),u=o.offset();if(ss(i))s=((h,p)=>{let y=h;for(;(y=y.previousSibling)&&ss(y);)p+=y.data.length;return p})(i,u);else{const h=i.childNodes;u>=h.length?(s="after",u=h.length-1):s="before",i=h[u]}a.push(pw(i));let m=((h,p,y)=>{const w=[];for(let S=p.parentNode;S&&S!==h;S=S.parentNode)w.push(S);return w})(n,i);return m=Sa(m,Ot(zu)),a=a.concat(as(m,h=>pw(h))),a.reverse().join("/")+","+s},bw=(n,o)=>{if(!o)return null;const s=o.split(","),a=s[0].split("/"),i=s.length>1?s[1]:"before",u=Fr(a,(m,h)=>{const p=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(h);return p?("text()"===p[1]&&(p[1]="#text"),((y,w,S)=>{let _=ut(y);return _=Sa(_,(N,A)=>!ss(N)||!ss(_[A-1])),_=Sa(_,di([w])),_[S]})(m,p[1],parseInt(p[2],10))):null},n);if(!u)return null;if(!ss(u)&&u.parentNode){let m;return m="after"===i?vp(u)+1:vp(u),Xe(u.parentNode,m)}return((m,h)=>{let p=m,y=0;for(;ss(p);){const w=p.data.length;if(h>=y&&h<=y+w){m=p,h-=y;break}if(!ss(p.nextSibling)){m=p,h=w;break}y+=w,p=p.nextSibling}return ss(m)&&h>m.data.length&&(h=m.data.length),Xe(m,h)})(u,parseInt(i,10))},gm=K,sb=(n,o,s,a,i)=>{const u=i?a.startContainer:a.endContainer;let m=i?a.startOffset:a.endOffset;const h=[],p=n.getRoot();if(yt(u))h.push(s?((y,w,S)=>{let _=y(w.data.slice(0,S)).length;for(let N=w.previousSibling;N&&yt(N);N=N.previousSibling)_+=y(N.data).length;return _})(o,u,m):m);else{let y=0;const w=u.childNodes;m>=w.length&&w.length&&(y=1,m=Math.max(0,w.length-1)),h.push(n.nodeIndex(w[m],s)+y)}for(let y=u;y&&y!==p;y=y.parentNode)h.push(n.nodeIndex(y,s));return h},hm=(n,o,s)=>{let a=0;return wt.each(n.select(o),i=>"all"===i.getAttribute("data-mce-bogus")?void 0:i!==s&&void a++),a},vw=(n,o)=>{let s=o?n.startContainer:n.endContainer,a=o?n.startOffset:n.endOffset;if(Qt(s)&&"TR"===s.nodeName){const i=s.childNodes;s=i[Math.min(o?a:a-1,i.length-1)],s&&(a=o?0:s.childNodes.length,o?n.setStart(s,a):n.setEnd(s,a))}},ag=n=>(vw(n,!0),vw(n,!1),n),lr=(n,o)=>{if(Qt(n)&&(n=al(n,o),gm(n)))return n;if(mi(n)){yt(n)&&am(n)&&(n=n.parentNode);let s=n.previousSibling;if(gm(s)||(s=n.nextSibling,gm(s)))return s}},Ku=(n,o,s)=>{const a=s.getNode(),i=s.getRng();if("IMG"===a.nodeName||gm(a)){const m=a.nodeName;return{name:m,index:hm(s.dom,m,a)}}const u=lr((m=i).startContainer,m.startOffset)||lr(m.endContainer,m.endOffset);var m;if(u){const m=u.tagName;return{name:m,index:hm(s.dom,m,u)}}return((m,h,p,y)=>{const w=h.dom,S=sb(w,m,p,y,!0),_=h.isForward(),N=Yg(y)?{isFakeCaret:!0}:{};return h.isCollapsed()?{start:S,forward:_,...N}:{start:S,end:sb(w,m,p,y,!1),forward:_,...N}})(n,s,o,i)},rb=(n,o,s)=>{const a={"data-mce-type":"bookmark",id:o,style:"overflow:hidden;line-height:0px"};return s?n.create("span",a,"&#xFEFF;"):n.create("span",a)},eu=(n,o)=>{const s=n.dom;let a=n.getRng();const i=s.uniqueId(),u=n.isCollapsed(),m=n.getNode(),h=m.nodeName,p=n.isForward();if("IMG"===h)return{name:h,index:hm(s,h,m)};const y=ag(a.cloneRange());if(!u){y.collapse(!1);const S=rb(s,i+"_end",o);nb(s,y,S)}a=ag(a),a.collapse(!0);const w=rb(s,i+"_start",o);return nb(s,a,w),n.moveToBookmark({id:i,keep:!0,forward:p}),{id:i,forward:p}},wp=De(Ku,Se,!0),ab=n=>{const o=u=>u(n),s=qe(n),a=()=>i,i={tag:!0,inner:n,fold:(u,m)=>m(n),isValue:Lt,isError:yn,map:u=>Vi.value(u(n)),mapError:a,bind:o,exists:o,forall:o,getOr:s,or:a,getOrThunk:s,orThunk:a,getOrDie:s,each:u=>{u(n)},toOptional:()=>U.some(n)};return i},cg=n=>{const o=()=>s,s={tag:!1,inner:n,fold:(a,i)=>a(n),isValue:yn,isError:Lt,map:o,mapError:a=>Vi.error(a(n)),bind:o,exists:yn,forall:Lt,getOr:Se,or:Se,getOrThunk:An,orThunk:An,getOrDie:B(String(n)),each:gt,toOptional:U.none};return s},Vi={value:ab,error:cg,fromOption:(n,o)=>n.fold(()=>cg(o),ab)},Rd=n=>{if(!Wn(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");const o=[],s={};return Je(n,(a,i)=>{const u=Vs(a);if(1!==u.length)throw new Error("one and only one name per case");const m=u[0],h=a[m];if(void 0!==s[m])throw new Error("duplicate key detected:"+m);if("cata"===m)throw new Error("cannot have a case named cata (sorry)");if(!Wn(h))throw new Error("case arguments must be an array");o.push(m),s[m]=(...p)=>{const y=p.length;if(y!==h.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+h.length+" ("+h+"), got "+y);return{fold:(...w)=>{if(w.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+w.length);return w[i].apply(null,p)},match:w=>{const S=Vs(w);if(o.length!==S.length)throw new Error("Wrong number of arguments to match. Expected: "+o.join(",")+"\nActual: "+S.join(","));if(!Ls(o,_=>Be(S,_)))throw new Error("Not all branches were specified when using match. Specified: "+S.join(", ")+"\nRequired: "+o.join(", "));return w[m].apply(null,p)},log:w=>{console.log(w,{constructors:o,constructor:m,params:p})}}}}),s};Rd([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const yw=n=>"inline-command"===n.type||"inline-format"===n.type,dT=n=>"block-command"===n.type||"block-format"===n.type,fm=n=>{const o=a=>Vi.error({message:a,pattern:n}),s=(a,i,u)=>{if(void 0!==n.format){let m;if(Wn(n.format)){if(!Ls(n.format,zt))return o(a+" pattern has non-string items in the `format` array");m=n.format}else{if(!zt(n.format))return o(a+" pattern has non-string `format` parameter");m=[n.format]}return Vi.value(i(m))}return void 0!==n.cmd?zt(n.cmd)?Vi.value(u(n.cmd,n.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!Mo(n))return o("Raw pattern is not an object");if(!zt(n.start))return o("Raw pattern is missing `start` parameter");if(void 0!==n.end){if(!zt(n.end))return o("Inline pattern has non-string `end` parameter");if(0===n.start.length&&0===n.end.length)return o("Inline pattern has empty `start` and `end` parameters");let a=n.start,i=n.end;return 0===i.length&&(i=a,a=""),s("Inline",u=>({type:"inline-format",start:a,end:i,format:u}),(u,m)=>({type:"inline-command",start:a,end:i,cmd:u,value:m}))}return void 0!==n.replacement?zt(n.replacement)?0===n.start.length?o("Replacement pattern has empty `start` parameter"):Vi.value({type:"inline-command",start:"",end:n.start,cmd:"mceInsertContent",value:n.replacement}):o("Replacement pattern has non-string `replacement` parameter"):0===n.start.length?o("Block pattern has empty `start` parameter"):s("Block",a=>({type:"block-format",start:n.start,format:a[0]}),(a,i)=>({type:"block-command",start:n.start,cmd:a,value:i}))},ww=n=>Ht(n,dT),Cw=n=>Ht(n,yw),Cp=n=>{const o=(s=>{const a=[],i=[];return Je(s,u=>{u.fold(m=>{a.push(m)},m=>{i.push(m)})}),{errors:a,values:i}})(ln(n,fm));return Je(o.errors,s=>console.error(s.message,s.pattern)),o.values},cb=Sc().deviceType,un=cb.isTouch(),vv=vs.DOM,xw=n=>ys(n,RegExp),nn=n=>o=>o.options.get(n),ib=n=>zt(n)||Mo(n),Sw=(n,o="")=>s=>{const a=zt(s);if(a){if(-1!==s.indexOf("=")){const i=(u=>{const m=u.indexOf("=")>0?u.split(/[;,](?![^=;,]*(?:[;,]|$))/):u.split(",");return fo(m,(h,p)=>{const y=p.split("="),w=y[0],S=y.length>1?y[1]:w;return h[ie(w)]=ie(S),h},{})})(s);return{value:Uo(i,n.id).getOr(o),valid:a}}return{value:s,valid:a}}return{valid:!1,message:"Must be a string."}},pm=nn("iframe_attrs"),ig=nn("doctype"),ch=nn("document_base_url"),mT=nn("body_id"),lb=nn("body_class"),yv=nn("content_security_policy"),gT=nn("br_in_pre"),sc=nn("forced_root_block"),zi=nn("forced_root_block_attrs"),hT=nn("newline_behavior"),ub=nn("br_newline_selector"),Tw=nn("no_newline_selector"),fT=nn("keep_styles"),kw=nn("end_container_on_empty_block"),bm=nn("automatic_uploads"),tu=nn("images_reuse_filename"),cl=nn("images_replace_blob_uris"),wv=nn("icons"),pT=nn("icons_url"),bT=nn("images_upload_url"),Ew=nn("images_upload_base_path"),Tu=nn("images_upload_credentials"),db=nn("images_upload_handler"),_w=nn("content_css_cors"),mb=nn("referrer_policy"),xp=nn("language"),vT=nn("language_url"),Cv=nn("indent_use_margin"),Sp=nn("indentation"),xv=nn("content_css"),gb=nn("content_style"),Tp=nn("font_css"),yT=nn("directionality"),Ow=nn("inline_boundaries_selector"),hb=nn("object_resizing"),wT=nn("resize_img_proportional"),CT=nn("placeholder"),Dd=nn("event_root"),Sv=nn("service_message"),ih=nn("theme"),Aw=nn("theme_url"),fb=nn("model"),Q_=nn("model_url"),Qh=nn("inline_boundaries"),kp=nn("formats"),Ep=nn("preview_styles"),ef=nn("format_empty_lines"),Rw=nn("format_noneditable_selector"),xT=nn("custom_ui_selector"),Tv=nn("inline"),va=nn("hidden_input"),ST=nn("submit_patch"),Hr=nn("add_form_submit_trigger"),Ui=nn("add_unload_trigger"),Md=nn("custom_undo_redo_levels"),ri=nn("disable_nodechange"),kv=nn("readonly"),pb=nn("editable_root"),bb=nn("content_css_cors"),Al=nn("plugins"),ya=nn("external_plugins"),TT=nn("block_unsupported_drop"),vb=nn("visual"),Dw=nn("visual_table_class"),Ev=nn("visual_anchor_class"),vm=nn("iframe_aria_text"),ym=nn("setup"),Mw=nn("init_instance_callback"),Nw=nn("urlconverter_callback"),kT=nn("auto_focus"),ET=nn("browser_spellcheck"),_T=nn("protect"),Bw=nn("paste_block_drop"),yb=nn("paste_data_images"),OT=nn("paste_preprocess"),AT=nn("paste_postprocess"),Pw=nn("newdocument_content"),Fw=nn("paste_webkit_styles"),e4=nn("paste_remove_styles_if_webkit"),wb=nn("paste_merge_formats"),RT=nn("smart_paste"),Yr=nn("paste_as_text"),_v=nn("paste_tab_spaces"),Ov=nn("allow_html_data_urls"),DT=nn("text_patterns"),Av=nn("text_patterns_lookup"),Dc=nn("noneditable_class"),fi=nn("editable_class"),$w=nn("noneditable_regexp"),Iw=nn("preserve_cdata"),Lw=nn("highlight_on_focus"),Cb=nn("xss_sanitization"),MT=nn("init_content_sync"),xb=n=>wt.explode(n.options.get("images_file_types")),wm=nn("table_tab_navigation"),Rv=nn("details_initial_state"),ia=nn("details_serialized_state"),Yu=Qt,lh=yt,Hw=n=>{const o=n.parentNode;o&&o.removeChild(n)},Dv=n=>{const o=ql(n);return{count:n.length-o.length,text:o}},Vw=n=>{let o;for(;-1!==(o=n.data.lastIndexOf(Pn));)n.deleteData(o,1)},lg=(n,o)=>(ku(n),o),ku=n=>{Yu(n)&&mi(n)&&(tg(n)?n.removeAttribute("data-mce-caret"):Hw(n)),lh(n)&&(Vw(n),0===n.data.length&&Hw(n))},Nv=K,zw=Tt,NT=me,Uw=(n,o,s)=>{const a=Hi(o.getBoundingClientRect(),s);let i,u;if("BODY"===n.tagName){const h=n.ownerDocument.documentElement;i=n.scrollLeft||h.scrollLeft,u=n.scrollTop||h.scrollTop}else{const h=n.getBoundingClientRect();i=n.scrollLeft-h.left,u=n.scrollTop-h.top}a.left+=i,a.right+=i,a.top+=u,a.bottom+=u,a.width=1;let m=o.offsetWidth-o.clientWidth;return m>0&&(s&&(m*=-1),a.left+=m,a.right+=m),a},Sb=()=>wo.browser.isFirefox(),ug=n=>Nv(n)||zw(n),_p=n=>(ug(n)||Gl(n)&&Sb())&&$r(F(n)).exists(vl),Bv=H,Op=K,Ww=Tt,BT=Vu("display","block table table-cell table-caption list-item"),dg=mi,Tb=am,Eu=Qt,kb=yt,Ko=gi,bc=n=>n>0,nu=n=>n<0,tf=(n,o)=>{let s;for(;s=n(o);)if(!Tb(s))return s;return null},Gs=(n,o,s,a,i)=>{const u=new ir(n,a),m=Op(n)||Tb(n);let h;if(nu(o)){if(m&&(h=tf(u.prev.bind(u),!0),s(h)))return h;for(;h=tf(u.prev.bind(u),i);)if(s(h))return h}if(bc(o)){if(m&&(h=tf(u.next.bind(u),!0),s(h)))return h;for(;h=tf(u.next.bind(u),i);)if(s(h))return h}return null},Cm=(n,o)=>{for(;n&&n!==o;){if(BT(n))return n;n=n.parentNode}return null},Xu=(n,o,s)=>Cm(n.container(),s)===Cm(o.container(),s),rc=(n,o)=>{if(!o)return U.none();const s=o.container(),a=o.offset();return Eu(s)?U.from(s.childNodes[a+n]):U.none()},Ju=(n,o)=>{var s;const a=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createRange();return n?(a.setStartBefore(o),a.setEndBefore(o)):(a.setStartAfter(o),a.setEndAfter(o)),a},jw=(n,o,s)=>Cm(o,n)===Cm(s,n),Gw=(n,o,s)=>{const a=n?"previousSibling":"nextSibling";let i=s;for(;i&&i!==o;){let u=i[a];if(u&&dg(u)&&(u=u[a]),Op(u)||Ww(u)){if(jw(o,u,i))return u;break}if(Ko(u))break;i=i.parentNode}return null},Ap=De(Ju,!0),mg=De(Ju,!1),Nd=(n,o,s)=>{let a;const i=De(Gw,!0,o),u=De(Gw,!1,o),m=s.startContainer,h=s.startOffset;if(am(m)){const p=kb(m)?m.parentNode:m,y=p.getAttribute("data-mce-caret");if("before"===y&&(a=p.nextSibling,_p(a)))return Ap(a);if("after"===y&&(a=p.previousSibling,_p(a)))return mg(a)}if(!s.collapsed)return s;if(yt(m)){if(dg(m)){if(1===n){if(a=u(m),a)return Ap(a);if(a=i(m),a)return mg(a)}if(-1===n){if(a=i(m),a)return mg(a);if(a=u(m),a)return Ap(a)}return s}if(wl(m)&&h>=m.data.length-1)return 1===n&&(a=u(m),a)?Ap(a):s;if(Kg(m)&&h<=1)return-1===n&&(a=i(m),a)?mg(a):s;if(h===m.data.length)return a=u(m),a?Ap(a):s;if(0===h)return a=i(m),a?mg(a):s}return s},Rp=(n,o)=>rc(n?0:-1,o).filter(Op),gg=(n,o,s)=>{const a=Nd(n,o,s);return-1===n?Xe.fromRangeStart(a):Xe.fromRangeEnd(a)},nf=n=>U.from(n.getNode()).map(F),Eb=(n,o)=>{let s=o;for(;s=n(s);)if(s.isVisible())return s;return s},Dp=(n,o)=>{const s=Xu(n,o);return!(s||!Tr(n.getNode()))||s};var ac,n;(n=ac||(ac={}))[n.Backwards=-1]="Backwards",n[n.Forwards=1]="Forwards";const uh=K,cc=yt,Zi=Qt,ic=Tr,of=gi,xm=n=>{return rp(n)||!!K1(o=n)&&!fo($o(o.getElementsByTagName("*")),(s,a)=>s||Cl(a),!1);var o},Mp=Di,Np=(n,o)=>n.hasChildNodes()&&o<n.childNodes.length?n.childNodes[o]:null,Bp=(n,o)=>{if(bc(n)){if(of(o.previousSibling)&&!cc(o.previousSibling))return Xe.before(o);if(cc(o))return Xe(o,0)}if(nu(n)){if(of(o.nextSibling)&&!cc(o.nextSibling))return Xe.after(o);if(cc(o))return Xe(o,o.data.length)}return nu(n)?ic(o)?Xe.before(o):Xe.after(o):Xe.before(o)},Pp=(n,o,s)=>{let a,i,u,m;if(!Zi(s)||!o)return null;if(o.isEqual(Xe.after(s))&&s.lastChild){if(m=Xe.after(s.lastChild),nu(n)&&of(s.lastChild)&&Zi(s.lastChild))return ic(s.lastChild)?Xe.before(s.lastChild):m}else m=o;const h=m.container();let p=m.offset();if(cc(h)){if(nu(n)&&p>0)return Xe(h,--p);if(bc(n)&&p<h.length)return Xe(h,++p);a=h}else{if(nu(n)&&p>0&&(i=Np(h,p-1),of(i)))return!xm(i)&&(u=Gs(i,n,Mp,i),u)?cc(u)?Xe(u,u.data.length):Xe.after(u):cc(i)?Xe(i,i.data.length):Xe.before(i);if(bc(n)&&p<h.childNodes.length&&(i=Np(h,p),of(i)))return ic(i)?((w,S)=>{const _=S.nextSibling;return _&&of(_)?cc(_)?Xe(_,0):Xe.before(_):Pp(ac.Forwards,Xe.after(S),w)})(s,i):!xm(i)&&(u=Gs(i,n,Mp,i),u)?cc(u)?Xe(u,0):Xe.before(u):cc(i)?Xe(i,0):Xe.after(i);a=i||m.getNode()}if(a&&(bc(n)&&m.isAtEnd()||nu(n)&&m.isAtStart())&&(a=Gs(a,n,Lt,s,!0),Mp(a,s)))return Bp(n,a);i=a&&Gs(a,n,Mp,s);const y=rr(Ht(((w,S)=>{const _=[];let N=w;for(;N&&N!==S;)_.push(N),N=N.parentNode;return _})(h,s),uh));return!y||i&&y.contains(i)?i?Bp(n,i):null:(m=bc(n)?Xe.after(y):Xe.before(y),m)},_u=n=>({next:o=>Pp(ac.Forwards,o,n),prev:o=>Pp(ac.Backwards,o,n)}),Pv=n=>Xe.isTextPosition(n)?0===n.offset():gi(n.getNode()),Fv=n=>{if(Xe.isTextPosition(n)){const o=n.container();return n.offset()===o.data.length}return gi(n.getNode(!0))},$v=(n,o)=>!Xe.isTextPosition(n)&&!Xe.isTextPosition(o)&&n.getNode()===o.getNode(!0),ur=(n,o,s)=>{const a=_u(o);return U.from(n?a.next(s):a.prev(s))},Aa=(n,o,s)=>ur(n,o,s).bind(a=>{return Xu(s,a,o)&&(u=s,m=a,n?!$v(u,m)&&(Xe.isTextPosition(h=u)||!Tr(h.getNode()))&&Fv(u)&&Pv(m):!$v(m,u)&&Pv(u)&&Fv(m))?ur(n,o,a):U.some(a);var u,m,h}),pi=(n,o,s,a)=>Aa(n,o,s).bind(i=>a(i)?pi(n,o,i,a):U.some(i)),Qs=(n,o)=>{const s=n?o.firstChild:o.lastChild;return yt(s)?U.some(Xe(s,n?0:s.data.length)):s?gi(s)?U.some(n?Xe.before(s):Tr(a=s)?Xe.before(a):Xe.after(a)):((i,u,m)=>{const h=i?Xe.before(m):Xe.after(m);return ur(i,u,h)})(n,o,s):U.none();var a},er=De(ur,!0),tr=De(ur,!1),Mc=De(Qs,!0),Rl=De(Qs,!1),_b="_mce_caret",ou=n=>Qt(n)&&n.id===_b,hg=(n,o)=>{let s=o;for(;s&&s!==n;){if(ou(s))return s;s=s.parentNode}return null},Iv=n=>rt(n,"name"),Ob=n=>wt.isArray(n.start),fg=n=>!(!Iv(n)&&Ln(n.forward))||n.forward,qw=(n,o)=>(Qt(o)&&n.isBlock(o)&&!o.innerHTML&&(o.innerHTML='<br data-mce-bogus="1" />'),o),t4=(n,o)=>Rl(n).fold(yn,s=>(o.setStart(s.container(),s.offset()),o.setEnd(s.container(),s.offset()),!0)),Kw=(n,o,s)=>!(o.hasChildNodes()||!hg(n,o)||(((a,i)=>{var u;const m=(null!==(u=a.ownerDocument)&&void 0!==u?u:document).createTextNode(Pn);a.appendChild(m),i.setStart(m,0),i.setEnd(m,0)})(o,s),0)),Yw=(n,o,s,a)=>{const i=s[o?"start":"end"],u=n.getRoot();if(i){let m=u,h=i[0];for(let p=i.length-1;m&&p>=1;p--){const y=m.childNodes;if(Kw(u,m,a))return!0;if(i[p]>y.length-1)return!!Kw(u,m,a)||t4(m,a);m=y[i[p]]}yt(m)&&(h=Math.min(i[0],m.data.length)),Qt(m)&&(h=Math.min(i[0],m.childNodes.length)),o?a.setStart(m,h):a.setEnd(m,h)}return!0},Lv=n=>yt(n)&&n.data.length>0,Ab=(n,o,s)=>{const a=n.get(s.id+"_"+o),i=a?.parentNode,u=s.keep;if(a&&i){let m,h;if("start"===o?u?a.hasChildNodes()?(m=a.firstChild,h=1):Lv(a.nextSibling)?(m=a.nextSibling,h=0):Lv(a.previousSibling)?(m=a.previousSibling,h=a.previousSibling.data.length):(m=i,h=n.nodeIndex(a)+1):(m=i,h=n.nodeIndex(a)):u?a.hasChildNodes()?(m=a.firstChild,h=1):Lv(a.previousSibling)?(m=a.previousSibling,h=a.previousSibling.data.length):(m=i,h=n.nodeIndex(a)):(m=i,h=n.nodeIndex(a)),!u){const p=a.previousSibling,y=a.nextSibling;let w;for(wt.each(wt.grep(a.childNodes),S=>{yt(S)&&(S.data=S.data.replace(/\uFEFF/g,""))});w=n.get(s.id+"_"+o);)n.remove(w,!0);if(yt(y)&&yt(p)&&!wo.browser.isOpera()){const S=p.data.length;p.appendData(y.data),n.remove(y),m=p,h=S}}return U.some(Xe(m,h))}return U.none()},PT=(n,o,s)=>((a,i,u=!1)=>{return 2===i?Ku(ql,u,a):3===i?(m=>{const h=m.getRng();return{start:yp(m.dom.getRoot(),Xe.fromRangeStart(h)),end:yp(m.dom.getRoot(),Xe.fromRangeEnd(h)),forward:m.isForward()}})(a):i?{rng:(m=a).getRng(),forward:m.isForward()}:eu(a,!1);var m})(n,o,s),FT=(n,o)=>{((s,a)=>{const i=s.dom;if(a){if(Ob(a))return((u,m)=>{const h=u.createRng();return Yw(u,!0,m,h)&&Yw(u,!1,m,h)?U.some({range:h,forward:fg(m)}):U.none()})(i,a);if(zt(a.start))return((u,m)=>{const h=U.from(bw(u.getRoot(),m.start)),p=U.from(bw(u.getRoot(),m.end));return Ds(h,p,(y,w)=>{const S=u.createRng();return S.setStart(y.container(),y.offset()),S.setEnd(w.container(),w.offset()),{range:S,forward:fg(m)}})})(i,a);if(rt(a,"id"))return((u,m)=>{const h=Ab(u,"start",m),p=Ab(u,"end",m);return Ds(h,p.or(h),(y,w)=>{const S=u.createRng();return S.setStart(qw(u,y.container()),y.offset()),S.setEnd(qw(u,w.container()),w.offset()),{range:S,forward:fg(m)}})})(i,a);if(Iv(a))return((u,m)=>U.from(u.select(m.name)[m.index]).map(h=>{const p=u.createRng();return p.selectNode(h),{range:p,forward:!0}}))(i,a);if((u=>rt(u,"rng"))(a))return U.some({range:a.rng,forward:fg(a)})}return U.none()})(n,o).each(({range:s,forward:a})=>{n.setRng(s,a)})},Wi=n=>Qt(n)&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type"),Rb=n=>"\xa0"===n,Et=n=>""!==n&&-1!==" \f\n\r\t\v".indexOf(n),Vv=n=>!Et(n)&&!Rb(n)&&!Xa(n),Ua=n=>{const o=n.toString(16);return(1===o.length?"0"+o:o).toUpperCase()},$T=n=>{return{value:(s=Ua(n.red)+Ua(n.green)+Ua(n.blue),Rs(s,"#").toUpperCase())};var s},Xw=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,zv=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ai=(n,o,s,a)=>({red:n,green:o,blue:s,alpha:a}),Jw=(n,o,s,a)=>{const i=parseInt(n,10),u=parseInt(o,10),m=parseInt(s,10),h=parseFloat(a);return ai(i,u,m,h)},Fp=n=>(o=>{if("transparent"===o)return U.some(ai(0,0,0,0));const s=Xw.exec(o);if(null!==s)return U.some(Jw(s[1],s[2],s[3],"1"));const a=zv.exec(o);return null!==a?U.some(Jw(a[1],a[2],a[3],a[4])):U.none()})(n).map($T).map(o=>"#"+o.value).getOr(n),il=n=>{const o=[];if(n)for(let s=0;s<n.rangeCount;s++)o.push(n.getRangeAt(s));return o},$p=(n,o)=>{const s=Ea(o,"td[data-mce-selected],th[data-mce-selected]");return s.length>0?s:Ht(Ao(n,u=>{const m=rh(u);return m?[F(m)]:[]}),Qm)},Bd=n=>$p(il(n.selection.getSel()),F(n.getBody())),ll=(n,o)=>fu(n,"table",o),Dl=n=>bd(n).fold(qe([n]),o=>[n].concat(Dl(o))),pg=n=>zl(n).fold(qe([n]),o=>"br"===ce(o)?Hc(o).map(s=>[n].concat(pg(s))).getOr([]):[n].concat(pg(o))),Ml=(n,o)=>Ds((s=>{const a=s.startContainer,i=s.startOffset;return yt(a)?0===i?U.some(F(a)):U.none():U.from(a.childNodes[i]).map(F)})(o),(s=>{const a=s.endContainer,i=s.endOffset;return yt(a)?i===a.data.length?U.some(F(a)):U.none():U.from(a.childNodes[i-1]).map(F)})(o),(s,a)=>{const i=En(Dl(n),De(cn,s)),u=En(pg(n),De(cn,a));return i.isSome()&&u.isSome()}).getOr(!1),Uv=(n,o,s,a)=>{const i=s,u=new ir(s,i),m=sr(n.schema.getMoveCaretBeforeOnEnterElements(),(p,y)=>!Be(["td","th","table"],y.toLowerCase()));let h=s;do{if(yt(h)&&0!==wt.trim(h.data).length)return void(a?o.setStart(h,0):o.setEnd(h,h.data.length));if(m[h.nodeName])return void(a?o.setStartBefore(h):"BR"===h.nodeName?o.setEndBefore(h):o.setEndAfter(h))}while(h=a?u.next():u.prev());"BODY"===i.nodeName&&(a?o.setStart(i,0):o.setEnd(i,i.childNodes.length))},Ip=n=>{const o=n.selection.getSel();return Le(o)&&o.rangeCount>0},Lp=(n,o)=>{const s=Bd(n);s.length>0?Je(s,a=>{const i=a.dom,u=n.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),o(u,!0)}):o(n.selection.getRng(),!1)},Zv=(n,o,s)=>{const a=eu(n,o);s(a),n.moveToBookmark(a)},sf=n=>Vo(n?.nodeType),Hp=n=>Qt(n)&&!Wi(n)&&!ou(n)&&!zu(n),dh=n=>!0===n.isContentEditable,Wv=(n,o,s)=>{const{selection:a,dom:i}=n,u=a.getNode(),m=K(u);Zv(a,!0,()=>{o()}),m&&K(u)&&i.isChildOf(u,n.getBody())?n.selection.select(u):s(a.getStart())&&IT(i,a)},IT=(n,o)=>{var s,a;const i=o.getRng(),{startContainer:u,startOffset:m}=i;if(!((h,p)=>{if(Hp(p)&&!/^(TD|TH)$/.test(p.nodeName)){const y=h.getAttrib(p,"data-mce-selected"),w=parseInt(y,10);return!isNaN(w)&&w>0}return!1})(n,o.getNode())&&Qt(u)){const h=u.childNodes,p=n.getRoot();let y;if(m<h.length){const w=h[m];y=new ir(w,null!==(s=n.getParent(w,n.isBlock))&&void 0!==s?s:p)}else{const w=h[h.length-1];y=new ir(w,null!==(a=n.getParent(w,n.isBlock))&&void 0!==a?a:p),y.next(!0)}for(let w=y.current();w;w=y.next()){if("false"===n.getContentEditable(w))return;if(yt(w)&&!Gv(w))return i.setStart(w,0),void o.setRng(i)}}},Qw=(n,o,s)=>{if(n){const a=o?"nextSibling":"previousSibling";for(n=s?n:n[a];n;n=n[a])if(Qt(n)||!Gv(n))return n}},jv=(n,o)=>!!n.getTextBlockElements()[o.nodeName.toLowerCase()]||Uc(n,o),rf=(n,o,s)=>n.schema.isValidChild(o,s),Gv=(n,o=!1)=>{if(Le(n)&&yt(n)){const s=o?n.data.replace(/ /g,"\xa0"):n.data;return Mi(s)}return!1},Db=(n,o)=>{const s=n.dom;return Hp(o)&&"false"===s.getContentEditable(o)&&((a,i)=>{const u="[data-mce-cef-wrappable]",m=Rw(a),h=hn(m)?u:`${u},${m}`;return ot(F(i),h)})(n,o)&&0===s.select('[contenteditable="true"]',o).length},bg=(n,o)=>mo(n)?n(o):(Le(o)&&(n=n.replace(/%(\w+)/g,(s,a)=>o[a]||s)),n),Mb=(n,o)=>(n=""+((n=n||"").nodeName||n),o=""+((o=o||"").nodeName||o),n.toLowerCase()===o.toLowerCase()),qv=(n,o)=>{if(ve(n))return null;{let s=String(n);return"color"!==o&&"backgroundColor"!==o||(s=Fp(s)),"fontWeight"===o&&700===n&&(s="bold"),"fontFamily"===o&&(s=s.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),s}},mh=(n,o,s)=>{const a=n.getStyle(o,s);return qv(a,s)},eC=(n,o)=>{let s;return n.getParent(o,a=>!!Qt(a)&&(s=n.getStyle(a,"text-decoration"),!!s&&"none"!==s)),s},Nb=(n,o,s)=>n.getParents(o,s,n.getRoot()),Kv=(n,o,s)=>{const a=n.formatter.get(o);return Le(a)&&lt(a,s)},Pd=n=>Qn(n,"block"),Nl=n=>Qn(n,"selector"),Ra=n=>Qn(n,"inline"),Sm=n=>Nl(n)&&!1!==n.expand&&!Ra(n),Qu=Wi,fr=Nb,Yv=Gv,bi=jv,gh=(n,o)=>{let s=o;for(;s;){if(Qt(s)&&n.getContentEditable(s))return"false"===n.getContentEditable(s)?s:o;s=s.parentNode}return o},Za=(n,o,s,a)=>{const i=o.data;if(n){for(let u=s;u>0;u--)if(a(i.charAt(u-1)))return u}else for(let u=s;u<i.length;u++)if(a(i.charAt(u)))return u;return-1},tC=(n,o,s)=>Za(n,o,s,a=>Rb(a)||Et(a)),Vp=(n,o,s)=>Za(n,o,s,Vv),nC=(n,o,s,a,i,u)=>{let m;const h=n.getParent(s,n.isBlock)||o,p=(y,w,S)=>{const _=El(n);return U.from((i?_.backwards:_.forwards)(y,w,(A,$)=>Qu(A.parentNode)?-1:(m=A,S(i,A,$)),h))};return p(s,a,tC).bind(y=>u?p(y.container,y.offset+(i?-1:0),Vp):U.some(y)).orThunk(()=>m?U.some({container:m,offset:i?0:m.length}):U.none())},Xv=(n,o,s,a,i)=>{const u=a[i];yt(a)&&hn(a.data)&&u&&(a=u);const m=fr(n,a);for(let h=0;h<m.length;h++)for(let p=0;p<o.length;p++){const y=o[p];if((!Le(y.collapsed)||y.collapsed===s.collapsed)&&Nl(y)&&n.is(m[h],y.selector))return m[h]}return a},Jv=(n,o,s,a)=>{var i;let u=s;const m=n.getRoot(),h=o[0];if(Pd(h)&&(u=h.wrapper?null:n.getParent(s,h.block,m)),!u){const p=null!==(i=n.getParent(s,"LI,TD,TH"))&&void 0!==i?i:m;u=n.getParent(yt(s)?s.parentNode:s,y=>y!==m&&bi(n.schema,y),p)}if(u&&Pd(h)&&h.wrapper&&(u=fr(n,u,"ul,ol").reverse()[0]||u),!u)for(u=s;u&&u[a]&&!n.isBlock(u[a])&&(u=u[a],!Mb(u,"br")););return u||s},oC=(n,o,s,a)=>{const i=s.parentNode;return!Le(s[a])&&(!(i!==o&&!ve(i)&&!n.isBlock(i))||oC(n,o,i,a))},Bb=(n,o,s,a,i)=>{let u=s;const m=i?"previousSibling":"nextSibling",h=n.getRoot();if(yt(s)&&!Yv(s)&&(i?a>0:a<s.data.length))return s;for(;u;){if(!o[0].block_expand&&n.isBlock(u))return u;for(let y=u[m];y;y=y[m]){const w=yt(y)&&!oC(n,h,y,m);if(!Qu(y)&&(!Tr(p=y)||!p.getAttribute("data-mce-bogus")||p.nextSibling)&&!Yv(y,w))return u}if(u===h||u.parentNode===h){s=u;break}u=u.parentNode}var p;return s},sC=n=>Qu(n.parentNode)||Qu(n),hh=(n,o,s,a=!1)=>{let{startContainer:i,startOffset:u,endContainer:m,endOffset:h}=o;const p=s[0];return Qt(i)&&i.hasChildNodes()&&(i=al(i,u),yt(i)&&(u=0)),Qt(m)&&m.hasChildNodes()&&(m=al(m,o.collapsed?h:h-1),yt(m)&&(h=m.data.length)),i=gh(n,i),m=gh(n,m),sC(i)&&(i=Qu(i)?i:i.parentNode,i=o.collapsed?i.previousSibling||i:i.nextSibling||i,yt(i)&&(u=o.collapsed?i.length:0)),sC(m)&&(m=Qu(m)?m:m.parentNode,m=o.collapsed?m.nextSibling||m:m.previousSibling||m,yt(m)&&(h=o.collapsed?0:m.length)),o.collapsed&&(nC(n,n.getRoot(),i,u,!0,a).each(({container:y,offset:w})=>{i=y,u=w}),nC(n,n.getRoot(),m,h,!1,a).each(({container:y,offset:w})=>{m=y,h=w})),(Ra(p)||p.block_expand)&&(Ra(p)&&yt(i)&&0!==u||(i=Bb(n,s,i,u,!0)),Ra(p)&&yt(m)&&h!==m.data.length||(m=Bb(n,s,m,h,!1))),Sm(p)&&(i=Xv(n,s,o,i,"previousSibling"),m=Xv(n,s,o,m,"nextSibling")),(Pd(p)||Nl(p))&&(i=Jv(n,s,i,"previousSibling"),m=Jv(n,s,m,"nextSibling"),Pd(p)&&(n.isBlock(i)||(i=Bb(n,s,i,u,!0)),n.isBlock(m)||(m=Bb(n,s,m,h,!1)))),Qt(i)&&i.parentNode&&(u=n.nodeIndex(i),i=i.parentNode),Qt(m)&&m.parentNode&&(h=n.nodeIndex(m)+1,m=m.parentNode),{startContainer:i,startOffset:u,endContainer:m,endOffset:h}},Tm=(n,o,s)=>{var a;const i=o.startOffset,u=al(o.startContainer,i),m=o.endOffset,h=al(o.endContainer,m-1),p=D=>{const L=D[0];yt(L)&&L===u&&i>=L.data.length&&D.splice(0,1);const j=D[D.length-1];return 0===m&&D.length>0&&j===h&&yt(j)&&D.splice(D.length-1,1),D},y=(D,L,j)=>{const q=[];for(;D&&D!==j;D=D[L])q.push(D);return q},w=(D,L)=>n.getParent(D,j=>j.parentNode===L,L),S=(D,L,j)=>{const q=j?"nextSibling":"previousSibling";for(let ee=D,Q=ee.parentNode;ee&&ee!==L;ee=Q){Q=ee.parentNode;const de=y(ee===D?ee:ee[q],q);de.length&&(j||de.reverse(),s(p(de)))}};if(u===h)return s(p([u]));const _=null!==(a=n.findCommonAncestor(u,h))&&void 0!==a?a:n.getRoot();if(n.isChildOf(u,h))return S(u,_,!0);if(n.isChildOf(h,u))return S(h,_);const N=w(u,_)||u,A=w(h,_)||h;S(u,N,!0);const $=y(N===u?N:N.nextSibling,"nextSibling",A===h?A.nextSibling:A);$.length&&s(p($)),S(h,A)},rC=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],LT=(n,o,s,a,i,u)=>{const{uid:m=o,...h}=s;Xt(n,oc()),ls(n,`${Ii()}`,m),ls(n,`${qu()}`,a);const{attributes:p={},classes:y=[]}=i(m,h);if(Lc(n,p),w=n,Je(y,_=>{Xt(w,_)}),u){y.length>0&&ls(n,`${wu()}`,y.join(","));const w=Vs(p);w.length>0&&ls(n,`${Li()}`,w.join(","))}var w},vg=(n,o,s,a,i)=>{const u=Nr("span",n);return LT(u,o,s,a,i,!1),u},aC=n=>{const o=(()=>{const u={};return{register:(m,h)=>{u[m]={name:m,settings:h}},lookup:m=>Uo(u,m).map(h=>h.settings),getNames:()=>Vs(u)}})();((u,m)=>{const h=qu(),p=w=>U.from(w.attr(h)).bind(m.lookup),y=w=>{var S,_;w.attr(Ii(),null),w.attr(qu(),null),w.attr(Pa(),null);const N=U.from(w.attr(Li())).map(L=>L.split(",")).getOr([]),A=U.from(w.attr(wu())).map(L=>L.split(",")).getOr([]);Je(N,L=>w.attr(L,null));const $=null!==(_=null===(S=w.attr("class"))||void 0===S?void 0:S.split(" "))&&void 0!==_?_:[],D=zo($,[oc()].concat(A));w.attr("class",D.length>0?D.join(" "):null),w.attr(wu(),null),w.attr(Li(),null)};u.serializer.addTempAttr(Pa()),u.serializer.addAttributeFilter(h,w=>{for(const S of w)p(S).each(_=>{!1===_.persistent&&("span"===S.name?S.unwrap():y(S))})})})(n,o);const s=((u,m)=>{const h=aa({}),p=()=>({listeners:[],previous:Po()}),y=(N,A)=>{w(N,$=>(A($),$))},w=(N,A)=>{const $=h.get(),D=A(Uo($,N).getOrThunk(p));$[N]=D,h.set($)},S=(N,A)=>{Je(um(u,N),$=>{A?ls($,Pa(),"true"):Bo($,Pa())})},_=Oa(()=>{const N=Hs(m.getNames());Je(N,A=>{w(A,$=>{const D=$.previous.get();return sg(u,U.some(A)).fold(()=>{D.each(L=>{var j;y(j=A,q=>{Je(q.listeners,ee=>ee(!1,j))}),$.previous.clear(),S(L,!1)})},({uid:L,name:j,elements:q})=>{var ee,Q,de;kc(D,L)||(D.each(ee=>S(ee,!1)),Q=L,de=q,y(ee=j,Oe=>{Je(Oe.listeners,Re=>Re(!0,ee,{uid:Q,nodes:ln(de,Ne=>Ne.dom)}))}),$.previous.set(L),S(L,!0))}),{previous:$.previous,listeners:$.listeners}})})},30);return u.on("remove",()=>{_.cancel()}),u.on("NodeChange",()=>{_.throttle()}),{addListener:(N,A)=>{w(N,$=>({previous:$.previous,listeners:$.listeners.concat([A])}))}}})(n,o),a=Zs("span"),i=u=>{Je(u,m=>{a(m)?Zl(m):(h=>{ka(h,oc()),Bo(h,`${Ii()}`),Bo(h,`${qu()}`),Bo(h,`${Pa()}`);const p=Bn(h,`${Li()}`).map(S=>S.split(",")).getOr([]),y=Bn(h,`${wu()}`).map(S=>S.split(",")).getOr([]);var w;Je(p,S=>Bo(h,S)),w=h,Je(y,S=>{ka(w,S)}),Bo(h,`${wu()}`),Bo(h,`${Li()}`)})(m)})};return{register:(u,m)=>{o.register(u,m)},annotate:(u,m)=>{o.lookup(u).each(h=>{var p,y,w,S;y=u,w=h,S=m,(p=n).undoManager.transact(()=>{const _=p.selection,N=_.getRng(),A=Bd(p).length>0,$=sh("mce-annotation");if(N.collapsed&&!A&&((D,L)=>{const j=hh(D.dom,L,[{inline:"span"}]);L.setStart(j.startContainer,j.startOffset),L.setEnd(j.endContainer,j.endOffset),D.selection.setRng(L)})(p,N),_.getRng().collapsed&&!A){const D=vg(p.getDoc(),$,S,y,w.decorate);_i(D,jo),_.getRng().insertNode(D.dom),_.select(D.dom)}else Zv(_,!1,()=>{Lp(p,D=>{((n,o,s,a,i,u)=>{const m=[],h=vg(n.getDoc(),s,u,a,i),p=Po(),y=()=>{p.clear()},w=_=>{Je(_,S)},S=_=>{switch(N=n,A=_,$="span",D=ce(_),Ts(A).fold(()=>"skipping",L=>{return"br"===D||Eo(j=A)&&sa(j)===Pn?"valid":(j=>an(j)&&Ns(j,oc()))(A)?"existing":ou(A.dom)?"caret":lt(rC,j=>ot(A,j))?"valid-block":rf(N,$,D)&&rf(N,ce(L),$)?"valid":"invalid-child";var j})){case"invalid-child":{y();const N=Na(_);w(N),y();break}case"valid-block":y(),LT(_,s,u,a,i,!0);break;case"valid":{const N=p.get().getOrThunk(()=>{const A=kr(h);return m.push(A),p.set(A),A});Lu(_,N);break}}var N,A,$,D};Tm(n.dom,o,_=>{y(),(N=>{const A=ln(N,F);w(A)})(_)})})(p,D,$,y,w.decorate,S)})})})})},annotationChanged:(u,m)=>{s.addListener(u,m)},remove:u=>{sg(n,U.some(u)).each(({elements:m})=>{const h=n.selection.getBookmark();i(m),n.selection.moveToBookmark(h)})},removeAll:u=>{const m=n.selection.getBookmark();Ke(gw(n,u),(h,p)=>{i(h)}),n.selection.moveToBookmark(m)},getAll:u=>{const m=gw(n,u);return Sn(m,h=>ln(h,p=>p.dom))}}},zp=n=>({getBookmark:De(PT,n),moveToBookmark:De(FT,n)});zp.isBookmarkNode=Wi;const Qv=(n,o,s)=>!s.collapsed&&lt(s.getClientRects(),a=>{return m=o,(u=n)>=(i=a).left&&u<=i.right&&m>=i.top&&m<=i.bottom;var i,u,m}),Pb=(n,o,s)=>{n.dispatch(o,s)},km=(n,o,s,a)=>{n.dispatch("FormatApply",{format:o,node:s,vars:a})},ey=(n,o,s,a)=>{n.dispatch("FormatRemove",{format:o,node:s,vars:a})},cC=(n,o)=>n.dispatch("SetContent",o),iC=(n,o)=>n.dispatch("GetContent",o),lC=(n,o)=>n.dispatch("PastePlainTextToggle",{state:o}),qt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:n=>n.shiftKey||n.ctrlKey||n.altKey||qt.metaKeyPressed(n),metaKeyPressed:n=>wo.os.isMacOS()||wo.os.isiOS()?n.metaKey:n.ctrlKey&&!n.altKey},Fd="data-mce-selected",Up=Math.abs,fh=Math.round,Fb={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ed=(n,o)=>{const s=o.dom,a=o.getDoc(),i=document,u=o.getBody();let m,h,p,y,w,S,_,N,A,$,D,L,j,q,ee;const Q=Jt=>Le(Jt)&&(M(Jt)||s.is(Jt,"figure.image")),de=Jt=>Tt(Jt)||s.hasClass(Jt,"mce-preview-object"),Oe=Jt=>{const $n=Jt.target;((lo,ke)=>{if("longpress"===(_e=lo).type||0===_e.type.indexOf("touch")){const _e=lo.touches[0];return Q(lo.target)&&!Qv(_e.clientX,_e.clientY,ke)}var _e;return Q(lo.target)&&!Qv(lo.clientX,lo.clientY,ke)})(Jt,o.selection.getRng())&&!Jt.isDefaultPrevented()&&o.selection.select($n)},Re=Jt=>s.hasClass(Jt,"mce-preview-object")&&Le(Jt.firstElementChild)?[Jt,Jt.firstElementChild]:s.is(Jt,"figure.image")?[Jt.querySelector("img")]:[Jt],Ne=Jt=>{const $n=hb(o);return!!$n&&"false"!==Jt.getAttribute("data-mce-resize")&&Jt!==o.getBody()&&(s.hasClass(Jt,"mce-preview-object")&&Le(Jt.firstElementChild)?ot(F(Jt.firstElementChild),$n):ot(F(Jt),$n))},We=(Jt,$n,lo)=>{if(Le(lo)){const ke=Re(Jt);Je(ke,_e=>{_e.style[$n]||!o.schema.isValid(_e.nodeName.toLowerCase(),$n)?s.setStyle(_e,$n,lo):s.setAttrib(_e,$n,""+lo)})}},we=(Jt,$n,lo)=>{We(Jt,"width",$n),We(Jt,"height",lo)},Ee=Jt=>{let $n,lo,ke,_e,nt;$n=Jt.screenX-S,lo=Jt.screenY-_,L=$n*y[2]+N,j=lo*y[3]+A,L=L<5?5:L,j=j<5?5:j,ke=(Q(m)||de(m))&&!1!==wT(o)?!qt.modifierPressed(Jt):qt.modifierPressed(Jt),ke&&(Up($n)>Up(lo)?(j=fh(L*$),L=fh(j/$)):(L=fh(j/$),j=fh(L*$))),we(h,L,j),_e=y.startPos.x+$n,nt=y.startPos.y+lo,_e=_e>0?_e:0,nt=nt>0?nt:0,s.setStyles(p,{left:_e,top:nt,display:"block"}),p.innerHTML=L+" &times; "+j,y[2]<0&&h.clientWidth<=L&&s.setStyle(h,"left",void 0+(N-L)),y[3]<0&&h.clientHeight<=j&&s.setStyle(h,"top",void 0+(A-j)),$n=u.scrollWidth-q,lo=u.scrollHeight-ee,$n+lo!==0&&s.setStyles(p,{left:_e-$n,top:nt-lo}),D||(o.dispatch("ObjectResizeStart",{target:m,width:N,height:A,origin:"corner-"+y.name}),D=!0)},ze=()=>{const Jt=D;D=!1,Jt&&(We(m,"width",L),We(m,"height",j)),s.unbind(a,"mousemove",Ee),s.unbind(a,"mouseup",ze),i!==a&&(s.unbind(i,"mousemove",Ee),s.unbind(i,"mouseup",ze)),s.remove(h),s.remove(p),s.remove(w),ct(m),Jt&&(o.dispatch("ObjectResized",{target:m,width:L,height:j,origin:"corner-"+y.name}),s.setAttrib(m,"style",s.getAttrib(m,"style"))),o.nodeChanged()},ct=Jt=>{ho();const $n=s.getPos(Jt,u),lo=$n.x,ke=$n.y,_e=Jt.getBoundingClientRect(),nt=_e.width||_e.right-_e.left,mt=_e.height||_e.bottom-_e.top;m!==Jt&&(kt(),m=Jt,L=j=0);const Fe=o.dispatch("ObjectSelected",{target:Jt});Ne(Jt)&&!Fe.isDefaultPrevented()?Ke(Fb,(xt,Nt)=>{let Bt=s.get("mceResizeHandle"+Nt);Bt&&s.remove(Bt),Bt=s.add(u,"div",{id:"mceResizeHandle"+Nt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Nt+"-resize; margin:0; padding:0"}),s.bind(Bt,"mousedown",Vt=>{Vt.stopImmediatePropagation(),Vt.preventDefault(),(Pt=>{const Zn=Re(m)[0];var xs;S=Pt.screenX,_=Pt.screenY,N=Zn.clientWidth,A=Zn.clientHeight,$=A/N,y=xt,y.name=Nt,y.startPos={x:nt*xt[0]+lo,y:mt*xt[1]+ke},q=u.scrollWidth,ee=u.scrollHeight,w=s.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(w,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),h=de(xs=m)?s.create("img",{src:wo.transparentSrc}):xs.cloneNode(!0),s.addClass(h,"mce-clonedresizable"),s.setAttrib(h,"data-mce-bogus","all"),h.contentEditable="false",s.setStyles(h,{left:lo,top:ke,margin:0}),we(h,nt,mt),h.removeAttribute(Fd),u.appendChild(h),s.bind(a,"mousemove",Ee),s.bind(a,"mouseup",ze),i!==a&&(s.bind(i,"mousemove",Ee),s.bind(i,"mouseup",ze)),p=s.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},N+" &times; "+A)})(Vt)}),xt.elm=Bt,s.setStyles(Bt,{left:nt*xt[0]+lo-Bt.offsetWidth/2,top:mt*xt[1]+ke-Bt.offsetHeight/2})}):kt(!1)},Yt=ds(ct,0),kt=(Jt=!0)=>{Yt.cancel(),ho(),m&&Jt&&m.removeAttribute(Fd),Ke(Fb,($n,lo)=>{const ke=s.get("mceResizeHandle"+lo);ke&&(s.unbind(ke),s.remove(ke))})},Cn=(Jt,$n)=>s.isChildOf(Jt,$n),dn=Jt=>{if(D||o.removed||o.composing)return;const $n="mousedown"===Jt.type?Jt.target:n.getNode(),lo=Ba(F($n),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(_e=>_e.dom).filter(_e=>s.isEditable(_e.parentElement)).getOrUndefined(),ke=Le(lo)?s.getAttrib(lo,Fd,"1"):"1";if(Je(s.select(`img[${Fd}],hr[${Fd}]`),_e=>{_e.removeAttribute(Fd)}),Le(lo)&&Cn(lo,u)&&o.hasFocus()){bo();const _e=n.getStart(!0);if(Cn(_e,lo)&&Cn(n.getEnd(!0),lo))return s.setAttrib(lo,Fd,ke),void Yt.throttle(lo)}kt()},ho=()=>{Ke(Fb,Jt=>{Jt.elm&&(s.unbind(Jt.elm),delete Jt.elm)})},bo=()=>{try{o.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return o.on("init",()=>{bo(),o.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",dn),o.on("keyup compositionend",Jt=>{m&&"TABLE"===m.nodeName&&dn(Jt)}),o.on("hide blur",kt),o.on("contextmenu longpress",Oe,!0)}),o.on("remove",ho),{isResizable:Ne,showResizeRect:ct,hideResizeRect:kt,updateResizeRect:dn,destroy:()=>{Yt.cancel(),m=h=w=null}}},Zp=(n,o,s)=>{const a=n.document.createRange();var i,u;return i=a,o.fold(u=>{i.setStartBefore(u.dom)},(u,m)=>{i.setStart(u.dom,m)},u=>{i.setStartAfter(u.dom)}),u=a,s.fold(h=>{u.setEndBefore(h.dom)},(h,p)=>{u.setEnd(h.dom,p)},h=>{u.setEndAfter(h.dom)}),a},$b=(n,o,s,a,i)=>{const u=n.document.createRange();return u.setStart(o.dom,s),u.setEnd(a.dom,i),u},ul=Rd([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Em=(n,o,s)=>o(F(s.startContainer),s.startOffset,F(s.endContainer),s.endOffset),Ib=(n,o,s,a)=>({start:n,soffset:o,finish:s,foffset:a}),uC=document.caretPositionFromPoint?(n,o,s)=>{var a,i;return U.from(null===(i=(a=n.dom).caretPositionFromPoint)||void 0===i?void 0:i.call(a,o,s)).bind(u=>{if(null===u.offsetNode)return U.none();const m=n.dom.createRange();return m.setStart(u.offsetNode,u.offset),m.collapse(),U.some(m)})}:document.caretRangeFromPoint?(n,o,s)=>{var a,i;return U.from(null===(i=(a=n.dom).caretRangeFromPoint)||void 0===i?void 0:i.call(a,o,s))}:U.none,ty=Rd([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),_m={before:ty.before,on:ty.on,after:ty.after,cata:(n,o,s,a)=>n.fold(o,s,a),getStart:n=>n.fold(Se,Se,Se)},Wp=Rd([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),af={domRange:Wp.domRange,relative:Wp.relative,exact:Wp.exact,exactFromRange:n=>Wp.exact(n.start,n.soffset,n.finish,n.foffset),getWin:n=>{const o=n.match({domRange:a=>F(a.startContainer),relative:(a,i)=>_m.getStart(a),exact:(a,i,u,m)=>a});return Sr(o)},range:Ib},Lb=(n,o)=>{const s=ce(n);return"input"===s?_m.after(n):Be(["br","img"],s)?0===o?_m.before(n):_m.after(n):_m.on(n,o)},dC=(n,o)=>{const s=n.fold(_m.before,Lb,_m.after),a=o.fold(_m.before,Lb,_m.after);return af.relative(s,a)},ny=(n,o,s,a)=>{const i=Lb(n,o),u=Lb(s,a);return af.relative(i,u)},Hb=(n,o)=>{const s=(o||document).createDocumentFragment();return Je(n,a=>{s.appendChild(a.dom)}),F(s)},mC=(n,o,s)=>{return(a=Sr(F(s)).dom,i=n,u=o,((m,h,p)=>{const y=F(m.document);return uC(y,h,p).map(w=>Ib(F(w.startContainer),w.startOffset,F(w.endContainer),w.endOffset))})(a,i,u)).map(a=>{const i=s.createRange();return i.setStart(a.start.dom,a.soffset),i.setEnd(a.finish.dom,a.foffset),i}).getOrUndefined();var a,i,u},oy=(n,o)=>Le(n)&&Le(o)&&n.startContainer===o.startContainer&&n.startOffset===o.startOffset&&n.endContainer===o.endContainer&&n.endOffset===o.endOffset,sy=(n,o,s)=>null!==((a,i,u)=>{let m=a;for(;m&&m!==i;){if(u(m))return m;m=m.parentNode}return null})(n,o,s),ry=(n,o,s)=>sy(n,o,a=>a.nodeName===s),gC=(n,o)=>mi(n)&&!sy(n,o,ou),hC=(n,o,s)=>{const a=o.parentNode;if(a){const i=new ir(o,n.getParent(a,n.isBlock)||n.getRoot());let u;for(;u=i[s?"prev":"next"]();)if(Tr(u))return!0}return!1},ay=(n,o,s,a,i)=>{const u=n.getRoot(),m=n.schema.getNonEmptyElements(),h=i.parentNode;let p,y;if(!h)return U.none();const w=n.getParent(h,n.isBlock)||u;if(a&&Tr(i)&&o&&n.isEmpty(w))return U.some(Xe(h,n.nodeIndex(i)));const S=new ir(i,w);for(;y=S[a?"prev":"next"]();){if("false"===n.getContentEditableParent(y)||gC(y,u))return U.none();if(yt(y)&&y.data.length>0)return ry(y,u,"A")?U.none():U.some(Xe(y,a?y.data.length:0));if(n.isBlock(y)||m[y.nodeName.toLowerCase()])return U.none();p=y}return _s(p)?U.none():s&&p?U.some(Xe(p,0)):U.none()},jp=(n,o,s,a)=>{const i=n.getRoot();let u,m=!1,h=s?a.startContainer:a.endContainer,p=s?a.startOffset:a.endOffset;const y=Qt(h)&&p===h.childNodes.length,w=n.schema.getNonEmptyElements();let S=s;if(mi(h))return U.none();if(Qt(h)&&p>h.childNodes.length-1&&(S=!1),oa(h)&&(h=i,p=0),h===i){if(S&&(u=h.childNodes[p>0?p-1:0],u)&&(mi(u)||w[u.nodeName]||Gl(u)))return U.none();if(h.hasChildNodes()){if(p=Math.min(!S&&p>0?p-1:p,h.childNodes.length-1),h=h.childNodes[p],p=yt(h)&&y?h.data.length:0,!o&&h===i.lastChild&&Gl(h)||((_,N)=>{let A=N;for(;A&&A!==_;){if(K(A))return!0;A=A.parentNode}return!1})(i,h)||mi(h))return U.none();if(h.hasChildNodes()&&!Gl(h)){u=h;const _=new ir(h,i);do{if(K(u)||mi(u)){m=!1;break}if(yt(u)&&u.data.length>0){p=S?0:u.data.length,h=u,m=!0;break}if(w[u.nodeName.toLowerCase()]&&!Ce(u)){p=n.nodeIndex(u),h=u.parentNode,S||p++,m=!0;break}}while(u=S?_.next():_.prev())}}}return o&&(yt(h)&&0===p&&ay(n,y,o,!0,h).each(_=>{h=_.container(),p=_.offset(),m=!0}),Qt(h)&&(u=h.childNodes[p],u||(u=h.childNodes[p-1]),!u||!Tr(u)||"A"===(null===(A=u.previousSibling)||void 0===A?void 0:A.nodeName)||hC(n,u,!1)||hC(n,u,!0)||ay(n,y,o,!0,u).each(_=>{h=_.container(),p=_.offset(),m=!0}))),S&&!o&&yt(h)&&p===h.data.length&&ay(n,y,o,!1,h).each(_=>{h=_.container(),p=_.offset(),m=!0}),m&&h?U.some(Xe(h,p)):U.none();var A},Gp=(n,o)=>{const s=o.collapsed,a=o.cloneRange(),i=Xe.fromRangeStart(o);return jp(n,s,!0,a).each(u=>{s&&Xe.isAbove(i,u)||a.setStart(u.container(),u.offset())}),s||jp(n,s,!1,a).each(u=>{a.setEnd(u.container(),u.offset())}),s&&a.collapse(!0),oy(o,a)?U.none():U.some(a)},qp=(n,o)=>n.splitText(o),yg=n=>{let o=n.startContainer,s=n.startOffset,a=n.endContainer,i=n.endOffset;if(o===a&&yt(o)){if(s>0&&s<o.data.length)if(a=qp(o,s),o=a.previousSibling,i>s){i-=s;const u=qp(a,i).previousSibling;o=a=u,i=u.data.length,s=0}else i=0}else if(yt(o)&&s>0&&s<o.data.length&&(o=qp(o,s),s=0),yt(a)&&i>0&&i<a.data.length){const u=qp(a,i).previousSibling;a=u,i=u.data.length}return{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},$d=n=>({walk:(o,s)=>Tm(n,o,s),split:yg,expand:(o,s={type:"word"})=>{if("word"===s.type){const a=hh(n,o,[{inline:"span"}]),i=n.createRng();return i.setStart(a.startContainer,a.startOffset),i.setEnd(a.endContainer,a.endOffset),i}return o},normalize:o=>Gp(n,o).fold(yn,s=>(o.setStart(s.startContainer,s.startOffset),o.setEnd(s.endContainer,s.endOffset),!0))});$d.compareRanges=oy,$d.getCaretRangeFromPoint=mC,$d.getSelectedNode=rh,$d.getNode=al;const cy=((n,o)=>{const s=i=>{const u=(m=>{const h=m.dom;return ki(m)?h.getBoundingClientRect().height:h.offsetHeight})(i);if(u<=0||null===u){const m=Ei(i,n);return parseFloat(m)||0}return u},a=(i,u)=>fo(u,(m,h)=>{const p=Ei(i,h),y=void 0===p?0:parseInt(p,10);return isNaN(y)?m:m+y},0);return{set:(i,u)=>{if(!Vo(u)&&!u.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+u);const m=i.dom;ui(m)&&(m.style[n]=u+"px")},get:s,getOuter:s,aggregate:a,max:(i,u,m)=>{const h=a(i,m);return u>h?u-h:0}}})("height"),iy=()=>F(document),ly=(n,o)=>n.view(o).fold(qe([]),s=>{const a=n.owner(s),i=ly(n,a);return[s].concat(i)});var fC=Object.freeze({__proto__:null,view:n=>{var o;return(n.dom===document?U.none():U.from(null===(o=n.dom.defaultView)||void 0===o?void 0:o.frameElement)).map(F)},owner:n=>po(n)});const uy=n=>"textarea"===ce(n),dy=(n,o)=>{const s=(i=>{const u=i.dom.ownerDocument,m=u.body,h=u.defaultView,p=u.documentElement;if(m===i.dom)return Wl(m.offsetLeft,m.offsetTop);const y=wd(h?.pageYOffset,p.scrollTop),w=wd(h?.pageXOffset,p.scrollLeft),S=wd(p.clientTop,m.clientTop),_=wd(p.clientLeft,m.clientLeft);return Cd(i).translate(w-_,y-S)})(n),a=cy.get(n);return{element:n,bottom:s.top+a,height:a,pos:s,cleanup:o}},cf=(n,o,s,a)=>{zT(n,(i,u)=>my(n,o,s,a),s)},pC=(n,o,s,a,i)=>{const u={elm:a.element.dom,alignToTop:i};n.dispatch("ScrollIntoView",u).isDefaultPrevented()||(s(n,o,Ug(o).top,a,i),n.dispatch("AfterScrollIntoView",u))},my=(n,o,s,a)=>{F(n.getBody());const u=F(n.getDoc()),m=((h,p)=>{const y=((S,_)=>{const N=Na(S);if(0===N.length||uy(S))return{element:S,offset:_};if(_<N.length&&!uy(N[_]))return{element:N[_],offset:0};{const A=N[N.length-1];return uy(A)?{element:S,offset:_}:"img"===ce(A)?{element:A,offset:1}:Eo(A)?{element:A,offset:sa(A).length}:{element:A,offset:Na(A).length}}})(h,p),w=Ws('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Ya(y.element,w),dy(w,()=>gr(w))})(F(s.startContainer),s.startOffset);pC(n,u,o,m,a),m.cleanup()},bC=(n,o,s,a)=>{const i=F(n.getDoc());pC(n,i,s,dy(F(o),gt),a)},zT=(n,o,s)=>{const a=s.startContainer,i=s.startOffset,u=s.endContainer,m=s.endOffset;o(F(a),F(u));const h=n.dom.createRng();h.setStart(a,i),h.setEnd(u,m),n.selection.setRng(s)},gy=(n,o,s,a,i)=>{const u=o.pos;if(a)vu(u.left,u.top,i);else{const m=u.top-s+o.height;vu(-n.getBody().getBoundingClientRect().left,m,i)}},Vb=(n,o,s,a,i,u)=>{const m=a+s,h=i.pos.top,p=i.bottom,y=p-h>=a;h<s?gy(n,i,a,!1!==u,o):h>m?gy(n,i,a,y?!1!==u:!0===u,o):p>m&&!y&&gy(n,i,a,!0===u,o)},vC=(n,o,s,a,i)=>{const u=Sr(o).dom.innerHeight;Vb(n,o,s,u,a,i)},lf=(n,o,s,a,i)=>{const u=Sr(o).dom.innerHeight;Vb(n,o,s,u,a,i);const m=(p=>{const y=iy(),w=Ug(y),S=((A,$)=>{const D=$.owner(A);return ly($,D)})(p,fC),_=Cd(p),N=ro(S,(A,$)=>{const D=Cd($);return{left:A.left+D.left,top:A.top+D.top}},{left:0,top:0});return Wl(N.left+_.left+w.left,N.top+_.top+w.top)})(a.element),h=Ac(window);m.top<h.y?Uh(a.element,!1!==i):m.top>h.bottom&&Uh(a.element,!0===i)},UT=(n,o,s)=>cf(n,vC,o,s),ZT=(n,o,s)=>bC(n,o,vC,s),yC=(n,o,s)=>cf(n,lf,o,s),ci=(n,o,s)=>bC(n,o,lf,s),Kp=(n,o,s)=>{(n.inline?UT:yC)(n,o,s)},ph=n=>n.dom.focus(),wC=n=>{const o=Ir(n).dom;return n.dom===o.activeElement},bh=(n=iy())=>U.from(n.dom.activeElement).map(F),hy=(n,o)=>{const s=Eo(o)?sa(o).length:Na(o).length+1;return n>s?s:n<0?0:n},WT=n=>af.range(n.start,hy(n.soffset,n.start),n.finish,hy(n.foffset,n.finish)),CC=(n,o)=>!xd(o.dom)&&(bs(n,o)||cn(n,o)),fy=n=>o=>CC(n,o.start)&&CC(n,o.finish),zb=n=>af.range(F(n.startContainer),n.startOffset,F(n.endContainer),n.endOffset),xC=n=>{const o=document.createRange();try{return o.setStart(n.start.dom,n.soffset),o.setEnd(n.finish.dom,n.foffset),U.some(o)}catch{return U.none()}},Zc=n=>{const o=n.inline||wo.browser.isFirefox()?(s=F(n.getBody()),(a=>{const i=a.getSelection();return(i&&0!==i.rangeCount?U.from(i.getRangeAt(0)):U.none()).map(zb)})(Sr(s).dom).filter(fy(s))):U.none();var s;n.bookmark=o.isSome()?o:n.bookmark},vh=n=>(n.bookmark?n.bookmark:U.none()).bind(o=>{return s=F(n.getBody()),U.from(o).filter(fy(s)).map(WT);var s}).bind(xC),py={isEditorUIElement:n=>{const o=n.className.toString();return-1!==o.indexOf("tox-")||-1!==o.indexOf("mce-")}},su={setEditorTimeout:(n,o,s)=>{return Vo(i=s)||(i=0),setTimeout(()=>{n.removed||o()},i);var i},setEditorInterval:(n,o,s)=>{const a=(Vo(u=s)||(u=0),setInterval(()=>{n.removed?clearInterval(a):o()},u));var u;return a}};let yh;const Ub=vs.DOM,Yp=n=>{const o=n.classList;return void 0!==o&&(o.contains("tox-edit-area")||o.contains("tox-edit-area__iframe")||o.contains("mce-content-body"))},Zb=(n,o)=>{const s=xT(n);return null!==Ub.getParent(o,i=>{return Qt(u=i)&&py.isEditorUIElement(u)||!!s&&n.dom.is(i,s);var u})},wh=n=>{try{const o=Ir(F(n.getElement()));return bh(o).fold(()=>document.body,s=>s.dom)}catch{return document.body}},rR=(n,o)=>{const s=o.editor;(i=>{const u=ds(()=>{Zc(i)},0);i.on("init",()=>{var m,y;i.inline&&((m,h)=>{const p=()=>{h.throttle()};vs.DOM.bind(document,"mouseup",p),m.on("remove",()=>{vs.DOM.unbind(document,"mouseup",p)})})(i,u),y=u,(m=i).on("mouseup touchend",w=>{y.throttle()}),m.on("keyup NodeChange AfterSetSelectionRange",p=>{(y=>"nodechange"===y.type&&y.selectionChange)(p)||Zc(m)})}),i.on("remove",()=>{u.cancel()})})(s);const a=(i,u)=>{Lw(i)&&!0!==i.inline&&u(F(i.getContainer()),"tox-edit-focus")};s.on("focusin",()=>{const i=n.focusedEditor;Yp(wh(s))&&a(s,Xt),i!==s&&(i&&i.dispatch("blur",{focusedEditor:s}),n.setActive(s),n.focusedEditor=s,s.dispatch("focus",{blurredEditor:i}),s.focus(!0))}),s.on("focusout",()=>{su.setEditorTimeout(s,()=>{const i=n.focusedEditor;Yp(wh(s))&&i===s||a(s,ka),Zb(s,wh(s))||i!==s||(s.dispatch("blur",{focusedEditor:null}),n.focusedEditor=null)})}),yh||(yh=i=>{const u=n.activeEditor;u&&Vg(i).each(m=>{m.ownerDocument===document&&(m===document.body||Zb(u,m)||n.focusedEditor!==u||(u.dispatch("blur",{focusedEditor:null}),n.focusedEditor=null))})},Ub.bind(document,"focusin",yh))},SC=(n,o)=>{n.focusedEditor===o.editor&&(n.focusedEditor=null),!n.activeEditor&&yh&&(Ub.unbind(document,"focusin",yh),yh=null)},by=(n,o)=>{var s,a,i;(s=F(n.getBody()),a=o,(i=a,i.collapsed?U.from(al(i.startContainer,i.startOffset)).map(F):U.none()).bind(i=>W1(i)?U.some(i):bs(s,i)?U.none():U.some(s))).bind(s=>Mc(s.dom)).fold(()=>{n.selection.normalize()},s=>n.selection.setRng(s.toRange()))},Om=n=>{if(n.setActive)try{n.setActive()}catch{n.focus()}else n.focus()},Ch=n=>{return n.inline?(o=>{const s=o.getBody();return s&&(a=F(s),wC(a)||(i=a,bh(Ir(i)).filter(u=>i.dom.contains(u.dom))).isSome());var a,i})(n):Le((o=n).iframeElement)&&wC(F(o.iframeElement));var o},Xp=n=>n.editorManager.setActive(n),Wb=(n,o,s,a,i)=>{const m=s?o.startOffset:o.endOffset;return U.from(s?o.startContainer:o.endContainer).map(F).map(h=>a&&o.collapsed?h:js(h,i(h,m)).getOr(h)).bind(h=>an(h)?U.some(h):Ts(h).filter(an)).map(h=>h.dom).getOr(n)},Jp=(n,o,s=!1)=>Wb(n,o,!0,s,(a,i)=>Math.min(jm(a),i)),vy=(n,o,s=!1)=>Wb(n,o,!1,s,(a,i)=>i>0?i-1:i),xh=(n,o)=>{const s=n;for(;n&&yt(n)&&0===n.length;)n=o?n.nextSibling:n.previousSibling;return n||s},Id=(n,o)=>ln(o,s=>{const a=n.dispatch("GetSelectionRange",{range:s});return a.range!==s?a.range:s}),TC=["img","br"],jb=n=>{return Oi(n).filter(s=>0!==s.trim().length||s.indexOf(jo)>-1).isSome()||Be(TC,ce(n))||vt(s=n)&&"false"===zr(s,"contenteditable");var s},kC="[data-mce-autocompleter]",Gb=n=>Ul(n,kC),qb={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Qp=(n,o,s)=>{const a=s?"lastChild":"firstChild",i=s?"prev":"next";if(n[a])return n[a];if(n!==o){let u=n[i];if(u)return u;for(let m=n.parent;m&&m!==o;m=m.parent)if(u=m[i],u)return u}},EC=n=>{var o;const s=null!==(o=n.value)&&void 0!==o?o:"";if(!Mi(s))return!1;const a=n.parent;return!a||"span"===a.name&&!a.attr("style")||!/^[ ]+$/.test(s)},Kb=n=>{const o="a"===n.name&&!n.attr("href")&&n.attr("id");return n.attr("name")||n.attr("id")&&!n.firstChild||n.attr("data-mce-bookmark")||o};class vi{static create(o,s){const a=new vi(o,qb[o]||1);return s&&Ke(s,(i,u)=>{a.attr(u,i)}),a}constructor(o,s){this.name=o,this.type=s,1===s&&(this.attributes=[],this.attributes.map={})}replace(o){const s=this;return o.parent&&o.remove(),s.insert(o,s),s.remove(),s}attr(o,s){const a=this;if(!zt(o))return Le(o)&&Ke(o,(u,m)=>{a.attr(m,u)}),a;const i=a.attributes;if(i){if(void 0!==s){if(null===s){if(o in i.map){delete i.map[o];let u=i.length;for(;u--;)if(i[u].name===o)return i.splice(u,1),a}return a}if(o in i.map){let u=i.length;for(;u--;)if(i[u].name===o){i[u].value=s;break}}else i.push({name:o,value:s});return i.map[o]=s,a}return i.map[o]}}clone(){const o=this,s=new vi(o.name,o.type),a=o.attributes;if(a){const i=[];i.map={};for(let u=0,m=a.length;u<m;u++){const h=a[u];"id"!==h.name&&(i[i.length]={name:h.name,value:h.value},i.map[h.name]=h.value)}s.attributes=i}return s.value=o.value,s}wrap(o){const s=this;return s.parent&&(s.parent.insert(o,s),o.append(s)),s}unwrap(){const o=this;for(let s=o.firstChild;s;){const a=s.next;o.insert(s,o,!0),s=a}o.remove()}remove(){const o=this,s=o.parent,a=o.next,i=o.prev;return s&&(s.firstChild===o?(s.firstChild=a,a&&(a.prev=null)):i&&(i.next=a),s.lastChild===o?(s.lastChild=i,i&&(i.next=null)):a&&(a.prev=i),o.parent=o.next=o.prev=null),o}append(o){const s=this;o.parent&&o.remove();const a=s.lastChild;return a?(a.next=o,o.prev=a,s.lastChild=o):s.lastChild=s.firstChild=o,o.parent=s,o}insert(o,s,a){o.parent&&o.remove();const i=s.parent||this;return a?(s===i.firstChild?i.firstChild=o:s.prev&&(s.prev.next=o),o.prev=s.prev,o.next=s,s.prev=o):(s===i.lastChild?i.lastChild=o:s.next&&(s.next.prev=o),o.next=s.next,o.prev=s,s.next=o),o.parent=i,o}getAll(o){const s=this,a=[];for(let i=s.firstChild;i;i=Qp(i,s))i.name===o&&a.push(i);return a}children(){const o=[];for(let s=this.firstChild;s;s=s.next)o.push(s);return o}empty(){const o=this;if(o.firstChild){const s=[];for(let i=o.firstChild;i;i=Qp(i,o))s.push(i);let a=s.length;for(;a--;){const i=s[a];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return o.firstChild=o.lastChild=null,o}isEmpty(o,s={},a){var i;const u=this;let m=u.firstChild;if(Kb(u))return!1;if(m)do{if(1===m.type){if(m.attr("data-mce-bogus"))continue;if(o[m.name]||Kb(m))return!1}if(8===m.type||3===m.type&&!EC(m)||3===m.type&&m.parent&&s[m.parent.name]&&Mi(null!==(i=m.value)&&void 0!==i?i:"")||a&&a(m))return!1}while(m=Qp(m,u));return!0}walk(o){return Qp(this,null,o)}}const _C=(n,o,s=0)=>{const a=n.toLowerCase();if(-1!==a.indexOf("[if ",s)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(a.substr(s))){const i=a.indexOf("[endif]",s);return a.indexOf(">",i)}if(o){const i=a.indexOf(">",s);return-1!==i?i:a.length}{const i=/--!?>/g;i.lastIndex=s;const u=i.exec(n);return u?u.index+u[0].length:a.length}},OC=(n,o,s)=>{const a=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,i=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=n.getVoidElements();let m=1,h=s;for(;0!==m;)for(a.lastIndex=h;;){const p=a.exec(o);if(null===p)return h;if("!"===p[1]){h=ms(p[2],"--")?_C(o,!1,p.index+3):_C(o,!0,p.index+1);break}{i.lastIndex=a.lastIndex;const y=i.exec(o);if(_t(y)||y.index!==a.lastIndex)continue;"/"===p[1]?m-=1:rt(u,p[2])||(m+=1),h=a.lastIndex+y[0].length;break}}return h},yy=(n,o)=>{const s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,a=n.schema;let i=((h,p)=>{const y=new RegExp(["\\s?("+h.join("|")+')="[^"]+"'].join("|"),"gi");return p.replace(y,"")})(n.getTempAttrs(),o);const u=a.getVoidElements();let m;for(;m=s.exec(i);){const h=s.lastIndex,p=m[0].length;let y;y=u[m[1]]?h:OC(a,i,h),i=i.substring(0,h-p)+i.substring(y),s.lastIndex=h-p}return ql(i)},Yb=yy,wy=n=>{const o=Ea(n,"[data-mce-bogus]");Je(o,s=>{"all"===zr(s,"data-mce-bogus")?gr(s):Ai(s)?(Ya(s,fc("\ufeff")),gr(s)):Zl(s)})},Cy=n=>{const o=Ea(n,"input");Je(o,s=>{Bo(s,"name")})},AC=wt.makeMap,RC=n=>{const o=[],s=(n=n||{}).indent,a=AC(n.indent_before||""),i=AC(n.indent_after||""),u=Bi.getEncodeFunc(n.entity_encoding||"raw",n.entities),m="xhtml"!==n.element_format;return{start:(h,p,y)=>{if(s&&a[h]&&o.length>0){const w=o[o.length-1];w.length>0&&"\n"!==w&&o.push("\n")}if(o.push("<",h),p)for(let w=0,S=p.length;w<S;w++){const _=p[w];o.push(" ",_.name,'="',u(_.value,!0),'"')}if(o[o.length]=!y||m?">":" />",y&&s&&i[h]&&o.length>0){const w=o[o.length-1];w.length>0&&"\n"!==w&&o.push("\n")}},end:h=>{let p;o.push("</",h,">"),s&&i[h]&&o.length>0&&(p=o[o.length-1],p.length>0&&"\n"!==p&&o.push("\n"))},text:(h,p)=>{h.length>0&&(o[o.length]=p?h:u(h))},cdata:h=>{o.push("<![CDATA[",h,"]]>")},comment:h=>{o.push("\x3c!--",h,"--\x3e")},pi:(h,p)=>{p?o.push("<?",h," ",u(p),"?>"):o.push("<?",h,"?>"),s&&o.push("\n")},doctype:h=>{o.push("<!DOCTYPE",h,">",s?"\n":"")},reset:()=>{o.length=0},getContent:()=>o.join("").replace(/\n$/,"")}},td=(n={},o=ju())=>{const s=RC(n);return n.validate=!("validate"in n)||n.validate,{serialize:a=>{const i=n.validate,u={3:h=>{var p;s.text(null!==(p=h.value)&&void 0!==p?p:"",h.raw)},8:h=>{var p;s.comment(null!==(p=h.value)&&void 0!==p?p:"")},7:h=>{s.pi(h.name,h.value)},10:h=>{var p;s.doctype(null!==(p=h.value)&&void 0!==p?p:"")},4:h=>{var p;s.cdata(null!==(p=h.value)&&void 0!==p?p:"")},11:h=>{let p=h;if(p=p.firstChild)do{m(p)}while(p=p.next)}};s.reset();const m=h=>{var p;const y=u[h.type];if(y)y(h);else{const w=h.name,S=w in o.getVoidElements();let _=h.attributes;if(i&&_&&_.length>1){const N=[];N.map={};const A=o.getElementRule(h.name);if(A){for(let $=0,D=A.attributesOrder.length;$<D;$++){const L=A.attributesOrder[$];if(L in _.map){const j=_.map[L];N.map[L]=j,N.push({name:L,value:j})}}for(let $=0,D=_.length;$<D;$++){const L=_[$].name;if(!(L in N.map)){const j=_.map[L];N.map[L]=j,N.push({name:L,value:j})}}_=N}}if(s.start(w,_,S),!S){let N=h.firstChild;if(N){"pre"!==w&&"textarea"!==w||3!==N.type||"\n"!==(null===(p=N.value)||void 0===p?void 0:p[0])||s.text("\n",!0);do{m(N)}while(N=N.next)}s.end(w)}}};return 1!==a.type||n.inner?3===a.type?u[3](a):u[11](a):m(a),s.getContent()}}},xy=new Set;Je(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{xy.add(n)});const qT=["font","text-decoration","text-emphasis"],KT=(n,o)=>Vs(n.parseStyle(n.getAttrib(o,"style"))),n4=(n,o,s)=>{const a=KT(n,o),i=KT(n,s),u=m=>{var h,p;const y=null!==(h=n.getStyle(o,m))&&void 0!==h?h:"",w=null!==(p=n.getStyle(s,m))&&void 0!==p?p:"";return Kt(y)&&Kt(w)&&y!==w};return lt(a,m=>{const h=p=>lt(p,y=>y===m);if(!h(i)&&h(qT)){const p=Ht(i,y=>lt(qT,w=>ms(y,w)));return lt(p,u)}return u(m)})},uf=(n,o,s)=>U.from(s.container()).filter(yt).exists(a=>{const i=n?0:-1;return o(a.data.charAt(s.offset()+i))}),Sy=De(uf,!0,Et),Nc=De(uf,!1,Et),Ty=n=>{const o=n.container();return yt(o)&&(0===o.data.length||rm(o.data)&&zp.isBookmarkNode(o.parentNode))},Bl=(n,o)=>s=>rc(n?0:-1,s).filter(o).isSome(),wg=n=>M(n)&&"block"===Ei(F(n),"display"),ky=n=>{return K(n)&&!(Qt(o=n)&&"all"===o.getAttribute("data-mce-bogus"));var o},Ey=Bl(!0,wg),DC=Bl(!1,wg),e1=Bl(!0,Tt),t1=Bl(!1,Tt),n1=Bl(!0,Gl),nd=Bl(!1,Gl),Ld=Bl(!0,ky),Am=Bl(!1,ky),Hd=(n,o)=>{return i=yn,bs(a=o,s=n)?_c(s,u=>i(u)||cn(u,a)).slice(0,-1):[];var s,a,i},Vd=(n,o)=>[n].concat(Hd(n,o)),Cg=(n,o,s)=>pi(n,o,s,Ty),df=(n,o)=>En(Vd(F(o.container()),n),ti),Xb=(n,o,s)=>Cg(n,o.dom,s).forall(a=>df(o,s).fold(()=>!Xu(a,s,o.dom),i=>!Xu(a,s,o.dom)&&bs(i,F(a.container())))),_y=(n,o,s)=>df(o,s).fold(()=>Cg(n,o.dom,s).forall(a=>!Xu(a,s,o.dom)),a=>Cg(n,a.dom,s).isNone()),zd=De(_y,!1),Oy=De(_y,!0),Ud=De(Xb,!1),YT=De(Xb,!0),Ay=n=>nf(n).exists(Ai),o1=(n,o,s)=>{const a=Ht(Vd(F(s.container()),o),ti),i=or(a).getOr(o);return ur(n,i.dom,s).filter(Ay)},MC=(n,o)=>nf(o).exists(Ai)||o1(!0,n,o).isSome(),Ry=(n,o)=>{return(s=o,U.from(s.getNode(!0)).map(F)).exists(Ai)||o1(!1,n,o).isSome();var s},XT=De(o1,!1),JT=De(o1,!0),Dy=n=>Xe.isTextPosition(n)&&!n.isAtStart()&&!n.isAtEnd(),Jb=(n,o)=>{const s=Ht(Vd(F(o.container()),n),ti);return or(s).getOr(n)},My=(n,o)=>Dy(o)?Nc(o):Nc(o)||tr(Jb(n,o).dom,o).exists(Nc),Ny=(n,o)=>Dy(o)?Sy(o):Sy(o)||er(Jb(n,o).dom,o).exists(Sy),Qb=n=>nf(n).bind(o=>el(o,an)).exists(o=>{return s=Ei(o,"white-space"),Be(["pre","pre-wrap"],s);var s}),NC=(n,o)=>s=>{return a=new ir(s,n)[o](),Le(a)&&K(a)&&BT(a);var a},BC=(n,o)=>{return!Qb(o)&&(tr((s=n).dom,a=o).isNone()||er(s.dom,a).isNone()||zd(s,a)||Oy(s,a)||Ry(s,a)||MC(s,a)||My(n,o)||Ny(n,o));var s,a},mf=(n,o)=>!Qb(o)&&(zd(n,o)||Ud(n,o)||Ry(n,o)||My(n,o)||((s,a)=>{const i=tr(s.dom,a).getOr(a),u=NC(s.dom,"prev");return a.isAtStart()&&(u(a.container())||u(i.container()))})(n,o)),gf=(n,o)=>!Qb(o)&&(Oy(n,o)||YT(n,o)||MC(n,o)||Ny(n,o)||((s,a)=>{const i=er(s.dom,a).getOr(a),u=NC(s.dom,"next");return a.isAtEnd()&&(u(a.container())||u(i.container()))})(n,o)),Io=(n,o)=>mf(n,o)||gf(n,(s=>{const a=s.container(),i=s.offset();return yt(a)&&i<a.data.length?Xe(a,i+1):s})(o)),Rm=(n,o)=>Rb(n.charAt(o)),Sh=(n,o)=>Et(n.charAt(o)),e0=(n,o,s)=>{const a=o.data,i=Xe(o,0);return s||!Rm(a,0)||Io(n,i)?!!(s&&Sh(a,0)&&mf(n,i))&&(o.data=jo+a.slice(1),!0):(o.data=" "+a.slice(1),!0)},By=(n,o,s)=>{const a=o.data,i=Xe(o,a.length-1);return s||!Rm(a,a.length-1)||Io(n,i)?!!(s&&Sh(a,a.length-1)&&gf(n,i))&&(o.data=a.slice(0,-1)+jo,!0):(o.data=a.slice(0,-1)+" ",!0)},PC=(n,o,s)=>{if(0===s)return;const a=F(n),i=Vc(a,ti).getOr(a),u=n.data.slice(o,o+s),m=o+s>=n.data.length&&gf(i,Xe(n,n.data.length)),h=0===o&&mf(i,Xe(n,0));n.replaceData(o,s,cp(u,4,h,m))},hf=(n,o)=>{const s=n.data.slice(o),a=s.length-je(s).length;PC(n,o,a)},ff=(n,o)=>{const s=n.data.slice(0,o),a=s.length-et(s).length;PC(n,o-a,a)},pf=(n,o,s,a=!0)=>{const i=et(n.data).length,u=a?n:o,m=a?o:n;return a?u.appendData(m.data):u.insertData(0,m.data),gr(F(m)),s&&hf(u,i),u},o4=(n,o)=>((s,a)=>{const i=s.container(),u=s.offset();return!Xe.isTextPosition(s)&&i===a.parentNode&&u>Xe.before(a).offset()})(o,n)?Xe(o.container(),o.offset()-1):o,n0=n=>{return gi(n.previousSibling)?U.some(yt(o=n.previousSibling)?Xe(o,o.data.length):Xe.after(o)):n.previousSibling?Rl(n.previousSibling):U.none();var o},FC=n=>{return gi(n.nextSibling)?U.some(yt(o=n.nextSibling)?Xe(o,0):Xe.before(o)):n.nextSibling?Mc(n.nextSibling):U.none();var o},ek=(n,o,s)=>{s.fold(()=>{n.focus()},a=>{n.selection.setRng(a.toRange(),o)})},$C=(n,o)=>o&&rt(n.schema.getBlockElements(),ce(o)),Py=n=>{if(os(n)){const o=Ws('<br data-mce-bogus="1">');return bu(n),Or(n,o),U.some(Xe.before(o.dom))}return U.none()},Ou=(n,o,s,a=!0)=>{const i=((n,o,s)=>{return(a=n,i=o,u=s,a?(m=i,FC(h=u).orThunk(()=>n0(h)).orThunk(()=>{return er(p=m,Xe.after(y=h)).orThunk(()=>tr(p,Xe.before(y)));var p,y})):((m,h)=>n0(h).orThunk(()=>FC(h)).orThunk(()=>{return p=m,U.from((y=h).previousSibling?y.previousSibling:y.parentNode).bind(w=>tr(p,Xe.before(w))).orThunk(()=>er(p,Xe.after(y)));var p,y}))(i,u)).map(De(o4,s));var a,i,u,m,h})(o,n.getBody(),s.dom),u=Vc(s,De($C,n),(m=n.getBody(),p=>p.dom===m));var m;const h=((p,y,w)=>{const S=Hc(p).filter(Eo),_=Ti(p).filter(Eo);return gr(p),(N=S,A=_,$=y,D=(L,j,q)=>{const ee=L.dom,Q=j.dom,de=ee.data.length;return pf(ee,Q,w),q.container()===Q?Xe(ee,de):q},N.isSome()&&A.isSome()&&$.isSome()?U.some(D(N.getOrDie(),A.getOrDie(),$.getOrDie())):U.none()).orThunk(()=>(w&&(S.each(L=>ff(L.dom,L.dom.length)),_.each(L=>hf(L.dom,0))),y));var N,A,$,D})(s,i,(y=s,rt(n.schema.getTextInlineElements(),ce(y))));var y;n.dom.isEmpty(n.getBody())?(n.setContent(""),n.selection.setCursorLocation()):u.bind(Py).fold(()=>{a&&ek(n,o,h)},p=>{a&&ek(n,o,U.some(p))})},o0=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Dm=(n,o)=>ot(F(o),Ow(n))&&!Uc(n.schema,o)&&n.dom.isEditable(o),Th=n=>{var o,s;return"rtl"===vs.DOM.getStyle(n,"direction",!0)||(s=null!==(o=n.textContent)&&void 0!==o?o:"",o0.test(s))},Mm=(n,o,s)=>{const a=(i=n,u=o,Ht(vs.DOM.getParents(s.container(),"*",u),i));var i,u;return U.from(a[a.length-1])},ru=(n,o)=>{const s=o.container(),a=o.offset();return n?Kl(s)?yt(s.nextSibling)?Xe(s.nextSibling,0):Xe.after(s):Sd(o)?Xe(s,a+1):o:Kl(s)?yt(s.previousSibling)?Xe(s.previousSibling,s.previousSibling.data.length):Xe.before(s):tp(o)?Xe(s,a-1):o},IC=De(ru,!0),LC=De(ru,!1),s1=(n,o)=>{const s=a=>a.stopImmediatePropagation();n.on("beforeinput input",s,!0),n.getDoc().execCommand(o),n.off("beforeinput input",s)},Fy=n=>s1(n,"Delete"),tk=n=>Wh(n)||jg(n),s0=(n,o)=>{return bs(n,o)?el(o,tk,(s=n,a=>kc(Ts(a),s,cn))):U.none();var s},$y=(n,o=!0)=>{n.dom.isEmpty(n.getBody())&&n.setContent("",{no_selection:!o})},HC=(n,o,s)=>Ds(Mc(s),Rl(s),(a,i)=>{const u=ru(!0,a),m=ru(!1,i),h=ru(!1,o);return n?er(s,h).exists(p=>p.isEqual(m)&&o.isEqual(u)):tr(s,h).exists(p=>p.isEqual(u)&&o.isEqual(m))}).getOr(!0),VC=n=>{var o;return(8===Ae(o=n)||"#comment"===ce(o)?Hc(n):zl(n)).bind(VC).orThunk(()=>U.some(n))},zC=(n,o,s,a=!0)=>{var i;o.deleteContents();const u=VC(s).getOr(s),m=F(null!==(i=n.dom.getParent(u.dom,n.dom.isBlock))&&void 0!==i?i:s.dom);if(m.dom===n.getBody()?$y(n,a):os(m)&&(Ri(m),a&&n.selection.setCursorLocation(m.dom,0)),!cn(s,m)){const p=kc(Ts(m),s)?[]:Ts(h=m).map(Na).map(y=>Ht(y,w=>!cn(h,w))).getOr([]);Je(p.concat(Na(s)),y=>{cn(y,m)||bs(y,m)||!os(y)||gr(y)})}var h},xg=n=>Ea(n,"td,th"),Iy=(n,o)=>({start:n,end:o}),r1=Rd([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Wt=(n,o)=>Ba(F(n),"td,th",o),Wa=n=>!cn(n.start,n.end),Sg=(n,o)=>ll(n.start,o).bind(s=>ll(n.end,o).bind(a=>Ia(cn(s,a),s))),ja=n=>o=>Sg(o,n).map(s=>({rng:o,table:s,cells:xg(s)})),au=(n,o,s,a)=>{if(s.collapsed||!n.forall(Wa))return U.none();if(o.isSameTable){const i=n.bind(ja(a));return U.some({start:i,end:i})}{const i=Wt(s.startContainer,a),u=Wt(s.endContainer,a),m=i.bind((p=a,y=>ll(y,p).bind(w=>wr(xg(w)).map(S=>Iy(y,S))))).bind(ja(a)),h=u.bind((p=>y=>ll(y,p).bind(w=>or(xg(w)).map(S=>Iy(S,y))))(a)).bind(ja(a));return U.some({start:m,end:h})}var p},Ly=(n,o)=>No(n,s=>cn(s,o)),bf=n=>Ds(Ly(n.cells,n.rng.start),Ly(n.cells,n.rng.end),(o,s)=>n.cells.slice(o,s+1)),kh=(n,o)=>{const{startTable:s,endTable:a}=o,i=n.cloneRange();return s.each(u=>i.setStartAfter(u.dom)),a.each(u=>i.setEndBefore(u.dom)),i},r0=n=>Je(n,o=>{Bo(o,"contenteditable"),Ri(o)}),a0=(n,o,s,a)=>{const i=s.cloneRange();a?(i.setStart(s.startContainer,s.startOffset),i.setEndAfter(o.dom.lastChild)):(i.setStartBefore(o.dom.firstChild),i.setEnd(s.endContainer,s.endOffset)),a1(n,i,o,!1).each(u=>u())},Hy=n=>{const o=Bd(n),s=F(n.selection.getNode());me(s.dom)&&os(s)?n.selection.setCursorLocation(s.dom,0):n.selection.collapse(!0),o.length>1&&lt(o,a=>cn(a,s))&&ls(s,"data-mce-selected","1")},Vy=(n,o,s)=>U.some(()=>{const a=n.selection.getRng(),i=s.bind(({rng:u,isStartInTable:m})=>{const h=U.from((y=n).dom.getParent(m?u.endContainer:u.startContainer,y.dom.isBlock)).map(F);var y;u.deleteContents(),((y,w,S)=>{S.each(_=>{w?gr(_):(Ri(_),y.selection.setCursorLocation(_.dom,0))})})(n,m,h.filter(os));const p=m?o[0]:o[o.length-1];return a0(n,p,a,m),os(p)?U.none():U.some(m?o.slice(1):o.slice(0,-1))}).getOr(o);r0(i),Hy(n)}),ZC=(n,o,s,a)=>U.some(()=>{const i=n.selection.getRng(),u=o[0],m=s[s.length-1];a0(n,u,i,!0),a0(n,m,i,!1);const h=os(u)?o:o.slice(1),p=os(m)?s:s.slice(0,-1);r0(h.concat(p)),a.deleteContents(),Hy(n)}),a1=(n,o,s,a=!0)=>U.some(()=>{zC(n,o,s,a)}),nk=(n,o)=>U.some(()=>Ou(n,!1,o)),c0=(n,o)=>En(Vd(o,n),Qm),vf=(n,o)=>En(Vd(o,n),Zs("caption")),Tg=(n,o)=>U.some(()=>{Ri(o),n.selection.setCursorLocation(o.dom,0)}),i0=(n,o)=>n?n1(o):nd(o),c1=(n,o)=>{const s=F(n.selection.getStart(!0)),a=Bd(n);return n.selection.isCollapsed()&&0===a.length?((n,o,s)=>{const a=F(n.getBody());return vf(a,s).fold(()=>((i,u,m,h)=>{const p=Xe.fromRangeStart(i.selection.getRng());return c0(m,h).bind(y=>{return os(y)?Tg(i,y):(S=m,N=y,A=p,Aa(u,i.getBody(),A).bind($=>c0(S,F($.getNode())).bind(D=>cn(D,N)?U.none():U.some(gt))));var S,N,A})})(n,o,a,s).orThunk(()=>Ia(((i,u)=>{const m=Xe.fromRangeStart(i.selection.getRng());return i0(u,m)||ur(u,i.getBody(),m).exists(h=>i0(u,h))})(n,o),gt)),i=>((u,m,h,p)=>{const y=Xe.fromRangeStart(u.selection.getRng());return os(p)?Tg(u,p):(S=h,N=p,A=y,Aa(_=m,(w=u).getBody(),A).fold(()=>U.some(gt),$=>{return L=_,j=A,q=$,Mc((D=N).dom).bind(ee=>Rl(D.dom).map(Q=>L?j.isEqual(ee)&&q.isEqual(Q):j.isEqual(Q)&&q.isEqual(ee))).getOr(!0)?((D,L)=>Tg(D,L))(w,N):((D,L,j)=>vf(D,F(j.getNode())).fold(()=>U.some(gt),q=>Ia(!cn(q,L),gt)))(S,N,$);var D,L,j,q}));var w,S,_,N,A})(n,o,a,i))})(n,o,s):((i,u,m)=>{const h=F(i.getBody()),p=i.selection.getRng();return 0!==m.length?Vy(i,m,U.none()):(y=i,S=p,vf(w=h,u).fold(()=>{return N=y,((n,o)=>{const s=(u=n,m=>cn(u,m)),a=((u,m)=>{const h=Wt(u.startContainer,m),p=Wt(u.endContainer,m);return Ds(h,p,Iy)})(o,s),i=((u,m)=>{const h=N=>ll(F(N),m),p=h(u.startContainer),y=h(u.endContainer),w=p.isSome(),S=y.isSome(),_=Ds(p,y,cn).getOr(!1);return{startTable:p,endTable:y,isStartInTable:w,isEndInTable:S,isSameTable:_,isMultiTable:!_&&w&&S}})(o,s);var u;return((u,m,h)=>u.exists(p=>{return w=h,!Wa(y=p)&&Sg(y,w).exists(S=>{const _=S.dom.rows;return 1===_.length&&1===_[0].cells.length})&&Ml(p.start,m);var y,w}))(a,o,s)?a.map(u=>r1.singleCellTable(o,u.start)):i.isMultiTable?((u,m,h,p)=>au(u,m,h,p).bind(({start:y,end:w})=>{const S=y.bind(bf).getOr([]),_=w.bind(bf).getOr([]);if(S.length>0&&_.length>0){const N=kh(h,m);return U.some(r1.multiTable(S,_,N))}return U.none()}))(a,i,o,s):((u,m,h,p)=>au(u,m,h,p).bind(({start:y,end:w})=>y.or(w)).bind(y=>{const{isSameTable:w}=m,S=bf(y).getOr([]);if(w&&y.cells.length===S.length)return U.some(r1.fullTable(y.table));if(S.length>0){if(w)return U.some(r1.partialTable(S,U.none()));{const _=kh(h,m);return U.some(r1.partialTable(S,U.some({...m,rng:_})))}}return U.none()}))(a,i,o,s)})(w,S).bind(D=>D.fold(De(a1,N),De(nk,N),De(Vy,N),De(ZC,N)));var N},N=>Tg(y,N)));var y,w,S})(n,s,a)},Nm=(n,o)=>{let s=o;for(;s&&s!==n;){if(H(s)||K(s))return s;s=s.parentNode}return null},Bm=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],u0=wt.each,d0=n=>{const o=n.dom,s=new Set(n.serializer.getTempAttrs()),a=i=>lt(Bm,u=>ms(i,u))||s.has(i);return{compare:(i,u)=>{if(i.nodeName!==u.nodeName||i.nodeType!==u.nodeType)return!1;const m=p=>{const y={};return u0(o.getAttribs(p),w=>{const S=w.nodeName.toLowerCase();"style"===S||a(S)||(y[S]=o.getAttrib(p,S))}),y},h=(p,y)=>{for(const w in p)if(rt(p,w)){const S=y[w];if(en(S)||p[w]!==S)return!1;delete y[w]}for(const w in y)if(rt(y,w))return!1;return!0};return!(Qt(i)&&Qt(u)&&(!h(m(i),m(u))||!h(o.parseStyle(o.getAttrib(i,"style")),o.parseStyle(o.getAttrib(u,"style"))))||Wi(i)||Wi(u))},isAttributeInternal:a}},m0=(n,o,s,a)=>{const i=s.name;for(let u=0,m=n.length;u<m;u++){const h=n[u];if(h.name===i){const p=a.nodes[i];p?p.nodes.push(s):a.nodes[i]={filter:h,nodes:[s]}}}if(s.attributes)for(let u=0,m=o.length;u<m;u++){const h=o[u],p=h.name;if(p in s.attributes.map){const y=a.attributes[p];y?y.nodes.push(s):a.attributes[p]={filter:h,nodes:[s]}}}},WC=(n,o)=>{const s=(a,i)=>{Ke(a,u=>{const m=$o(u.nodes);Je(u.filter.callbacks,h=>{for(let p=m.length-1;p>=0;p--){const y=m[p];(i?void 0!==y.attr(u.filter.name):y.name===u.filter.name)&&!ve(y.parent)||m.splice(p,1)}m.length>0&&h(m,u.filter.name,o)})})};s(n.nodes,!1),s(n.attributes,!0)},jC=(n,o,s,a={})=>{const i=((u,m,h)=>{const p={nodes:{},attributes:{}};return h.firstChild&&((y,w)=>{let S=y;for(;S=S.walk();)m0(u,m,S,p)})(h),p})(n,o,s);WC(i,a)},yf=(n,o,s,a)=>{if((n.pad_empty_with_br||o.insert)&&s(a)){const i=new vi("br",1);o.insert&&i.attr("data-mce-bogus","1"),a.empty().append(i)}else a.empty().append(new vi("#text",3)).value=jo},zy=(n,o)=>{const s=n?.firstChild;return Le(s)&&s===n.lastChild&&s.name===o},i1=(n,o,s,a)=>a.isEmpty(o,s,i=>!0===n.getElementRule(i.name)?.paddEmpty),Eh=n=>{let o;for(let s=n;s;s=s.parent){const a=s.attr("contenteditable");if("false"===a)break;"true"===a&&(o=s)}return U.from(o)},vc=(n,o,s=n.parent)=>{if(o.getSpecialElements()[n.name])n.empty().remove();else{const a=n.children();for(const i of a)s&&!o.isValidChild(s.name,i.name)&&vc(i,o,s);n.unwrap()}},Pl=(n,o,s,a=gt)=>{const i=o.getTextBlockElements(),u=o.getNonEmptyElements(),m=o.getWhitespaceElements(),h=wt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),p=new Set,y=w=>w!==s&&!h[w.name];for(let w=0;w<n.length;w++){const S=n[w];let _,N,A;if(!S.parent||p.has(S))continue;if(i[S.name]&&"li"===S.parent.name){let D=S.next;for(;D&&i[D.name];)D.name="li",p.add(D),S.parent.insert(D,S.parent),D=D.next;S.unwrap();continue}const $=[S];for(_=S.parent;_&&!o.isValidChild(_.name,S.name)&&y(_);_=_.parent)$.push(_);if(_&&$.length>1)if(o.isValidChild(_.name,S.name)){$.reverse(),N=$[0].clone(),a(N);let D=N;for(let L=0;L<$.length-1;L++){o.isValidChild(D.name,$[L].name)&&L>0?(A=$[L].clone(),a(A),D.append(A)):A=D;for(let j=$[L].firstChild;j&&j!==$[L+1];){const q=j.next;A.append(j),j=q}D=A}i1(o,u,m,N)?_.insert(S,$[0],!0):(_.insert(N,$[0],!0),_.insert(S,N)),_=$[0],(i1(o,u,m,_)||zy(_,"br"))&&_.empty().remove()}else vc(S,o);else if(S.parent){if("li"===S.name){let D=S.prev;if(D&&("ul"===D.name||"ol"===D.name)){D.append(S);continue}if(D=S.next,D&&("ul"===D.name||"ol"===D.name)&&D.firstChild){D.insert(S,D.firstChild,!0);continue}const L=new vi("ul",1);a(L),S.wrap(L);continue}if(o.isValidChild(S.parent.name,"div")&&o.isValidChild("div",S.name)){const D=new vi("div",1);a(D),S.wrap(D)}else vc(S,o)}}},Fl=(n,o,s=o.parent)=>!(!s||!n.children[o.name]||n.isValidChild(s.name,o.name))||!(!s||"a"!==o.name||!((a,i)=>{let u=a;for(;u;){if("a"===u.name)return!0;u=u.parent}return!1})(s)),$l=n=>n.collapsed?n:(o=>{const s=Xe.fromRangeStart(o),a=Xe.fromRangeEnd(o),i=o.commonAncestorContainer;return ur(!1,i,a).map(u=>!Xu(s,a,i)&&Xu(s,u,i)?((m,h,p,y)=>{const w=document.createRange();return w.setStart(m,h),w.setEnd(p,y),w})(s.container(),s.offset(),u.container(),u.offset()):o).getOr(o)})(n),_h=(n,o)=>{const s=n.getParent(o,n.isBlock);return s&&"LI"===s.nodeName?s:null},GC=(n,o)=>{const s=Xe.after(n),a=_u(o).prev(s);return a?a.toRange():null},sk=["pre"],g0=me,rk=(n,o,s)=>{var a,i;const u=n.selection,m=n.dom,h=n.parser,p=s.merge,y=td({validate:!0},n.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,w);let S=u.getRng();const _=S.startContainer,N=n.getBody();var q,ee;_===N&&u.isCollapsed()&&m.isBlock(N.firstChild)&&(q=n,Le(ee=N.firstChild)&&!q.schema.getVoidElements()[ee.nodeName])&&m.isEmpty(N.firstChild)&&(S=m.createRng(),S.setStart(N.firstChild,0),S.setEnd(N.firstChild,0),u.setRng(S)),u.isCollapsed()||(q=>{const ee=q.dom,Q=$l(q.selection.getRng());q.selection.setRng(Q);const de=ee.getParent(Q.startContainer,g0);var Oe,Re,Ne;Oe=ee,Re=Q,Le(Ne=de)&&Ne===Oe.getParent(Re.endContainer,g0)&&Ml(F(Ne),Re)?a1(q,Q,F(de)):Q.startContainer===Q.endContainer&&Q.endOffset-Q.startOffset==1&&yt(Q.startContainer.childNodes[Q.startOffset])?Q.deleteContents():q.getDoc().execCommand("Delete",!1)})(n);const A=u.getNode(),$={context:A.nodeName.toLowerCase(),data:s.data,insert:!0},D=h.parse(o,$);if(!0===s.paste&&((n,o)=>{let s=o.firstChild,a=o.lastChild;return s&&"meta"===s.name&&(s=s.next),a&&"mce_marker"===a.attr("id")&&(a=a.prev),((i,u)=>{const m=i.getNonEmptyElements();return Le(u)&&(u.isEmpty(m)||(p=u,i.getBlockElements()[p.name]&&Le((y=p).firstChild)&&y.firstChild===y.lastChild&&(y=>"br"===y.name||y.value===jo)(p.firstChild)));var p,y})(n,a)&&(a=a?.prev),!(!s||s!==a||"ul"!==s.name&&"ol"!==s.name)})(n.schema,D)&&((q,ee)=>!!_h(q,ee))(m,A))return S=((n,o,s,a)=>{const i=((S,_,N)=>{const A=_.serialize(N);return($=>{var D,L;const j=$.firstChild,q=$.lastChild;return j&&"META"===j.nodeName&&(null===(D=j.parentNode)||void 0===D||D.removeChild(j)),q&&"mce_marker"===q.id&&(null===(L=q.parentNode)||void 0===L||L.removeChild(q)),$})(S.createFragment(A))})(o,n,a),u=_h(o,s.startContainer),m=(n=>{return n.length>0&&(!(s=n[n.length-1]).firstChild||Le(null==(o=s)?void 0:o.firstChild)&&o.firstChild===o.lastChild&&((a=o.firstChild).data===jo||Tr(a)))?n.slice(0,-1):n;var a,o,s})(Ht(null!==(p=i.firstChild?.childNodes)&&void 0!==p?p:[],S=>"LI"===S.nodeName));var p;const y=o.getRoot(),w=S=>{const _=Xe.fromRangeStart(s),N=_u(o.getRoot()),$=(1===S?N.prev(_):N.next(_))?.getNode();return!$||_h(o,$)!==u};return u?w(1)?((S,_,N)=>{const A=S.parentNode;return A&&wt.each(_,$=>{A.insertBefore($,S)}),(($,D)=>{const L=Xe.before($),j=_u(D).next(L);return j?j.toRange():null})(S,N)})(u,m,y):w(2)?(S=u,N=y,o.insertAfter((_=m).reverse(),S),GC(_[0],N)):((S,_,N,A)=>{const $=((L,j)=>{const q=j.cloneRange(),ee=j.cloneRange();return q.setStartBefore(L),ee.setEndAfter(L),[q.cloneContents(),ee.cloneContents()]})(S,A),D=S.parentNode;return D&&(D.insertBefore($[0],S),wt.each(_,L=>{D.insertBefore(L,S)}),D.insertBefore($[1],S),D.removeChild(S)),GC(_[_.length-1],N)})(u,m,y,s):null;var S,_,N})(y,m,u.getRng(),D),S&&u.setRng(S),o;!0===s.paste&&((q,ee,Q,de)=>{var Oe;const Re=ee.firstChild,Ne=ee.lastChild,We=Re===("bookmark"===Ne.attr("data-mce-type")?Ne.prev:Ne),we=Be(sk,Re.name);if(We&&we){const Ee="false"!==Re.attr("contenteditable"),ze=(null===(Oe=q.getParent(Q,q.isBlock))||void 0===Oe?void 0:Oe.nodeName.toLowerCase())===Re.name,ct=U.from(Nm(de,Q)).forall(H);return Ee&&ze&&ct}return!1})(m,D,A,n.getBody())&&(null===(a=D.firstChild)||void 0===a||a.unwrap()),(q=>{let ee=q;for(;ee=ee.walk();)1===ee.type&&ee.attr("data-mce-fragment","1")})(D);let L=D.lastChild;if(L&&"mce_marker"===L.attr("id")){const q=L;for(L=L.prev;L;L=L.walk(!0))if(3===L.type||!m.isBlock(L.name)){L.parent&&n.schema.isValidChild(L.parent.name,"span")&&L.parent.insert(q,L,"br"===L.name);break}}if(n._selectionOverrides.showBlockCaretContainer(A),$.invalid){n.selection.setContent(w);let q,ee=u.getNode();const Q=n.getBody();for(oa(ee)?ee=q=Q:q=ee;q&&q!==Q;)ee=q,q=q.parentNode;o=ee===Q?Q.innerHTML:m.getOuterHTML(ee);const de=h.parse(o),Oe=(Ee=>{for(let ze=Ee;ze;ze=ze.walk())if("mce_marker"===ze.attr("id"))return U.some(ze);return U.none()})(de),Re=Oe.bind(Eh).getOr(de);Oe.each(Ee=>Ee.replace(D));const Ne=D.children(),We=null!==(i=D.parent)&&void 0!==i?i:de;D.unwrap();const we=Ht(Ne,Ee=>Fl(n.schema,Ee,We));Pl(we,n.schema,Re),jC(h.getNodeFilters(),h.getAttributeFilters(),de),o=y.serialize(de),ee===Q?m.setHTML(Q,o):m.setOuterHTML(ee,o)}else o=y.serialize(D),((q,ee,Q)=>{var de;if("all"===Q.getAttribute("data-mce-bogus"))null===(de=Q.parentNode)||void 0===de||de.insertBefore(q.dom.createFragment(ee),Q);else{const Oe=Q.firstChild,Re=Q.lastChild;!Oe||Oe===Re&&"BR"===Oe.nodeName?q.dom.setHTML(Q,ee):q.selection.setContent(ee,{no_events:!0})}})(n,o,A);var j;return((q,ee)=>{const Q=q.schema.getTextInlineElements(),de=q.dom;if(ee){const Oe=q.getBody(),Re=d0(q);wt.each(de.select("*[data-mce-fragment]"),Ne=>{if(Le(Q[Ne.nodeName.toLowerCase()])&&Ls(KT(de,Ne),Ee=>!xy.has(Ee)))for(let We=Ne.parentElement;Le(We)&&We!==Oe&&!n4(de,Ne,We);We=We.parentElement)if(Re.compare(We,Ne)){de.remove(Ne,!0);break}})}})(n,p),((q,ee)=>{var Q,de,Oe;let Re;const Ne=q.dom,We=q.selection;if(!ee)return;We.scrollIntoView(ee);const we=Nm(q.getBody(),ee);if(we&&"false"===Ne.getContentEditable(we))return Ne.remove(ee),void We.select(we);let Ee=Ne.createRng();const ze=ee.previousSibling;if(yt(ze)){Ee.setStart(ze,null!==(de=null===(Q=ze.nodeValue)||void 0===Q?void 0:Q.length)&&void 0!==de?de:0);const Yt=ee.nextSibling;yt(Yt)&&(ze.appendData(Yt.data),null===(Oe=Yt.parentNode)||void 0===Oe||Oe.removeChild(Yt))}else Ee.setStartBefore(ee),Ee.setEndBefore(ee);const ct=Ne.getParent(ee,Ne.isBlock);if(Ne.remove(ee),ct&&Ne.isEmpty(ct)){const Yt=g0(ct);bu(F(ct)),Ee.setStart(ct,0),Ee.setEnd(ct,0),Yt||ct.getAttribute("data-mce-fragment")||!(Re=(kt=>{let Cn=Xe.fromRangeStart(kt);return Cn=_u(q.getBody()).next(Cn),Cn?.toRange()})(Ee))?Ne.add(ct,Ne.create("br",Yt?{}:{"data-mce-bogus":"1"})):(Ee=Re,Ne.remove(ct))}We.setRng(Ee)})(n,m.get("mce_marker")),j=n.getBody(),wt.each(j.getElementsByTagName("*"),q=>{q.removeAttribute("data-mce-fragment")}),((q,ee)=>{U.from(q.getParent(ee,"td,th")).map(F).each(eg)})(m,u.getStart()),((q,ee,Q)=>{const de=_c(F(Q),Oe=>cn(Oe,F(ee)));Ps(de,de.length-2).filter(an).fold(()=>Kh(q,ee),Oe=>Kh(q,Oe.dom))})(n.schema,n.getBody(),u.getStart()),o},l1=n=>n instanceof vi,u1=(n,o,s)=>{var a;n.dom.setHTML(n.getBody(),o),!0!==s&&Ch(a=n)&&Mc(a.getBody()).each(i=>{const u=i.getNode(),m=Gl(u)?Mc(u).getOr(i):i;a.selection.setRng(m.toRange())})},$s=n=>mo(n)?n:yn,Zd=(n,o,s)=>{const a=o(n),i=$s(s);return a.orThunk(()=>i(n)?U.none():((u,m,h)=>{let p=u.dom;const y=$s(h);for(;p.parentNode;){p=p.parentNode;const w=F(p),S=m(w);if(S.isSome())return S;if(y(w))break}return U.none()})(n,o,i))},h0=Mb,jy=(n,o,s)=>{const a=n.formatter.get(s);if(a)for(let i=0;i<a.length;i++){const u=a[i];if(Nl(u)&&!1===u.inherit&&n.dom.is(o,u.selector))return!0}return!1},f0=(n,o,s,a,i)=>{const u=n.dom.getRoot();if(o===u)return!1;const m=n.dom.getParent(o,h=>!!jy(n,h,s)||h.parentNode===u||!!cu(n,h,s,a,!0));return!!cu(n,m,s,a,i)},wf=(n,o,s)=>!(!Ra(s)||!h0(o,s.inline))||!(!Pd(s)||!h0(o,s.block))||!!Nl(s)&&Qt(o)&&n.is(o,s.selector),Gy=(n,o,s,a,i,u)=>{const m=s[a],h="attributes"===a;if(mo(s.onmatch))return s.onmatch(o,s,a);if(m)if(ea(m)){for(let p=0;p<m.length;p++)if(h?n.getAttrib(o,m[p]):mh(n,o,m[p]))return!0}else for(const p in m)if(rt(m,p)){const y=h?n.getAttrib(o,p):mh(n,o,p),w=bg(m[p],u),S=ve(y)||hn(y);if(S&&ve(w))continue;if(i&&S&&!s.exact||(!i||s.exact)&&!h0(y,qv(w,p)))return!1}return!0},cu=(n,o,s,a,i)=>{const u=n.formatter.get(s),m=n.dom;if(u&&Qt(o))for(let h=0;h<u.length;h++){const p=u[h];if(wf(n.dom,o,p)&&Gy(m,o,p,"attributes",i,a)&&Gy(m,o,p,"styles",i,a)){const y=p.classes;if(y)for(let w=0;w<y.length;w++)if(!n.dom.hasClass(o,bg(y[w],a)))return;return p}}},qy=(n,o,s,a,i)=>{if(a)return f0(n,a,o,s,i);if(a=n.selection.getNode(),f0(n,a,o,s,i))return!0;const u=n.selection.getStart();return!(u===a||!f0(n,u,o,s,i))},Ky=n=>(o=>{const s=[];let a=o;for(;a;){if(yt(a)&&"\ufeff"!==a.data||a.childNodes.length>1)return[];Qt(a)&&s.push(a),a=a.firstChild}return s})(n).length>0,qC=n=>{if(n){const o=new ir(n,n);for(let s=o.current();s;s=o.next())if(yt(s))return s}return null},d1=n=>{const o=Nr("span");return Lc(o,{id:_b,"data-mce-bogus":"1","data-mce-type":"format-caret"}),n&&Or(o,fc("\ufeff")),o},kg=(n,o,s=!0)=>{const a=n.dom,i=n.selection;if(Ky(o))Ou(n,!1,F(o),s);else{const u=i.getRng(),m=a.getParent(o,a.isBlock),h=u.startContainer,p=u.startOffset,y=u.endContainer,w=u.endOffset,S=(_=>{const N=qC(_);return N&&"\ufeff"===N.data.charAt(0)&&N.deleteData(0,1),N})(o);a.remove(o,!0),h===S&&p>0&&u.setStart(S,p-1),y===S&&w>0&&u.setEnd(S,w-1),m&&a.isEmpty(m)&&Ri(F(m)),i.setRng(u)}},Eg=(n,o,s=!0)=>{const a=n.dom,i=n.selection;if(o)kg(n,o,s);else if(!(o=hg(n.getBody(),i.getStart())))for(;o=a.get(_b);)kg(n,o,s)},p0=(n,o)=>(n.appendChild(o),o),KC=(n,o)=>{var s;const a=ro(n,(u,m)=>p0(u,m.cloneNode(!1)),o),i=null!==(s=a.ownerDocument)&&void 0!==s?s:document;return p0(a,i.createTextNode("\ufeff"))},yc=n=>{const o=d1(!1),s=KC(n,o.dom);return{caretContainer:o,caretPosition:Xe(s,0)}},Wc=(n,o)=>{const{caretContainer:s,caretPosition:a}=yc(o);return Ya(F(n),s),gr(F(n)),a},od=(n,o)=>{const s=n.schema.getTextInlineElements();return rt(s,ce(o))&&!ou(o.dom)&&!zu(o.dom)},ak=n=>ou(n.dom)&&Ky(n.dom),m1={},YC=di(["pre"]);((n,o)=>{m1[n]||(m1[n]=[]),m1[n].push(s=>{if(!s.selection.getRng().collapsed){const a=s.selection.getSelectedBlocks(),i=Ht(Ht(a,YC),(u=a,m=>{const h=m.previousSibling;return YC(h)&&Be(u,h)}));Je(i,u=>{((m,h)=>{const p=F(h),y=po(p).dom;gr(p),pu(F(m),[Nr("br",y),Nr("br",y),...Na(p)])})(u.previousSibling,u)})}var u})})("pre");const Lo=["fontWeight","fontStyle","color","fontSize","fontFamily"],XC=(n,o)=>{const s=n.get(o);return Wn(s)?En(s,a=>{return Ra(a)&&"span"===a.inline&&Mo((i=a).styles)&&lt(Vs(i.styles),u=>Be(Lo,u));var i}):U.none()},Yy=(n,o)=>tr(o,Xe.fromRangeStart(n)).isNone(),b0=(n,o)=>!1===er(o,Xe.fromRangeEnd(n)).exists(s=>!Tr(s.getNode())||er(o,s).isSome()),JC=n=>o=>Rt(o)&&n.isEditable(o),v0=n=>Ht(n.getSelectedBlocks(),JC(n.dom)),Xy=wt.each,Jy=n=>Qt(n)&&!Wi(n)&&!ou(n)&&!zu(n),QC=(n,o)=>{for(let s=n;s;s=s[o]){if(yt(s)&&Kt(s.data))return n;if(Qt(s)&&!Wi(s))return s}return n},ex=(n,o,s)=>{const a=d0(n),i=Qt(o)&&dh(o),u=Qt(s)&&dh(s);if(i&&u){const m=QC(o,"previousSibling"),h=QC(s,"nextSibling");if(a.compare(m,h)){for(let p=m.nextSibling;p&&p!==h;){const y=p;p=p.nextSibling,m.appendChild(y)}return n.dom.remove(h),wt.each(wt.grep(h.childNodes),p=>{m.appendChild(p)}),m}}return s},y0=(n,o,s,a)=>{var i;if(a&&!1!==o.merge_siblings){const u=null!==(i=ex(n,Qw(a),a))&&void 0!==i?i:a;ex(n,u,Qw(u,!0))}},g1=(n,o,s)=>{Xy(n.childNodes,a=>{Jy(a)&&(o(a)&&s(a),a.hasChildNodes()&&g1(a,o,s))})},Qy=(n,o)=>s=>!(!s||!mh(n,s,o)),tx=(n,o,s)=>a=>{var i,u;n.setStyle(a,o,s),""===a.getAttribute("style")&&a.removeAttribute("style"),i=n,"SPAN"===(u=a).nodeName&&0===i.getAttribs(u).length&&i.remove(u,!0)},xf=Rd([{keep:[]},{rename:["name"]},{removed:[]}]),ck=/^(src|href|style)$/,nx=wt.each,e2=Mb,ik=(n,o,s)=>n.isChildOf(o,s)&&o!==s&&!n.isBlock(s),Nn=(n,o,s)=>{let a=o[s?"startContainer":"endContainer"],i=o[s?"startOffset":"endOffset"];if(Qt(a)){const u=a.childNodes.length-1;!s&&i&&i--,a=a.childNodes[i>u?u:i]}return yt(a)&&s&&i>=a.data.length&&(a=new ir(a,n.getBody()).next()||a),yt(a)&&!s&&0===i&&(a=new ir(a,n.getBody()).prev()||a),a},ox=(n,o)=>{const s=o?"firstChild":"lastChild",a=n[s];return/^(TR|TH|TD)$/.test(n.nodeName)&&a?"TR"===n.nodeName&&a[s]||a:n},t2=(n,o,s,a)=>{var i;const u=n.create(s,a);return null===(i=o.parentNode)||void 0===i||i.insertBefore(u,o),u.appendChild(o),u},sx=(n,o,s,a,i)=>{const u=F(o),m=F(n.create(a,i)),h=s?fa(u):Fs(u);return pu(m,h),s?(Ya(u,m),em(m,u)):(nl(u,m),Or(m,u)),m.dom},h1=(n,o,s)=>{const a=o.parentNode;let i;const u=n.dom,m=sc(n);var h;Pd(s)&&a===u.getRoot()&&(s.list_block&&e2(o,s.list_block)||Je($o(o.childNodes),h=>{rf(n,m,h.nodeName.toLowerCase())?i?i.appendChild(h):(i=t2(u,h,m),u.setAttribs(i,zi(n))):i=null})),Nl(h=s)&&Ra(h)&&kc(Uo(h,"mixed"),!0)&&!e2(s.inline,o)||u.remove(o,!0)},f1=(n,o,s)=>Vo(n)?{name:o,value:null}:{name:n,value:bg(o,s)},rx=(n,o)=>{""===n.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style"))},ax=(n,o,s,a,i)=>{let u=!1;nx(s.styles,(m,h)=>{const{name:p,value:y}=f1(h,m,a),w=qv(y,p);(s.remove_similar||_t(y)||!Qt(i)||e2(mh(n,i,p),w))&&n.setStyle(o,p,""),u=!0}),u&&rx(n,o)},cx=(n,o,s,a,i)=>{const u=n.dom,m=d0(n),h=n.schema;if(Ra(o)&&lp(h,o.inline)&&Uc(h,a)&&a.parentElement===n.getBody())return h1(n,a,o),xf.removed();if(!o.ceFalseOverride&&a&&"false"===u.getContentEditableParent(a)||a&&!wf(u,a,o)&&(!o.links||"A"!==a.nodeName))return xf.keep();const p=a,y=o.preserve_attributes;if(Ra(o)&&"all"===o.remove&&Wn(y)){const w=Ht(u.getAttribs(p),S=>Be(y,S.name.toLowerCase()));if(u.removeAllAttribs(p),Je(w,S=>u.setAttrib(p,S.name,S.value)),w.length>0)return xf.rename("span")}if("all"!==o.remove){ax(u,p,o,s,i),nx(o.attributes,(S,_)=>{const{name:N,value:A}=f1(_,S,s);if(o.remove_similar||_t(A)||!Qt(i)||e2(u.getAttrib(i,N),A)){if("class"===N){const $=u.getAttrib(p,N);if($){let D="";if(Je($.split(/\s+/),L=>{/mce\-\w+/.test(L)&&(D+=(D?" ":"")+L)}),D)return void u.setAttrib(p,N,D)}}if(ck.test(N)&&p.removeAttribute("data-mce-"+N),"style"===N&&di(["li"])(p)&&"none"===u.getStyle(p,"list-style-type"))return p.removeAttribute(N),void u.setStyle(p,"list-style-type","none");"class"===N&&p.removeAttribute("className"),p.removeAttribute(N)}}),nx(o.classes,S=>{S=bg(S,s),Qt(i)&&!u.hasClass(i,S)||u.removeClass(p,S)});const w=u.getAttribs(p);for(let S=0;S<w.length;S++)if(!m.isAttributeInternal(w[S].nodeName))return xf.keep()}return"none"!==o.remove?(h1(n,p,o),xf.removed()):xf.keep()},n2=(n,o,s,a)=>cx(n,o,s,a,a).fold(qe(a),i=>(n.dom.createFragment().appendChild(a),n.dom.rename(a,i)),qe(null)),w0=(n,o,s,a,i)=>{(a||n.selection.isEditable())&&((u,m,h,p,y)=>{const w=u.formatter.get(m),S=w[0],_=u.dom,N=u.selection,A=q=>{const ee=((Q,de,Oe,Re,Ne)=>{let We;return de.parentNode&&Je(Nb(Q.dom,de.parentNode).reverse(),we=>{if(!We&&Qt(we)&&"_start"!==we.id&&"_end"!==we.id){const Ee=cu(Q,we,Oe,Re,Ne);Ee&&!1!==Ee.split&&(We=we)}}),We})(u,q,m,h,y);return((Q,de,Oe,Re,Ne,We,we,Ee)=>{var ze,ct;let Yt,kt;const Cn=Q.dom;if(Oe){const dn=Oe.parentNode;for(let ho=Re.parentNode;ho&&ho!==dn;ho=ho.parentNode){let bo=Cn.clone(ho,!1);for(let Jt=0;Jt<de.length&&(bo=n2(Q,de[Jt],Ee,bo),null!==bo);Jt++);bo&&(Yt&&bo.appendChild(Yt),kt||(kt=bo),Yt=bo)}we.mixed&&Cn.isBlock(Oe)||(Re=null!==(ze=Cn.split(Oe,Re))&&void 0!==ze?ze:Re),Yt&&kt&&(null===(ct=Ne.parentNode)||void 0===ct||ct.insertBefore(Yt,Ne),kt.appendChild(Ne),Ra(we)&&y0(Q,we,0,Yt))}return Re})(u,w,ee,q,q,0,S,h)},$=q=>lt(w,ee=>Sf(u,ee,h,q,q)),D=q=>{const ee=$o(q.childNodes),Q=$(q)||lt(w,Oe=>wf(_,q,Oe)),de=q.parentNode;if(!Q&&Le(de)&&Sm(S)&&$(de),S.deep&&ee.length)for(let Oe=0;Oe<ee.length;Oe++)D(ee[Oe]);Je(["underline","line-through","overline"],Oe=>{Qt(q)&&u.dom.getStyle(q,"text-decoration")===Oe&&q.parentNode&&eC(_,q.parentNode)===Oe&&Sf(u,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Oe}},void 0,q)})},L=q=>{const ee=_.get(q?"_start":"_end");if(ee){let Q=ee[q?"firstChild":"lastChild"];return Wi(de=Q)&&Qt(de)&&("_start"===de.id||"_end"===de.id)&&(Q=Q[q?"firstChild":"lastChild"]),yt(Q)&&0===Q.data.length&&(Q=q?ee.previousSibling||ee.nextSibling:ee.nextSibling||ee.previousSibling),_.remove(ee,!0),Q}var de;return null},j=q=>{let ee,Q,de=hh(_,q,w,q.collapsed);if(S.split){if(de=yg(de),ee=Nn(u,de,!0),Q=Nn(u,de),ee!==Q){if(ee=ox(ee,!0),Q=ox(Q,!1),ik(_,ee,Q)){const Re=U.from(ee.firstChild).getOr(ee);return A(sx(_,Re,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void L(!0)}if(ik(_,Q,ee)){const Re=U.from(Q.lastChild).getOr(Q);return A(sx(_,Re,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void L(!1)}ee=t2(_,ee,"span",{id:"_start","data-mce-type":"bookmark"}),Q=t2(_,Q,"span",{id:"_end","data-mce-type":"bookmark"});const Oe=_.createRng();Oe.setStartAfter(ee),Oe.setEndBefore(Q),Tm(_,Oe,Re=>{Je(Re,Ne=>{Wi(Ne)||Wi(Ne.parentNode)||A(Ne)})}),A(ee),A(Q),ee=L(!0),Q=L()}else ee=Q=A(ee);de.startContainer=ee.parentNode?ee.parentNode:ee,de.startOffset=_.nodeIndex(ee),de.endContainer=Q.parentNode?Q.parentNode:Q,de.endOffset=_.nodeIndex(Q)+1}Tm(_,de,Oe=>{Je(Oe,D)})};if(p){if(sf(p)){const q=_.createRng();q.setStartBefore(p),q.setEndAfter(p),j(q)}else j(p);ey(u,m,p,h)}else N.isCollapsed()&&Ra(S)&&!Bd(u).length?((n,o,s,a)=>{const i=n.dom,u=n.selection;let m=!1;const h=n.formatter.get(o);if(!h)return;const p=u.getRng(),y=p.startContainer,w=p.startOffset;let S=y;yt(y)&&(w!==y.data.length&&(m=!0),S=S.parentNode);const _=[];let N;for(;S;){if(cu(n,S,o,s,a)){N=S;break}S.nextSibling&&(m=!0),_.push(S),S=S.parentNode}if(N)if(m){const A=u.getBookmark();p.collapse(!0);let $=hh(i,p,h,!0);$=yg($),n.formatter.remove(o,s,$,a),u.moveToBookmark(A)}else{const A=hg(n.getBody(),N),$=d1(!1).dom;((j,q,ee)=>{var Q,de;const Oe=j.dom,Re=Oe.getParent(ee,De(jv,j.schema));Re&&Oe.isEmpty(Re)?null===(Q=ee.parentNode)||void 0===Q||Q.replaceChild(q,ee):((Ne=>{const We=Ea(Ne,"br"),we=Ht((Ee=>{const ze=[];let ct=Ee.dom;for(;ct;)ze.push(F(ct)),ct=ct.lastChild;return ze})(Ne).slice(-1),Ai);We.length===we.length&&Je(we,gr)})(F(ee)),Oe.isEmpty(ee)?null===(de=ee.parentNode)||void 0===de||de.replaceChild(q,ee):Oe.insertAfter(q,ee))})(n,$,A??N);const D=((j,q,ee,Q,de,Oe)=>{const Re=j.formatter,Ne=j.dom,We=Ht(Vs(Re.get()),Ee=>Ee!==Q&&!cs(Ee,"removeformat")),we=(Ee=j,ze=ee,fo(We,(Yt,kt)=>{const Cn=Kv(Ee,kt,bo=>{const Jt=$n=>mo($n)||$n.length>1&&"%"===$n.charAt(0);return lt(["styles","attributes"],$n=>Uo(bo,$n).exists(lo=>{const ke=Wn(lo)?lo:Es(lo);return lt(ke,Jt)}))});return Ee.formatter.matchNode(ze,kt,{},Cn)?Yt.concat([kt]):Yt},[]));var Ee,ze;if(Ht(we,Ee=>!((ze,ct,Yt)=>{const kt=["inline","block","selector","attributes","styles","classes"],Cn=dn=>sr(dn,(ho,bo)=>lt(kt,Jt=>Jt===bo));return Kv(ze,ct,dn=>{const ho=Cn(dn);return Kv(ze,Yt,bo=>{const Jt=Cn(bo);return(($n,lo,ke=vr)=>Os(ke).eq($n,lo))(ho,Jt)})})})(j,Ee,Q)).length>0){const Ee=ee.cloneNode(!1);return Ne.add(q,Ee),Re.remove(Q,de,Ee,Oe),Ne.remove(Ee),U.some(Ee)}return U.none()})(n,$,N,o,s,a),L=KC(_.concat(D.toArray()),$);A&&kg(n,A,!1),u.setCursorLocation(L,1),i.isEmpty(N)&&i.remove(N)}})(u,m,h,y):(Wv(u,()=>Lp(u,j),q=>Ra(S)&&qy(u,m,h,q)),u.nodeChanged()),q=u,Q=h,"removeformat"===(ee=m)?Je(v0(q.selection),de=>{Je(Lo,Oe=>q.dom.setStyle(de,Oe,"")),rx(q.dom,de)}):XC(q.formatter,ee).each(de=>{Je(v0(q.selection),Oe=>ax(q.dom,Oe,de,Q,null))}),ey(u,m,p,h);var q,ee,Q})(n,o,s,a,i)},Sf=(n,o,s,a,i)=>cx(n,o,s,a,i).fold(yn,u=>(n.dom.rename(a,u),!0),Lt),C0=wt.each,Tf=wt.each,o2=(n,o,s,a)=>{if(Tf(s.styles,(i,u)=>{n.setStyle(o,u,bg(i,a))}),s.styles){const i=n.getAttrib(o,"style");i&&n.setAttrib(o,"data-mce-style",i)}},lk=(n,o,s,a)=>{const i=n.formatter.get(o),u=i[0],m=!a&&n.selection.isCollapsed(),h=n.dom,p=n.selection,y=(A,$=u)=>{mo($.onformat)&&$.onformat(A,$,s,a),o2(h,A,$,s),Tf($.attributes,(D,L)=>{h.setAttrib(A,L,bg(D,s))}),Tf($.classes,D=>{const L=bg(D,s);h.hasClass(A,L)||h.addClass(A,L)})},w=(A,$)=>{let D=!1;return Tf(A,L=>!(!Nl(L)||("false"!==h.getContentEditable($)||L.ceFalseOverride)&&(!Le(L.collapsed)||L.collapsed===m)&&h.is($,L.selector)&&!ou($)&&(y($,L),D=!0,1))),D},_=(A,$,D)=>{const L=[];let j=!0;const q=u.inline||u.block,ee=(A=>{if(zt(A)){const $=h.create(A);return y($),$}return null})(q);Tm(A,$,Q=>{let de;const Oe=Re=>{let Ne=!1,We=j,we=!1;const Ee=Re.parentNode,ze=Ee.nodeName.toLowerCase(),ct=A.getContentEditable(Re);Le(ct)&&(We=j,j="true"===ct,Ne=!0,we=Db(n,Re));const Yt=j&&!Ne;if(Tr(Re)&&!((kt,Cn,dn,ho)=>{if(ef(kt)&&Ra(Cn)&&dn.parentNode){const bo=Va(kt.schema),Jt=((n,o)=>((s,a)=>{const i=s.dom;return i.parentNode?(u=F(i.parentNode),En(u.dom.childNodes,h=>(u=>!cn(s,u)&&a(u))(F(h))).map(F)):U.none();var u})(n,o).isSome())(F(dn),$n=>ou($n.dom));return Qn(bo,ho)&&os(F(dn.parentNode),!1)&&!Jt}return!1})(n,u,Re,ze))return de=null,void(Pd(u)&&A.remove(Re));if(kt=Re,Pd(Cn=u)&&!0===Cn.wrapper&&cu(n,kt,o,s))de=null;else{if(((kt,Cn,dn)=>{const ho=Pd(bo=u)&&!0!==bo.wrapper&&jv(n.schema,kt)&&rf(n,Cn,q);var bo;return dn&&ho})(Re,ze,Yt)){const kt=A.rename(Re,q);return y(kt),L.push(kt),void(de=null)}if(Nl(u)){let kt=w(i,Re);if(!kt&&Le(Ee)&&Sm(u)&&(kt=w(i,Ee)),!Ra(u)||kt)return void(de=null)}Le(ee)&&((kt,Cn,dn,ho)=>{const bo=kt.nodeName.toLowerCase(),Jt=rf(n,q,bo)&&rf(n,Cn,q),$n=!D&&yt(kt)&&rm(kt.data),lo=ou(kt),ke=!Ra(u)||!A.isBlock(kt);return(dn||ho)&&Jt&&!$n&&!lo&&ke})(Re,ze,Yt,we)?(de||(de=A.clone(ee,!1),Ee.insertBefore(de,Re),L.push(de)),we&&Ne&&(j=We),de.appendChild(Re)):(de=null,Je($o(Re.childNodes),Oe),Ne&&(j=We),de=null)}var kt,Cn};Je(Q,Oe)}),!0===u.links&&Je(L,Q=>{const de=Oe=>{"A"===Oe.nodeName&&y(Oe,u),Je($o(Oe.childNodes),de)};de(Q)}),Je(L,Q=>{const de=(Oe=>{let Re=0;return Je(Oe.childNodes,Ne=>{var We;Le(We=Ne)&&yt(We)&&0===We.length||Wi(Ne)||Re++}),Re})(Q);var Oe;!(L.length>1)&&A.isBlock(Q)||0!==de?(Ra(u)||Pd(u)&&u.wrapper)&&(u.exact||1!==de||(Q=En((Oe=Q).childNodes,Hp).filter(Ne=>"false"!==A.getContentEditable(Ne)&&wf(A,Ne,u)).map(Ne=>{const We=A.clone(Ne,!1);return y(We),A.replace(We,Oe,!0),A.remove(Ne,!0),We}).getOr(Oe)),((Oe,Re,Ne,We)=>{C0(Re,we=>{var Ee,ze,ct;Ra(we)&&C0(Oe.dom.select(we.inline,We),Ee=>{Jy(Ee)&&Sf(Oe,we,Ne,Ee,we.exact?Ee:null)}),Ee=Oe.dom,ct=We,(ze=we).clear_child_styles&&Xy(Ee.select(ze.links?"*:not(a)":"*",ct),kt=>{Jy(kt)&&dh(kt)&&Xy(ze.styles,(Cn,dn)=>{Ee.setStyle(kt,dn,"")})})})})(n,i,s,Q),((Oe,Re,Ne,We,we)=>{const Ee=we.parentNode;cu(Oe,Ee,Ne,We)&&Sf(Oe,Re,We,we)||Re.merge_with_parents&&Ee&&Oe.dom.getParent(Ee,ze=>!!cu(Oe,ze,Ne,We)&&(Sf(Oe,Re,We,we),!0))})(n,u,o,s,Q),((Oe,Re,Ne,We)=>{if(Re.styles&&Re.styles.backgroundColor){const we=Qy(Oe,"fontSize");g1(We,Ee=>we(Ee)&&dh(Ee),tx(Oe,"backgroundColor",bg(Re.styles.backgroundColor,Ne)))}})(A,u,s,Q),((Oe,Re,Ne,We)=>{const we=Ee=>{if(Qt(Ee)&&Qt(Ee.parentNode)&&dh(Ee)){const ze=eC(Oe,Ee.parentNode);Oe.getStyle(Ee,"color")&&ze?Oe.setStyle(Ee,"text-decoration",ze):Oe.getStyle(Ee,"text-decoration")===ze&&Oe.setStyle(Ee,"text-decoration",null)}};Re.styles&&(Re.styles.color||Re.styles.textDecoration)&&(wt.walk(We,we,"childNodes"),we(We))})(A,u,0,Q),((Oe,Re,Ne,We)=>{if(Ra(Re)&&("sub"===Re.inline||"sup"===Re.inline)){const we=Qy(Oe,"fontSize");g1(We,ze=>we(ze)&&dh(ze),tx(Oe,"fontSize",""));const Ee=Ht(Oe.select("sup"===Re.inline?"sub":"sup",We),dh);Oe.remove(Ee,!0)}})(A,u,0,Q),y0(n,u,0,Q)):A.remove(Q,!0)})},N=sf(a)?a:p.getNode();if("false"===h.getContentEditable(N)&&!Db(n,N))return w(i,a=N),void km(n,o,a,s);if(u){if(a)if(sf(a)){if(!w(i,a)){const A=h.createRng();A.setStartBefore(a),A.setEndAfter(a),_(h,hh(h,A,i),!0)}}else _(h,a,!0);else m&&Ra(u)&&!Bd(n).length?((A,$,D)=>{let L;const j=A.selection,q=A.formatter.get($);if(!q)return;const ee=j.getRng();let Q=ee.startOffset;const de=ee.startContainer.nodeValue;L=hg(A.getBody(),j.getStart());const Oe=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(de&&Q>0&&Q<de.length&&Oe.test(de.charAt(Q))&&Oe.test(de.charAt(Q-1))){const We=j.getBookmark();ee.collapse(!0);let we=hh(A.dom,ee,q);we=yg(we),A.formatter.apply($,D,we),j.moveToBookmark(We)}else{let We=L?qC(L):null;L&&"\ufeff"===We?.data||(Re=A.getDoc(),Ne=d1(!0).dom,L=Re.importNode(Ne,!0),We=L.firstChild,ee.insertNode(L),Q=1),A.formatter.apply($,D,L),j.setCursorLocation(We,Q)}var Re,Ne})(n,o,s):(p.setRng($l(p.getRng())),Wv(n,()=>{Lp(n,(A,$)=>{const D=$?A:hh(h,A,i);_(h,D,!1)})},Lt),n.nodeChanged()),XC(n.formatter,o).each(A=>{var $;Je(Ht((D=>{const L=D.getSelectedBlocks(),j=D.getRng();if(D.isCollapsed())return[];if(1===L.length)return Yy(j,L[0])&&b0(j,L[0])?L:[];{const q=or(L).filter(de=>Yy(j,de)).toArray(),ee=wr(L).filter(de=>b0(j,de)).toArray(),Q=L.slice(1,-1);return q.concat(Q).concat(ee)}})($=n.selection),JC($.dom)),$=>o2(h,$,A,s))});$=n,rt(m1,A=o)&&Je(m1[A],D=>{D($)})}var A,$;km(n,o,a,s)},x0=(n,o,s,a)=>{(a||n.selection.isEditable())&&lk(n,o,s,a)},S0=n=>rt(n,"vars"),ix=n=>n.selection.getStart(),lx=(n,o,s,a,i)=>mr(o,u=>{const m=n.formatter.matchNode(u,s,i??{},a);return!en(m)},u=>!!jy(n,u,s)||!a&&Le(n.formatter.matchNode(u,s,i,!0))),rs=(n,o)=>{const s=o??ix(n);return Ht(Nb(n.dom,s),a=>Qt(a)&&!zu(a))},T0=(n,o,s)=>{const a=rs(n,o);Ke(s,(i,u)=>{const m=h=>{const p=lx(n,a,u,h.similar,S0(h)?h.vars:void 0),y=p.isSome();if(h.state.get()!==y){h.state.set(y);const w=p.getOr(o);S0(h)?h.callback(y,{node:w,format:u,parents:a}):Je(h.callbacks,S=>S(y,{node:w,format:u,parents:a}))}};Je([i.withSimilar,i.withoutSimilar],m),Je(i.withVars,m)})},sd=wt.explode,rd=()=>{const n={};return{addFilter:(o,s)=>{Je(sd(o),a=>{rt(n,a)||(n[a]={name:a,callbacks:[]}),n[a].callbacks.push(s)})},getFilters:()=>Es(n),removeFilter:(o,s)=>{Je(sd(o),a=>{if(rt(n,a))if(Le(s)){const i=n[a],u=Ht(i.callbacks,m=>m!==s);u.length>0?i.callbacks=u:delete n[a]}else delete n[a]})}}},ji=(n,o,s)=>{o.addNodeFilter("br",(a,i,u)=>{const m=wt.extend({},s.getBlockElements()),h=s.getNonEmptyElements(),p=s.getWhitespaceElements();m.body=1;const y=w=>w.name in m||Zu(s,w);for(let w=0,S=a.length;w<S;w++){let _=a[w],N=_.parent;if(N&&y(N)&&_===N.lastChild){let A=_.prev;for(;A;){const $=A.name;if("span"!==$||"bookmark"!==A.attr("data-mce-type")){"br"===$&&(_=null);break}A=A.prev}if(_&&(_.remove(),i1(s,h,p,N))){const $=s.getElementRule(N.name);$&&($.removeEmpty?N.remove():$.paddEmpty&&yf(n,u,y,N))}}else{let A=_;for(;N&&N.firstChild===A&&N.lastChild===A&&(A=N,!m[N.name]);)N=N.parent;if(A===N){const $=new vi("#text",3);$.value=jo,_.replace($)}}}})},kf=n=>{const[o,...s]=n.split(","),a=s.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(i){const u=";base64"===i[2],m=u?(h=>{const p=/([a-z0-9+\/=\s]+)/i.exec(h);return p?p[1]:""})(a):decodeURIComponent(a);return U.some({type:i[1],data:m,base64Encoded:u})}return U.none()},Ef=(n,o,s=!0)=>{let a=o;if(s)try{a=atob(o)}catch{return U.none()}const i=new Uint8Array(a.length);for(let u=0;u<i.length;u++)i[u]=a.charCodeAt(u);return U.some(new Blob([i],{type:n}))},p1=n=>new Promise((o,s)=>{const a=new FileReader;a.onloadend=()=>{o(a.result)},a.onerror=()=>{var i;s(null===(i=a.error)||void 0===i?void 0:i.message)},a.readAsDataURL(n)});let b1=0;const ux=(n,o,s)=>kf(n).bind(({data:a,type:i,base64Encoded:u})=>{if(o&&!u)return U.none();{const m=u?a:btoa(a);return s(m,i)}}),uk=(n,o,s)=>{const a=n.create("blobid"+b1++,o,s);return n.add(a),a},dk=(n,o,s=!1)=>ux(o,s,(a,i)=>U.from(n.getByData(a,i)).orThunk(()=>Ef(i,a).map(u=>uk(n,u,a))));function _o(n){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}function iu(n,o){return(iu=Object.setPrototypeOf||function(s,a){return s.__proto__=a,s})(n,o)}function _g(n,o,s){return(_g=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(a,i,u){var m=[null];m.push.apply(m,i);var h=new(Function.bind.apply(a,m));return u&&iu(h,u.prototype),h}).apply(null,arguments)}function ad(n){return function(o){if(Array.isArray(o))return Og(o)}(n)||function(o){if(typeof Symbol<"u"&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(n)||function(o,s){if(o){if("string"==typeof o)return Og(o,s);var a=Object.prototype.toString.call(o).slice(8,-1);return"Object"===a&&o.constructor&&(a=o.constructor.name),"Map"===a||"Set"===a?Array.from(o):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Og(o,s):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Og(n,o){(null==o||o>n.length)&&(o=n.length);for(var s=0,a=new Array(o);s<o;s++)a[s]=n[s];return a}var Go=Object.hasOwnProperty,dx=Object.setPrototypeOf,mx=Object.isFrozen,s2=Object.getPrototypeOf,mk=Object.getOwnPropertyDescriptor,Bc=Object.freeze,Gi=Object.seal,l=Object.create,g=typeof Reflect<"u"&&Reflect,b=g.apply,C=g.construct;b||(b=function(n,o,s){return n.apply(o,s)}),Bc||(Bc=function(n){return n}),Gi||(Gi=function(n){return n}),C||(C=function(n,o){return _g(n,ad(o))});var E,P=Dt(Array.prototype.forEach),W=Dt(Array.prototype.pop),X=Dt(Array.prototype.push),se=Dt(String.prototype.toLowerCase),fe=Dt(String.prototype.match),Me=Dt(String.prototype.replace),ft=Dt(String.prototype.indexOf),jt=Dt(String.prototype.trim),At=Dt(RegExp.prototype.test),it=(E=TypeError,function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return C(E,o)});function Dt(n){return function(o){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return b(n,o,a)}}function Ie(n,o){dx&&dx(n,null);for(var s=o.length;s--;){var a=o[s];if("string"==typeof a){var i=se(a);i!==a&&(mx(o)||(o[s]=i),a=i)}n[a]=!0}return n}function on(n){var o,s=l(null);for(o in n)b(Go,n,[o])&&(s[o]=n[o]);return s}function zn(n,o){for(;null!==n;){var s=mk(n,o);if(s){if(s.get)return Dt(s.get);if("function"==typeof s.value)return Dt(s.value)}n=s2(n)}return function(a){return console.warn("fallback value for",a),null}}var Co=Bc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pr=Bc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wa=Bc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ca=Bc(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ii=Bc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),_f=Bc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),v1=Bc(["#text"]),E0=Bc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Of=Bc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bs=Bc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),wc=Bc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yi=Gi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ru=Gi(/<%[\w\W]*|[\w\W]*%>/gm),lu=Gi(/^data-[\-\w.\u00B7-\uFFFF]/),Af=Gi(/^aria-[\-\w]+$/),wi=Gi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),r2=Gi(/^(?:\w+script|data):/i),y1=Gi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Wd=Gi(/^html$/i),lc=function(){return typeof window>"u"?null:window},gx=function n(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lc(),s=function(Ue){return n(Ue)};if(s.version="2.3.8",s.removed=[],!o||!o.document||9!==o.document.nodeType)return s.isSupported=!1,s;var a=o.document,i=o.document,u=o.DocumentFragment,m=o.HTMLTemplateElement,h=o.Node,p=o.Element,y=o.NodeFilter,w=o.NamedNodeMap,S=void 0===w?o.NamedNodeMap||o.MozNamedAttrMap:w,_=o.HTMLFormElement,N=o.DOMParser,A=o.trustedTypes,$=p.prototype,D=zn($,"cloneNode"),L=zn($,"nextSibling"),j=zn($,"childNodes"),q=zn($,"parentNode");if("function"==typeof m){var ee=i.createElement("template");ee.content&&ee.content.ownerDocument&&(i=ee.content.ownerDocument)}var Q=function(Ue,vo){if("object"!==_o(Ue)||"function"!=typeof Ue.createPolicy)return null;var In=null,Rr="data-tt-policy-suffix";vo.currentScript&&vo.currentScript.hasAttribute(Rr)&&(In=vo.currentScript.getAttribute(Rr));var mc="dompurify"+(In?"#"+In:"");try{return Ue.createPolicy(mc,{createHTML:function(Kc){return Kc}})}catch{return console.warn("TrustedTypes policy "+mc+" could not be created."),null}}(A,a),de=Q?Q.createHTML(""):"",Oe=i,Re=Oe.implementation,Ne=Oe.createNodeIterator,We=Oe.createDocumentFragment,we=Oe.getElementsByTagName,Ee=a.importNode,ze={};try{ze=on(i).documentMode?i.documentMode:{}}catch{}var ct={};s.isSupported="function"==typeof q&&Re&&void 0!==Re.createHTMLDocument&&9!==ze;var Yt,kt,Cn=yi,dn=Ru,ho=lu,bo=Af,Jt=r2,$n=y1,lo=wi,ke=null,_e=Ie({},[].concat(ad(Co),ad(pr),ad(wa),ad(ii),ad(v1))),nt=null,mt=Ie({},[].concat(ad(E0),ad(Of),ad(Bs),ad(wc))),Fe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xt=null,Nt=null,Bt=!0,Vt=!0,Pt=!1,Zn=!1,xs=!1,Ki=!1,dc=!1,ua=!1,Yi=!1,Nu=!1,Gc=!0,Bg=!0,Jr=!1,Xi={},qc=null,Gf=Ie({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),nv=null,qS=Ie({},["audio","video","img","source","image","track"]),Ph=null,Fh=Ie({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ov="http://www.w3.org/1998/Math/MathML",Bu="http://www.w3.org/2000/svg",md="http://www.w3.org/1999/xhtml",Pg=md,K2=!1,aM=["application/xhtml+xml","text/html"],sv=null,P_=i.createElement("form"),KS=function(Ue){return Ue instanceof RegExp||Ue instanceof Function},YS=function(Ue){sv&&sv===Ue||(Ue&&"object"===_o(Ue)||(Ue={}),Ue=on(Ue),ke="ALLOWED_TAGS"in Ue?Ie({},Ue.ALLOWED_TAGS):_e,nt="ALLOWED_ATTR"in Ue?Ie({},Ue.ALLOWED_ATTR):mt,Ph="ADD_URI_SAFE_ATTR"in Ue?Ie(on(Fh),Ue.ADD_URI_SAFE_ATTR):Fh,nv="ADD_DATA_URI_TAGS"in Ue?Ie(on(qS),Ue.ADD_DATA_URI_TAGS):qS,qc="FORBID_CONTENTS"in Ue?Ie({},Ue.FORBID_CONTENTS):Gf,xt="FORBID_TAGS"in Ue?Ie({},Ue.FORBID_TAGS):{},Nt="FORBID_ATTR"in Ue?Ie({},Ue.FORBID_ATTR):{},Xi="USE_PROFILES"in Ue&&Ue.USE_PROFILES,Bt=!1!==Ue.ALLOW_ARIA_ATTR,Vt=!1!==Ue.ALLOW_DATA_ATTR,Pt=Ue.ALLOW_UNKNOWN_PROTOCOLS||!1,Zn=Ue.SAFE_FOR_TEMPLATES||!1,xs=Ue.WHOLE_DOCUMENT||!1,ua=Ue.RETURN_DOM||!1,Yi=Ue.RETURN_DOM_FRAGMENT||!1,Nu=Ue.RETURN_TRUSTED_TYPE||!1,dc=Ue.FORCE_BODY||!1,Gc=!1!==Ue.SANITIZE_DOM,Bg=!1!==Ue.KEEP_CONTENT,Jr=Ue.IN_PLACE||!1,lo=Ue.ALLOWED_URI_REGEXP||lo,Pg=Ue.NAMESPACE||md,Ue.CUSTOM_ELEMENT_HANDLING&&KS(Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Fe.tagNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&KS(Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Fe.attributeNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Fe.allowCustomizedBuiltInElements=Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Yt=Yt=-1===aM.indexOf(Ue.PARSER_MEDIA_TYPE)?"text/html":Ue.PARSER_MEDIA_TYPE,kt="application/xhtml+xml"===Yt?function(vo){return vo}:se,Zn&&(Vt=!1),Yi&&(ua=!0),Xi&&(ke=Ie({},ad(v1)),nt=[],!0===Xi.html&&(Ie(ke,Co),Ie(nt,E0)),!0===Xi.svg&&(Ie(ke,pr),Ie(nt,Of),Ie(nt,wc)),!0===Xi.svgFilters&&(Ie(ke,wa),Ie(nt,Of),Ie(nt,wc)),!0===Xi.mathMl&&(Ie(ke,ii),Ie(nt,Bs),Ie(nt,wc))),Ue.ADD_TAGS&&(ke===_e&&(ke=on(ke)),Ie(ke,Ue.ADD_TAGS)),Ue.ADD_ATTR&&(nt===mt&&(nt=on(nt)),Ie(nt,Ue.ADD_ATTR)),Ue.ADD_URI_SAFE_ATTR&&Ie(Ph,Ue.ADD_URI_SAFE_ATTR),Ue.FORBID_CONTENTS&&(qc===Gf&&(qc=on(qc)),Ie(qc,Ue.FORBID_CONTENTS)),Bg&&(ke["#text"]=!0),xs&&Ie(ke,["html","head","body"]),ke.table&&(Ie(ke,["tbody"]),delete xt.tbody),Bc&&Bc(Ue),sv=Ue)},cA=Ie({},["mi","mo","mn","ms","mtext"]),iA=Ie({},["foreignobject","desc","title","annotation-xml"]),lA=Ie({},["title","style","font","a","script"]),Y2=Ie({},pr);Ie(Y2,wa),Ie(Y2,Ca);var X2=Ie({},ii);Ie(X2,_f);var Fg=function(Ue){X(s.removed,{element:Ue});try{Ue.parentNode.removeChild(Ue)}catch{try{Ue.outerHTML=de}catch{Ue.remove()}}},J2=function(Ue,vo){try{X(s.removed,{attribute:vo.getAttributeNode(Ue),from:vo})}catch{X(s.removed,{attribute:null,from:vo})}if(vo.removeAttribute(Ue),"is"===Ue&&!nt[Ue])if(ua||Yi)try{Fg(vo)}catch{}else try{vo.setAttribute(Ue,"")}catch{}},XS=function(Ue){var vo,In;if(dc)Ue="<remove></remove>"+Ue;else{var Rr=fe(Ue,/^[\r\n\t ]+/);In=Rr&&Rr[0]}"application/xhtml+xml"===Yt&&(Ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ue+"</body></html>");var mc=Q?Q.createHTML(Ue):Ue;if(Pg===md)try{vo=(new N).parseFromString(mc,Yt)}catch{}if(!vo||!vo.documentElement){vo=Re.createDocument(Pg,"template",null);try{vo.documentElement.innerHTML=K2?"":mc}catch{}}var Kc=vo.body||vo.documentElement;return Ue&&In&&Kc.insertBefore(i.createTextNode(In),Kc.childNodes[0]||null),Pg===md?we.call(vo,xs?"html":"body")[0]:xs?vo.documentElement:Kc},uA=function(Ue){return Ne.call(Ue.ownerDocument||Ue,Ue,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},Q2=function(Ue){return"object"===_o(h)?Ue instanceof h:Ue&&"object"===_o(Ue)&&"number"==typeof Ue.nodeType&&"string"==typeof Ue.nodeName},Ji=function(Ue,vo,In){ct[Ue]&&P(ct[Ue],function(Rr){Rr.call(s,vo,In,sv)})},gd=function(Ue){var vo,In;if(Ji("beforeSanitizeElements",Ue,null),(In=Ue)instanceof _&&("string"!=typeof In.nodeName||"string"!=typeof In.textContent||"function"!=typeof In.removeChild||!(In.attributes instanceof S)||"function"!=typeof In.removeAttribute||"function"!=typeof In.setAttribute||"string"!=typeof In.namespaceURI||"function"!=typeof In.insertBefore)||At(/[\u0080-\uFFFF]/,Ue.nodeName))return Fg(Ue),!0;var Rr=kt(Ue.nodeName);if(Ji("uponSanitizeElement",Ue,{tagName:Rr,allowedTags:ke}),Ue.hasChildNodes()&&!Q2(Ue.firstElementChild)&&(!Q2(Ue.content)||!Q2(Ue.content.firstElementChild))&&At(/<[/\w]/g,Ue.innerHTML)&&At(/<[/\w]/g,Ue.textContent)||"select"===Rr&&At(/<template/i,Ue.innerHTML))return Fg(Ue),!0;if(!ke[Rr]||xt[Rr]){if(!xt[Rr]&&F_(Rr)&&(Fe.tagNameCheck instanceof RegExp&&At(Fe.tagNameCheck,Rr)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(Rr)))return!1;if(Bg&&!qc[Rr]){var mc=q(Ue)||Ue.parentNode,Kc=j(Ue)||Ue.childNodes;if(Kc&&mc)for(var xc=Kc.length-1;xc>=0;--xc)mc.insertBefore(D(Kc[xc],!0),L(Ue))}return Fg(Ue),!0}return Ue instanceof p&&!function(Zm){var Yc=q(Zm);Yc&&Yc.tagName||(Yc={namespaceURI:md,tagName:"template"});var Xc=se(Zm.tagName),I1=se(Yc.tagName);return Zm.namespaceURI===Bu?Yc.namespaceURI===md?"svg"===Xc:Yc.namespaceURI===ov?"svg"===Xc&&("annotation-xml"===I1||cA[I1]):Boolean(Y2[Xc]):Zm.namespaceURI===ov?Yc.namespaceURI===md?"math"===Xc:Yc.namespaceURI===Bu?"math"===Xc&&iA[I1]:Boolean(X2[Xc]):Zm.namespaceURI===md&&!(Yc.namespaceURI===Bu&&!iA[I1])&&!(Yc.namespaceURI===ov&&!cA[I1])&&!X2[Xc]&&(lA[Xc]||!Y2[Xc])}(Ue)?(Fg(Ue),!0):"noscript"!==Rr&&"noembed"!==Rr||!At(/<\/no(script|embed)/i,Ue.innerHTML)?(Zn&&3===Ue.nodeType&&(vo=Me(vo=Ue.textContent,Cn," "),vo=Me(vo,dn," "),Ue.textContent!==vo&&(X(s.removed,{element:Ue.cloneNode()}),Ue.textContent=vo)),Ji("afterSanitizeElements",Ue,null),!1):(Fg(Ue),!0)},ew=function(Ue,vo,In){if(Gc&&("id"===vo||"name"===vo)&&(In in i||In in P_))return!1;if((!Vt||Nt[vo]||!At(ho,vo))&&(!Bt||!At(bo,vo)))if(!nt[vo]||Nt[vo]){if(!(F_(Ue)&&(Fe.tagNameCheck instanceof RegExp&&At(Fe.tagNameCheck,Ue)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(Ue))&&(Fe.attributeNameCheck instanceof RegExp&&At(Fe.attributeNameCheck,vo)||Fe.attributeNameCheck instanceof Function&&Fe.attributeNameCheck(vo))||"is"===vo&&Fe.allowCustomizedBuiltInElements&&(Fe.tagNameCheck instanceof RegExp&&At(Fe.tagNameCheck,In)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(In))))return!1}else if(!Ph[vo]&&!At(lo,Me(In,$n,""))&&("src"!==vo&&"xlink:href"!==vo&&"href"!==vo||"script"===Ue||0!==ft(In,"data:")||!nv[Ue])&&(!Pt||At(Jt,Me(In,$n,"")))&&In)return!1;return!0},F_=function(Ue){return Ue.indexOf("-")>0},tw=function(Ue){var vo,In,Rr,mc;Ji("beforeSanitizeAttributes",Ue,null);var Kc=Ue.attributes;if(Kc){var xc={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:nt};for(mc=Kc.length;mc--;){var Zm=vo=Kc[mc],Yc=Zm.name,Xc=Zm.namespaceURI;In="value"===Yc?vo.value:jt(vo.value),Rr=kt(Yc);var I1=In;if(xc.attrName=Rr,xc.attrValue=In,xc.keepAttr=!0,xc.forceKeepAttr=void 0,Ji("uponSanitizeAttribute",Ue,xc),In=xc.attrValue,!xc.forceKeepAttr)if(xc.keepAttr)if(At(/\/>/i,In))J2(Yc,Ue);else{Zn&&(In=Me(In,Cn," "),In=Me(In,dn," "));var mA=kt(Ue.nodeName);if(ew(mA,Rr,In)){if(In!==I1)try{Xc?Ue.setAttributeNS(Xc,Yc,In):Ue.setAttribute(Yc,In)}catch{J2(Yc,Ue)}}else J2(Yc,Ue)}else J2(Yc,Ue)}Ji("afterSanitizeAttributes",Ue,null)}},dA=function Ue(vo){var In,Rr=uA(vo);for(Ji("beforeSanitizeShadowDOM",vo,null);In=Rr.nextNode();)Ji("uponSanitizeShadowNode",In,null),gd(In)||(In.content instanceof u&&Ue(In.content),tw(In));Ji("afterSanitizeShadowDOM",vo,null)};return s.sanitize=function(Ue,vo){var In,Rr,mc,Kc,xc;if((K2=!Ue)&&(Ue="\x3c!--\x3e"),"string"!=typeof Ue&&!Q2(Ue)){if("function"!=typeof Ue.toString)throw it("toString is not a function");if("string"!=typeof(Ue=Ue.toString()))throw it("dirty is not a string, aborting")}if(!s.isSupported){if("object"===_o(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof Ue)return o.toStaticHTML(Ue);if(Q2(Ue))return o.toStaticHTML(Ue.outerHTML)}return Ue}if(Ki||YS(vo),s.removed=[],"string"==typeof Ue&&(Jr=!1),Jr){if(Ue.nodeName){var Zm=kt(Ue.nodeName);if(!ke[Zm]||xt[Zm])throw it("root node is forbidden and cannot be sanitized in-place")}}else if(Ue instanceof h)1===(Rr=(In=XS("\x3c!----\x3e")).ownerDocument.importNode(Ue,!0)).nodeType&&"BODY"===Rr.nodeName||"HTML"===Rr.nodeName?In=Rr:In.appendChild(Rr);else{if(!ua&&!Zn&&!xs&&-1===Ue.indexOf("<"))return Q&&Nu?Q.createHTML(Ue):Ue;if(!(In=XS(Ue)))return ua?null:Nu?de:""}In&&dc&&Fg(In.firstChild);for(var Yc=uA(Jr?Ue:In);mc=Yc.nextNode();)3===mc.nodeType&&mc===Kc||gd(mc)||(mc.content instanceof u&&dA(mc.content),tw(mc),Kc=mc);if(Kc=null,Jr)return Ue;if(ua){if(Yi)for(xc=We.call(In.ownerDocument);In.firstChild;)xc.appendChild(In.firstChild);else xc=In;return nt.shadowroot&&(xc=Ee.call(a,xc,!0)),xc}var Xc=xs?In.outerHTML:In.innerHTML;return xs&&ke["!doctype"]&&In.ownerDocument&&In.ownerDocument.doctype&&In.ownerDocument.doctype.name&&At(Wd,In.ownerDocument.doctype.name)&&(Xc="<!DOCTYPE "+In.ownerDocument.doctype.name+">\n"+Xc),Zn&&(Xc=Me(Xc,Cn," "),Xc=Me(Xc,dn," ")),Q&&Nu?Q.createHTML(Xc):Xc},s.setConfig=function(Ue){YS(Ue),Ki=!0},s.clearConfig=function(){sv=null,Ki=!1},s.isValidAttribute=function(Ue,vo,In){sv||YS({});var Rr=kt(Ue),mc=kt(vo);return ew(Rr,mc,In)},s.addHook=function(Ue,vo){"function"==typeof vo&&(ct[Ue]=ct[Ue]||[],X(ct[Ue],vo))},s.removeHook=function(Ue){if(ct[Ue])return W(ct[Ue])},s.removeHooks=function(Ue){ct[Ue]&&(ct[Ue]=[])},s.removeAllHooks=function(){ct={}},s}();const hx=wt.each,fx=wt.trim,px=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],gk={ftp:21,http:80,https:443,mailto:25},a2=["img","video"],bx=(n,o,s)=>{const a=(i=>{try{return decodeURIComponent(i)}catch{return unescape(i)}})(o).replace(/\s/g,"");return!n.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(a)||!n.allow_html_data_urls&&(/^data:image\//i.test(a)?(u=s,(Le(i=n.allow_svg_data_urls)?!i:!Le(u)||!Be(a2,u))&&/^data:image\/svg\+xml/i.test(a)):/^data:/i.test(a)));var i,u};class dl{static parseDataUri(o){let s;const a=decodeURIComponent(o).split(","),i=/data:([^;]+)/.exec(a[0]);return i&&(s=i[1]),{type:s,data:a[1]}}static isDomSafe(o,s,a={}){if(a.allow_script_urls)return!0;{const i=Bi.decode(o).replace(/[\s\u0000-\u001F]+/g,"");return!bx(a,i,s)}}static getDocumentBaseUrl(o){var s;let a;return a=0!==o.protocol.indexOf("http")&&"file:"!==o.protocol?null!==(s=o.href)&&void 0!==s?s:"":o.protocol+"//"+o.host+o.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/")),a}constructor(o,s={}){this.path="",this.directory="",o=fx(o),this.settings=s;const a=s.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(o)||/^\s*#/.test(o))return void(i.source=o);const u=0===o.indexOf("//");if(0!==o.indexOf("/")||u||(o=(a&&a.protocol||"http")+"://mce_host"+o),!/^[\w\-]*:?\/\//.test(o)){const h=a?a.path:new dl(document.location.href).directory;if(""===a?.protocol)o="//mce_host"+i.toAbsPath(h,o);else{const p=/([^#?]*)([#?]?.*)/.exec(o);p&&(o=(a&&a.protocol||"http")+"://mce_host"+i.toAbsPath(h,p[1])+p[2])}}o=o.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);m&&hx(px,(h,p)=>{let y=m[p];y&&(y=y.replace(/\(mce_at\)/g,"@@")),i[h]=y}),a&&(i.protocol||(i.protocol=a.protocol),i.userInfo||(i.userInfo=a.userInfo),i.port||"mce_host"!==i.host||(i.port=a.port),i.host&&"mce_host"!==i.host||(i.host=a.host),i.source=""),u&&(i.protocol="")}setPath(o){const s=/^(.*?)\/?(\w+)?$/.exec(o);s&&(this.path=s[0],this.directory=s[1],this.file=s[2]),this.source="",this.getURI()}toRelative(o){if("./"===o)return o;const s=new dl(o,{base_uri:this});if("mce_host"!==s.host&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&""!==s.protocol)return s.getURI();const a=this.getURI(),i=s.getURI();if(a===i||"/"===a.charAt(a.length-1)&&a.substr(0,a.length-1)===i)return a;let u=this.toRelPath(this.path,s.path);return s.query&&(u+="?"+s.query),s.anchor&&(u+="#"+s.anchor),u}toAbsolute(o,s){const a=new dl(o,{base_uri:this});return a.getURI(s&&this.isSameOrigin(a))}isSameOrigin(o){if(this.host==o.host&&this.protocol==o.protocol){if(this.port==o.port)return!0;const s=this.protocol?gk[this.protocol]:null;if(s&&(this.port||s)==(o.port||s))return!0}return!1}toRelPath(o,s){let a,i,u=0,m="";const h=o.substring(0,o.lastIndexOf("/")).split("/"),p=s.split("/");if(h.length>=p.length)for(a=0,i=h.length;a<i;a++)if(a>=p.length||h[a]!==p[a]){u=a+1;break}if(h.length<p.length)for(a=0,i=p.length;a<i;a++)if(a>=h.length||h[a]!==p[a]){u=a+1;break}if(1===u)return s;for(a=0,i=h.length-(u-1);a<i;a++)m+="../";for(a=u-1,i=p.length;a<i;a++)m+=a!==u-1?"/"+p[a]:p[a];return m}toAbsPath(o,s){let a=0;const i=/\/$/.test(s)?"/":"",u=o.split("/"),m=s.split("/"),h=[];hx(u,S=>{S&&h.push(S)});const p=[];for(let S=m.length-1;S>=0;S--)0!==m[S].length&&"."!==m[S]&&(".."!==m[S]?a>0?a--:p.push(m[S]):a++);const y=h.length-a;let w;return w=y<=0?Qr(p).join("/"):h.slice(0,y).join("/")+"/"+Qr(p).join("/"),0!==w.indexOf("/")&&(w="/"+w),i&&w.lastIndexOf("/")!==w.length-1&&(w+=i),w}getURI(o=!1){let s;return this.source&&!o||(s="",o||(s+=this.protocol?this.protocol+"://":"//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}}const aR=wt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),vx="data-mce-type";let hk=0;const c2=(n,o,s,a)=>{var i,u,m,h;const p=o.validate,y=s.getSpecialElements();8===n.nodeType&&!o.allow_conditional_comments&&/^\[if/i.test(null!==(i=n.nodeValue)&&void 0!==i?i:"")&&(n.nodeValue=" "+n.nodeValue);const w=null!==(u=a?.tagName)&&void 0!==u?u:n.nodeName.toLowerCase();if(1!==n.nodeType||"body"===w)return;const S=F(n),_=pl(S,vx),N=zr(S,"data-mce-bogus");if(!_&&zt(N))return void("all"===N?gr(S):Zl(S));const A=s.getElementRule(w);if(!p||A){if(Le(a)&&(a.allowedTags[w]=!0),p&&A&&!_){if(Je(null!==(m=A.attributesForced)&&void 0!==m?m:[],$=>{ls(S,$.name,"{$uid}"===$.value?"mce_"+hk++:$.value)}),Je(null!==(h=A.attributesDefault)&&void 0!==h?h:[],$=>{pl(S,$.name)||ls(S,$.name,"{$uid}"===$.value?"mce_"+hk++:$.value)}),A.attributesRequired&&!lt(A.attributesRequired,$=>pl(S,$))||A.removeEmptyAttrs&&($=>{const D=$.dom.attributes;return null==D||0===D.length})(S))return void Zl(S);A.outputName&&A.outputName!==w&&(($,D)=>{const L=((q,ee)=>{const Q=Nr(ee),de=z(q);return Lc(Q,de),Q})($,D);nl($,L);const j=Na($);pu(L,j),gr($)})(S,A.outputName)}}else rt(y,w)?gr(S):Zl(S)},r4=(n,o,s,a,i)=>!(a in aR&&bx(n,i,s))&&(!n.validate||o.isValid(s,a)||ms(a,"data-")||ms(a,"aria-")),a4=(n,o)=>n.hasAttribute(vx)&&("id"===o||"class"===o||"style"===o),yx=(n,o)=>n in o.getBoolAttrs(),cR=(n,o,s)=>{const{attributes:a}=n;for(let i=a.length-1;i>=0;i--){const u=a[i],m=u.name,h=u.value;r4(o,s,n.tagName.toLowerCase(),m,h)||a4(n,m)?yx(m,s)&&n.setAttribute(m,m):n.removeAttribute(m)}},fk=wt.makeMap,pk=wt.extend,i4=(n,o,s)=>{const a=n.name,i=a in s&&"title"!==a&&"textarea"!==a,u=o.childNodes;for(let m=0,h=u.length;m<h;m++){const p=u[m],y=new vi(p.nodeName.toLowerCase(),p.nodeType);if(Qt(p)){const w=p.attributes;for(let S=0,_=w.length;S<_;S++){const N=w[S];y.attr(N.name,N.value)}}else yt(p)?(y.value=p.data,i&&(y.raw=!0)):(_s(p)||Jm(p)||Zh(p))&&(y.value=p.data);i4(y,p,s),n.append(y)}},_0=(n={},o=ju())=>{const s=rd(),a=rd(),i={validate:!0,root_name:"body",sanitize:!0,...n},u=new DOMParser,m=(($,D)=>{if($.sanitize){const L=((n,o)=>{const s=gx();return s.addHook("uponSanitizeElement",(a,i)=>{c2(a,n,o,i)}),s.addHook("uponSanitizeAttribute",(a,i)=>{const u=a.tagName.toLowerCase(),{attrName:m,attrValue:h}=i;i.keepAttr=r4(n,o,u,m,h),i.keepAttr?(i.allowedAttributes[m]=!0,yx(m,o)&&(i.attrValue=m),n.allow_svg_data_urls&&ms(h,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):a4(a,m)&&(i.forceKeepAttr=!0)}),s})($,D);return(j,q)=>{L.sanitize(j,((ee,Q)=>{const de={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return de.PARSER_MEDIA_TYPE=Q,ee.allow_script_urls?de.ALLOWED_URI_REGEXP=/.*/:ee.allow_html_data_urls&&(de.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),de})($,q)),L.removed=[]}}return(L,j)=>{const q=document.createNodeIterator(L,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let ee;for(;ee=q.nextNode();)c2(ee,$,D),Qt(ee)&&cR(ee,$,D)}})(i,o),p=s.getFilters,S=a.getFilters,N=($,D)=>{const L=zt(D.attr(vx)),j=1===D.type&&!rt($,D.name)&&!Zu(o,D);return 3===D.type||j&&!L},A={schema:o,addAttributeFilter:a.addFilter,getAttributeFilters:S,removeAttributeFilter:a.removeFilter,addNodeFilter:s.addFilter,getNodeFilters:p,removeNodeFilter:s.removeFilter,parse:($,D={})=>{var L;const j=i.validate,q=null!==(L=D.context)&&void 0!==L?L:i.root_name,ee=((ze,ct,Yt="html")=>{const kt="xhtml"===Yt?"application/xhtml+xml":"text/html",Cn=rt(o.getSpecialElements(),ct.toLowerCase()),dn=Cn?`<${ct}>${ze}</${ct}>`:ze,bo=u.parseFromString("xhtml"===Yt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${dn}</body></html>`:`<body>${dn}</body>`,kt).body;return m(bo,kt),Cn?bo.firstChild:bo})($,q,D.format);Kh(o,ee);const Q=new vi(q,11);i4(Q,ee,o.getSpecialElements()),ee.innerHTML="";const[de,Oe]=((ze,ct,Yt,kt)=>{const Cn=Yt.validate,dn=ct.getNonEmptyElements(),ho=ct.getWhitespaceElements(),bo=pk(fk("script,style,head,html,body,title,meta,param"),ct.getBlockElements()),Jt=Va(ct),$n=/[ \t\r\n]+/g,lo=/^[ \t\r\n]+/,ke=/[ \t\r\n]+$/,_e=Fe=>{let xt=Fe.parent;for(;Le(xt);){if(xt.name in ho)return!0;xt=xt.parent}return!1},nt=Fe=>Fe.name in bo||Zu(ct,Fe),mt=(Fe,xt)=>!Le(xt?Fe.prev:Fe.next)&&!ve(Fe.parent)&&nt(Fe.parent)&&(Fe.parent!==ze||!0===kt.isRootContent);return[Fe=>{var xt,Bt,Vt;if(3===Fe.type&&!_e(Fe)){let Nt=null!==(xt=Fe.value)&&void 0!==xt?xt:"";Nt=Nt.replace($n," "),Vt=nt,(Le(Bt=Fe.prev)&&(Vt(Bt)||"br"===Bt.name)||mt(Fe,!0))&&(Nt=Nt.replace(lo,"")),0===Nt.length?Fe.remove():Fe.value=Nt}},Fe=>{var xt,Vt,Pt;if(1===Fe.type){const Nt=ct.getElementRule(Fe.name);if(Cn&&Nt){const Bt=i1(ct,dn,ho,Fe);Nt.paddInEmptyBlock&&Bt&&(Vt=>{let Pt=Vt;for(;Le(Pt);){if(Pt.name in Jt)return i1(ct,dn,ho,Pt);Pt=Pt.parent}return!1})(Fe)?yf(Yt,kt,nt,Fe):Nt.removeEmpty&&Bt?nt(Fe)?Fe.remove():Fe.unwrap():Nt.paddEmpty&&(Bt||zy(Vt=Fe,"#text")&&(null===(Pt=Vt?.firstChild)||void 0===Pt?void 0:Pt.value)===jo)&&yf(Yt,kt,nt,Fe)}}else if(3===Fe.type&&!_e(Fe)){let Nt=null!==(xt=Fe.value)&&void 0!==xt?xt:"";(Fe.next&&nt(Fe.next)||mt(Fe,!1))&&(Nt=Nt.replace(ke,"")),0===Nt.length?Fe.remove():Fe.value=Nt}}]})(Q,o,i,D),Re=[],We={nodes:{},attributes:{}},we=ze=>m0(p(),S(),ze,We);if(((ze,ct,Yt)=>{const kt=[];for(let Cn=ze,dn=Cn;Cn;dn=Cn,Cn=Cn.walk()){const ho=Cn;Je(ct,bo=>bo(ho)),ve(ho.parent)&&ho!==ze?Cn=dn:kt.push(ho)}for(let Cn=kt.length-1;Cn>=0;Cn--){const dn=kt[Cn];Je(Yt,ho=>ho(dn))}})(Q,[de,we],[Oe,j?ze=>{return Yt=Re,void(Fl(o,ct=ze)&&Yt.push(ct));var ct,Yt}:gt]),Re.reverse(),j&&Re.length>0)if(D.context){const{pass:ze,fail:ct}=jn(Re,Yt=>Yt.parent===Q);Pl(ct,o,Q,we),D.invalid=ze.length>0}else Pl(Re,o,Q,we);const Ee=((ze,ct)=>{var Yt;const kt=null!==(Yt=ct.forced_root_block)&&void 0!==Yt?Yt:ze.forced_root_block;return!1===kt?"":!0===kt?"p":kt})(i,D);return Ee&&("body"===Q.name||D.isRootContent)&&((ze,ct)=>{const Yt=pk(fk("script,style,head,html,body,title,meta,param"),o.getBlockElements()),kt=/^[ \t\r\n]+/,Cn=/[ \t\r\n]+$/;let dn=ze.firstChild,ho=null;const bo=Jt=>{var $n,lo;Jt&&(dn=Jt.firstChild,dn&&3===dn.type&&(dn.value=null===($n=dn.value)||void 0===$n?void 0:$n.replace(kt,"")),dn=Jt.lastChild,dn&&3===dn.type&&(dn.value=null===(lo=dn.value)||void 0===lo?void 0:lo.replace(Cn,"")))};if(o.isValidChild(ze.name,ct.toLowerCase())){for(;dn;){const Jt=dn.next;N(Yt,dn)?(ho||(ho=new vi(ct,1),ho.attr(i.forced_root_block_attrs),ze.insert(ho,dn)),ho.append(dn)):(bo(ho),ho=null),dn=Jt}bo(ho)}})(Q,Ee),D.invalid||WC(We,D),Q}};return((n,o)=>{const s=n.schema;o.remove_trailing_brs&&ji(o,n,s),n.addAttributeFilter("href",i=>{let u=i.length;const m=h=>{const p=h?wt.trim(h):"";return/\b(noopener)\b/g.test(p)?p:p.split(" ").filter(w=>w.length>0).concat(["noopener"]).sort().join(" ")};if(!o.allow_unsafe_link_target)for(;u--;){const h=i[u];"a"===h.name&&"_blank"===h.attr("target")&&h.attr("rel",m(h.attr("rel")))}}),o.allow_html_in_named_anchor||n.addAttributeFilter("id,name",i=>{let u,m,h,p,y=i.length;for(;y--;)if(p=i[y],"a"===p.name&&p.firstChild&&!p.attr("href"))for(h=p.parent,u=p.lastChild;u&&h;)m=u.prev,h.insert(u,p),u=m}),o.fix_list_elements&&n.addNodeFilter("ul,ol",i=>{let u,m,h=i.length;for(;h--;)if(u=i[h],m=u.parent,m&&("ul"===m.name||"ol"===m.name))if(u.prev&&"li"===u.prev.name)u.prev.append(u);else{const p=new vi("li",1);p.attr("style","list-style-type: none"),u.wrap(p)}});const a=s.getValidClasses();o.validate&&a&&n.addAttributeFilter("class",i=>{var u;let m=i.length;for(;m--;){const h=i[m],p=null!==(u=h.attr("class"))&&void 0!==u?u:"",y=wt.explode(p," ");let w="";for(let S=0;S<y.length;S++){const _=y[S];let N=!1,A=a["*"];A&&A[_]&&(N=!0),A=a[h.name],!N&&A&&A[_]&&(N=!0),N&&(w&&(w+=" "),w+=_)}w.length||(w=null),h.attr("class",w)}}),((i,u)=>{const{blob_cache:m}=u;if(m){const h=p=>{const y=p.attr("src");var w;(w=p).attr("src")===wo.transparentSrc||Le(w.attr("data-mce-placeholder"))||(w=>Le(w.attr("data-mce-bogus")))(p)||ve(y)||dk(m,y,!0).each(w=>{p.attr("src",w.blobUri())})};i.addAttributeFilter("src",p=>Je(p,h))}})(n,o)})(A,i),(D=i).inline_styles&&((n,o,s)=>{var a;const i=Fi();var u,m,h;o.convert_fonts_to_spans&&(u=n,m=i,h=wt.explode(null!==(a=o.font_size_legacy_values)&&void 0!==a?a:""),u.addNodeFilter("font",p=>{Je(p,y=>{const w=m.parse(y.attr("style")),S=y.attr("color"),_=y.attr("face"),N=y.attr("size");var A;S&&(w.color=S),_&&(w["font-family"]=_),N&&Rn(N).each(A=>{w["font-size"]=h[A-1]}),y.name="span",y.attr("style",m.serialize(w)),A=y,Je(["color","face","size"],D=>{A.attr(D,null)})})})),((u,m,h)=>{u.addNodeFilter("strike",p=>{const y="html4"!==m.type;Je(p,w=>{if(y)w.name="s";else{const S=h.parse(w.attr("style"));S["text-decoration"]="line-through",w.name="span",w.attr("style",h.serialize(S))}})})})(n,s,i)})(A,D,o),A;var D},l4=(n,o,s)=>{const a=l1(u=n)?td({validate:!1}).serialize(u):u,i=o(a);var u;if(i.isDefaultPrevented())return i;if(l1(n)){if(i.content!==a){const u=_0({validate:!1,forced_root_block:!1,sanitize:s}).parse(i.content,{context:n.name});return{...i,content:u}}return{...i,content:n}}return i},u4=(n,o)=>{if(o.no_events)return Vi.value(o);{const s=n.dispatch("BeforeGetContent",o);return s.isDefaultPrevented()?Vi.error(iC(n,{content:"",...s}).content):Vi.value(s)}},i2=(n,o,s)=>s.no_events?o:l4(o,i=>iC(n,{...s,content:i}),Cb(n)).content,wx=(n,o)=>{if(o.no_events)return Vi.value(o);{const s=l4(o.content,a=>{return i=n,u={...o,content:a},i.dispatch("BeforeSetContent",u);var i,u},Cb(n));return s.isDefaultPrevented()?(cC(n,s),Vi.error(void 0)):Vi.value(s)}},Cx=(n,o,s)=>{s.no_events||cC(n,{...s,content:o})},xx=(n,o,s)=>({element:n,width:o,rows:s}),bk=(n,o)=>({element:n,cells:o}),iR=(n,o)=>({x:n,y:o}),d4=(n,o)=>Bn(n,o).bind(Rn).getOr(1),lR=(n,o,s)=>{const a=n.rows;return!!(a[s]?a[s].cells:[])[o]},m4=n=>fo(n,(o,s)=>s.cells.length>o?s.cells.length:o,0),g4=(n,o)=>{const s=n.rows;for(let a=0;a<s.length;a++){const i=s[a].cells;for(let u=0;u<i.length;u++)if(cn(i[u],o))return U.some(iR(u,a))}return U.none()},h4=(n,o,s,a,i)=>{const u=[],m=n.rows;for(let h=s;h<=i;h++){const p=m[h].cells,y=o<a?p.slice(o,a+1):p.slice(a,o+1);u.push(bk(m[h].element,y))}return u},uR=n=>((o,s)=>{const a=kr(o.element),i=Nr("tbody");return pu(i,s),Or(a,i),a})(n,ln(n.rows,s=>{const a=ln(s.cells,u=>{const m=X1(u);return Bo(m,"colspan"),Bo(m,"rowspan"),m}),i=kr(s.element);return pu(i,a),i})),f4=()=>Hb([]),Sx=(n,o)=>o>=0&&o<n.length&&Et(n.charAt(o)),l2=n=>ql(n.innerText),vk=n=>Qt(n)?n.outerHTML:yt(n)?Bi.encodeRaw(n.data,!1):_s(n)?"\x3c!--"+n.data+"--\x3e":"",hR=zs(()=>document.implementation.createHTMLDocument("undo")),Tx=n=>{const o=(s=n.getBody(),Ht(ln($o(s.childNodes),vk),u=>u.length>0));var s;const a=Ao(o,u=>{const m=yy(n.serializer,u);return m.length>0?[m]:[]}),i=a.join("");return-1!==i.indexOf("</iframe>")?{type:"fragmented",fragments:a,content:"",bookmark:null,beforeBookmark:null}:(u=>({type:"complete",fragments:null,content:u,bookmark:null,beforeBookmark:null}))(i)},yk=(n,o,s)=>{const a=s?o.beforeBookmark:o.bookmark;"fragmented"===o.type?((n,o)=>{((s,a)=>{let i=0;Je(s,u=>{var m,h;0===u[0]?i++:1===u[0]?(((m,h,p)=>{const y=(w=>{let S;const _=document.createElement("div"),N=document.createDocumentFragment();for(w&&(_.innerHTML=w);S=_.firstChild;)N.appendChild(S);return N})(h);m.hasChildNodes()&&p<m.childNodes.length?m.insertBefore(y,m.childNodes[p]):m.appendChild(y)})(a,u[1],i),i++):2===u[0]&&(h=i,(m=a).hasChildNodes()&&h<m.childNodes.length&&m.removeChild(m.childNodes[h]))})})(((s,a)=>{const i=s.length+a.length+2,u=new Array(i),m=new Array(i),h=(S,_,N,A,$)=>{const D=y(S,_,N,A);if(null===D||D.start===_&&D.diag===_-A||D.end===S&&D.diag===S-N){let L=S,j=N;for(;L<_||j<A;)L<_&&j<A&&s[L]===a[j]?($.push([0,s[L]]),++L,++j):_-S>A-N?($.push([2,s[L]]),++L):($.push([1,a[j]]),++j)}else{h(S,D.start,N,D.start-D.diag,$);for(let L=D.start;L<D.end;++L)$.push([0,s[L]]);h(D.end,_,D.end-D.diag,A,$)}},p=(S,_,N,A)=>{let $=S;for(;$-_<A&&$<N&&s[$]===a[$-_];)++$;return{start:S,end:$,diag:_}},y=(S,_,N,A)=>{const $=_-S,D=A-N;if(0===$||0===D)return null;const L=$-D,j=D+$,q=(j%2==0?j:j+1)/2;let ee,Q,de,Oe,Re;for(u[1+q]=S,m[1+q]=_+1,ee=0;ee<=q;++ee){for(Q=-ee;Q<=ee;Q+=2){for(de=Q+q,u[de]=Q===-ee||Q!==ee&&u[de-1]<u[de+1]?u[de+1]:u[de-1]+1,Oe=u[de],Re=Oe-S+N-Q;Oe<_&&Re<A&&s[Oe]===a[Re];)u[de]=++Oe,++Re;if(L%2!=0&&L-ee<=Q&&Q<=L+ee&&m[de-L]<=u[de])return p(m[de-L],Q+S-N,_,A)}for(Q=L-ee;Q<=L+ee;Q+=2){for(de=Q+q-L,m[de]=Q===L-ee||Q!==L+ee&&m[de+1]<=m[de-1]?m[de+1]-1:m[de-1],Oe=m[de]-1,Re=Oe-S+N-Q;Oe>=S&&Re>=N&&s[Oe]===a[Re];)m[de]=Oe--,Re--;if(L%2==0&&-ee<=Q&&Q<=ee&&m[de]<=u[de+L])return p(m[de],Q+S-N,_,A)}}return null},w=[];return h(0,s.length,0,a.length,w),w})(ln($o(o.childNodes),vk),n),o)})(o.fragments,n.getBody()):n.setContent(o.content,{format:"raw",no_selection:!Le(a)||!Ob(a)||!a.isFakeCaret}),a&&(n.selection.moveToBookmark(a),n.selection.scrollIntoView())},wk=n=>"fragmented"===n.type?n.fragments.join(""):n.content,b4=n=>{const o=Nr("body",hR());return _i(o,wk(n)),Je(Ea(o,"*[data-mce-bogus]"),Zl),ol(o)},Ck=(n,o)=>{return!(!n||!o)&&(a=o,!(wk(n)!==wk(a))||((s,a)=>b4(s)===b4(a))(n,o));var a},kx=n=>0===n.get(),Ex=(n,o,s)=>{kx(s)&&(n.typing=o)},xk=(n,o)=>{n.typing&&(Ex(n,!1,o),n.add())},Sk=n=>({init:{bindEvents:gt},undoManager:{beforeChange:(o,s)=>{return a=n,u=s,void(kx(o)&&u.set(wp(a.selection)));var a,u},add:(o,s,a,i,u,m)=>((h,p,y,w,S,_,N)=>{const A=Tx(h),$=wt.extend(_||{},A);if(!kx(w)||h.removed)return null;const D=p.data[y.get()];if(h.dispatch("BeforeAddUndo",{level:$,lastLevel:D,originalEvent:N}).isDefaultPrevented()||D&&Ck(D,$))return null;p.data[y.get()]&&S.get().each(q=>{p.data[y.get()].beforeBookmark=q});const L=Md(h);if(L&&p.data.length>L){for(let q=0;q<p.data.length-1;q++)p.data[q]=p.data[q+1];p.data.length--,y.set(p.data.length)}$.bookmark=wp(h.selection),y.get()<p.data.length-1&&(p.data.length=y.get()+1),p.data.push($),y.set(p.data.length-1);const j={level:$,lastLevel:D,originalEvent:N};return y.get()>0?(h.setDirty(!0),h.dispatch("AddUndo",j),h.dispatch("change",j)):h.dispatch("AddUndo",j),$})(n,o,s,a,i,u,m),undo:(o,s,a)=>((i,u,m,h)=>{let p;return u.typing&&(u.add(),u.typing=!1,Ex(u,!1,m)),h.get()>0&&(h.set(h.get()-1),p=u.data[h.get()],yk(i,p,!0),i.setDirty(!0),i.dispatch("Undo",{level:p})),p})(n,o,s,a),redo:(o,s)=>((a,i,u)=>{let m;return i.get()<u.length-1&&(i.set(i.get()+1),m=u[i.get()],yk(a,m,!1),a.setDirty(!0),a.dispatch("Redo",{level:m})),m})(n,o,s),clear:(o,s)=>{return a=n,u=s,(i=o).data=[],u.set(0),i.typing=!1,void a.dispatch("ClearUndos");var a,i,u},reset:o=>{return(s=o).clear(),void s.add();var s},hasUndo:(o,s)=>{return a=n,i=o,s.get()>0||i.typing&&i.data[0]&&!Ck(Tx(a),i.data[0]);var a,i},hasRedo:(o,s)=>{return a=o,s.get()<a.data.length-1&&!a.typing;var a},transact:(o,s,a)=>{return m=a,xk(i=o,s),i.beforeChange(),i.ignore(m),i.add();var i,m},ignore:(o,s)=>((a,i)=>{try{a.set(a.get()+1),i()}finally{a.set(a.get()-1)}})(o,s),extra:(o,s,a,i)=>((u,m,h,p,y)=>{if(m.transact(p)){const w=m.data[h.get()].bookmark,S=m.data[h.get()-1];yk(u,S,!0),m.transact(y)&&(m.data[h.get()-1].beforeBookmark=w)}})(n,o,s,a,i)},formatter:{match:(o,s,a,i)=>qy(n,o,s,a,i),matchAll:(o,s)=>((a,i,u)=>{const m=[],h={},p=a.selection.getStart();return a.dom.getParent(p,y=>{for(let w=0;w<i.length;w++){const S=i[w];!h[S]&&cu(a,y,S,u)&&(h[S]=!0,m.push(S))}},a.dom.getRoot()),m})(n,o,s),matchNode:(o,s,a,i)=>cu(n,o,s,a,i),canApply:o=>((s,a)=>{const i=s.formatter.get(a),u=s.dom;if(i&&s.selection.isEditable()){const m=s.selection.getStart(),h=Nb(u,m);for(let p=i.length-1;p>=0;p--){const y=i[p];if(!Nl(y))return!0;for(let w=h.length-1;w>=0;w--)if(u.is(h[w],y.selector))return!0}}return!1})(n,o),closest:o=>((s,a)=>{const i=u=>cn(u,F(s.getBody()));return U.from(s.selection.getStart(!0)).bind(u=>Zd(F(u),m=>Xo(a,h=>{return cu(s,m.dom,y=h)?U.some(y):U.none();var y}),i)).getOrNull()})(n,o),apply:(o,s,a)=>x0(n,o,s,a),remove:(o,s,a,i)=>w0(n,o,s,a,i),toggle:(o,s,a)=>((i,u,m,h)=>{const p=i.formatter.get(u);p&&(!qy(i,u,m,h)||"toggle"in p[0]&&!p[0].toggle?x0(i,u,m,h):w0(i,u,m,h))})(n,o,s,a),formatChanged:(o,s,a,i,u)=>{return((_,N,A,$,D,L)=>{const j=N.get();Je(A.split(","),q=>{const ee=Uo(j,q).getOrThunk(()=>{const de={withSimilar:{state:aa(!1),similar:!0,callbacks:[]},withoutSimilar:{state:aa(!1),similar:!1,callbacks:[]},withVars:[]};return j[q]=de,de}),Q=()=>{const de=rs(_);return lx(_,de,q,D,L).isSome()};if(en(L)){const de=D?ee.withSimilar:ee.withoutSimilar;de.callbacks.push($),1===de.callbacks.length&&de.state.set(Q())}else ee.withVars.push({state:aa(Q()),similar:D,vars:L,callback:$})}),N.set(j)})(n,h=o,p=s,y=a,i,u),{unbind:()=>((_,N,A)=>{const $=_.get();Je(N.split(","),D=>Uo($,D).each(L=>{$[D]={withSimilar:{...L.withSimilar,callbacks:Ht(L.withSimilar.callbacks,j=>j!==A)},withoutSimilar:{...L.withoutSimilar,callbacks:Ht(L.withoutSimilar.callbacks,j=>j!==A)},withVars:Ht(L.withVars,j=>j.callback!==A)}})),_.set($)})(h,p,y)};var h,p,y}},editor:{getContent:o=>{return a=o,U.from((s=n).getBody()).fold(qe("tree"===a.format?new vi("body",11):""),i=>((n,o,s)=>{let a;return a="raw"===o.format?wt.trim(Yb(n.serializer,s.innerHTML)):"text"===o.format?((i,u)=>{const m=i.getDoc(),h=Ir(F(i.getBody())),p=Nr("div",m);ls(p,"data-mce-bogus","all"),Iu(p,{position:"fixed",left:"-9999999px",top:"0"}),_i(p,u.innerHTML),wy(p),Cy(p);const y=bl(S=h)?S:F(po(S).dom.body);var S;Or(y,p);const w=ql(p.dom.innerText);return gr(p),w})(n,s):"tree"===o.format?n.serializer.serialize(s,o):((i,u)=>{const m=sc(i),h=new RegExp(`^(<${m}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${m}>[\r\n]*|<br \\/>[\r\n]*)$`);return u.replace(h,"")})(n,n.serializer.serialize(s,o)),"text"!==o.format&&!Js(F(s))&&zt(a)?wt.trim(a):a})(s,a,i));var s,a},setContent:(o,s)=>{return i=o,u=s,U.from((a=n).getBody()).map(m=>l1(i)?((h,p,y,w)=>{jC(h.parser.getNodeFilters(),h.parser.getAttributeFilters(),y);const S=td({validate:!1},h.schema).serialize(y),_=Js(F(p))?S:wt.trim(S);return u1(h,_,w.no_selection),{content:y,html:_}})(a,m,i,u):((h,p,y,w)=>{if(0===y.length||/^\s+$/.test(y)){const S='<br data-mce-bogus="1">';"TABLE"===p.nodeName?y="<tr><td>"+S+"</td></tr>":/^(UL|OL)$/.test(p.nodeName)&&(y="<li>"+S+"</li>");const _=sc(h);return h.schema.isValidChild(p.nodeName.toLowerCase(),_.toLowerCase())?(y=S,y=h.dom.createHTML(_,zi(h),y)):y||(y=S),u1(h,y,w.no_selection),{content:y,html:y}}{"raw"!==w.format&&(y=td({validate:!1},h.schema).serialize(h.parser.parse(y,{isRootContent:!0,insert:!0})));const S=Js(F(p))?y:wt.trim(y);return u1(h,S,w.no_selection),{content:S,html:S}}})(a,m,i,u)).getOr({content:i,html:l1(u.content)?"":u.content});var a,i,u},insertContent:(o,s)=>rk(n,o,s),addVisual:o=>((s,a)=>{const i=s.dom,u=Le(a)?a:s.getBody();Je(i.select("table,a",u),m=>{switch(m.nodeName){case"TABLE":const h=Dw(s),p=i.getAttrib(m,"border");p&&"0"!==p||!s.hasVisual?i.removeClass(m,h):i.addClass(m,h);break;case"A":if(!i.getAttrib(m,"href")){const y=i.getAttrib(m,"name")||m.id,w=Ev(s);y&&s.hasVisual?i.addClass(m,w):i.removeClass(m,w)}}}),s.dispatch("VisualAid",{element:a,hasVisual:s.hasVisual})})(n,o)},selection:{getContent:(o,s)=>((a,i,u={})=>{const m=(h=u,p=i,{...h,format:p,get:!0,selection:!0,getInner:!0});var h,p;return u4(a,m).fold(Se,h=>{const p=((y,w)=>{if("text"===w.format)return U.from((S=y).selection.getRng()).map(_=>{var N;const A=U.from(S.dom.getParent(_.commonAncestorContainer,S.dom.isBlock)),$=S.getBody(),D=A.map(de=>de.nodeName).getOr("div").toLowerCase(),L=F(_.cloneContents());wy(L),Cy(L);const j=S.dom.add($,D,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},L.dom),q=l2(j),ee=ql(null!==(N=j.textContent)&&void 0!==N?N:"");if(S.dom.remove(j),Sx(ee,0)||Sx(ee,ee.length-1)){const Q=A.getOr($),de=l2(Q),Oe=de.indexOf(q);return-1===Oe?q:(Sx(de,Oe-1)?" ":"")+q+(Sx(de,Oe+q.length)?" ":"")}return q}).getOr("");var S;{const S=((_,N)=>{const A=_.selection.getRng(),$=_.dom.create("body"),D=_.selection.getSel(),L=Id(_,il(D)),j=N.contextual?((n,o)=>{const s=$p(o,n);return s.length>0?((n,o)=>{return(s=n,a=o[0],fu(a,"table",De(cn,s))).bind(s=>{const a=o[0],i=o[o.length-1],u=(m=>{const h=xx(kr(m),0,[]);return Je(Ea(m,"tr"),(p,y)=>{Je(Ea(p,"td,th"),(w,S)=>{((_,N,A,$,D)=>{const L=d4(D,"rowspan"),j=d4(D,"colspan"),q=_.rows;for(let ee=A;ee<A+L;ee++){q[ee]||(q[ee]=bk(X1($),[]));for(let Q=N;Q<N+j;Q++)q[ee].cells[Q]=ee===A&&Q===N?D:kr(D)}})(h,((_,N,A)=>{for(;lR(_,N,A);)N++;return N})(h,S,y),y,p,w)})}),xx(h.element,m4(h.rows),h.rows)})(s);return(m=u,h=a,p=i,g4(m,h).bind(y=>g4(m,p).map(w=>((S,_,N)=>{const A=_.x,$=_.y,D=N.x,L=N.y,j=$<L?h4(S,A,$,D,L):h4(S,A,L,D,$);return xx(S.element,m4(j),j)})(m,y,w)))).map(m=>Hb([uR(m)]));var m,h,p}).getOrThunk(f4);var s,a})(n,s):(a=n,(i=o).length>0&&i[0].collapsed?f4():(u=a,((h,p)=>{const y=fo(p,(w,S)=>(Or(S,w),S),h);return p.length>0?Hb([y]):y})(F((m=i[0]).cloneContents()),((n,o)=>{const s=F(o.commonAncestorContainer),a=Vd(s,n),i=Ht(a,ni),u=(p=o,En(h=a,y=>"li"===ce(y)&&Ml(y,p)).fold(qe([]),y=>{return(w=h,En(w,S=>"ul"===ce(S)||"ol"===ce(S))).map(w=>{const S=Nr(ce(w)),_=sr(qm(w),(N,A)=>ms(A,"list-style"));return Iu(S,_),[Nr("li"),S]}).getOr([]);var w})),m=i.concat(u.length?u:(h=>jg(h)?Ts(h).filter(sm).fold(qe([]),p=>[h,p]):sm(h)?[h]:[])(s));var h,p;return ln(m,kr)})(u,m))));var a,i,u,m})(F(_.getBody()),L).dom:A.cloneContents();return j&&$.appendChild(j),_.selection.serializer.serialize($,N)})(y,w);return"tree"===w.format?S:y.selection.isCollapsed()?"":S}})(a,h);return i2(a,p,h)})})(n,o,s)},autocompleter:{addDecoration:o=>((n,o)=>{if(Gb(F(n.getBody())).isNone()){const a=Ws('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',n.getDoc());Or(a,F(o.extractContents())),o.insertNode(a.dom),Ts(a).each(i=>i.dom.normalize()),(s=a,((i,u)=>{const m=h=>{const p=Na(h);for(let y=p.length-1;y>=0;y--){const w=p[y];if(u(w))return U.some(w);const S=m(w);if(S.isSome())return S}return U.none()};return m(i)})(s,jb)).map(i=>{var u;n.selection.setCursorLocation(i.dom,"img"===ce(u=i)?1:Oi(u).fold(()=>Na(u).length,m=>m.length))})}var s})(n,o),removeDecoration:()=>{return o=n,s=F(n.getBody()),Gb(s).each(a=>{const i=o.selection.getBookmark();Zl(a),o.selection.moveToBookmark(i)});var o,s}},raw:{getModel:()=>U.none()}}),Ag=n=>rt(n.plugins,"rtc"),Tk=n=>n.rtcInstance?n.rtcInstance:Sk(n),Ga=n=>{const o=n.rtcInstance;if(o)return o;throw new Error("Failed to get RTC instance not yet initialized.")},v4=n=>Ga(n).init.bindEvents(),y4=n=>0===n.dom.length?(gr(n),U.none()):U.some(n),w4=(n,o,s,a)=>{n.bind(i=>((a?ff:hf)(i.dom,a?i.dom.length:0),o.filter(Eo).map(u=>((m,h,p,y)=>{const w=m.dom,S=h.dom,_=y?w.length:S.length;y?(pf(w,S,!1,!y),p.setStart(S,_)):(pf(S,w,!1,!y),p.setEnd(S,_))})(i,u,s,a)))).orThunk(()=>{return(u=o,m=a,u.filter(h=>zp.isBookmarkNode(h.dom)).bind(m?Ti:Hc)).or(o).filter(Eo).map(u=>((m,h)=>{Ts(m).each(p=>{const y=m.dom;h&&mf(p,Xe(y,0))?hf(y,0):!h&&gf(p,Xe(y,y.length))&&ff(y,y.length)})})(u,a));var u,m})},C4=(n,o,s)=>{if(rt(n,o)){const a=Ht(n[o],i=>i!==s);0===a.length?delete n[o]:n[o]=a}},x4=n=>!(!n||!n.ownerDocument)&&bs(F(n.ownerDocument),F(n)),S4=(n,o,s,a)=>{let i,u;const{selectorChangedWithUnbind:m}=((D,L)=>{let j,q;const ee=(de,Oe)=>En(Oe,Re=>D.is(Re,de)),Q=de=>D.getParents(de,void 0,D.getRoot());return{selectorChangedWithUnbind:(de,Oe)=>(j||(j={},q={},L.on("NodeChange",Re=>{const Ne=Re.element,We=Q(Ne),we={};Ke(j,(Ee,ze)=>{ee(ze,We).each(ct=>{q[ze]||(Je(Ee,Yt=>{Yt(!0,{node:ct,selector:ze,parents:We})}),q[ze]=Ee),we[ze]=Ee})}),Ke(q,(Ee,ze)=>{we[ze]||(delete q[ze],Je(Ee,ct=>{ct(!1,{node:Ne,selector:ze,parents:We})}))})})),j[de]||(j[de]=[]),j[de].push(Oe),ee(de,Q(L.selection.getStart())).each(()=>{q[de]=j[de]}),{unbind:()=>{C4(j,de,Oe),C4(q,de,Oe)}})}})(n,a),h=(D,L)=>((j,q,ee={})=>{const Q=(de=ee,Oe=q,{format:"html",...de,set:!0,selection:!0,content:Oe});var de,Oe;wx(j,Q).each(de=>{const Oe=((Ne,We)=>{if("raw"!==We.format){const we=Ne.selection.getRng(),Ee=Ne.dom.getParent(we.commonAncestorContainer,Ne.dom.isBlock),ze=Ee?{context:Ee.nodeName.toLowerCase()}:{},ct=Ne.parser.parse(We.content,{forced_root_block:!1,...ze,...We});return td({validate:!1},Ne.schema).serialize(ct)}return We.content})(j,de),Re=j.selection.getRng();((Ne,We)=>{const we=U.from(We.firstChild).map(F),Ee=U.from(We.lastChild).map(F);Ne.deleteContents(),Ne.insertNode(We);const ze=we.bind(Hc).filter(Eo).bind(y4),ct=Ee.bind(Ti).filter(Eo).bind(y4);w4(ze,we,Ne,!0),w4(ct,Ee,Ne,!1),Ne.collapse(!1)})(Re,Re.createContextualFragment(Oe)),j.selection.setRng(Re),Kp(j,Re),Cx(j,Oe,de)})})(a,D,L),p=D=>{const L=w();L.collapse(!!D),S(L)},y=()=>o.getSelection?o.getSelection():o.document.selection,w=()=>{let D;const L=(q,ee,Q)=>{try{return ee.compareBoundaryPoints(q,Q)}catch{return-1}},j=o.document;if(Le(a.bookmark)&&!Ch(a)){const q=vh(a);if(q.isSome())return q.map(ee=>Id(a,[ee])[0]).getOr(j.createRange())}try{const q=y();q&&!xd(q.anchorNode)&&(D=q.rangeCount>0?q.getRangeAt(0):j.createRange(),D=Id(a,[D])[0])}catch{}if(D||(D=j.createRange()),oa(D.startContainer)&&D.collapsed){const q=n.getRoot();D.setStart(q,0),D.setEnd(q,0)}return i&&u&&(0===L(D.START_TO_START,D,i)&&0===L(D.END_TO_END,D,i)?D=u:(i=null,u=null)),D},S=(D,L)=>{if(!((q=D)&&x4(q.startContainer)&&x4(q.endContainer)))return;var q;const j=y();if(D=a.dispatch("SetSelectionRange",{range:D,forward:L}).range,j){u=D;try{j.removeAllRanges(),j.addRange(D)}catch{}!1===L&&j.extend&&(j.collapse(D.endContainer,D.endOffset),j.extend(D.startContainer,D.startOffset)),i=j.rangeCount>0?j.getRangeAt(0):null}if(!D.collapsed&&D.startContainer===D.endContainer&&j?.setBaseAndExtent&&D.endOffset-D.startOffset<2&&D.startContainer.hasChildNodes()){const q=D.startContainer.childNodes[D.startOffset];q&&"IMG"===q.nodeName&&(j.setBaseAndExtent(D.startContainer,D.startOffset,D.endContainer,D.endOffset),j.anchorNode===D.startContainer&&j.focusNode===D.endContainer||j.setBaseAndExtent(q,0,q,1))}a.dispatch("AfterSetSelectionRange",{range:D,forward:L})},_=()=>{const D=y(),L=D?.anchorNode,j=D?.focusNode;if(!D||!L||!j||xd(L)||xd(j))return!0;const q=n.createRng(),ee=n.createRng();try{q.setStart(L,D.anchorOffset),q.collapse(!0),ee.setStart(j,D.focusOffset),ee.collapse(!0)}catch{return!0}return q.compareBoundaryPoints(q.START_TO_START,ee)<=0},N={dom:n,win:o,serializer:s,editor:a,expand:(D={type:"word"})=>S($d(n).expand(w(),D)),collapse:p,setCursorLocation:(D,L)=>{const j=n.createRng();Le(D)&&Le(L)?(j.setStart(D,L),j.setEnd(D,L),S(j),p(!1)):(Uv(n,j,a.getBody(),!0),S(j))},getContent:D=>((L,j={})=>{return ee=j.format?j.format:"html",Q=j,Ga(L).selection.getContent(ee,Q);var ee,Q})(a,D),setContent:h,getBookmark:(D,L)=>A.getBookmark(D,L),moveToBookmark:D=>A.moveToBookmark(D),select:(D,L)=>{return(j=n,q=D,ee=L,U.from(q).bind(Q=>U.from(Q.parentNode).map(de=>{const Oe=j.nodeIndex(Q),Re=j.createRng();return Re.setStart(de,Oe),Re.setEnd(de,Oe+1),ee&&(Uv(j,Re,Q,!0),Uv(j,Re,Q,!1)),Re}))).each(S),D;var j,q,ee},isCollapsed:()=>{const D=w(),L=y();return!(!D||D.item)&&(D.compareEndPoints?0===D.compareEndPoints("StartToEnd",D):!L||D.collapsed)},isEditable:()=>{const D=w(),L=a.getBody().querySelectorAll('[data-mce-selected="1"]');return L.length>0?Ls(L,j=>n.isEditable(j.parentElement)):D.startContainer===D.endContainer?n.isEditable(D.startContainer):n.isEditable(D.startContainer)&&n.isEditable(D.endContainer)},isForward:_,setNode:D=>(h(n.getOuterHTML(D)),D),getNode:()=>((D,L)=>{if(!L)return D;let j=L.startContainer,q=L.endContainer;const ee=L.startOffset,Q=L.endOffset;let de=L.commonAncestorContainer;L.collapsed||(j===q&&Q-ee<2&&j.hasChildNodes()&&(de=j.childNodes[ee]),yt(j)&&yt(q)&&(j=j.length===ee?xh(j.nextSibling,!0):j.parentNode,q=0===Q?xh(q.previousSibling,!1):q.parentNode,j&&j===q&&(de=j)));const Oe=yt(de)?de.parentNode:de;return Qt(Oe)?Oe:D})(a.getBody(),w()),getSel:y,setRng:S,getRng:w,getStart:D=>Jp(a.getBody(),w(),D),getEnd:D=>vy(a.getBody(),w(),D),getSelectedBlocks:(D,L)=>((j,q,ee,Q)=>{const de=[],Oe=j.getRoot(),Re=j.getParent(ee||Jp(Oe,q,q.collapsed),j.isBlock),Ne=j.getParent(Q||vy(Oe,q,q.collapsed),j.isBlock);if(Re&&Re!==Oe&&de.push(Re),Re&&Ne&&Re!==Ne){let We;const we=new ir(Re,Oe);for(;(We=we.next())&&We!==Ne;)j.isBlock(We)&&de.push(We)}return Ne&&Re!==Ne&&Ne!==Oe&&de.push(Ne),de})(n,w(),D,L),normalize:()=>{const D=w(),L=y();if(!(il(L).length>1)&&Ip(a)){const j=Gp(n,D);return j.each(q=>{S(q,_())}),j.getOr(D)}return D},selectorChanged:(D,L)=>(m(D,L),N),selectorChangedWithUnbind:m,getScrollContainer:()=>{let D,L=n.getRoot();for(;L&&"BODY"!==L.nodeName;){if(L.scrollHeight>L.clientHeight){D=L;break}L=L.parentNode}return D},scrollIntoView:(D,L)=>{var j;Le(D)?((j=a).inline?ZT:ci)(j,D,L):Kp(a,w(),L)},placeCaretAt:(D,L)=>S(mC(D,L,a.getDoc())),getBoundingClientRect:()=>{const D=w();return D.collapsed?Xe.fromRangeStart(D).getClientRects()[0]:D.getBoundingClientRect()},destroy:()=>{o=i=u=null,$.destroy()}},A=zp(N),$=ed(N,a);return N.bookmarkManager=A,N.controlSelection=$,N},fR=(n,o,s)=>{-1===wt.inArray(o,s)&&(n.addAttributeFilter(s,(a,i)=>{let u=a.length;for(;u--;)a[u].attr(i,null)}),o.push(s))},T4=(n,o)=>{const s=((n,o)=>{const s=["data-mce-selected"],a={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...n},i=o&&o.dom?o.dom:vs.DOM,u=o&&o.schema?o.schema:ju(a),m=_0(a,u);return p=a,y=i,(h=m).addAttributeFilter("data-mce-tabindex",(w,S)=>{let _=w.length;for(;_--;){const N=w[_];N.attr("tabindex",N.attr("data-mce-tabindex")),N.attr(S,null)}}),h.addAttributeFilter("src,href,style",(w,S)=>{const _="data-mce-"+S,N=p.url_converter,A=p.url_converter_scope;let $=w.length;for(;$--;){const D=w[$];let L=D.attr(_);void 0!==L?(D.attr(S,L.length>0?L:null),D.attr(_,null)):(L=D.attr(S),"style"===S?L=y.serializeStyle(y.parseStyle(L),D.name):N&&(L=N.call(A,L,S,D.name)),D.attr(S,L.length>0?L:null))}}),h.addAttributeFilter("class",w=>{let S=w.length;for(;S--;){const _=w[S];let N=_.attr("class");N&&(N=N.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),_.attr("class",N.length>0?N:null))}}),h.addAttributeFilter("data-mce-type",(w,S,_)=>{let N=w.length;for(;N--;){const A=w[N];"bookmark"===A.attr("data-mce-type")&&!_.cleanup&&(U.from(A.firstChild).exists(D=>{var L;return!rm(null!==(L=D.value)&&void 0!==L?L:"")})?A.unwrap():A.remove())}}),h.addNodeFilter("noscript",w=>{var S;let _=w.length;for(;_--;){const N=w[_].firstChild;N&&(N.value=Bi.decode(null!==(S=N.value)&&void 0!==S?S:""))}}),h.addNodeFilter("script,style",(w,S)=>{var _;const N=$=>$.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let A=w.length;for(;A--;){const $=w[A],D=$.firstChild,L=null!==(_=D?.value)&&void 0!==_?_:"";if("script"===S){const j=$.attr("type");j&&$.attr("type","mce-no/type"===j?null:j.replace(/^mce\-/,"")),"xhtml"===p.element_format&&D&&L.length>0&&(D.value="// <![CDATA[\n"+N(L)+"\n// ]]>")}else"xhtml"===p.element_format&&D&&L.length>0&&(D.value="\x3c!--\n"+N(L)+"\n--\x3e")}}),h.addNodeFilter("#comment",w=>{let S=w.length;for(;S--;){const _=w[S],N=_.value;p.preserve_cdata&&0===N?.indexOf("[CDATA[")?(_.name="#cdata",_.type=4,_.value=y.decode(N.replace(/^\[CDATA\[|\]\]$/g,""))):0===N?.indexOf("mce:protected ")&&(_.name="#text",_.type=3,_.raw=!0,_.value=unescape(N).substr(14))}}),h.addNodeFilter("xml:namespace,input",(w,S)=>{let _=w.length;for(;_--;){const N=w[_];7===N.type?N.remove():1===N.type&&("input"!==S||N.attr("type")||N.attr("type","text"))}}),h.addAttributeFilter("data-mce-type",w=>{Je(w,S=>{"format-caret"===S.attr("data-mce-type")&&(S.isEmpty(h.schema.getNonEmptyElements())?S.remove():S.unwrap())})}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(w,S)=>{let _=w.length;for(;_--;)w[_].attr(S,null)}),p.remove_trailing_brs&&ji(p,h,h.schema),{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:(h,p={})=>{const y={format:"html",...p},w=(A=h,L=$=y,Le(D=N=o)&&D.hasEventListeners("PreProcess")&&!L.no_events?((D,L,j)=>{let q;const ee=D.dom;let Q=L.cloneNode(!0);const de=document.implementation;if(de.createHTMLDocument){const Oe=de.createHTMLDocument("");wt.each("BODY"===Q.nodeName?Q.childNodes:[Q],Re=>{Oe.body.appendChild(Oe.importNode(Re,!0))}),Q="BODY"!==Q.nodeName?Oe.body.firstChild:Oe.body,q=ee.doc,ee.doc=Oe}return Re={...j,node:Q},D.dispatch("PreProcess",Re),q&&(ee.doc=q),Q;var Re})(N,A,$):A),S=((N,A,$)=>{const D=ql($.getInner?A.innerHTML:N.getOuterHTML(A));return $.selection||Js(F(A))?D:wt.trim(D)})(i,w,y),_=((N,A,$)=>{const D=$.selection?{forced_root_block:!1,...$}:$,L=N.parse(A,D);return(j=>{const q=Q=>"br"===Q?.name,ee=j.lastChild;if(q(ee)){const Q=ee.prev;q(Q)&&(ee.remove(),Q.remove())}})(L),L})(m,S,y);var N,A,$,D,L;return"tree"===y.format?_:((N,A,$,D,L)=>{var Q;return((q,ee,Q)=>{return!ee.no_events&&q?(Oe=q,Re={...ee,content:Q},Oe.dispatch("PostProcess",Re)).content:Q;var Oe,Re})(N,L,(Q=D,td(A,$).serialize(Q)))})(o,a,u,_,y)},addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:De(fR,m,s),getTempAttrs:qe(s),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter};var h,p,y})(n,o);return{schema:s.schema,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:s.serialize,addRules:s.addRules,setRules:s.setRules,addTempAttr:s.addTempAttr,getTempAttrs:s.getTempAttrs,getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},kk=(n,o,s={})=>{const a=(i=s,u=o,{format:"html",...i,set:!0,content:u});var i,u;return wx(n,a).map(i=>{const u=(h=i.content,p=i,Tk(n).editor.setContent(h,p));var h,p;return Cx(n,u.html,i),u.content}).getOr(o)},bR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),vR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),yR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),k4=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],E4=(n,o)=>{const s=Ht(o,a=>rt(n,a));return Hs(s)},Ek=(n,o)=>{const s=wt.makeMap(n.plugins," "),a=Ht(o,i=>rt(s,i));return Hs(a)},_k=n=>En(k4,o=>o.name===n).fold(()=>n,o=>o.replacedWith?`${n}, replaced by ${o.replacedWith}`:n),_x=vs.DOM,Ox=n=>U.from(n).each(o=>o.destroy()),Ax=(()=>{const n={};return{add:(o,s)=>{n[o]=s},get:o=>n[o]?n[o]:{icons:{}},has:o=>rt(n,o)}})(),O0=za.ModelManager,O4=(n,o)=>o.dom[n],u2=(n,o)=>parseInt(Ei(o,n),10),A4=De(O4,"clientWidth"),KN=De(O4,"clientHeight"),xR=De(u2,"margin-top"),to=De(u2,"margin-left"),R4=n=>{const o=[],s=()=>{const p=n.theme;return p&&p.getNotificationManagerImpl?p.getNotificationManagerImpl():(()=>{const y=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:y,close:y,getArgs:y}})()},a=()=>U.from(o[0]),i=()=>{Je(o,p=>{p.reposition()})},u=p=>{No(o,y=>y===p).each(y=>{o.splice(y,1)})},m=(p,y=!0)=>{return n.removed||!(S=(w=n).inline?w.getBody():w.getContentAreaContainer(),U.from(S).map(F)).map(ki).getOr(!1)?{}:(y&&n.dispatch("BeforeOpenNotification",{notification:p}),En(o,w=>{return!((S=s().getArgs(w)).type!==(_=p).type||S.text!==_.text||S.progressBar||S.timeout||_.progressBar||_.timeout);var S,_}).getOrThunk(()=>{n.editorManager.setActive(n);const w=s().open(p,()=>{u(w),i(),a().fold(()=>n.focus(),S=>ph(F(S.getEl())))});return(S=>{o.push(S)})(w),i(),n.dispatch("OpenNotification",{notification:{...w}}),w}));var w,S},h=qe(o);return(p=n).on("SkinLoaded",()=>{const y=Sv(p);y&&m({text:y,type:"warning",timeout:0},!1),i()}),p.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(i)}),p.on("remove",()=>{Je(o.slice(),y=>{s().close(y)})}),{open:m,close:()=>{a().each(p=>{s().close(p),u(p),i()})},getNotifications:h};var p},Jn=za.PluginManager,Rf=za.ThemeManager,SR=n=>{let o=[];const s=()=>{const m=n.theme;return m&&m.getWindowManagerImpl?m.getWindowManagerImpl():(()=>{const h=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:h,openUrl:h,alert:h,confirm:h,close:h}})()},a=(m,h)=>(...p)=>h?h.apply(m,p):void 0,i=m=>{n.dispatch("CloseWindow",{dialog:m}),o=Ht(o,h=>h!==m),0===o.length&&n.focus()},u=m=>{n.editorManager.setActive(n),Zc(n),n.ui.show();const h=m();return o.push(p=h),n.dispatch("OpenWindow",{dialog:p}),h;var p};return n.on("remove",()=>{Je(o,m=>{s().close(m)})}),{open:(m,h)=>u(()=>s().open(m,h,i)),openUrl:m=>u(()=>s().openUrl(m,i)),alert:(m,h,p)=>{const y=s();y.alert(m,a(p||y,h))},confirm:(m,h,p)=>{const y=s();y.confirm(m,a(p||y,h))},close:()=>{U.from(o[o.length-1]).each(m=>{s().close(m),i(m)})}}},TR=(n,o)=>{n.notificationManager.open({type:"error",text:o})},Rx=(n,o)=>{n._skinLoaded?TR(n,o):n.on("SkinLoaded",()=>{TR(n,o)})},Dx=(n,o,s)=>{Pb(n,o,{message:s}),console.error(s)},Mx=(n,o,s)=>s?`Failed to load ${n}: ${s} from url ${o}`:`Failed to load ${n} url: ${o}`,Nx=(n,...o)=>{const s=window.console;s&&(s.error?s.error(n,...o):s.log(n,...o))},D4=(n,o)=>{const s=n.editorManager.baseURL+"/skins/content",a=`content${n.editorManager.suffix}.css`;return ln(o,i=>/^[a-z0-9\-]+$/i.test(i)&&!n.inline?`${s}/${i}/${a}`:n.documentBaseURI.toAbsolute(i))},M4=()=>{let n={};const o=(a,i)=>({status:a,resultUri:i}),s=a=>a in n;return{hasBlobUri:s,getResultUri:a=>{const i=n[a];return i?i.resultUri:null},isPending:a=>!!s(a)&&1===n[a].status,isUploaded:a=>!!s(a)&&2===n[a].status,markPending:a=>{n[a]=o(1,null)},markUploaded:(a,i)=>{n[a]=o(2,i)},removeFailed:a=>{delete n[a]},destroy:()=>{n={}}}};let kR=0;const A0=n=>()=>n.notificationManager.open({text:n.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Ok=(n,o)=>((n,o)=>{const s={},a=(p,y)=>new Promise((w,S)=>{const _=new XMLHttpRequest;_.open("POST",o.url),_.withCredentials=o.credentials,_.upload.onprogress=A=>{y(A.loaded/A.total*100)},_.onerror=()=>{S("Image upload failed due to a XHR Transport error. Code: "+_.status)},_.onload=()=>{if(_.status<200||_.status>=300)return void S("HTTP Error: "+_.status);const A=JSON.parse(_.responseText);var $,D;A&&zt(A.location)?w((D=A.location,($=o.basePath)?$.replace(/\/$/,"")+"/"+D.replace(/^\//,""):D)):S("Invalid JSON: "+_.responseText)};const N=new FormData;N.append("file",p.blob(),p.filename()),_.send(N)}),i=mo(o.handler)?o.handler:a,u=(p,y)=>({url:y,blobInfo:p,status:!0}),m=(p,y)=>({url:"",blobInfo:p,status:!1,error:y}),h=(p,y)=>{wt.each(s[p],w=>{w(y)}),delete s[p]};return{upload:(p,y)=>{return o.url||i!==a?(S=y,w=wt.grep(w=p,_=>!n.isUploaded(_.blobUri())),Promise.all(wt.map(w,_=>{return n.isPending(_.blobUri())?(N=>{const A=N.blobUri();return new Promise($=>{s[A]=s[A]||[],s[A].push($)})})(_):(A=i,$=S,n.markPending((N=_).blobUri()),new Promise(D=>{let L,j;try{const q=()=>{L&&(L.close(),j=gt)},ee=de=>{q(),n.markUploaded(N.blobUri(),de),h(N.blobUri(),u(N,de)),D(u(N,de))},Q=de=>{q(),n.removeFailed(N.blobUri()),h(N.blobUri(),m(N,de)),D(m(N,de))};j=de=>{de<0||de>100||U.from(L).orThunk(()=>U.from($).map(An)).each(Oe=>{L=Oe,Oe.progressBar.value(de)})},A(N,j).then(ee,de=>{Q(zt(de)?{message:de}:de)})}catch(q){D(m(N,q))}}));var N,A,$}))):new Promise(w=>{w([])});var w,S}}})(o,{url:bT(n),basePath:Ew(n),credentials:Tu(n),handler:db(n)}),N4={remove_similar:!0,inherit:!1},R0={selector:"td,th",...N4},B4={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...R0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...R0},tablecellbordercolor:{styles:{borderColor:"%value"},...R0},tablecellclass:{classes:["%value"],...R0},tableclass:{selector:"table",classes:["%value"],...N4},tablecellborderstyle:{styles:{borderStyle:"%value"},...R0},tablecellborderwidth:{styles:{borderWidth:"%value"},...R0}},OR=qe(B4),Ak=wt.each,jd=vs.DOM,Rk=n=>Le(n)&&Mo(n),P4=(n,o)=>{const s=o&&o.schema||ju({}),a=m=>{const h=zt(m)?{name:m,classes:[],attrs:{}}:m,p=jd.create(h.name);return y=p,(w=h).classes.length>0&&jd.addClass(y,w.classes.join(" ")),jd.setAttribs(y,w.attrs),p;var y,w},i=(m,h,p)=>{let y;const w=h[0],S=Rk(w)?w.name:void 0,_=(($,D)=>{const j=s.getElementRule($.nodeName.toLowerCase())?.parentsRequired;return!(!j||!j.length)&&(D&&Be(j,D)?D:j[0])})(m,S);if(_)S===_?(y=w,h=h.slice(1)):y=_;else if(w)y=w,h=h.slice(1);else if(!p)return m;const N=y?a(y):jd.create("div");N.appendChild(m),p&&wt.each(p,$=>{const D=a($);N.insertBefore(D,m)});const A=Rk(y)?y.siblings:void 0;return i(N,h,A)},u=jd.create("div");if(n.length>0){const m=n[0],h=a(m),p=Rk(m)?m.siblings:void 0;u.appendChild(i(h,n.slice(1),p))}return u},AR=n=>{let o="div";const s={name:o,classes:[],attrs:{},selector:n=wt.trim(n)};return"*"!==n&&(o=n.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(a,i,u,m,h)=>{switch(i){case"#":s.attrs.id=u;break;case".":s.classes.push(u);break;case":":-1!==wt.inArray("checked disabled enabled read-only required".split(" "),u)&&(s.attrs[u]=u)}if("["===m){const p=h.match(/([\w\-]+)(?:\=\"([^\"]+))?/);p&&(s.attrs[p[1]]=p[2])}return""})),s.name=o||"div",s},RR=(n,o)=>{let s="",a=Ep(n);if(""===a)return"";const i=N=>zt(N)?N.replace(/%(\w+)/g,""):"",u=(N,A)=>jd.getStyle(A??n.getBody(),N,!0);if(zt(o)){const N=n.formatter.get(o);if(!N)return"";o=N[0]}if("preview"in o){const N=o.preview;if(!1===N)return"";a=N||a}let m,h=o.block||o.inline||"span";const p=zt(y=o.selector)?(y=(y=y.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),wt.map(y.split(/(?:>|\s+(?![^\[\]]+\]))/),N=>{const A=wt.map(N.split(/(?:~\+|~|\+)/),AR),$=A.pop();return A.length&&($.siblings=A),$}).reverse()):[];var y;p.length>0?(p[0].name||(p[0].name=h),h=o.selector,m=P4(p,n)):m=P4([h],n);const w=jd.select(h,m)[0]||m.firstChild;Ak(o.styles,(N,A)=>{const $=i(N);$&&jd.setStyle(w,A,$)}),Ak(o.attributes,(N,A)=>{const $=i(N);$&&jd.setAttrib(w,A,$)}),Ak(o.classes,N=>{const A=i(N);jd.hasClass(w,A)||jd.addClass(w,A)}),n.dispatch("PreviewFormats"),jd.setStyles(m,{position:"absolute",left:-65535}),n.getBody().appendChild(m);const S=u("fontSize"),_=/px$/.test(S)?parseInt(S,10):0;return Ak(a.split(" "),N=>{let A=u(N,w);if(!("background-color"===N&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(A)&&(A=u(N),"#ffffff"===Fp(A).toLowerCase())||"color"===N&&"#000000"===Fp(A).toLowerCase())){if("font-size"===N&&/em|%$/.test(A)){if(0===_)return;A=parseFloat(A)/(/%$/.test(A)?100:1)*_+"px"}"border"===N&&A&&(s+="padding:0 2px;"),s+=N+":"+A+";"}}),n.dispatch("AfterPreviewFormats"),jd.remove(m),s},Dk=n=>{const o=(a=>{const i={},u=(m,h)=>{m&&(zt(m)?(Wn(h)||(h=[h]),Je(h,p=>{en(p.deep)&&(p.deep=!Nl(p)),en(p.split)&&(p.split=!Nl(p)||Ra(p)),en(p.remove)&&Nl(p)&&!Ra(p)&&(p.remove="none"),Nl(p)&&Ra(p)&&(p.mixed=!0,p.block_expand=!0),zt(p.classes)&&(p.classes=p.classes.split(/\s+/))}),i[m]=h):Ke(m,(p,y)=>{u(y,p)}))};return u((m=>{const h=m.dom,p=m.schema.type,y={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:w=>{h.setStyle(w,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:w=>{h.setStyle(w,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const w={inline:"span",styles:{textDecoration:"line-through"},exact:!0},S={inline:"strike",remove:"all",preserve_attributes:["class","style"]},_={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==p?[_,w,S]:[w,_,S]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(w,S,_)=>Qt(w)&&w.hasAttribute("href"),onformat:(w,S,_)=>{wt.each(_,(N,A)=>{h.setAttrib(w,A,N)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":w=>{var S;return null!==(S=w?.customValue)&&void 0!==S?S:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return wt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),w=>{y[w]={block:w,remove:"all"}}),y})(a)),u(OR()),u(kp(a)),{get:m=>Le(m)?i[m]:i,has:m=>rt(i,m),register:u,unregister:m=>(m&&i[m]&&delete i[m],i)}})(n),s=aa({});return(a=>{a.addShortcut("meta+b","","Bold"),a.addShortcut("meta+i","","Italic"),a.addShortcut("meta+u","","Underline");for(let i=1;i<=6;i++)a.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);a.addShortcut("access+7","",["FormatBlock",!1,"p"]),a.addShortcut("access+8","",["FormatBlock",!1,"div"]),a.addShortcut("access+9","",["FormatBlock",!1,"address"])})(n),(a=n).on("mouseup keydown",i=>{var u;((m,h,p)=>{const y=m.selection,w=m.getBody();Eg(m,null,p),8!==h&&46!==h||!y.isCollapsed()||"\ufeff"!==y.getStart().innerHTML||Eg(m,hg(w,y.getStart())),37!==h&&39!==h||Eg(m,hg(w,y.getStart()))})(a,i.keyCode,(u=a.selection.getRng().endContainer,yt(u)&&Ss(u.data,jo)))}),Ag(n)||((a,i)=>{a.set({}),i.on("NodeChange",u=>{T0(i,u.element,a.get())}),i.on("FormatApply FormatRemove",u=>{const m=U.from(u.node).map(h=>sf(h)?h:h.startContainer).bind(h=>Qt(h)?U.some(h):U.from(h.parentElement)).getOrThunk(()=>ix(i));T0(i,m,a.get())})})(s,n),{get:o.get,has:o.has,register:o.register,unregister:o.unregister,apply:(a,i,u)=>{var h,p,y;h=a,p=i,y=u,Ga(n).formatter.apply(h,p,y)},remove:(a,i,u,m)=>{var p,y,w,S;p=a,y=i,w=u,S=m,Ga(n).formatter.remove(p,y,w,S)},toggle:(a,i,u)=>{var h,p,y;h=a,p=i,y=u,Ga(n).formatter.toggle(h,p,y)},match:(a,i,u,m)=>{return p=a,y=i,w=u,S=m,Ga(n).formatter.match(p,y,w,S);var p,y,w,S},closest:a=>{return u=a,Ga(n).formatter.closest(u);var u},matchAll:(a,i)=>{return m=a,h=i,Ga(n).formatter.matchAll(m,h);var m,h},matchNode:(a,i,u,m)=>{return p=a,y=i,w=u,S=m,Ga(n).formatter.matchNode(p,y,w,S);var p,y,w,S},canApply:a=>{return u=a,Ga(n).formatter.canApply(u);var u},formatChanged:(a,i,u,m)=>{return p=s,y=a,w=i,S=u,_=m,Ga(n).formatter.formatChanged(p,y,w,S,_);var p,y,w,S,_},getCssText:De(RR,n)};var a},F4=n=>{switch(n.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},So=n=>{const o=Po(),s=aa(0),a=aa(0),i={data:[],typing:!1,beforeChange:()=>{var m,h;m=s,h=o,Ga(n).undoManager.beforeChange(m,h)},add:(u,m)=>{return p=i,y=a,w=s,S=o,_=u,N=m,Ga(n).undoManager.add(p,y,w,S,_,N);var p,y,w,S,_,N},dispatchChange:()=>{n.setDirty(!0);const u=Tx(n);u.bookmark=wp(n.selection),n.dispatch("change",{level:u,lastLevel:Ps(i.data,a.get()).getOrUndefined()})},undo:()=>{return m=i,h=s,p=a,Ga(n).undoManager.undo(m,h,p);var m,h,p},redo:()=>{return m=a,h=i.data,Ga(n).undoManager.redo(m,h);var m,h},clear:()=>{var m,h;m=i,h=a,Ga(n).undoManager.clear(m,h)},reset:()=>{var m;m=i,Ga(n).undoManager.reset(m)},hasUndo:()=>{return m=i,h=a,Ga(n).undoManager.hasUndo(m,h);var m,h},hasRedo:()=>{return m=i,h=a,Ga(n).undoManager.hasRedo(m,h);var m,h},transact:u=>{return h=i,p=s,y=u,Ga(n).undoManager.transact(h,p,y);var h,p,y},ignore:u=>{var h,p;h=s,p=u,Ga(n).undoManager.ignore(h,p)},extra:(u,m)=>{var p,y,w,S;p=i,y=a,w=u,S=m,Ga(n).undoManager.extra(p,y,w,S)}};return Ag(n)||((u,m,h)=>{const p=aa(!1),y=w=>{Ex(m,!1,h),m.add({},w)};u.on("init",()=>{m.add()}),u.on("BeforeExecCommand",w=>{F4(w.command)||(xk(m,h),m.beforeChange())}),u.on("ExecCommand",w=>{F4(w.command)||y(w)}),u.on("ObjectResizeStart cut",()=>{m.beforeChange()}),u.on("SaveContent ObjectResized blur",y),u.on("dragend",y),u.on("keyup",w=>{const S=w.keyCode;if(w.isDefaultPrevented())return;const _=wo.os.isMacOS()&&"Meta"===w.key;(S>=33&&S<=36||S>=37&&S<=40||45===S||w.ctrlKey||_)&&(y(),u.nodeChanged()),46!==S&&8!==S||u.nodeChanged(),p.get()&&m.typing&&!Ck(Tx(u),m.data[0])&&(u.isDirty()||u.setDirty(!0),u.dispatch("TypingUndo"),p.set(!1),u.nodeChanged())}),u.on("keydown",w=>{const S=w.keyCode;if(!w.isDefaultPrevented()){if(!(S>=33&&S<=36||S>=37&&S<=40||45===S))return!(S<16||S>20)||224===S||91===S||m.typing||w.ctrlKey&&!w.altKey||w.metaKey?void((wo.os.isMacOS()?w.metaKey:w.ctrlKey&&!w.altKey)&&m.beforeChange()):(m.beforeChange(),Ex(m,!0,h),m.add({},w),void p.set(!0));m.typing&&y(w)}}),u.on("mousedown",w=>{m.typing&&y(w)}),u.on("input",w=>{var S,_;w.inputType&&("insertReplacementText"===w.inputType||"insertText"===(S=w).inputType&&null===S.data||"insertFromPaste"===(_=w).inputType||"insertFromDrop"===_.inputType)&&y(w)}),u.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||u.nodeChanged()})})(n,i,s),(u=n).addShortcut("meta+z","","Undo"),u.addShortcut("meta+y,meta+shift+z","","Redo"),i;var u},$4=[9,27,qt.HOME,qt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,qt.DOWN,qt.UP,qt.LEFT,qt.RIGHT].concat(wo.browser.isFirefox()?[224]:[]),d2="data-mce-placeholder",Mk=n=>"keydown"===n.type||"keyup"===n.type,Nk=n=>{const o=n.keyCode;return o===qt.BACKSPACE||o===qt.DELETE},I4=(n,o)=>({from:n,to:o}),Bx=(n,o)=>{const s=F(n),a=F(o.container());return s0(s,a).map(i=>({block:i,position:o}))},Bk=(n,o)=>el(o,s=>Qm(s)||H(s.dom),s=>cn(s,n)).filter(an).getOr(n),L4=n=>{const o=(s=>{const a=Na(s);return No(a,ti).fold(qe(a),i=>a.slice(0,i))})(n);return Je(o,gr),o},Pk=(n,o)=>{const s=Vd(o,n);return En(s.reverse(),a=>os(a)).each(gr)},DR=(n,o,s,a)=>{if(os(s))return Ri(s),Mc(s.dom);0===Ht(Fs(a),u=>!os(u)).length&&os(o)&&Ya(a,Nr("br"));const i=tr(s.dom,Xe.before(a.dom));return Je(L4(o),u=>{Ya(a,u)}),Pk(n,o),i},MR=(n,o,s)=>{if(os(s)){if(os(o)){const u=ro((m=>{const h=(p,y)=>bd(p).fold(()=>y,w=>Br(w)?h(w,y.concat(kr(w))):y);return h(m,[])})(s),(m,h)=>(Lu(m,h),h),yl());bu(o),Or(o,u)}return gr(s),Mc(o.dom)}const a=Rl(s.dom);return Je(L4(o),i=>{Or(s,i)}),Pk(n,o),a},H4=(n,o)=>{Qs(n,o.dom).bind(s=>U.from(s.getNode())).map(F).filter(Ai).each(gr)},V4=(n,o,s)=>{return H4(!0,o),H4(!1,s),(a=o,i=s,bs(i,a)?((u,m)=>{const h=Vd(m,u);return U.from(h[h.length-1])})(i,a):U.none()).fold(De(MR,n,o,s),De(DR,n,o,s));var a,i},z4=(n,o,s,a)=>o?V4(n,a,s):V4(n,s,a),Fk=(n,o)=>{const s=F(n.getBody());return(i=s.dom,u=o,m=n.selection.getRng(),m.collapsed?((h,p,y)=>{const w=Bx(h,Xe.fromRangeStart(y)),S=w.bind(_=>ur(p,h,_.position).bind(N=>Bx(h,N).map(A=>{return $=h,D=p,Tr((L=A).position.getNode())&&!os(L.block)?Qs(!1,L.block.dom).bind(j=>j.isEqual(L.position)?ur(D,$,j).bind(q=>Bx($,q)):U.some(L)).getOr(L):L;var $,D,L})));return Ds(w,S,I4).filter(_=>{return!cn((N=_).from.block,N.to.block)&&((N,A)=>{const $=F(N);return cn(Bk($,A.from.block),Bk($,A.to.block))})(h,_)&&(N=>!1===K(N.from.block.dom)&&!1===K(N.to.block.dom))(_)&&(N=>{const A=$=>Wh($)||Yh($.dom);return A(N.from.block)&&A(N.to.block)})(_);var N})})(i,u,m):U.none()).map(i=>()=>{z4(s,o,i.from.block,i.to.block).each(u=>{n.selection.setRng(u.toRange())})});var i,u,m},U4=(n,o)=>{const s=F(o),a=De(cn,n);return Vc(s,Qm,a).isSome()},m2=(n,o)=>n.selection.isCollapsed()?U.none():(n=>{const o=F(n.getBody());return((s,a)=>{const i=tr(s.dom,Xe.fromRangeStart(a)).isNone(),u=er(s.dom,Xe.fromRangeEnd(a)).isNone();return!(U4(m=s,(h=a).startContainer)||U4(m,h.endContainer))&&i&&u;var m,h})(o,n.selection.getRng())?(s=n,U.some(()=>{s.setContent(""),s.selection.setCursorLocation()})):((s,a)=>{const i=a.getRng();return Ds(s0(s,F(i.startContainer)),s0(s,F(i.endContainer)),(u,m)=>cn(u,m)?U.none():U.some(()=>{i.deleteContents(),z4(s,!0,u,m).each(h=>{a.setRng(h.toRange())})})).getOr(U.none())})(o,n.selection);var s})(n),Pm=(n,o,s,a,i)=>U.from(o._selectionOverrides.showCaret(n,s,a,i)),g2=(n,o)=>n.dispatch("BeforeObjectSelected",{target:o}).isDefaultPrevented()?U.none():U.some((s=>{const a=s.ownerDocument.createRange();return a.selectNode(s),a})(o)),$k=(n,o,s)=>o.collapsed?((a,i,u)=>{const m=Nd(1,a.getBody(),i),h=Xe.fromRangeStart(m),p=h.getNode();if(ug(p))return Pm(1,a,p,!h.isAtEnd(),!1);const y=h.getNode(!0);if(ug(y))return Pm(1,a,y,!1,!1);const w=Nm(a.dom.getRoot(),h.getNode());return ug(w)?Pm(1,a,w,!1,u):U.none()})(n,o,s).getOr(o):o,BR=n=>Ld(n)||e1(n),PR=n=>Am(n)||t1(n),Z4=(n,o,s,a,i,u)=>{var m,h;Pm(a,n,u.getNode(!i),i,!0).each(m=>{if(o.collapsed){const h=o.cloneRange();i?h.setEnd(m.startContainer,m.startOffset):h.setStart(m.endContainer,m.endOffset),h.deleteContents()}else o.deleteContents();n.selection.setRng(m)}),m=n.dom,yt(h=s)&&0===h.data.length&&m.remove(h)},Ik=(n,o)=>((s,a)=>{const i=s.selection.getRng();if(!yt(i.commonAncestorContainer))return U.none();const u=a?ac.Forwards:ac.Backwards,m=_u(s.getBody()),h=De(Eb,a?m.next:m.prev),p=a?BR:PR,y=gg(u,s.getBody(),i),w=h(y),S=w&&ru(a,w);if(!S||!Dp(y,S))return U.none();if(p(S))return U.some(()=>Z4(s,i,y.getNode(),u,a,S));const _=h(S);return _&&p(_)&&Dp(S,_)?U.some(()=>Z4(s,i,y.getNode(),u,a,_)):U.none()})(n,o),Lk=(n,o)=>{const s=n.getBody();return o?Mc(s).filter(Ld):Rl(s).filter(Am)},Hk=n=>{const o=n.selection.getRng();return!o.collapsed&&(Lk(n,!0).exists(s=>s.isEqual(Xe.fromRangeStart(o)))||Lk(n,!1).exists(s=>s.isEqual(Xe.fromRangeEnd(o))))},Du=Rd([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),W4=(n,o,s)=>ur(o,n,s).bind(a=>{return i=a.getNode(),Le(i)&&(Qm(F(i))||jg(F(i)))||((u,m,h,p)=>{const y=w=>Br(F(w))&&!Xu(h,p,u);return Rp(!m,h).fold(()=>Rp(m,p).fold(yn,y),y)})(n,o,s,a)?U.none():o&&K(a.getNode())||!o&&K(a.getNode(!0))?((u,m,h,p)=>{const y=p.getNode(!m);return s0(F(u),F(h.getNode())).map(w=>os(w)?Du.remove(w.dom):Du.moveToElement(y)).orThunk(()=>U.some(Du.moveToElement(y)))})(n,o,s,a):o&&Am(s)||!o&&Ld(s)?U.some(Du.moveToPosition(a)):U.none();var i}),j4=(n,o)=>U.from(Nm(n.getBody(),o)),G4=n=>{const o=n.dom,s=n.selection,a=Nm(n.getBody(),s.getNode());if(H(a)&&o.isBlock(a)&&o.isEmpty(a)){const i=o.create("br",{"data-mce-bogus":"1"});o.setHTML(a,""),a.appendChild(i),s.setRng(Xe.before(i).toRange())}return!0},Px=(n,o)=>n.selection.isCollapsed()?((n,o)=>{const s=n.selection.getNode();return j4(n,s).filter(K).fold(()=>((a,i,u)=>{const m=Nd(i?1:-1,a,u),h=Xe.fromRangeStart(m),p=F(a);return!i&&Am(h)?U.some(Du.remove(h.getNode(!0))):i&&Ld(h)?U.some(Du.remove(h.getNode())):!i&&Ld(h)&&Ry(p,h)?XT(p,h).map(y=>Du.remove(y.getNode())):i&&Am(h)&&MC(p,h)?JT(p,h).map(y=>Du.remove(y.getNode())):(y=a,((_,N)=>{const A=N.getNode(!_),$=_?"after":"before";return Qt(A)&&A.getAttribute("data-mce-caret")===$})(w=i,S=h)?(_=w,N=S.getNode(!w),ve(N)?U.none():_&&K(N.nextSibling)?U.some(Du.moveToElement(N.nextSibling)):!_&&K(N.previousSibling)?U.some(Du.moveToElement(N.previousSibling)):U.none()).orThunk(()=>W4(y,w,S)):W4(y,w,S).bind(_=>((N,A,$)=>$.fold(D=>U.some(Du.remove(D)),D=>U.some(Du.moveToElement(D)),D=>Xu(A,D,N)?U.none():U.some(Du.moveToPosition(D))))(y,S,_)));var y,w,S,_,N})(n.getBody(),o,n.selection.getRng()).map(a=>()=>{return a.fold((i=n,u=o,m=>(i._selectionOverrides.hideFakeCaret(),Ou(i,u,F(m)),!0)),((i,u)=>m=>{const h=u?Xe.before(m):Xe.after(m);return i.selection.setRng(h.toRange()),!0})(n,o),(i=>u=>(i.selection.setRng(u.toRange()),!0))(n));var i,u}),()=>U.some(gt))})(n,o):((s,a)=>{const i=s.selection.getNode();return K(i)&&!me(i)?j4(s,i.parentNode).filter(K).fold(()=>U.some(()=>{var u;u=F(s.getBody()),Je(Ea(u,".mce-offscreen-selection"),gr),Ou(s,a,F(s.selection.getNode())),$y(s)}),()=>U.some(gt)):Hk(s)?U.some(()=>{zC(s,s.selection.getRng(),F(s.getBody()))}):U.none()})(n,o),Vk=(n,o)=>n.selection.isCollapsed()?((s,a)=>{const i=Xe.fromRangeStart(s.selection.getRng());return ur(a,s.getBody(),i).filter(u=>a?Ey(u):DC(u)).bind(u=>rc(a?0:-1,u)).map(u=>()=>s.selection.select(u))})(n,o):U.none(),D0=yt,zk=n=>D0(n)&&n.data[0]===Pn,Uk=n=>D0(n)&&n.data[n.data.length-1]===Pn,Zk=n=>{var o;return(null!==(o=n.ownerDocument)&&void 0!==o?o:document).createTextNode(Pn)},h2=(n,o)=>n?(s=>{var a;if(D0(s.previousSibling))return Uk(s.previousSibling)||s.previousSibling.appendData(Pn),s.previousSibling;if(D0(s))return zk(s)||s.insertData(0,Pn),s;{const i=Zk(s);return null===(a=s.parentNode)||void 0===a||a.insertBefore(i,s),i}})(o):(s=>{var a,i;if(D0(s.nextSibling))return zk(s.nextSibling)||s.nextSibling.insertData(0,Pn),s.nextSibling;if(D0(s))return Uk(s)||s.appendData(Pn),s;{const u=Zk(s);return s.nextSibling?null===(a=s.parentNode)||void 0===a||a.insertBefore(u,s.nextSibling):null===(i=s.parentNode)||void 0===i||i.appendChild(u),u}})(o),ml=De(h2,!0),FR=De(h2,!1),q4=(n,o)=>yt(n.container())?h2(o,n.container()):h2(o,n.getNode()),K4=(n,o)=>{const s=o.get();return s&&n.container()===s&&Kl(s)},Wk=(n,o)=>o.fold(s=>{ku(n.get());const a=ml(s);return n.set(a),U.some(Xe(a,a.length-1))},s=>Mc(s).map(a=>{if(K4(a,n)){const i=n.get();return Xe(i,1)}{ku(n.get());const i=q4(a,!0);return n.set(i),Xe(i,1)}}),s=>Rl(s).map(a=>{if(K4(a,n)){const i=n.get();return Xe(i,i.length-1)}{ku(n.get());const i=q4(a,!1);return n.set(i),Xe(i,i.length-1)}}),s=>{ku(n.get());const a=FR(s);return n.set(a),U.some(Xe(a,1))}),Y4=(n,o)=>{for(let s=0;s<n.length;s++){const a=n[s].apply(null,o);if(a.isSome())return a}return U.none()},Cc=Rd([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),X4=(n,o)=>Cm(o,n)||n,$R=(n,o,s)=>{const a=IC(s),i=X4(o,a.container());return Mm(n,i,a).fold(()=>er(i,a).bind(De(Mm,n,i)).map(u=>Cc.before(u)),U.none)},Zr=(n,o)=>null===hg(n,o),f2=(n,o,s)=>Mm(n,o,s).filter(De(Zr,o)),YN=(n,o,s)=>{const a=LC(s);return f2(n,o,a).bind(i=>tr(i,a).isNone()?U.some(Cc.start(i)):U.none())},jc=(n,o,s)=>{const a=IC(s);return f2(n,o,a).bind(i=>er(i,a).isNone()?U.some(Cc.end(i)):U.none())},ks=(n,o,s)=>{const a=LC(s),i=X4(o,a.container());return Mm(n,i,a).fold(()=>tr(i,a).bind(De(Mm,n,i)).map(u=>Cc.after(u)),U.none)},uu=n=>!Th(Fx(n)),Rg=(n,o,s)=>Y4([$R,YN,jc,ks],[n,o,s]).filter(uu),Fx=n=>n.fold(Se,Se,Se,Se),$x=n=>n.fold(qe("before"),qe("start"),qe("end"),qe("after")),M0=n=>n.fold(Cc.before,Cc.before,Cc.after,Cc.after),Ix=n=>n.fold(Cc.start,Cc.start,Cc.end,Cc.end),J4=(n,o,s,a,i,u)=>Ds(Mm(o,s,a),Mm(o,s,i),(m,h)=>m!==h&&((p,y,w)=>{const S=Cm(y,p),_=Cm(w,p);return Le(S)&&S===_})(s,m,h)?Cc.after(n?m:h):u).getOr(u),IR=(n,o)=>n.fold(Lt,s=>{return i=o,!($x(a=s)===$x(i)&&Fx(a)===Fx(i));var a,i}),LR=(n,o)=>n?o.fold(Is(U.some,Cc.start),U.none,Is(U.some,Cc.after),U.none):o.fold(U.none,Is(U.some,Cc.before),U.none,Is(U.some,Cc.end)),Lx=(n,o,s)=>{const a=n?1:-1;return o.setRng(Xe(s.container(),s.offset()+a).toRange()),o.getSel().modify("move",n?"forward":"backward","word"),!0};var Fm;!function(n){n[n.Br=0]="Br",n[n.Block=1]="Block",n[n.Wrap=2]="Wrap",n[n.Eol=3]="Eol"}(Fm||(Fm={}));const du=(n,o)=>n===ac.Backwards?Qr(o):o,HR=(n,o,s)=>n===ac.Forwards?o.next(s):o.prev(s),VR=(n,o,s,a)=>Tr(a.getNode(o===ac.Forwards))?Fm.Br:!1===Xu(s,a)?Fm.Block:Fm.Wrap,zR=(n,o,s,a)=>{const i=_u(s);let u=a;const m=[];for(;u;){const h=HR(o,i,u);if(!h)break;if(Tr(h.getNode(!1)))return o===ac.Forwards?{positions:du(o,m).concat([h]),breakType:Fm.Br,breakAt:U.some(h)}:{positions:du(o,m),breakType:Fm.Br,breakAt:U.some(h)};if(h.isVisible()){if(n(u,h)){const p=VR(0,o,u,h);return{positions:du(o,m),breakType:p,breakAt:U.some(h)}}m.push(h),u=h}else u=h}return{positions:du(o,m),breakType:Fm.Eol,breakAt:U.none()}},Hx=(n,o,s,a)=>o(s,a).breakAt.map(i=>{const u=o(s,i).positions;return n===ac.Backwards?u.concat(i):[i].concat(u)}).getOr([]),jk=(n,o)=>fo(n,(s,a)=>s.fold(()=>U.some(a),i=>Ds(or(i.getClientRects()),or(a.getClientRects()),(u,m)=>{const h=Math.abs(o-u.left);return Math.abs(o-m.left)<=h?a:i}).or(s)),U.none()),Df=(n,o)=>or(o.getClientRects()).bind(s=>jk(n,s.left)),p2=De(zR,Xe.isAbove,-1),Dg=De(zR,Xe.isBelow,1),Mu=De(Hx,-1,p2),N0=De(Hx,1,Dg),nr=(n,o)=>p2(n,o).breakAt.isNone(),B0=(n,o)=>Dg(n,o).breakAt.isNone(),Q4=(n,o)=>Df(Mu(n,o),o),e3=(n,o)=>Df(N0(n,o),o),Gk=K,Vx=(n,o)=>Math.abs(n.left-o),zx=(n,o)=>Math.abs(n.right-o),Ux=(n,o)=>Fr(n,(s,a)=>{const i=Math.min(Vx(s,o),zx(s,o)),u=Math.min(Vx(a,o),zx(a,o));return u===i&&Qn(a,"node")&&Gk(a.node)||u<i?a:s}),Zx=n=>{const o=s=>ln(s,a=>{const i=Ql(a);return i.node=n,i});if(Qt(n))return o(n.getClientRects());if(yt(n)){const s=n.ownerDocument.createRange();return s.setStart(n,0),s.setEnd(n,n.data.length),o(s.getClientRects())}return[]},Wx=n=>Ao(n,Zx);var P0;!function(n){n[n.Up=-1]="Up",n[n.Down=1]="Down"}(P0||(P0={}));const qk=(n,o,s,a,i,u)=>{let m=0;const h=[],p=S=>{let _=Wx([S]);-1===n&&(_=_.reverse());for(let N=0;N<_.length;N++){const A=_[N];if(!s(A,y)){if(h.length>0&&o(A,rr(h))&&m++,A.line=m,i(A))return!0;h.push(A)}}return!1},y=rr(u.getClientRects());if(!y)return h;const w=u.getNode();return w&&(p(w),((S,_,N,A)=>{let $=A;for(;$=Gs($,S,Di,_);)if(N($))return})(n,a,p,w)),h},t3=De(qk,P0.Up,dm,mp),n3=De(qk,P0.Down,mp,dm),Kk=n=>rr(n.getClientRects()),C1=n=>o=>o.line>n,jx=n=>o=>o.line===n,$m=(n,o)=>{n.selection.setRng(o),Kp(n,n.selection.getRng())},Yk=(n,o,s)=>U.some($k(n,o,s)),o3=(n,o,s,a,i,u)=>{const m=o===ac.Forwards,h=_u(n.getBody()),p=De(Eb,m?h.next:h.prev),y=m?a:i;if(!s.collapsed){const A=rh(s);if(u(A))return Pm(o,n,A,o===ac.Backwards,!1);if(Hk(n)){const $=s.cloneRange();return $.collapse(o===ac.Backwards),U.from($)}}const w=gg(o,n.getBody(),s);if(y(w))return g2(n,w.getNode(!m));let S=p(w);const _=Yg(s);if(!S)return _?U.some(s):U.none();if(S=ru(m,S),y(S))return Pm(o,n,S.getNode(!m),m,!1);const N=p(S);return N&&y(N)&&Dp(S,N)?Pm(o,n,N.getNode(!m),m,!1):_?Yk(n,S.toRange(),!1):U.none()},Xk=(n,o,s,a,i,u)=>{const m=gg(o,n.getBody(),s),h=rr(m.getClientRects()),p=o===P0.Down,y=n.getBody();if(!h)return U.none();if(Hk(n)){const $=p?Xe.fromRangeEnd(s):Xe.fromRangeStart(s);return(p?e3:Q4)(y,$).orThunk(()=>U.from($)).map(D=>D.toRange())}const w=(p?n3:t3)(y,C1(1),m),S=Ht(w,jx(1)),_=h.left,N=Ux(S,_);if(N&&u(N.node)){const $=Math.abs(_-N.left),D=Math.abs(_-N.right);return Pm(o,n,N.node,$<D,!1)}let A;if(A=a(m)?m.getNode():i(m)?m.getNode(!0):rh(s),A){const $=((L,j,q,ee)=>{const Q=_u(j);let de,Oe,Re,Ne;const We=[];let we=0;1===L?(de=Q.next,Oe=mp,Re=dm,Ne=Xe.after(ee)):(de=Q.prev,Oe=dm,Re=mp,Ne=Xe.before(ee));const Ee=Kk(Ne);do{if(!Ne.isVisible())continue;const ze=Kk(Ne);if(Re(ze,Ee))continue;We.length>0&&Oe(ze,rr(We))&&we++;const ct=Ql(ze);if(ct.position=Ne,ct.line=we,q(ct))return We;We.push(ct)}while(Ne=de(Ne));return We})(o,y,C1(1),A);let D=Ux(Ht($,jx(1)),_);if(D||(D=rr(Ht($,jx(0))),D))return Yk(n,D.position.toRange(),!1)}return 0===S.length?Gx(n,p).filter(p?i:a).map($=>$k(n,$.toRange(),!1)):U.none()},Gx=(n,o)=>{const s=n.selection.getRng(),a=o?Xe.fromRangeEnd(s):Xe.fromRangeStart(s),i=(u=a.container(),m=n.getBody(),Vc(F(u),h=>Bv(h.dom),h=>h.dom===m).map(h=>h.dom).getOr(m));var u,m;if(o){const h=Dg(i,a);return wr(h.positions)}{const h=p2(i,a);return or(h.positions)}},Jk=(n,o,s)=>Gx(n,o).filter(s).exists(a=>(n.selection.setRng(a.toRange()),!0)),x1=(n,o)=>{const s=n.dom.createRng();s.setStart(o.container(),o.offset()),s.setEnd(o.container(),o.offset()),n.selection.setRng(s)},Qk=(n,o)=>{n?o.setAttribute("data-mce-selected","inline-boundary"):o.removeAttribute("data-mce-selected")},eE=(n,o,s)=>Wk(o,s).map(a=>(x1(n,a),s)),tE=(n,o,s)=>!!Qh(n)&&((n,o,s)=>{const a=n.getBody(),i=((u,m,h)=>{const p=Xe.fromRangeStart(u);if(u.collapsed)return p;{const y=Xe.fromRangeEnd(u);return h?tr(m,y).getOr(y):er(m,p).getOr(p)}})(n.selection.getRng(),a,s);return((u,m,h,p)=>{const y=ru(u,p),w=Rg(m,h,y);return Rg(m,h,y).bind(De(LR,u)).orThunk(()=>((S,_,N,A,$)=>{const D=ru(S,$);return ur(S,N,D).map(De(ru,S)).fold(()=>A.map(M0),L=>Rg(_,N,L).map(De(J4,S,_,N,D,L)).filter(De(IR,A))).filter(uu)})(u,m,h,w,p))})(s,De(Dm,n),a,i).bind(u=>eE(n,o,u))})(n,o,s).isSome(),nE=(n,o,s)=>!!Qh(o)&&((a,i)=>{const u=i.selection.getRng(),m=a?Xe.fromRangeEnd(u):Xe.fromRangeStart(u);return!!mo(i.selection.getSel().modify)&&(a&&Sd(m)?Lx(!0,i.selection,m):!(a||!tp(m))&&Lx(!1,i.selection,m))})(n,o),a3=De(nE,!0),c3=De(nE,!1),b2=(n,o,s)=>{if(Qh(n)){const a=Gx(n,o).getOrThunk(()=>{const i=n.selection.getRng();return o?Xe.fromRangeEnd(i):Xe.fromRangeStart(i)});return Rg(De(Dm,n),n.getBody(),a).exists(i=>{const u=M0(i);return Wk(s,u).exists(m=>(x1(n,m),!0))})}return!1},oE=(n,o)=>s=>Wk(o,s).map(a=>()=>x1(n,a)),qx=(n,o,s,a)=>{const i=n.getBody(),u=De(Dm,n);n.undoManager.ignore(()=>{n.selection.setRng(((m,h)=>{const p=document.createRange();return p.setStart(m.container(),m.offset()),p.setEnd(h.container(),h.offset()),p})(s,a)),Fy(n),Rg(u,i,Xe.fromRangeStart(n.selection.getRng())).map(Ix).bind(oE(n,o)).each(oo)}),n.nodeChanged()},Kx=(n,o,s)=>{if(n.selection.isCollapsed()&&Qh(n)){const a=Xe.fromRangeStart(n.selection.getRng());return((i,u,m,h)=>{const p=(S=i.getBody(),_=h.container(),Cm(_,S)||S),y=De(Dm,i),w=Rg(y,p,h);var S,_;return w.bind(S=>m?S.fold(qe(U.some(Ix(S))),U.none,qe(U.some(M0(S))),U.none):S.fold(U.none,qe(U.some(M0(S))),U.none,qe(U.some(Ix(S))))).map(oE(i,u)).getOrThunk(()=>{const S=Aa(m,p,h),_=S.bind(N=>Rg(y,p,N));return Ds(w,_,()=>Mm(y,p,h).bind(N=>{return Ds(Mc(A=N),Rl(A),($,D)=>{const L=ru(!0,$),j=ru(!1,D);return er(A,L).forall(q=>q.isEqual(j))}).getOr(!0)?U.some(()=>{Ou(i,m,F(N))}):U.none();var A})).getOrThunk(()=>_.bind(()=>S.map(N=>()=>{m?qx(i,u,h,N):qx(i,u,N,h)})))})})(n,o,s,a)}return U.none()},sE=(n,o)=>{const s=F(n.getBody()),a=F(n.selection.getStart()),i=Vd(a,s);return No(i,o).fold(qe(i),u=>i.slice(0,u))},i3=n=>1===jm(n),rE=(n,o)=>{const s=De(od,n);return Ao(o,a=>s(a)?[a.dom]:[])},aE=n=>{const o=sE(n,ti);return rE(n,o)},v2=(n,o)=>{const s=n.selection.getStart(),a=((i,u)=>{const m=u.parentElement;return Tr(u)&&!_t(m)&&i.dom.isEmpty(m)})(n,s)||ak(F(s))?Wc(s,o):((i,u)=>{const{caretContainer:m,caretPosition:h}=yc(u);return i.insertNode(m.dom),h})(n.selection.getRng(),o);n.selection.setRng(a.toRange())},iE=n=>yt(n.startContainer),F0=(n,o)=>n.selection.isCollapsed()?((n,o)=>{const s=Ht(sE(n,i=>ti(i)||jm(i)>1),i3);return wr(s).bind(a=>{const i=Xe.fromRangeStart(n.selection.getRng());return HC(o,i,a.dom)&&!ak(a)?U.some(()=>((u,m,h,p)=>{const y=rE(m,p);if(0===y.length)Ou(m,u,h);else{const w=Wc(h.dom,y);m.selection.setRng(w.toRange())}})(o,n,a,s)):U.none()})})(n,o):(s=>{if((n=>{const o=n.selection.getRng();return 0===(s=o).startOffset&&iE(s)&&((s,a)=>{const i=a.startContainer.parentElement;return!_t(i)&&od(s,F(i))})(n,o)&&(s=>{return(i=>{const u=i.startContainer.parentNode,m=i.endContainer.parentNode;return!_t(u)&&!_t(m)&&u.isEqualNode(m)})(a=s)&&(i=>{const u=i.endContainer;return i.endOffset===(yt(u)?u.length:u.childNodes.length)})(a)||(a=>!a.endContainer.isEqualNode(a.commonAncestorContainer))(s);var a})(o);var s})(s)){const a=aE(s);return U.some(()=>{Fy(s),((i,u)=>{const m=zo(u,aE(i));m.length>0&&v2(i,m)})(s,a)})}return U.none()})(n),Oh=n=>((o=>{const s=o.selection.getRng();return s.collapsed&&(iE(s)||o.dom.isEmpty(s.startContainer))&&!(n=>Vc(n,i=>ou(i.dom),ti).isSome())(F(o.selection.getStart()))})(n)&&v2(n,[]),!0),y2=(n,o,s)=>Le(s)?U.some(()=>{n._selectionOverrides.hideFakeCaret(),Ou(n,o,F(s))}):U.none(),Yx=(n,o)=>n.selection.isCollapsed()?((s,a)=>{const i=a?e1:t1,m=gg(a?ac.Forwards:ac.Backwards,s.getBody(),s.selection.getRng());return i(m)?y2(s,a,m.getNode(!a)):U.from(ru(a,m)).filter(h=>i(h)&&Dp(m,h)).bind(h=>y2(s,a,h.getNode(!a)))})(n,o):((s,a)=>{const i=s.selection.getNode();return Tt(i)?y2(s,a,i):U.none()})(n,o),Mf=n=>Rn(n??"").getOr(0),Xx=(n,o)=>(n||"table"===ce(o)?"margin":"padding")+("rtl"===Ei(o,"direction")?"-right":"-left"),Jx=n=>{const o=Ah(n);return!n.mode.isReadOnly()&&(o.length>1||(s=n,Ls(o,i=>{const u=Xx(Cv(s),i),m=tl(i,u).map(Mf).getOr(0);return"false"!==s.dom.getContentEditable(i.dom)&&m>0})));var s},$0=n=>sm(n)||jg(n),Ah=n=>Ht(Hu(n.selection.getSelectedBlocks()),o=>!$0(o)&&!Ts(o).exists($0)&&el(o,s=>H(s.dom)||K(s.dom)).exists(s=>H(s.dom))),uE=(n,o)=>{var s,a;const{dom:i}=n,u=Sp(n),m=null!==(a=null===(s=/[a-z%]+$/i.exec(u))||void 0===s?void 0:s[0])&&void 0!==a?a:"px",h=Mf(u),p=Cv(n);Je(Ah(n),y=>{((w,S,_,N,A,$)=>{const D=Xx(_,F($)),L=Mf(w.getStyle($,D));if("outdent"===S){const j=Math.max(0,L-N);w.setStyle($,D,j?j+A:"")}else w.setStyle($,D,L+N+A)})(i,o,p,h,m,y.dom)})},u3=n=>uE(n,"outdent"),dE=n=>{if(n.selection.isCollapsed()&&Jx(n)){const o=n.dom,s=n.selection.getRng(),a=Xe.fromRangeStart(s),i=o.getParent(s.startContainer,o.isBlock);if(null!==i&&zd(F(i),a))return U.some(()=>u3(n))}return U.none()},mE=(n,o,s)=>Xo([dE,Px,Ik,(a,i)=>Kx(a,o,i),Fk,c1,Vk,Yx,m2,F0],a=>a(n,s)).filter(a=>n.selection.isEditable()),ZR=n=>void 0===n.touches||1!==n.touches.length?U.none():U.some(n.touches[0]),gE=(n,o)=>rt(n,o.nodeName),hE=(n,o)=>!!yt(o)||!!Qt(o)&&!gE(n.getBlockElements(),o)&&!Wi(o)&&!Uc(n,o),Im=(n,o)=>!(!yt(o)||0!==o.data.length&&(!/^\s+$/.test(o.data)||o.nextSibling&&!gE(n,o.nextSibling))),Qx=n=>n.dom.create(sc(n),zi(n)),eS=n=>{const o=n.dom,s=n.selection,a=n.schema,i=a.getBlockElements(),u=s.getStart(),m=n.getBody();let h,p,y=!1;const w=sc(n);if(!u||!Qt(u))return;const S=m.nodeName.toLowerCase();if(!a.isValidChild(S,w.toLowerCase())||(q=i,ee=m,lt(Hd(F(u),F(ee)),de=>gE(q,de.dom))))return;var q,ee;const _=s.getRng(),{startContainer:N,startOffset:A,endContainer:$,endOffset:D}=_,L=Ch(n);let j=m.firstChild;for(;j;)if(Qt(j)&&kd(a,j),hE(a,j)){if(Im(i,j)){p=j,j=j.nextSibling,o.remove(p);continue}h||(h=Qx(n),m.insertBefore(h,j),y=!0),p=j,j=j.nextSibling,h.appendChild(p)}else h=null,j=j.nextSibling;y&&L&&(_.setStart(N,A),_.setEnd($,D),s.setRng(_),n.nodeChanged())},tS=(n,o,s)=>{const a=F(Qx(n)),i=yl();Or(a,i),s(o,a);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},d3=n=>o=>-1!==(" "+o.attr("class")+" ").indexOf(n),m3=(n,o,s)=>function(a){const i=arguments,u=i[i.length-2],m=u>0?o.charAt(u-1):"";if('"'===m)return a;if(">"===m){const h=o.lastIndexOf("<",u);if(-1!==h&&-1!==o.substring(h,u).indexOf('contenteditable="false"'))return a}return'<span class="'+s+'" data-mce-content="'+n.dom.encode(i[0])+'">'+n.dom.encode("string"==typeof i[1]?i[1]:i[0])+"</span>"},g3=(n,o)=>{o.hasAttribute("data-mce-caret")&&(np(o),n.selection.setRng(n.selection.getRng()),n.selection.scrollIntoView(o))},h3=(n,o)=>{const s=Ul(F(n.getBody()),"*[data-mce-caret]").map(i=>i.dom).getOrNull();if(s)return"compositionstart"===o.type?(o.preventDefault(),o.stopPropagation(),void g3(n,s)):void(tg(s)&&(g3(n,s),n.undoManager.add()))},nS=K,f3=(n,o,s)=>{const a=_u(n.getBody()),i=De(Eb,1===o?a.next:a.prev);if(s.collapsed){const u=n.dom.getParent(s.startContainer,"PRE");if(!u)return;if(!i(Xe.fromRangeStart(s))){const m=F((h=>{const p=h.dom.create(sc(h));return p.innerHTML='<br data-mce-bogus="1">',p})(n));1===o?nl(F(u),m):Ya(F(u),m),n.selection.select(m.dom,!0),n.selection.collapse()}}},fE=(n,o)=>((s,a)=>{const i=a?ac.Forwards:ac.Backwards,u=s.selection.getRng();return(m=i,h=s,p=u,o3(h,m,p,Ld,Am,nS)).orThunk(()=>(f3(s,i,u),U.none()));var m,h,p})(n,((s,a)=>{const i=a?s.getEnd(!0):s.getStart(!0);return Th(i)?!a:a})(n.selection,o)).exists(s=>($m(n,s),!0)),p3=(n,o)=>((s,a)=>{const i=a?1:-1,u=s.selection.getRng();return(m=i,h=s,p=u,Xk(h,m,p,y=>Ld(y)||n1(y),y=>Am(y)||nd(y),nS)).orThunk(()=>(f3(s,i,u),U.none()));var m,h,p})(n,o).exists(s=>($m(n,s),!0)),I0=(n,o)=>Jk(n,o,o?Am:Ld),w2=(n,o)=>Lk(n,!o).map(s=>{const a=s.toRange(),i=n.selection.getRng();return o?a.setStart(i.startContainer,i.startOffset):a.setEnd(i.endContainer,i.endOffset),a}).exists(s=>($m(n,s),!0)),WR=n=>Be(["figcaption"],ce(n)),pE=(n,o)=>!!n.selection.isCollapsed()&&((s,a)=>{const i=F(s.getBody()),u=Xe.fromRangeStart(s.selection.getRng());return((m,h)=>{const p=De(cn,h);return el(F(m.container()),ti,p).filter(WR)})(u,i).exists(()=>{if(m=i,p=u,a?B0(m.dom,p):nr(m.dom,p)){const m=tS(s,i,a?Or:em);return s.selection.setRng(m),!0}var m,p;return!1})})(n,o),b3=(n,o)=>{return s=n,o?U.from(s.dom.getParent(s.selection.getNode(),"details")).map(i=>((u,m)=>{const h=u.selection.getRng(),p=Xe.fromRangeStart(h);return!(u.getBody().lastChild!==m||!B0(m,p)||(u.execCommand("InsertNewBlockAfter"),0))})(s,i)).getOr(!1):U.from(s.dom.getParent(s.selection.getNode(),"summary")).bind(i=>U.from(s.dom.getParent(i,"details")).map(u=>((m,h,p)=>{const y=m.selection.getRng(),w=Xe.fromRangeStart(y);return!(m.getBody().firstChild!==h||!nr(p,w)||(m.execCommand("InsertNewBlockBefore"),0))})(s,u,i))).getOr(!1);var s},v3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},y3=(n,o)=>o.keyCode===n.keyCode&&o.shiftKey===n.shiftKey&&o.altKey===n.altKey&&o.ctrlKey===n.ctrlKey&&o.metaKey===n.metaKey,Yn=(n,...o)=>()=>n.apply(null,o),C2=(n,o)=>{return En((a=o,Ao(ln(n,u=>({...v3,...u})),i=>y3(i,a)?[i]:[])),s=>s.action());var a},bE=(n,o)=>{return Xo((a=o,Ao(ln(n,u=>({...v3,...u})),i=>y3(i,a)?[i]:[])),s=>s.action());var a},w3=(n,o)=>{const s=o?ac.Forwards:ac.Backwards,a=n.selection.getRng();return o3(n,s,a,e1,t1,Tt).exists(i=>($m(n,i),!0))},oS=(n,o)=>{const s=o?1:-1,a=n.selection.getRng();return Xk(n,s,a,e1,t1,Tt).exists(i=>($m(n,i),!0))},Nf=(n,o)=>Jk(n,o,o?t1:e1),C3=Rd([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),x2={...C3,none:n=>C3.none(n)},S2=(n,o,s)=>Ao(Na(n),a=>ot(a,o)?s(a)?[a]:[]:S2(a,o,s)),vE=(n,o)=>Ba(n,"table",o),sS=(n,o,s,a,i=Lt)=>{const u=1===a;if(!u&&s<=0)return x2.first(n[0]);if(u&&s>=n.length-1)return x2.last(n[n.length-1]);{const m=s+a,h=n[m];return i(h)?x2.middle(o,h):sS(n,o,m,a,i)}},x3=(n,o)=>vE(n,o).bind(s=>{const a=S2(s,"th,td",Lt);return No(a,i=>cn(n,i)).map(i=>({index:i,all:a}))}),yE=(n,o,s,a,i)=>{const u=Ea(F(s),"td,th,caption").map(h=>h.dom);var h;return((h,p,y)=>fo(h,(w,S)=>w.fold(()=>U.some(S),_=>{const N=Math.sqrt(Math.abs(_.x-p)+Math.abs(_.y-y)),A=Math.sqrt(Math.abs(S.x-p)+Math.abs(S.y-y));return U.some(A<N?S:_)}),U.none()))(Ht((h=n,Ao(u,y=>{const w={left:(S=Ql(y.getBoundingClientRect())).left- -1,top:S.top- -1,right:S.right+-2,bottom:S.bottom+-2,width:S.width+-1,height:S.height+-1};var S;return[{x:w.left,y:h(w),cell:y},{x:w.right,y:h(w),cell:y}]})),h=>o(h,i)),a,i).map(h=>h.cell)},jR=De(yE,n=>n.bottom,(n,o)=>n.y<o),S1=De(yE,n=>n.top,(n,o)=>n.y>o),wE=(n,o,s)=>{const a=n(o,s);return(i=a).breakType===Fm.Wrap&&0===i.positions.length||!Tr(s.getNode())&&(i=>i.breakType===Fm.Br&&1===i.positions.length)(a)?!((i,u,m)=>m.breakAt.exists(h=>i(u,h).breakAt.isSome()))(n,o,a):a.breakAt.isNone();var i},S3=De(wE,p2),T3=De(wE,Dg),rS=(n,o,s,a)=>{const i=n.selection.getRng(),u=o?1:-1;return!(!Sb()||!((m,h,p)=>{const y=Xe.fromRangeStart(h);return Qs(!m,p).exists(w=>w.isEqual(y))})(o,i,s)||(Pm(u,n,s,!o,!1).each(m=>{$m(n,m)}),0))},CE=(n,o,s)=>{const a=((u,m)=>{const h=m.getNode(u);return Gl(h)?U.some(h):U.none()})(!!o,s),i=!1===o;a.fold(()=>$m(n,s.toRange()),u=>Qs(i,n.getBody()).filter(m=>m.isEqual(s)).fold(()=>$m(n,s.toRange()),m=>{return h=o,y=u,void(p=n).undoManager.transact(()=>{const w=h?nl:Ya,S=tS(p,F(y),w);$m(p,S)});var h,p,y}))},GR=(n,o,s,a)=>{const i=n.selection.getRng(),u=Xe.fromRangeStart(i),m=n.getBody();if(!o&&S3(a,u)){const h=(p=m,(S=y=s,_=w=u,or(_.getClientRects()).bind(N=>jR(S,N.left,N.top)).bind(N=>{return Df(Rl(A=N).map($=>p2(A,$).positions.concat($)).getOr([]),_);var A})).orThunk(()=>or(w.getClientRects()).bind(S=>jk(Mu(p,Xe.before(y)),S.left))).getOr(Xe.before(y)));return CE(n,o,h),!0}var p,y,w,S,_;if(o&&T3(a,u)){const h=((p,y,w)=>((S,_)=>wr(_.getClientRects()).bind(N=>S1(S,N.left,N.top)).bind(N=>{return Df(Mc(A=N).map($=>[$].concat(Dg(A,$).positions)).getOr([]),_);var A}))(y,w).orThunk(()=>or(w.getClientRects()).bind(S=>jk(N0(p,Xe.after(y)),S.left))).getOr(Xe.after(y)))(m,s,u);return CE(n,o,h),!0}return!1},xE=(n,o,s)=>U.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(a=>U.from(n.dom.getParent(a,"table")).map(i=>s(n,o,i,a))).getOr(!1),k3=(n,o)=>xE(n,o,rS),SE=(n,o)=>xE(n,o,GR),T2=(n,o,s)=>s.fold(U.none,U.none,(a,i)=>{return(u=i,((m,h)=>{const p=y=>{for(let w=0;w<y.childNodes.length;w++){const S=F(y.childNodes[w]);if(h(S))return U.some(S);const _=p(y.childNodes[w]);if(_.isSome())return _}return U.none()};return p(m.dom)})(u,jb)).map(m=>{return(n=>{const o=af.getWin(n).dom,s=(i,u,m,h)=>$b(o,i,u,m,h),a=n.match({domRange:u=>{const m=F(u.startContainer),h=F(u.endContainer);return ny(m,u.startOffset,h,u.endOffset)},relative:dC,exact:ny});return((i,u)=>{var h;return((h,p)=>{const y=p.ltr();return y.collapsed?p.rtl().filter(w=>!1===w.collapsed).map(w=>ul.rtl(F(w.endContainer),w.endOffset,F(w.startContainer),w.startOffset)).getOrThunk(()=>Em(0,ul.ltr,y)):Em(0,ul.ltr,y)})(0,(h=i,u.match({domRange:y=>({ltr:qe(y),rtl:U.none}),relative:(y,w)=>({ltr:zs(()=>Zp(h,y,w)),rtl:zs(()=>U.some(Zp(h,w,y)))}),exact:(y,w,S,_)=>({ltr:zs(()=>$b(h,y,w,S,_)),rtl:zs(()=>U.some($b(h,S,_,y,w)))})})))})(o,a).match({ltr:s,rtl:s})})(af.exact(h=m,0,h,0));var h});var u},a=>(n.execCommand("mceTableInsertRowAfter"),TE(n,o,a))),TE=(n,o,s)=>{return T2(n,o,(i=vl,x3(a=s,void 0).fold(()=>x2.none(a),u=>sS(u.all,a,u.index,1,i))));var a,i},kE=(n,o,s)=>{return T2(n,o,(i=vl,x3(a=s,void 0).fold(()=>x2.none(),u=>sS(u.all,a,u.index,-1,i))));var a,i},E3=(n,o)=>{const s=["table","li","dl"],a=F(n.getBody()),i=m=>{const h=ce(m);return cn(m,a)||Be(s,h)},u=n.selection.getRng();return(m=F(o?u.endContainer:u.startContainer),h=i,((p,y,w=yn)=>w(y)?U.none():Be(p,ce(y))?U.some(y):fu(y,p.join(","),S=>ot(S,"table")||w(S)))(["td","th"],m,h)).map(m=>(vE(m,i).each(h=>{n.model.table.clearSelectedCells(h.dom)}),n.selection.collapse(!o),(o?TE:kE)(n,i,m).each(h=>{n.selection.setRng(h)}),!0)).getOr(!1);var m,h},Lm=(n,o)=>({container:n,offset:o}),k2=vs.DOM,L0=n=>o=>n===o?-1:0,aS=(n,o,s)=>{if(yt(n)&&o>=0)return U.some(Lm(n,o));{const a=El(k2);return U.from(a.backwards(n,o,L0(n),s)).map(i=>Lm(i.container,i.container.data.length))}},EE=(n,o,s)=>{if(!yt(n))return U.none();if(o>=0&&o<=n.data.length)return U.some(Lm(n,o));{const i=El(k2);return U.from(i.backwards(n,o,L0(n),s)).bind(u=>EE(u.container,o+u.container.data.length,s))}},_3=(n,o,s)=>{if(!yt(n))return U.none();const a=n.data;if(o<=a.length)return U.some(Lm(n,o));{const i=El(k2);return U.from(i.forwards(n,o,L0(n),s)).bind(u=>_3(u.container,o-a.length,s))}},_E=(n,o,s,a,i)=>{const u=El(n,(m=n,h=>m.isBlock(h)||Be(["BR","IMG","HR","INPUT"],h.nodeName)||"false"===m.getContentEditable(h)));var m;return U.from(u.backwards(o,s,a,i))},E2=n=>ql(n.toString().replace(/\u00A0/g," ")),Mg=n=>""!==n&&-1!==" \xa0\f\n\r\t\v".indexOf(n),OE=(n,o)=>n.substring(o.length),cS=(n,o,s,a=0)=>{return(i=F(o.startContainer),Ba(i,kC)).fold(()=>((u,m,h,p=0)=>{if(!(y=m).collapsed||!yt(y.startContainer))return U.none();var y;const w={text:"",offset:0},S=u.getParent(m.startContainer,u.isBlock)||u.getRoot();return _E(u,m.startContainer,m.startOffset,(_,N,A)=>(w.text=A+w.text,w.offset+=N,(($,D,L)=>{let j;const q=L.charAt(0);for(j=D-1;j>=0;j--){const ee=$.charAt(j);if(Mg(ee))return U.none();if(q===ee&&cs($,L,j,D))break}return U.some(j)})(w.text,w.offset,h).getOr(N)),S).bind(_=>{const N=m.cloneRange();if(N.setStart(_.container,_.offset),N.setEnd(m.endContainer,m.endOffset),N.collapsed)return U.none();const A=E2(N);return 0!==A.lastIndexOf(h)||OE(A,h).length<p?U.none():U.some({text:OE(A,h),range:N,trigger:h})})})(n,o,s,a),u=>{const m=n.createRng();m.selectNode(u.dom);const h=E2(m);return U.some({range:m,text:OE(h,s),trigger:s})});var i},xa=n=>{if(3===n.nodeType)return Lm(n,n.data.length);{const o=n.childNodes;return o.length>0?xa(o[o.length-1]):Lm(n,o.length)}},iS=(n,o)=>{const s=n.childNodes;return s.length>0&&o<s.length?iS(s[o],0):s.length>0&&1===n.nodeType&&s.length===o?xa(s[s.length-1]):Lm(n,o)},lS=(n,o,s,a={})=>{var i;const u=o(),m=null!==(i=n.selection.getRng().startContainer.nodeValue)&&void 0!==i?i:"",h=Ht(u.lookupByTrigger(s.trigger),y=>s.text.length>=y.minChars&&y.matches.getOrThunk(()=>{return w=n.dom,S=>{const _=iS(S.startContainer,S.startOffset);return!((N,A)=>{var $;const D=null!==($=N.getParent(A.container,N.isBlock))&&void 0!==$?$:N.getRoot();return _E(N,A.container,A.offset,(L,j)=>0===j?-1:j,D).filter(L=>{const j=L.container.data.charAt(L.offset-1);return!Mg(j)}).isSome()})(w,_)};var w})(s.range,m,s.text));if(0===h.length)return U.none();const p=Promise.all(ln(h,y=>y.fetch(s.text,y.maxResults,a).then(w=>({matchText:s.text,items:w,columns:y.columns,onAction:y.onAction,highlightOn:y.highlightOn}))));return U.some({lookupData:p,context:s})};var qi;!function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"}(qi||(qi={}));const uS=(n,o,s)=>n.stype===qi.Error?o(n.serror):s(n.svalue),T1=n=>({stype:qi.Value,svalue:n}),Rh=n=>({stype:qi.Error,serror:n}),qR=uS,AE=n=>Mo(n)&&Vs(n).length>100?" removed due to size":JSON.stringify(n,null,2),Dh=(n,o)=>Rh([{path:n,getErrorInfo:o}]),Bf=n=>(...o)=>{if(0===o.length)throw new Error("Can't merge zero objects");const s={};for(let a=0;a<o.length;a++){const i=o[a];for(const u in i)rt(i,u)&&(s[u]=n(s[u],i[u]))}return s},RE=Bf((n,o)=>Ro(n)&&Ro(o)?RE(n,o):o),Mh=(Bf((n,o)=>o),n=>({tag:"defaultedThunk",process:qe(n)})),_2=(n,o,s)=>{switch(n.tag){case"field":return o(n.key,n.newKey,n.presence,n.prop);case"custom":return s(n.newKey,n.instantiator)}},O2=n=>({extract:(o,s)=>{return(a=n(s)).stype===qi.Error?Dh(o,qe(a.serror)):a;var a},toString:qe("val")}),YR=O2(T1),O3=(n,o,s,a)=>a(Uo(n,o).getOrThunk(()=>s(n))),dS=(n,o,s,a,i)=>{const u=h=>i.extract(o.concat([a]),h),m=h=>h.fold(()=>T1(U.none()),p=>{return(w=i.extract(o.concat([a]),p)).stype===qi.Value?{stype:qi.Value,svalue:(0,U.some)(w.svalue)}:w;var w});switch(n.tag){case"required":return h=o,w=u,Uo(p=s,y=a).fold(()=>{return _=y,N=p,Dh(h,()=>'Could not find valid *required* value for "'+_+'" in '+AE(N));var _,N},w);case"defaultedThunk":return O3(s,a,n.process,u);case"option":return((h,p,y)=>y(Uo(h,p)))(s,a,m);case"defaultedOptionThunk":return((h,p,y,w)=>w(Uo(h,p).map(S=>!0===S?y(h):S)))(s,a,n.process,m);case"mergeWithThunk":return O3(s,a,qe({}),h=>{const p=RE(n.process(s),h);return u(p)})}var h,p,y,w},DE=n=>({extract:(o,s)=>((a,i,u)=>{const m={},h=[];for(const p of u)_2(p,(y,w,S,_)=>{const N=dS(S,a,i,y,_);qR(N,A=>{h.push(...A)},A=>{m[w]=A})},(y,w)=>{m[y]=w(i)});return h.length>0?Rh(h):T1(m)})(o,s,n),toString:()=>"obj{\n"+ln(n,s=>_2(s,(a,i,u,m)=>a+" -> "+m.toString(),(a,i)=>"state("+a+")")).join("\n")+"}"}),id=n=>({extract:(o,s)=>(n=>{const o=(a=>{const i=[],u=[];return Je(a,m=>{uS(m,h=>u.push(h),h=>i.push(h))}),{values:i,errors:u}})(n);return o.errors.length>0?(s=o.errors,Is(Rh,yr)(s)):T1(o.values);var s})(ln(s,(i,u)=>n.extract(o.concat(["["+u+"]"]),i))),toString:()=>"array("+n.toString()+")"}),ME=(n,o)=>((n,o)=>({extract:(s,a)=>Uo(a,n).fold(()=>{return u=n,Dh(s,()=>'Choice schema did not contain choice key: "'+u+'"');var u},i=>{return u=s,m=a,Uo(h=o,p=i).fold(()=>{return w=h,S=p,Dh(u,()=>'The chosen schema: "'+S+'" did not exist in branches: '+AE(w));var w,S},y=>y.extract(u.concat(["branch: "+p]),m));var u,m,h,p}),toString:()=>"chooseOn("+n+"). Possible values: "+Vs(o)}))(n,Sn(o,DE)),NE=qe(YR),H0=(n,o)=>O2(s=>{const a=typeof s;return n(s)?T1(s):Rh(`Expected type: ${o} but got: ${a}`)}),k1=H0(Vo,"number"),V0=H0(zt,"string"),XR=H0(Ln,"boolean"),gS=H0(mo,"function"),A2=(n,o,s,a)=>({tag:"field",key:n,newKey:o,presence:s,prop:a}),A3=(n,o)=>({tag:"custom",newKey:n,instantiator:o}),R3=(n,o)=>A2(n,n,{tag:"required",process:{}},o),D3=n=>R3(n,V0),z0=n=>R3(n,gS),BE=(n,o)=>A2(n,n,{tag:"option",process:{}},o),R2=n=>BE(n,V0),Pf=(n,o,s)=>A2(n,n,Mh(o),s),M3=(n,o)=>Pf(n,o,k1),PE=(n,o,s)=>{return Pf(n,o,(a=s,i=u=>Be(a,u)?Vi.value(u):Vi.error(`Unsupported value: "${u}", choose one of "${a.join(", ")}".`),O2(u=>i(u).fold(Rh,T1))));var a,i},hS=(n,o)=>Pf(n,o,XR),FE=(n,o)=>Pf(n,o,gS),JR=D3("type"),QR=z0("fetch"),$E=z0("onAction"),eD=FE("onSetup",()=>gt),tD=R2("text"),nD=R2("icon"),oD=R2("tooltip"),sD=R2("label"),rD=hS("active",!1),aD=hS("enabled",!0),N3=hS("primary",!1),D2=n=>Pf("type",n,V0),B3=DE([JR,D3("trigger"),M3("minChars",1),((n,o)=>A2(n,n,Mh(1),NE()))("columns"),M3("maxResults",10),BE("matches",gS),QR,$E,(P3=V0,Pf("highlightOn",[],id(P3)))]);var P3;const Ff=[aD,oD,nD,tD,eD],F3=[rD].concat(Ff),cD=[FE("predicate",yn),PE("scope","node",["node","editor"]),PE("position","selection",["node","selection","line"])],iD=Ff.concat([D2("contextformbutton"),N3,$E,A3("original",Se)]),lD=F3.concat([D2("contextformbutton"),N3,$E,A3("original",Se)]),$3=Ff.concat([D2("contextformbutton")]),uD=F3.concat([D2("contextformtogglebutton")]),dD=ME("type",{contextformbutton:iD,contextformtogglebutton:lD});DE([D2("contextform"),FE("initValue",qe("")),sD,((n,o)=>A2(n,n,{tag:"required",process:{}},id(o)))("commands",dD),BE("launch",ME("type",{contextformbutton:$3,contextformtogglebutton:uD}))].concat(cD));const gD=n=>{const o=Po(),s=aa(!1),a=o.isSet,i=()=>{a()&&(Ga(n).autocompleter.removeDecoration(),n.dispatch("AutocompleterEnd"),s.set(!1),o.clear())},u=zs(()=>(n=>{const o=n.ui.registry.getAll().popups,s=Sn(o,u=>{return(m=u,((n,o,s)=>{return a=(h=o.extract([n],m=s)).stype===qi.Error?{stype:qi.Error,serror:(h=>({input:m,errors:h}))(h.serror)}:h,uS(a,Vi.error,Vi.value);var m,h,a})("Autocompleter",B3,{trigger:m.ch,...m})).fold(h=>{throw new Error("Errors: \n"+(y=>{const w=y.length>10?y.slice(0,10).concat([{path:[],getErrorInfo:qe("... (only showing first ten failures)")}]):y;return ln(w,S=>"Failed path: ("+S.path.join(" > ")+")\n"+S.getErrorInfo())})((p=h).errors).join("\n")+"\n\nInput object: "+AE(p.input));var p},Se);var m}),a=_r(jr(s,u=>u.trigger)),i=Es(s);return{dataset:s,triggers:a,lookupByTrigger:u=>Ht(i,m=>m.trigger===u)}})(n)),m=h=>{var p;(p=h,o.get().map(y=>cS(n.dom,n.selection.getRng(),y.trigger).bind(w=>lS(n,u,w,p))).getOrThunk(()=>((y,w)=>{const S=w(),_=y.selection.getRng();return(N=y.dom,A=_,$=S,Xo($.triggers,D=>cS(N,A,D))).bind(N=>lS(y,w,N));var N,A,$})(n,u))).fold(i,p=>{var y,S;y=p.context,a()||(S=y.range,Ga(n).autocompleter.addDecoration(S),o.set({trigger:y.trigger,matchLength:y.text.length})),p.lookupData.then(y=>{o.get().map(w=>{const S=p.context;w.trigger===S.trigger&&(S.text.length-w.matchLength>=10?i():(o.set({...w,matchLength:S.text.length}),s.get()?n.dispatch("AutocompleterUpdate",{lookupData:y}):(s.set(!0),n.dispatch("AutocompleterStart",{lookupData:y}))))})})})};n.addCommand("mceAutocompleterReload",(h,p)=>{const y=Mo(p)?p.fetchOptions:{};m(y)}),n.addCommand("mceAutocompleterClose",i),((h,p)=>{const y=Oa(p.load,50);h.on("keypress compositionend",w=>{27!==w.which&&y.throttle()}),h.on("keydown",w=>{const S=w.which;8===S?y.throttle():27===S&&p.cancelIfNecessary()}),h.on("remove",y.cancel)})(n,{cancelIfNecessary:i,load:m})},hD=Sc().browser.isSafari(),I3=n=>Ri(F(n)),L3=(n,o)=>{var s;return 0===n.startOffset&&n.endOffset===(null===(s=o.textContent)||void 0===s?void 0:s.length)},fS=(n,o)=>U.from(n.getParent(o.container(),"details")),H3=(n,o)=>fS(n,o).isSome(),V3=(n,o)=>{const s=o.getNode();en(s)||n.selection.setCursorLocation(s,o.offset())},pS=(n,o,s)=>{const a=n.dom.getParent(o.container(),"details");if(a&&!a.open){const i=n.dom.select("summary",a)[0];i&&(s?Mc(i):Rl(i)).each(u=>V3(n,u))}else V3(n,o)},IE=(n,o,s)=>{const{dom:a,selection:i}=n,u=n.getBody();if("character"===s){const m=Xe.fromRangeStart(i.getRng()),h=a.getParent(m.container(),a.isBlock),p=fS(a,m),y=h&&a.isEmpty(h),w=_t(h?.previousSibling),S=_t(h?.nextSibling);return!!(y&&(o?S:w)&&Aa(!o,u,m).exists(_=>H3(a,_)&&!Qc(p,fS(a,_))))||Aa(o,u,m).fold(yn,_=>{const N=fS(a,_);if(H3(a,_)&&!Qc(p,N)){if(o||pS(n,_,!1),h&&y){if(o&&w||!o&&S)return!0;pS(n,_,o),n.dom.remove(h)}return!0}return!1})}return!1},Hm=(n,o,s)=>{return i=o,u=s,((m,h)=>{const p=U.from(m.getParent(h.startContainer,"details")),y=U.from(m.getParent(h.endContainer,"details"));if(p.isSome()||y.isSome()){const w=p.bind(S=>U.from(m.select("summary",S)[0]));return U.some({startSummary:w,startDetails:p,endDetails:y})}return U.none()})((a=n).dom,a.selection.getRng()).fold(()=>IE(a,i,u),m=>((n,o,s,a)=>{const i=n.selection.getRng(),u=Xe.fromRangeStart(i),m=n.getBody();return"selection"===a?((h,p)=>{const y=p.startSummary.exists(_=>_.contains(h.startContainer)),w=p.startSummary.exists(_=>_.contains(h.endContainer)),S=p.startDetails.forall(_=>p.endDetails.forall(N=>_!==N));return(y||w)&&!(y&&w)||S})(i,o):s?(h=u,o.startSummary.exists(y=>{return w=h,Rl(S=y).exists(_=>Tr(_.getNode())&&tr(S,_).exists(N=>N.isEqual(w))||_.isEqual(w));var w,S})||((h,p,y)=>y.startDetails.exists(w=>er(h,p).forall(S=>!w.contains(S.container()))))(m,u,o)):((h,p)=>p.startSummary.exists(y=>{return w=h,Mc(y).exists(_=>_.isEqual(w));var w}))(u,o)||((h,p)=>p.startDetails.exists(y=>tr(y,h).forall(w=>p.startSummary.exists(S=>!S.contains(h.container())&&S.contains(w.container())))))(u,o);var h})(a,m,i,u)||IE(a,i,u))||hD&&((a,i,u)=>{const m=a.selection,h=m.getNode(),p=m.getRng(),y=Xe.fromRangeStart(p);return!!io(h)&&("selection"===u&&L3(p,h)||HC(i,y,h)?I3(h):a.undoManager.transact(()=>{const w=m.getSel();let{anchorNode:S,anchorOffset:_,focusNode:N,focusOffset:A}=w??{};const $=()=>{Le(S)&&Le(_)&&Le(N)&&Le(A)&&w?.setBaseAndExtent(S,_,N,A)},D=(j,q)=>{Je(j.childNodes,ee=>{sf(ee)&&q.appendChild(ee)})},L=a.dom.create("span",{"data-mce-bogus":"1"});D(h,L),h.appendChild(L),$(),"word"!==u&&"line"!==u||null==w||w.modify("extend",i?"right":"left",u),!m.isCollapsed()&&L3(m.getRng(),L)?I3(h):(a.execCommand(i?"ForwardDelete":"Delete"),S=w?.anchorNode,_=w?.anchorOffset,N=w?.focusNode,A=w?.focusOffset,D(L,h),$()),a.dom.remove(L)}),!0)})(n,o,s)?U.some(gt):U.none();var a,i,u},LE=n=>(o,s,a={})=>{const i=o.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:gt,inputType:s},m=_n(new InputEvent(n));return o.dispatch(n,{...m,...u,...a})},Nh=LE("input"),$f=LE("beforeinput"),HE=Sc(),fD=HE.os,z3=fD.isMacOS()||fD.isiOS(),JN=HE.browser.isFirefox(),U0=(n,o)=>{const s=n.dom,a=n.schema.getMoveCaretBeforeOnEnterElements();if(!o)return;if(/^(LI|DT|DD)$/.test(o.nodeName)){const u=(m=>{for(;m;){if(Qt(m)||yt(m)&&m.data&&/[\r\n\s]/.test(m.data))return m;m=m.nextSibling}return null})(o.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&o.insertBefore(s.doc.createTextNode(jo),o.firstChild)}const i=s.createRng();if(o.normalize(),o.hasChildNodes()){const u=new ir(o,o);let m,h=o;for(;m=u.current();){if(yt(m)){i.setStart(m,0),i.setEnd(m,0);break}if(a[m.nodeName.toLowerCase()]){i.setStartBefore(m),i.setEndBefore(m);break}h=m,m=u.next()}m||(i.setStart(h,0),i.setEnd(h,0))}else Tr(o)?o.nextSibling&&s.isBlock(o.nextSibling)?(i.setStartBefore(o),i.setEndBefore(o)):(i.setStartAfter(o),i.setEndAfter(o)):(i.setStart(o,0),i.setEnd(o,0));n.selection.setRng(i),Kp(n,i)},M2=(n,o)=>{const s=n.getRoot();let a,i=o;for(;i!==s&&i&&"false"!==n.getContentEditable(i);){if("true"===n.getContentEditable(i)){a=i;break}i=i.parentNode}return i!==s?a:s},U3=n=>U.from(n.dom.getParent(n.selection.getStart(!0),n.dom.isBlock)),VE=n=>{n.innerHTML='<br data-mce-bogus="1">'},Z0=(n,o)=>{sc(n).toLowerCase()===o.tagName.toLowerCase()&&((s,a,i)=>{const u=s.dom;U.from(i.style).map(u.parseStyle).each(w=>{const S={...qm(F(a)),...w};u.setStyles(a,S)});const m=U.from(i.class).map(w=>w.split(/\s+/)),h=U.from(a.className).map(w=>Ht(w.split(/\s+/),S=>""!==S));Ds(m,h,(w,S)=>{const _=Ht(S,A=>!Be(w,A)),N=[...w,..._];u.setAttrib(a,"class",N.join(" "))});const p=["style","class"],y=sr(i,(w,S)=>!Be(p,S));u.setAttribs(a,y)})(n,o,zi(n))},Z3=(n,o,s,a,i=!0,u)=>{const m=n.dom,h=n.schema,p=sc(n),y=s?s.nodeName.toUpperCase():"";let w=o;const S=h.getTextInlineElements();let _;_=u||"TABLE"===y||"HR"===y?m.create(u||p):s.cloneNode(!1);let N=_;if(i){do{if(S[w.nodeName]){if(ou(w)||Wi(w))continue;const A=w.cloneNode(!1);m.setAttrib(A,"id",""),_.hasChildNodes()?(A.appendChild(_.firstChild),_.appendChild(A)):(N=A,_.appendChild(A))}}while((w=w.parentNode)&&w!==a)}else m.setAttrib(_,"style",null),m.setAttrib(_,"class",null);return Z0(n,_),VE(N),_},zE=(n,o)=>{const s=n?.parentNode;return Le(s)&&s.nodeName===o},W3=n=>Le(n)&&/^(OL|UL|LI)$/.test(n.nodeName),E1=n=>{const o=n.parentNode;return Le(s=o)&&/^(LI|DT|DD)$/.test(s.nodeName)?o:n;var s},N2=(n,o,s)=>{let a=n[s?"firstChild":"lastChild"];for(;a&&!Qt(a);)a=a[s?"nextSibling":"previousSibling"];return a===o},uc=(n,o)=>o&&"A"===o.nodeName&&n.isEmpty(o),j3=(n,o)=>n.nodeName===o||n.previousSibling&&n.previousSibling.nodeName===o,G3=(n,o)=>Le(o)&&n.isBlock(o)&&!/^(TD|TH|CAPTION|FORM)$/.test(o.nodeName)&&!/^(fixed|absolute)/i.test(o.style.position)&&n.isEditable(o.parentNode)&&"false"!==n.getContentEditable(o),q3=(n,o,s)=>yt(o)?n?1===s&&o.data.charAt(s-1)===Pn?0:s:s===o.data.length-1&&o.data.charAt(s)===Pn?o.data.length:s:s,pD={insert:(n,o)=>{let s,a,i,u,m=!1;const h=n.dom,p=n.schema.getNonEmptyElements(),y=n.selection.getRng(),w=sc(n),S=F(y.startContainer),_=js(S,y.startOffset),N=_.exists(Ne=>vt(Ne)&&!vl(Ne)),A=y.collapsed&&N,$=Ne=>Z3(n,s,Q,ee,fT(n),Ne),D=Ne=>{const We=q3(Ne,s,a);if(yt(s)&&(Ne?We>0:We<s.data.length))return!1;if(s.parentNode===Q&&m&&!Ne||Ne&&Qt(s)&&s===Q.firstChild)return!0;if(j3(s,"TABLE")||j3(s,"HR"))return m&&!Ne||!m&&Ne;const we=new ir(s,Q);let Ee;for(yt(s)&&(Ne&&0===We?we.prev():Ne||We!==s.data.length||we.next());Ee=we.current();){if(Qt(Ee)){if(!Ee.getAttribute("data-mce-bogus")){const ze=Ee.nodeName.toLowerCase();if(p[ze]&&"br"!==ze)return!1}}else if(yt(Ee)&&!Mi(Ee.data))return!1;Ne?we.prev():we.next()}return!0},L=()=>{let Ne;return Ne=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==de?$(w):$(),((We,we)=>{const Ee=kw(We);return!ve(we)&&(zt(Ee)?Be(wt.explode(Ee),we.nodeName.toLowerCase()):Ee)})(n,u)&&G3(h,u)&&h.isEmpty(Q,void 0,{includeZwsp:!0})?Ne=h.split(u,Q):h.insertAfter(Ne,Q),U0(n,Ne),Ne};Gp(h,y).each(Ne=>{y.setStart(Ne.startContainer,Ne.startOffset),y.setEnd(Ne.endContainer,Ne.endOffset)}),s=y.startContainer,a=y.startOffset;const j=!(!o||!o.shiftKey),q=!(!o||!o.ctrlKey);Qt(s)&&s.hasChildNodes()&&!A&&(m=a>s.childNodes.length-1,s=s.childNodes[Math.min(a,s.childNodes.length-1)]||s,a=m&&yt(s)?s.data.length:0);const ee=M2(h,s);if(!ee||((Ne,We)=>{const we=Ne.dom.getParent(We,"ol,ul,dl");return null!==we&&"false"===Ne.dom.getContentEditableParent(we)})(n,s))return;j||(s=((Ne,We,we,Ee,ze)=>{var ct,Yt;const kt=Ne.dom,Cn=null!==(ct=M2(kt,Ee))&&void 0!==ct?ct:kt.getRoot();let dn=kt.getParent(Ee,kt.isBlock);if(!dn||!G3(kt,dn)){if(dn=dn||Cn,!dn.hasChildNodes()){const $n=kt.create(We);return Z0(Ne,$n),dn.appendChild($n),we.setStart($n,0),we.setEnd($n,0),$n}let ho,bo=Ee;for(;bo&&bo.parentNode!==dn;)bo=bo.parentNode;for(;bo&&!kt.isBlock(bo);)ho=bo,bo=bo.previousSibling;const Jt=null===(Yt=ho?.parentElement)||void 0===Yt?void 0:Yt.nodeName;if(ho&&Jt&&Ne.schema.isValidChild(Jt,We.toLowerCase())){const $n=ho.parentNode,lo=kt.create(We);for(Z0(Ne,lo),$n.insertBefore(lo,ho),bo=ho;bo&&!kt.isBlock(bo);){const ke=bo.nextSibling;lo.appendChild(bo),bo=ke}we.setStart(Ee,ze),we.setEnd(Ee,ze)}}return Ee})(n,w,y,s,a));let Q=h.getParent(s,h.isBlock)||h.getRoot();u=Le(Q?.parentNode)?h.getParent(Q.parentNode,h.isBlock):null,i=Q?Q.nodeName.toUpperCase():"";const de=u?u.nodeName.toUpperCase():"";if("LI"!==de||q||(Q=u,u=u.parentNode,i=de),Qt(u)&&(Ne=n,we=Q,!j&&we.nodeName.toLowerCase()===sc(Ne)&&Ne.dom.isEmpty(we)&&((Ee,ze,ct)=>{let Yt=ze;for(;Yt&&Yt!==Ee&&_t(Yt.nextSibling);){const Cn=Yt.parentElement;if(!Cn||(kt=Cn,!rt(Ne.schema.getTextBlockElements(),kt.nodeName.toLowerCase())))return Hn(Cn);Yt=Cn}var kt;return!1})(Ne.getBody(),we)))return((Ne,We,we)=>{var Ee,ze,ct;const Yt=We(sc(Ne)),kt=Ne.dom.getParent(we,Hn);kt&&(Ne.dom.insertAfter(Yt,kt),U0(Ne,Yt),(null!==(ct=null===(ze=null===(Ee=we.parentElement)||void 0===Ee?void 0:Ee.childNodes)||void 0===ze?void 0:ze.length)&&void 0!==ct?ct:0)>1&&Ne.dom.remove(we))})(n,$,Q);var Ne,we;if(/^(LI|DT|DD)$/.test(i)&&Qt(u)&&h.isEmpty(Q))return void((Ne,We,we,Ee,ze)=>{const ct=Ne.dom,Yt=Ne.selection.getRng(),kt=we.parentNode;if(we===Ne.getBody()||!kt)return;var Cn;W3(Cn=we)&&W3(Cn.parentNode)&&(ze="LI");let dn=We(ze);if(N2(we,Ee,!0)&&N2(we,Ee,!1))if(zE(we,"LI")){const ho=E1(we);ct.insertAfter(dn,ho),(null===(Jt=(bo=we).parentNode)||void 0===Jt?void 0:Jt.firstChild)===bo?ct.remove(ho):ct.remove(we)}else ct.replace(dn,we);else if(N2(we,Ee,!0))zE(we,"LI")?(ct.insertAfter(dn,E1(we)),dn.appendChild(ct.doc.createTextNode(" ")),dn.appendChild(we)):kt.insertBefore(dn,we),ct.remove(Ee);else if(N2(we,Ee,!1))ct.insertAfter(dn,E1(we)),ct.remove(Ee);else{we=E1(we);const ho=Yt.cloneRange();ho.setStartAfter(Ee),ho.setEndAfter(we);const bo=ho.extractContents();"LI"===ze&&((Jt,$n)=>Jt.firstChild&&"LI"===Jt.firstChild.nodeName)(bo)?(dn=bo.firstChild,ct.insertAfter(bo,we)):(ct.insertAfter(bo,we),ct.insertAfter(dn,we)),ct.remove(Ee)}var bo,Jt;U0(Ne,dn)})(n,$,u,Q,w);if(!(A||Q!==n.getBody()&&G3(h,Q)))return;const Oe=Q.parentNode;let Re;if(A)Re=$(w),_.fold(()=>{Or(S,F(Re))},Ne=>{Ya(Ne,F(Re))}),n.selection.setCursorLocation(Re,0);else if(am(Q))Re=np(Q),h.isEmpty(Q)&&VE(Q),Z0(n,Re),U0(n,Re);else if(D(!1))Re=L();else if(D(!0)&&Oe){Re=Oe.insertBefore($(),Q);const Ne=F(y.startContainer).dom.hasChildNodes()&&y.collapsed;U0(n,j3(Q,"HR")||Ne?Re:Q)}else{const Ne=(we=>{const Ee=we.cloneRange();return Ee.setStart(we.startContainer,q3(!0,we.startContainer,we.startOffset)),Ee.setEnd(we.endContainer,q3(!1,we.endContainer,we.endOffset)),Ee})(y).cloneRange();Ne.setEndAfter(Q);const We=Ne.extractContents();(we=>{Je(Zg(F(we),Eo),Ee=>{const ze=Ee.dom;ze.nodeValue=ql(ze.data)})})(We),(we=>{let Ee=we;do{yt(Ee)&&(Ee.data=Ee.data.replace(/^[\r\n]+/,"")),Ee=Ee.firstChild}while(Ee)})(We),Re=We.firstChild,h.insertAfter(We,Q),((we,Ee,ze)=>{var ct;const Yt=[];if(!ze)return;let kt=ze;for(;kt=kt.firstChild;){if(we.isBlock(kt))return;Qt(kt)&&!Ee[kt.nodeName.toLowerCase()]&&Yt.push(kt)}let Cn=Yt.length;for(;Cn--;)kt=Yt[Cn],(!kt.hasChildNodes()||kt.firstChild===kt.lastChild&&""===(null===(ct=kt.firstChild)||void 0===ct?void 0:ct.nodeValue)||uc(we,kt))&&we.remove(kt)})(h,p,Re),((we,Ee)=>{Ee.normalize();const ze=Ee.lastChild;(!ze||Qt(ze)&&/^(left|right)$/gi.test(we.getStyle(ze,"float",!0)))&&we.add(Ee,"br")})(h,Q),h.isEmpty(Q)&&VE(Q),Re.normalize(),h.isEmpty(Re)?(h.remove(Re),L()):(Z0(n,Re),U0(n,Re))}h.setAttrib(Re,"id",""),n.dispatch("NewBlock",{newBlock:Re})},fakeEventName:"insertParagraph"},ld=(n,o,s)=>{const a=n.dom.createRng();s?(a.setStartBefore(o),a.setEndBefore(o)):(a.setStartAfter(o),a.setEndAfter(o)),n.selection.setRng(a),Kp(n,a)},bS=(n,o)=>{const s=Nr("br");Ya(F(o),s),n.undoManager.add()},If=(n,o)=>{Lf(n.getBody(),o)||nl(F(o),Nr("br"));const s=Nr("br");nl(F(o),s),ld(n,s.dom,!1),n.undoManager.add()},Lf=(n,o)=>{return s=Xe.after(o),!!Tr(s.getNode())||er(n,Xe.after(o)).map(a=>Tr(a.getNode())).getOr(!1);var s},K3=n=>n&&"A"===n.nodeName&&"href"in n,bD=n=>n.fold(yn,K3,K3,yn),W0=(n,o)=>{o.fold(gt,De(bS,n),De(If,n),gt)},_1={insert:(n,o)=>{const s=(a=>{const i=De(Dm,a),u=Xe.fromRangeStart(a.selection.getRng());return Rg(i,a.getBody(),u).filter(bD)})(n);s.isSome()?s.each(De(W0,n)):((a,i)=>{const m=a.dom,h=a.selection.getRng();let p,y=!1;Gp(m,h).each(D=>{h.setStart(D.startContainer,D.startOffset),h.setEnd(D.endContainer,D.endOffset)});let w=h.startOffset,S=h.startContainer;if(Qt(S)&&S.hasChildNodes()){const D=w>S.childNodes.length-1;S=S.childNodes[Math.min(w,S.childNodes.length-1)]||S,w=D&&yt(S)?S.data.length:0}let _=m.getParent(S,m.isBlock);const N=_&&_.parentNode?m.getParent(_.parentNode,m.isBlock):null;"LI"!==(N?N.nodeName.toUpperCase():"")||!(!i||!i.ctrlKey)||(_=N),yt(S)&&w>=S.data.length&&(((D,L,j)=>{const q=new ir(L,j);let ee;const Q=D.getNonEmptyElements();for(;ee=q.next();)if(Q[ee.nodeName.toLowerCase()]||yt(ee)&&ee.length>0)return!0;return!1})(a.schema,S,_||m.getRoot())||(p=m.create("br"),h.insertNode(p),h.setStartAfter(p),h.setEndAfter(p),y=!0)),p=m.create("br"),nb(m,h,p),ld(a,p,y),a.undoManager.add()})(n,o)},fakeEventName:"insertLineBreak"},O1=(n,o)=>U3(n).filter(s=>o.length>0&&ot(F(s),o)).isSome(),mu=Rd([{br:[]},{block:[]},{none:[]}]),UE=(n,o)=>{return O1(s=n,Tw(s));var s},ZE=n=>(o,s)=>U3(o).filter(i=>jg(F(i))).isSome()===n,WE=(n,o)=>(s,a)=>U3(s).fold(qe(""),m=>m.nodeName.toUpperCase())===n.toUpperCase()===o,vD=n=>{const o=M2(n.dom,n.selection.getStart());return ve(o)},B2=n=>WE("pre",n),P2=n=>(o,s)=>gT(o)===n,yD=(n,o)=>{return O1(s=n,ub(s));var s},vS=(n,o)=>o,wD=n=>{const o=sc(n),s=M2(n.dom,n.selection.getStart());return Le(s)&&n.schema.isValidChild(s.nodeName,o)},CD=n=>{const o=n.selection.getRng(),s=F(o.startContainer),a=js(s,o.startOffset).map(i=>vt(i)&&!vl(i));return o.collapsed&&a.getOr(!0)},ud=(n,o)=>(s,a)=>fo(n,(i,u)=>i&&u(s,a),!0)?U.some(o):U.none(),F2=(n,o,s)=>{o.selection.isCollapsed()||o.execCommand("delete"),Le(s)&&$f(o,n.fakeEventName).isDefaultPrevented()||(n.insert(o,s),Le(s)&&Nh(o,n.fakeEventName))},Y3=(n,o)=>{const s=()=>F2(_1,n,o),a=()=>F2(pD,n,o),i=(u=n,m=o,Y4([ud([UE],mu.none()),ud([B2(!0),vD],mu.none()),ud([WE("summary",!0)],mu.br()),ud([B2(!0),P2(!1),vS],mu.br()),ud([B2(!0),P2(!1)],mu.block()),ud([B2(!0),P2(!0),vS],mu.block()),ud([B2(!0),P2(!0)],mu.br()),ud([ZE(!0),vS],mu.br()),ud([ZE(!0)],mu.block()),ud([yD],mu.br()),ud([vS],mu.br()),ud([wD],mu.block()),ud([CD],mu.block())],[u,!(!m||!m.shiftKey)]).getOr(mu.none()));var u,m;switch(hT(n)){case"linebreak":i.fold(s,s,gt);break;case"block":i.fold(a,a,gt);break;case"invert":i.fold(a,s,gt);break;default:i.fold(s,a,gt)}},j0=Sc(),X3=j0.os.isiOS()&&j0.browser.isSafari(),J3=(n,o)=>{var s;o.isDefaultPrevented()||(o.preventDefault(),(s=n.undoManager).typing&&(s.typing=!1,s.add()),n.undoManager.transact(()=>{Y3(n,o)}))},Q3=Sc(),eO=n=>n.stopImmediatePropagation(),jE=n=>n.keyCode===qt.PAGE_UP||n.keyCode===qt.PAGE_DOWN,tO=(n,o,s)=>{s&&!n.get()?o.on("NodeChange",eO,!0):!s&&n.get()&&o.off("NodeChange",eO),n.set(s)},nO=(n,o)=>{const s=o.container(),a=o.offset();return yt(s)?(s.insertData(a,n),U.some(Xe(s,a+n.length))):nf(o).map(i=>{const u=fc(n);return o.isAtEnd()?nl(i,u):Ya(i,u),Xe(u.dom,n.length)})},GE=De(nO,jo),qE=De(nO," "),KE=n=>o=>{n.selection.setRng(o.toRange()),n.nodeChanged()},oO=n=>{const o=Xe.fromRangeStart(n.selection.getRng()),s=F(n.getBody());if(n.selection.isCollapsed()){const a=De(Dm,n),i=Xe.fromRangeStart(n.selection.getRng());return Rg(a,n.getBody(),i).bind((u=s,m=>m.fold(h=>tr(u.dom,Xe.before(h)),h=>Mc(h),h=>Rl(h),h=>er(u.dom,Xe.after(h))))).map(u=>()=>{return(m=s,h=o,p=>BC(m,p)?GE(h):qE(h))(u).each(KE(n));var m,h})}var u;return U.none()},sO=n=>{return Ia(wo.browser.isFirefox()&&n.selection.isEditable()&&(o=n.dom,s=n.selection.getRng().startContainer,o.isEditable(o.getParent(s,"summary"))),()=>{const a=F(n.getBody());var i,u;n.selection.isCollapsed()||n.getDoc().execCommand("Delete"),(i=a,u=Xe.fromRangeStart(n.selection.getRng()),BC(i,u)?GE(u):qE(u)).each(KE(n))});var o,s},rO=n=>wm(n)?[{keyCode:qt.TAB,action:Yn(E3,n,!0)},{keyCode:qt.TAB,shiftKey:!0,action:Yn(E3,n,!1)}]:[],xD=n=>{if(n.addShortcut("Meta+P","","mcePrint"),gD(n),Ag(n))return aa(null);{const o=(n=>{const o=aa(null),s=De(Dm,n);return n.on("NodeChange",a=>{Qh(n)&&(((i,u,m)=>{const h=ln(Ea(F(u.getRoot()),'*[data-mce-selected="inline-boundary"]'),w=>w.dom),p=Ht(h,i),y=Ht(m,i);Je(zo(p,y),De(Qk,!1)),Je(zo(y,p),De(Qk,!0))})(s,n.dom,a.parents),((i,u)=>{const m=u.get();if(i.selection.isCollapsed()&&!i.composing&&m){const h=Xe.fromRangeStart(i.selection.getRng());Xe.isTextPosition(h)&&!Sd(p=h)&&!tp(p)&&(x1(i,((n,o)=>{return Xe.isTextPosition(o)?(a=o,lh(s=n)&&a.container()===s?((i,u)=>{const m=Dv(i.data.substr(0,u.offset())),h=Dv(i.data.substr(u.offset()));return(m.text+h.text).length>0?(Vw(i),Xe(i,u.offset()-m.count)):u})(s,a):lg(s,a)):((s,a)=>a.container()===s.parentNode?((i,u)=>{const m=u.container(),h=((p,y)=>{const w=vn(p,y);return-1===w?U.none():U.some(w)})($o(m.childNodes),i).map(p=>p<u.offset()?Xe(m,u.offset()-1):u).getOr(u);return ku(i),h})(s,a):lg(s,a))(n,o);var s,a})(m,h)),u.set(null))}var p})(n,o),((i,u,m,h)=>{if(u.selection.isCollapsed()){const p=Ht(h,i);Je(p,y=>{const w=Xe.fromRangeStart(u.selection.getRng());Rg(i,u.getBody(),w).bind(S=>eE(u,m,S))})}})(s,n,o,a.parents))}),o})(n);return(s=n).on("keyup compositionstart",De(h3,s)),((s,a)=>{s.on("keydown",i=>{i.isDefaultPrevented()||((u,m,h)=>{const p=wo.os.isMacOS()||wo.os.isiOS();C2([{keyCode:qt.RIGHT,action:Yn(fE,u,!0)},{keyCode:qt.LEFT,action:Yn(fE,u,!1)},{keyCode:qt.UP,action:Yn(p3,u,!1)},{keyCode:qt.DOWN,action:Yn(p3,u,!0)},...p?[{keyCode:qt.UP,action:Yn(w2,u,!1),metaKey:!0,shiftKey:!0},{keyCode:qt.DOWN,action:Yn(w2,u,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:qt.RIGHT,action:Yn(k3,u,!0)},{keyCode:qt.LEFT,action:Yn(k3,u,!1)},{keyCode:qt.UP,action:Yn(SE,u,!1)},{keyCode:qt.DOWN,action:Yn(SE,u,!0)},{keyCode:qt.UP,action:Yn(SE,u,!1)},{keyCode:qt.UP,action:Yn(b3,u,!1)},{keyCode:qt.DOWN,action:Yn(b3,u,!0)},{keyCode:qt.RIGHT,action:Yn(w3,u,!0)},{keyCode:qt.LEFT,action:Yn(w3,u,!1)},{keyCode:qt.UP,action:Yn(oS,u,!1)},{keyCode:qt.DOWN,action:Yn(oS,u,!0)},{keyCode:qt.RIGHT,action:Yn(tE,u,m,!0)},{keyCode:qt.LEFT,action:Yn(tE,u,m,!1)},{keyCode:qt.RIGHT,ctrlKey:!p,altKey:p,action:Yn(a3,u,m)},{keyCode:qt.LEFT,ctrlKey:!p,altKey:p,action:Yn(c3,u,m)},{keyCode:qt.UP,action:Yn(pE,u,!1)},{keyCode:qt.DOWN,action:Yn(pE,u,!0)}],h).each(y=>{h.preventDefault()})})(s,a,i)})})(n,o),((s,a)=>{let i=!1;s.on("keydown",u=>{i=u.keyCode===qt.BACKSPACE,u.isDefaultPrevented()||((m,h,p)=>{const y=p.keyCode===qt.BACKSPACE?"deleteContentBackward":"deleteContentForward",w=m.selection.isCollapsed(),S=w?"character":"selection",_=N=>w?N?"word":"line":"selection";bE([{keyCode:qt.BACKSPACE,action:Yn(dE,m)},{keyCode:qt.BACKSPACE,action:Yn(Px,m,!1)},{keyCode:qt.DELETE,action:Yn(Px,m,!0)},{keyCode:qt.BACKSPACE,action:Yn(Ik,m,!1)},{keyCode:qt.DELETE,action:Yn(Ik,m,!0)},{keyCode:qt.BACKSPACE,action:Yn(Kx,m,h,!1)},{keyCode:qt.DELETE,action:Yn(Kx,m,h,!0)},{keyCode:qt.BACKSPACE,action:Yn(c1,m,!1)},{keyCode:qt.DELETE,action:Yn(c1,m,!0)},{keyCode:qt.BACKSPACE,action:Yn(Hm,m,!1,S)},{keyCode:qt.DELETE,action:Yn(Hm,m,!0,S)},...z3?[{keyCode:qt.BACKSPACE,altKey:!0,action:Yn(Hm,m,!1,_(!0))},{keyCode:qt.DELETE,altKey:!0,action:Yn(Hm,m,!0,_(!0))},{keyCode:qt.BACKSPACE,metaKey:!0,action:Yn(Hm,m,!1,_(!1))}]:[{keyCode:qt.BACKSPACE,ctrlKey:!0,action:Yn(Hm,m,!1,_(!0))},{keyCode:qt.DELETE,ctrlKey:!0,action:Yn(Hm,m,!0,_(!0))}],{keyCode:qt.BACKSPACE,action:Yn(Vk,m,!1)},{keyCode:qt.DELETE,action:Yn(Vk,m,!0)},{keyCode:qt.BACKSPACE,action:Yn(Yx,m,!1)},{keyCode:qt.DELETE,action:Yn(Yx,m,!0)},{keyCode:qt.BACKSPACE,action:Yn(m2,m,!1)},{keyCode:qt.DELETE,action:Yn(m2,m,!0)},{keyCode:qt.BACKSPACE,action:Yn(Fk,m,!1)},{keyCode:qt.DELETE,action:Yn(Fk,m,!0)},{keyCode:qt.BACKSPACE,action:Yn(F0,m,!1)},{keyCode:qt.DELETE,action:Yn(F0,m,!0)}],p).filter(N=>m.selection.isEditable()).each(N=>{p.preventDefault(),$f(m,y).isDefaultPrevented()||(N(),Nh(m,y))})})(s,a,u)}),s.on("keyup",u=>{var m,h,p;u.isDefaultPrevented()||(h=u,p=i,C2([{keyCode:qt.BACKSPACE,action:Yn(G4,m=s)},{keyCode:qt.DELETE,action:Yn(G4,m)},...z3?[{keyCode:qt.BACKSPACE,altKey:!0,action:Yn(Oh,m)},{keyCode:qt.DELETE,altKey:!0,action:Yn(Oh,m)},...p?[{keyCode:JN?224:91,action:Yn(Oh,m)}]:[]]:[{keyCode:qt.BACKSPACE,ctrlKey:!0,action:Yn(Oh,m)},{keyCode:qt.DELETE,ctrlKey:!0,action:Yn(Oh,m)}]],h)),i=!1})})(n,o),(s=>{let a=U.none();s.on("keydown",i=>{var u;i.keyCode===qt.ENTER&&(X3&&(u=>{if(!u.collapsed)return!1;const m=u.startContainer;if(yt(m)){const h=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,p=m.data.charAt(u.startOffset-1);return h.test(p)}return!1})(s.selection.getRng())?(a=U.some((u=s).selection.getBookmark()),u.undoManager.add()):J3(s,i))}),s.on("keyup",i=>{i.keyCode===qt.ENTER&&a.each(()=>{return m=i,(u=s).undoManager.undo(),a.fold(gt,h=>u.selection.moveToBookmark(h)),J3(u,m),void(a=U.none());var u,m})})})(n),(s=>{s.on("keydown",a=>{var i,u;a.isDefaultPrevented()||(u=a,bE([{keyCode:qt.SPACEBAR,action:Yn(oO,i=s)},{keyCode:qt.SPACEBAR,action:Yn(sO,i)}],u).each(m=>{u.preventDefault(),$f(i,"insertText",{data:" "}).isDefaultPrevented()||(m(),Nh(i,"insertText",{data:" "}))}))})})(n),(s=>{s.on("input",a=>{a.isComposing||(i=>{const u=F(i.getBody());i.selection.isCollapsed()&&((n,o)=>{const s=o.container();if(!yt(s))return U.none();if((a=>{const i=a.container();return yt(i)&&cs(i.data,jo)})(o)){const a=e0(n,s,!1)||(i=>{const u=i.data,m=(h=>{const p=h.split("");return ln(p,(y,w)=>Rb(y)&&w>0&&w<p.length-1&&Vv(p[w-1])&&Vv(p[w+1])?" ":y).join("")})(u);return m!==u&&(i.data=m,!0)})(s)||By(n,s,!1);return Ia(a,o)}if(Io(n,o)){const a=e0(n,s,!0)||By(n,s,!0);return Ia(a,o)}return U.none()})(u,Xe.fromRangeStart(i.selection.getRng())).each(m=>{i.selection.setRng(m.toRange())})})(s)})})(n),(s=>{s.on("keydown",a=>{var u;a.isDefaultPrevented()||(u=a,C2([...rO(s)],u).each(m=>{u.preventDefault()}))})})(n),((s,a)=>{s.on("keydown",i=>{i.isDefaultPrevented()||((u,m,h)=>{const p=wo.os.isMacOS()||wo.os.isiOS();C2([{keyCode:qt.END,action:Yn(I0,u,!0)},{keyCode:qt.HOME,action:Yn(I0,u,!1)},...p?[]:[{keyCode:qt.HOME,action:Yn(w2,u,!1),ctrlKey:!0,shiftKey:!0},{keyCode:qt.END,action:Yn(w2,u,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:qt.END,action:Yn(Nf,u,!0)},{keyCode:qt.HOME,action:Yn(Nf,u,!1)},{keyCode:qt.END,action:Yn(b2,u,!0,m)},{keyCode:qt.HOME,action:Yn(b2,u,!1,m)}],h).each(y=>{h.preventDefault()})})(s,a,i)})})(n,o),((s,a)=>{if(Q3.os.isMacOS())return;const i=aa(!1);s.on("keydown",u=>{jE(u)&&tO(i,s,!0)}),s.on("keyup",u=>{var m,h,p;u.isDefaultPrevented()||(p=u,C2([{keyCode:qt.PAGE_UP,action:Yn(b2,m=s,!1,h=a)},{keyCode:qt.PAGE_DOWN,action:Yn(b2,m,!0,h)}],p)),jE(u)&&i.get()&&(tO(i,s,!1),s.nodeChanged())})})(n,o),o}var s};class SD{constructor(o){let s;this.lastPath=[],this.editor=o;const a=this;"onselectionchange"in o.getDoc()||o.on("NodeChange click mouseup keyup focus",i=>{const u=o.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};"nodechange"!==i.type&&oy(m,s)||o.dispatch("SelectionChange"),s=m}),o.on("contextmenu",()=>{o.dispatch("SelectionChange")}),o.on("SelectionChange",()=>{const i=o.selection.getStart(!0);i&&Ip(o)&&!a.isSameElementPath(i)&&o.dom.isChildOf(i,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("mouseup",i=>{!i.isDefaultPrevented()&&Ip(o)&&("IMG"===o.selection.getNode().nodeName?su.setEditorTimeout(o,()=>{o.nodeChanged()}):o.nodeChanged())})}nodeChanged(o={}){const s=this.editor.selection;let a;if(this.editor.initialized&&s&&!ri(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();a=s.getStart(!0)||i,a.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(a,i)||(a=i);const u=[];this.editor.dom.getParent(a,m=>m===i||(u.push(m),!1)),this.editor.dispatch("NodeChange",{...o,element:a,parents:u})}}isSameElementPath(o){let s;const a=this.editor,i=Qr(a.dom.getParents(o,Lt,a.getBody()));if(i.length===this.lastPath.length){for(s=i.length;s>=0&&i[s]===this.lastPath[s];s--);if(-1===s)return this.lastPath=i,!0}return this.lastPath=i,!1}}const aO=sh("image"),$2=sh("event"),Hf=n=>o=>{o[$2]=n},YE=Hf(0),cO=Hf(2),yS=Hf(1),XE=sh("mode"),Vm=n=>o=>{o[XE]=n},wS=(n,o)=>Vm(o)(n),JE=Vm(0),A1=Vm(2),iO=Vm(1),CS=n=>o=>U.from(o[XE]).exists(a=>a===n),R1=CS(0),QE=CS(1),kD=["none","copy","link","move"],ED=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],e_=()=>{const n=new window.DataTransfer;let o="move",s="all";const a={get dropEffect(){return o},set dropEffect(i){Be(kD,i)&&(o=i)},get effectAllowed(){return s},set effectAllowed(i){(n=>U.from(n[$2]).exists(s=>0===s))(a)&&Be(ED,i)&&(s=i)},get items(){return i=a,u=n.items,{...u,get length(){return u.length},add:(m,h)=>{if(R1(i)){if(!zt(m))return u.add(m);if(!en(h))return u.add(m,h)}return null},remove:m=>{R1(i)&&u.remove(m)},clear:()=>{R1(i)&&u.clear()}};var i,u},get files(){return QE(a)?Object.freeze({length:0,item:i=>null}):n.files},get types(){return n.types},setDragImage:(i,u,m)=>{R1(a)&&(a[aO]={image:i,x:u,y:m},n.setDragImage(i,u,m))},getData:i=>QE(a)?"":n.getData(i),setData:(i,u)=>{R1(a)&&n.setData(i,u)},clearData:i=>{R1(a)&&n.clearData(i)}};return JE(a),a},xS=(n,o)=>n.setData("text/html",o),lO="x-tinymce/html",I2=qe(lO),t_="\x3c!-- "+lO+" --\x3e",_D=n=>t_+n,uO=n=>-1!==n.indexOf(t_),SS="%MCEPASTEBIN%",li=n=>n.dom.get("mcepastebin"),OD=n=>Le(n)&&"mcepastebin"===n.id,L2=n=>n===SS,Vf=(n,o)=>(wt.each(o,s=>{n=ys(s,RegExp)?n.replace(s,""):n.replace(s[0],s[1])}),n),n_=n=>Vf(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,s,a)=>s||a?jo:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Il=(n,o)=>({content:n,cancelled:o}),Bh=(n,o)=>(n.insertContent(o,{merge:wb(n),paste:!0}),!0),TS=n=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(n),AD=(n,o,s)=>{return!(n.selection.isCollapsed()||!TS(o)||(a=n,i=o,u=s,a.undoManager.extra(()=>{u(a,i)},()=>{a.execCommand("mceInsertLink",!1,i)}),0));var a,i,u},dO=(n,o,s)=>{return a=n,!(!TS(i=o)||!lt(xb(a),u=>Ss(i.toLowerCase(),`.${u.toLowerCase()}`)))&&((a,i,u)=>(a.undoManager.extra(()=>{u(a,i)},()=>{a.insertContent('<img src="'+i+'">')}),!0))(n,o,s);var a,i},RD=(n=>{let o=0;return()=>"mceclip"+o++})(),mO=n=>{const o=e_();return xS(o,n),A1(o),o},G0=(n,o,s,a,i)=>{const u=((y,w,S)=>{const _=y.dispatch("PastePreProcess",{content:w,internal:S}),N=((A,$)=>{const D=_0({sanitize:Cb(A)},A.schema);D.addNodeFilter("meta",j=>{wt.each(j,q=>{q.remove()})});const L=D.parse($,{forced_root_block:!1,isRootContent:!0});return td({validate:!0},A.schema).serialize(L)})(y,_.content);return y.hasEventListeners("PastePostProcess")&&!_.isDefaultPrevented()?((A,$,D)=>{const L=A.dom.create("div",{style:"display:none"},$),j=A.dispatch("PastePostProcess",{node:L,internal:D});return Il(j.node.innerHTML,j.isDefaultPrevented())})(y,N,S):Il(N,_.isDefaultPrevented())})(n,o,s);if(!u.cancelled){const m=u.content,h=()=>{return p=n,y=m,void(a||!RT(p)?Bh(p,y):(S=p,_=y,wt.each([AD,dO,Bh],N=>!N(S,_,Bh))));var p,y,S,_};i?$f(n,"insertFromPaste",{dataTransfer:mO(m)}).isDefaultPrevented()||(h(),Nh(n,"insertFromPaste")):h()}},q0=(n,o,s,a)=>{const i=s||uO(o);G0(n,o.replace(t_,""),i,!1,a)},o_=(n,o,s)=>{const a=n.dom.encode(o).replace(/\r\n/g,"\n"),i=((u,m,h)=>{const p=u.split(/\n\n/),y=((_,N)=>{let A="<"+_;const $=jr(N,(D,L)=>L+'="'+Bi.encodeAllRaw(D)+'"');return $.length&&(A+=" "+$.join(" ")),A+">"})(m,h),w="</"+m+">",S=ln(p,_=>_.split(/\n/).join("<br />"));return 1===S.length?S[0]:ln(S,_=>y+_+w).join("")})(cp(a,_v(n)),sc(n),zi(n));G0(n,i,!1,!0,s)},s_=n=>{const o={};if(n&&n.types)for(let s=0;s<n.types.length;s++){const a=n.types[s];try{o[a]=n.getData(a)}catch{o[a]=""}}return o},zf=(n,o)=>o in n&&n[o].length>0,kS=n=>zf(n,"text/html")||zf(n,"text/plain"),ES=(n,o,s)=>{const a="paste"===o.type?o.clipboardData:o.dataTransfer;var i;if(yb(n)&&a){const u=((m,h)=>{const p=h.items?Ao($o(h.items),w=>"file"===w.kind?[w.getAsFile()]:[]):[],y=h.files?$o(h.files):[];return Ht(p.length>0?p:y,(w=>{const S=xb(w);return _=>ms(_.type,"image/")&&lt(S,N=>(A=>{const $=A.toLowerCase(),D={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return wt.hasOwn(D,$)?"image/"+D[$]:"image/"+$})(N)===_.type)})(m))})(n,a);if(u.length>0)return o.preventDefault(),(i=u,Promise.all(ln(i,m=>p1(m).then(h=>({file:m,uri:h}))))).then(m=>{s&&n.selection.setRng(s),Je(m,h=>{var p,y;p=n,kf((y=h).uri).each(({data:w,type:S,base64Encoded:_})=>{const N=_?w:btoa(w),A=y.file,$=p.editorUpload.blobCache,L=$.getByData(N,S)??((j,q,ee,Q)=>{const de=RD(),Oe=tu(j)&&Le(ee.name),Re=Oe?((we,Ee)=>{const ze=Ee.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Le(ze)?we.dom.encode(ze[1]):void 0})(j,ee.name):de,We=q.create(de,ee,Q,Re,Oe?ee.name:void 0);return q.add(We),We})(p,$,A,N);q0(p,`<img src="${L.blobUri()}">`,!1,!0)})})}),!0}return!1},r_=(n,o,s,a,i)=>{let u=n_(s);const m=zf(o,I2())||uO(s),h=!m&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(u),p=TS(u);(L2(u)||!u.length||h&&!p)&&(a=!0),(a||p)&&(u=zf(o,"text/plain")&&h?o["text/plain"]:(y=>{const w=ju(),S=_0({},w);let _="";const N=w.getVoidElements(),A=wt.makeMap("script noscript style textarea video audio iframe object"," "),$=w.getBlockElements(),D=L=>{const j=L.name,q=L;if("br"!==j){if("wbr"!==j)if(N[j]&&(_+=" "),A[j])_+=" ";else{if(3===L.type&&(_+=L.value),!(L.name in w.getVoidElements())){let ee=L.firstChild;if(ee)do{D(ee)}while(ee=ee.next)}$[j]&&q.next&&(_+="\n","p"===j&&(_+="\n"))}}else _+="\n"};return y=Vf(y,[/<!\[[^\]]+\]>/g]),D(S.parse(y)),_})(u)),L2(u)||(a?o_(n,u,i):q0(n,u,m,i))},zm=(n,o,s,a)=>{((i,u,m)=>{if(!i)return!1;try{return i.clearData(),i.setData("text/html",u),i.setData("text/plain",m),i.setData(I2(),u),!0}catch{return!1}})(n.clipboardData,o.html,o.text)?(n.preventDefault(),a()):s(o.html,a)},_S=n=>(o,s)=>{const{dom:a,selection:i}=n,u=a.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=a.create("div",{contenteditable:"true"},o);a.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),a.add(n.getBody(),u);const h=i.getRng();m.focus();const p=a.createRng();p.selectNodeContents(m),i.setRng(p),su.setEditorTimeout(n,()=>{i.setRng(h),a.remove(u),s()},0)},gO=n=>({html:_D(n.selection.getContent({contextual:!0})),text:n.selection.getContent({format:"text"})}),OS=n=>{return!n.selection.isCollapsed()||!!(o=n).dom.getParent(o.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",o.getBody());var o},AS=(n,o)=>{var s,a;return $d.getCaretRangeFromPoint(null!==(s=o.clientX)&&void 0!==s?s:0,null!==(a=o.clientY)&&void 0!==a?a:0,n.getDoc())},a_=(n,o)=>{n.focus(),o&&n.selection.setRng(o)},hO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c_=n=>wt.trim(n).replace(hO,Fp).toLowerCase(),MD=(n,o,s)=>{const a=Fw(n);if(s||"all"===a||!e4(n))return o;const i=a?a.split(/[, ]/):[];if(i&&"none"!==a){const u=n.dom,m=n.selection.getNode();o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(h,p,y,w)=>{const S=u.parseStyle(u.decode(y)),_={};for(let A=0;A<i.length;A++){const $=S[i[A]];let D=$,L=u.getStyle(m,i[A],!0);/color/.test(i[A])&&(D=c_(D),L=c_(L)),L!==D&&(_[i[A]]=$)}const N=u.serializeStyle(_,"span");return N?p+' style="'+N+'"'+w:p+w})}else o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return o.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,h,p)=>m+' style="'+h+'"'+p)},BD=Tr,fO=yt,PD=n=>K(n.dom),i_=n=>o=>cn(F(n),o),pO=(n,o)=>el(F(n),PD,i_(o)),bO=(n,o,s)=>{const a=new ir(n,o),i=s?a.next.bind(a):a.prev.bind(a);let u=n;for(let m=s?n:i();m&&!BD(m);m=i())gi(m)&&(u=m);return u};var D1;!function(n){n.Before="before",n.After="after"}(D1||(D1={}));const l_=(n,o)=>Math.abs(n.left-o),vO=(n,o)=>Math.abs(n.right-o),u_=(n,o,s)=>o>n.left&&o<n.right?0:Math.min(Math.abs(n.left-o),Math.abs(n.right-o)),RS=(n,o,s)=>{const a=y=>gi(y.node)?U.some(y):Qt(y.node)?RS($o(y.node.childNodes),o,s):U.none(),i=(y,w)=>{const S=Hs(y,(_,N)=>w(_,o,s)-w(N,o,s));return((_,N)=>{if(_.length>=2){const A=a(_[0]).getOr(_[0]),$=a(_[1]).getOr(_[1]);if(Math.abs(N(A,o,s)-N($,o,s))<2){if(yt(A.node))return U.some(A);if(yt($.node))return U.some($)}}return U.none()})(S,w).orThunk(()=>Xo(S,a))},[u,m]=((n,o)=>{return(s=Ht(n,s=>{return(a=o)>=(i=s).top&&a<=i.bottom;var a,i}),fo(s,(a,i)=>a.fold(()=>U.some(i),u=>{const m=Math.min(i.left,u.left),h=Math.min(i.top,u.top),p=Math.max(i.right,u.right),y=Math.max(i.bottom,u.bottom);return U.some({top:h,right:p,bottom:y,left:m,width:p-m,height:y-h})}),U.none())).fold(()=>[[],n],s=>{const{pass:a,fail:i}=jn(n,u=>((m,h)=>{const p=(y=m,w=h,Math.max(0,Math.min(y.bottom,w.bottom)-Math.max(y.top,w.top))/Math.min(m.height,h.height));var y,w;return((y,w)=>y.top<w.bottom&&y.bottom>w.top)(m,h)&&p>.5})(u,s));return[a,i]});var s})(Wx(n),s),{pass:h,fail:p}=jn(m,y=>y.top<s);return i(u,u_).orThunk(()=>i(p,gp)).orThunk(()=>i(h,gp))},d_=(n,o,s)=>((a,i,u)=>{const m=F(a),p=((n,o,s)=>U.from(n.dom.elementFromPoint(o,s)).map(ha))(po(m),i,u).filter(y=>bs(m,y)).getOr(m);return((y,w,S,_)=>{const N=(A,$)=>{const D=Ht(A.dom.childNodes,Ot(L=>Qt(L)&&L.classList.contains("mce-drag-container")));return $.fold(()=>RS(D,S,_),L=>{const j=Ht(D,q=>q!==L.dom);return RS(j,S,_)}).orThunk(()=>(cn(A,y)?U.none():$r(A)).bind(L=>N(L,U.some(A))))};return N(w,U.none())})(m,p,i,u)})(n,o,s).filter(a=>_p(a.node)).map(a=>{return{node:(i=a).node,position:l_(i,u=o)<vO(i,u)?D1.Before:D1.After};var i,u}),m_=n=>{var o,s;const a=n.getBoundingClientRect(),i=n.ownerDocument,u=i.documentElement,m=i.defaultView;return{top:a.top+(null!==(o=m?.scrollY)&&void 0!==o?o:0)-u.clientTop,left:a.left+(null!==(s=m?.scrollX)&&void 0!==s?s:0)-u.clientLeft}},g_=n=>({target:n,srcElement:n}),DS=K,ID=((...n)=>o=>{for(let s=0;s<n.length;s++)if(n[s](o))return!0;return!1})(DS,H),MS=(n,o,s,a)=>{const i=n.dom,u=o.cloneNode(!0);i.setStyles(u,{width:s,height:a}),i.setAttrib(u,"data-mce-selected",null);const m=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:s,height:a}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},NS=(n,o)=>s=>()=>{s.scroll({[n]:("left"===n?s.scrollX:s.scrollY)+o,behavior:"smooth"})},wO=NS("left",-32),CO=NS("left",32),h_=NS("top",-32),f_=NS("top",32),xO=n=>{n&&n.parentNode&&n.parentNode.removeChild(n)},H2=(n,o,s,a,i)=>{"dragstart"===o&&xS(a,n.dom.getOuterHTML(s));const u=((n,o,s,a)=>{const i=((u,m)=>{const h=(p=>{const y=e_(),w=U.from(p[XE]);return A1(p),YE(y),y.dropEffect=p.dropEffect,y.effectAllowed=p.effectAllowed,(S=p,U.from(S[aO])).each(S=>y.setDragImage(S.image,S.x,S.y)),Je(p.types,S=>{"Files"!==S&&y.setData(S,p.getData(S))}),Je(p.files,S=>y.items.add(S)),(S=>U.from(S[$2]))(p).each(S=>{var _;_=y,Hf(S)(_)}),w.each(S=>{wS(p,S),wS(y,S)}),y;var S})(u);return"dragstart"===m?(YE(h),JE(h)):"drop"===m?(cO(h),A1(h)):(yS(h),iO(h)),h})(s,n);return en(a)?((u,m,h)=>{const p=B("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:u,composedPath:p,initEvent:p,preventDefault:gt,stopImmediatePropagation:gt,stopPropagation:gt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:p,initMouseEvent:p,getModifierState:p,dataTransfer:h,...g_(m)}})(n,o,i):(u=n,m=a,h=o,p=i,{...m,dataTransfer:p,type:u,...g_(h)});var u,m,h,p})(o,s,a,i);return n.dispatch(o,u)},SO=(n,o,s)=>{n.on(a=>{a.intervalId.clear(),a.dragging&&s.fold(()=>H2(o,"dragend",a.element,a.dataTransfer),i=>H2(o,"dragend",a.element,a.dataTransfer,i))}),TO(n)},TO=n=>{n.on(o=>{o.intervalId.clear(),xO(o.ghost)}),n.clear()},BS=K,EO=(n,o)=>Nm(n.getBody(),o),HD=n=>{const o=n.selection,s=n.dom,a=n.getBody(),i=((n,o,s,a)=>{const i=Po();let u,m;const h=sc(n),p=n.dom,y=()=>{(w=>{var S,_;const N=Ea(F(w),"*[contentEditable=false],video,audio,embed,object");for(let A=0;A<N.length;A++){const $=N[A].dom;let D=$.previousSibling;if(wl(D)){const L=D.data;1===L.length?null===(S=D.parentNode)||void 0===S||S.removeChild(D):D.deleteData(L.length-1,1)}D=$.nextSibling,Kg(D)&&(1===D.data.length?null===(_=D.parentNode)||void 0===_||_.removeChild(D):D.deleteData(0,1))}})(o),m&&(ku(m),m=null),i.on(w=>{p.remove(w.caret),i.clear()}),u&&(clearInterval(u),u=void 0)};return{show:(w,S)=>{let _;if(y(),NT(S))return null;if(!s(S))return m=((N,A)=>{var $;const D=(null!==($=N.ownerDocument)&&void 0!==$?$:document).createTextNode(Pn),L=N.parentNode;if(A){const j=N.previousSibling;if(qg(j)){if(mi(j))return j;if(wl(j))return j.splitText(j.data.length-1)}L?.insertBefore(D,N)}else{const j=N.nextSibling;if(qg(j)){if(mi(j))return j;if(Kg(j))return j.splitText(1),j}N.nextSibling?L?.insertBefore(D,N.nextSibling):L?.appendChild(D)}return D})(S,w),_=S.ownerDocument.createRange(),ug(m.nextSibling)?(_.setStart(m,0),_.setEnd(m,0)):(_.setStart(m,1),_.setEnd(m,1)),_;{const N=((D,L,j)=>{var q;const ee=(null!==(q=L.ownerDocument)&&void 0!==q?q:document).createElement(D);ee.setAttribute("data-mce-caret",j?"before":"after"),ee.setAttribute("data-mce-bogus","all"),ee.appendChild(yl().dom);const Q=L.parentNode;return j?Q?.insertBefore(ee,L):L.nextSibling?Q?.insertBefore(ee,L.nextSibling):Q?.appendChild(ee),ee})(h,S,w),A=Uw(o,S,w);p.setStyle(N,"top",A.top),m=N;const $=p.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});p.setStyles($,{...A}),p.add(o,$),i.set({caret:$,element:S,before:w}),w&&p.addClass($,"mce-visual-caret-before"),u=setInterval(()=>{i.on(D=>{a()?p.toggleClass(D.caret,"mce-visual-caret-hidden"):p.addClass(D.caret,"mce-visual-caret-hidden")})},500),_=S.ownerDocument.createRange(),_.setStart(N,0),_.setEnd(N,0)}return _},hide:y,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(w=>{const S=Uw(o,w.element,w.before);p.setStyles(w.caret,{...S})})},destroy:()=>clearInterval(u)}})(n,a,s.isBlock,()=>Ch(n)),u="sel-"+s.uniqueId(),m="data-mce-selected";let h;const p=D=>D!==a&&(BS(D)||Tt(D))&&s.isChildOf(D,a)&&s.isEditable(D.parentNode),y=(D,L,j,q=!0)=>n.dispatch("ShowCaret",{target:L,direction:D,before:j}).isDefaultPrevented()?null:(q&&o.scrollIntoView(L,-1===D),i.show(j,L)),w=D=>mi(D)||Kg(D)||wl(D),S=D=>w(D.startContainer)||w(D.endContainer),N=(D,L)=>{if(!D)return null;if(D.collapsed){if(!S(D)){const Q=L?1:-1,de=gg(Q,a,D),Oe=de.getNode(!L);if(Le(Oe)){if(_p(Oe))return y(Q,Oe,!!L&&!de.isAtEnd(),!1);if(Kl(Oe)&&K(Oe.nextSibling)){const Ne=s.createRng();return Ne.setStart(Oe,0),Ne.setEnd(Oe,0),Ne}}const Re=de.getNode(L);if(Le(Re)){if(_p(Re))return y(Q,Re,!L&&!de.isAtEnd(),!1);if(Kl(Re)&&K(Re.previousSibling)){const Ne=s.createRng();return Ne.setStart(Re,1),Ne.setEnd(Re,1),Ne}}}return null}let j=D.startContainer,q=D.startOffset;const ee=D.endOffset;if(yt(j)&&0===q&&BS(j.parentNode)&&(j=j.parentNode,q=s.nodeIndex(j),j=j.parentNode),!Qt(j))return null;if(ee===q+1&&j===D.endContainer){const Q=j.childNodes[q];if(p(Q))return(de=>{const Oe=de.cloneNode(!0),Re=n.dispatch("ObjectSelected",{target:de,targetClone:Oe});if(Re.isDefaultPrevented())return null;const Ne=((we,Ee)=>{const ze=F(n.getBody()),ct=n.getDoc(),Yt=Ul(ze,"#"+u).getOrThunk(()=>{const dn=Ws('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ct);return ls(dn,"id",u),Or(ze,dn),dn}),kt=s.createRng();bu(Yt),pu(Yt,[fc(jo,ct),F(Ee),fc(jo,ct)]),kt.setStart(Yt.dom.firstChild,1),kt.setEnd(Yt.dom.lastChild,0),Iu(Yt,{top:s.getPos(we,n.getBody()).y+"px"}),ph(Yt);const Cn=o.getSel();return Cn&&(Cn.removeAllRanges(),Cn.addRange(kt)),kt})(de,Re.targetClone),We=F(de);return Je(Ea(F(n.getBody()),`*[${m}]`),we=>{cn(We,we)||Bo(we,m)}),s.getAttrib(de,m)||de.setAttribute(m,"1"),h=de,$(),Ne})(Q)}return null},A=()=>{h&&h.removeAttribute(m),Ul(F(n.getBody()),"#"+u).each(gr),h=null},$=()=>{i.hide()};return Ag(n)||(n.on("click",D=>{s.isEditable(D.target)||(D.preventDefault(),n.focus())}),n.on("blur NewBlock",A),n.on("ResizeWindow FullscreenStateChanged",i.reposition),n.on("tap",D=>{const L=D.target,j=EO(n,L);BS(j)?(D.preventDefault(),g2(n,j).each(N)):p(L)&&g2(n,L).each(N)},!0),n.on("mousedown",D=>{const L=D.target;if(L!==a&&"HTML"!==L.nodeName&&!s.isChildOf(L,a)||!((q,ee,Q)=>{const de=F(q.getBody()),Oe=q.inline?de:F(po(de).dom.documentElement),Re=((Ne,We,we,Ee)=>{const ze=We.dom.getBoundingClientRect();return{x:we-(Ne?ze.left+We.dom.clientLeft+to(We):0),y:Ee-(Ne?ze.top+We.dom.clientTop+xR(We):0)}})(q.inline,Oe,ee,Q);return((Ne,We,we)=>{const Ee=A4(Ne),ze=KN(Ne);return We>=0&&we>=0&&We<=Ee&&we<=ze})(Oe,Re.x,Re.y)})(n,D.clientX,D.clientY))return;A(),$();const j=EO(n,L);BS(j)?(D.preventDefault(),g2(n,j).each(N)):d_(a,D.clientX,D.clientY).each(q=>{var ee;D.preventDefault(),(ee=y(1,q.node,q.position===D1.Before,!1))&&o.setRng(ee),Qt(j)?j.focus():n.getBody().focus()})}),n.on("keypress",D=>{qt.modifierPressed(D)||BS(o.getNode())&&D.preventDefault()}),n.on("GetSelectionRange",D=>{let L=D.range;if(h){if(!h.parentNode)return void(h=null);L=L.cloneRange(),L.selectNode(h),D.range=L}}),n.on("SetSelectionRange",D=>{D.range=(D=>{const L=n.schema.getVoidElements(),j=s.createRng(),q=D.startContainer,ee=D.startOffset,Q=D.endContainer,de=D.endOffset;return rt(L,q.nodeName.toLowerCase())?0===ee?j.setStartBefore(q):j.setStartAfter(q):j.setStart(q,ee),rt(L,Q.nodeName.toLowerCase())?0===de?j.setEndBefore(Q):j.setEndAfter(Q):j.setEnd(Q,de),j})(D.range);const L=N(D.range,D.forward);L&&(D.range=L)}),n.on("AfterSetSelectionRange",D=>{const L=D.range,j=L.startContainer.parentElement;var q,ee;S(L)||Qt(q=j)&&"mcepastebin"===q.id||$(),Le(ee=j)&&s.hasClass(ee,"mce-offscreen-selection")||A()}),(n=>{const o=Po(),s=vs.DOM,a=document,i=(p=o,y=n,w=>{if(0===w.button){const S=En(y.dom.getParents(w.target),ID).getOr(null);if(Le(S)&&(_=y.dom,N=y.getBody(),DS(A=S)&&A!==N&&_.isEditable(A.parentElement))){const _=y.dom.getPos(S),N=y.getBody(),A=y.getDoc().documentElement;p.set({element:S,dataTransfer:e_(),dragging:!1,screenX:w.screenX,screenY:w.screenY,maxX:(y.inline?N.scrollWidth:A.offsetWidth)-2,maxY:(y.inline?N.scrollHeight:A.offsetHeight)-2,relX:w.pageX-_.x,relY:w.pageY-_.y,width:S.offsetWidth,height:S.offsetHeight,ghost:MS(y,S,S.offsetWidth,S.offsetHeight),intervalId:lm(100)})}}var _,N,A}),u=((n,o)=>{const s=ds((i,u)=>{return h=i,p=u,(m=o)._selectionOverrides.hideFakeCaret(),void d_(m.getBody(),h,p).fold(()=>m.selection.placeCaretAt(h,p),y=>{const w=m._selectionOverrides.showCaret(1,y.node,y.position===D1.Before,!1);w?m.selection.setRng(w):m.selection.placeCaretAt(h,p)});var m,h,p},0);o.on("remove",s.cancel);const a=n;return i=>n.on(u=>{const m=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&m>10){const y=H2(o,"dragstart",u.element,u.dataTransfer,i);if(Le(y.dataTransfer)&&(u.dataTransfer=y.dataTransfer),y.isDefaultPrevented())return;u.dragging=!0,o.focus()}if(u.dragging){const y=i.currentTarget===o.getDoc().documentElement,w=((S,_)=>({pageX:_.pageX-S.relX,pageY:_.pageY+5}))(u,(_=i,N=(D=S=o).inline?m_(D.getBody()):{left:0,top:0},A=(D=>{const L=D.getBody();return D.inline?{left:L.scrollLeft,top:L.scrollTop}:{left:0,top:0}})(S),$=((D,L)=>{if(L.target.ownerDocument!==D.getDoc()){const j=m_(D.getContentAreaContainer()),q=(ee=>{const Q=ee.getBody(),de=ee.getDoc().documentElement;return ee.inline?{left:Q.scrollLeft,top:Q.scrollTop}:{left:Q.scrollLeft||de.scrollLeft,top:Q.scrollTop||de.scrollTop}})(D);return{left:L.pageX-j.left+q.left,top:L.pageY-j.top+q.top}}return{left:L.pageX,top:L.pageY}})(S,_),{pageX:$.left-N.left+A.left,pageY:$.top-N.top+A.top}));h=u.ghost,p=o.getBody(),h.parentNode!==p&&p.appendChild(h),((S,_,N,A,$,D,L,j,q,ee,Q,de)=>{let Oe=0,Re=0;S.style.left=_.pageX+"px",S.style.top=_.pageY+"px",_.pageX+N>$&&(Oe=_.pageX+N-$),_.pageY+A>D&&(Re=_.pageY+A-D),S.style.width=N-Oe+"px",S.style.height=A-Re+"px";const Ne=q.clientHeight,We=q.clientWidth,we=L+q.getBoundingClientRect().top,Ee=j+q.getBoundingClientRect().left;Q.on(ze=>{ze.intervalId.clear(),ze.dragging&&de&&(L+8>=Ne?ze.intervalId.set(f_(ee)):L-8<=0?ze.intervalId.set(h_(ee)):j+8>=We?ze.intervalId.set(CO(ee)):j-8<=0?ze.intervalId.set(wO(ee)):we+16>=window.innerHeight?ze.intervalId.set(f_(window)):we-16<=0?ze.intervalId.set(h_(window)):Ee+16>=window.innerWidth?ze.intervalId.set(CO(window)):Ee-16<=0&&ze.intervalId.set(wO(window)))})})(u.ghost,w,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,o.getContentAreaContainer(),o.getWin(),a,y),s.throttle(i.clientX,i.clientY)}var S,_,D,N,A,$,h,p})})(o,n),m=((p,y)=>w=>{p.on(S=>{var _,N,A,$;if(S.intervalId.clear(),S.dragging){if(N=y,A=(N=>{const A=N.getSel();if(Le(A)){const $=A.getRangeAt(0).startContainer;return yt($)?$.parentNode:$}return null})(y.selection),$=S.element,!ve(A)&&A!==$&&!N.dom.isChildOf(A,$)&&N.dom.isEditable(A)){const N=null!==(_=y.getDoc().elementFromPoint(w.clientX,w.clientY))&&void 0!==_?_:y.getBody();H2(y,"drop",N,S.dataTransfer,w).isDefaultPrevented()||y.undoManager.transact(()=>{((A,$)=>{const D=A.getParent($.parentNode,A.isBlock);xO($),D&&D!==A.getRoot()&&A.isEmpty(D)&&Ri(F(D))})(y.dom,S.element),(A=>{const $=A.getData("text/html");return""===$?U.none():U.some($)})(S.dataTransfer).each(A=>y.insertContent(A)),y._selectionOverrides.hideFakeCaret()})}H2(y,"dragend",y.getBody(),S.dataTransfer,w)}}),TO(p)})(o,n),h=((p,y)=>w=>SO(p,y,U.some(w)))(o,n);var p,y;n.on("mousedown",i),n.on("mousemove",u),n.on("mouseup",m),s.bind(a,"mousemove",u),s.bind(a,"mouseup",h),n.on("remove",()=>{s.unbind(a,"mousemove",u),s.unbind(a,"mouseup",h)}),n.on("keydown",p=>{p.keyCode===qt.ESC&&SO(o,n,U.none())})})(D=n),TT(D)&&(L=>{const j=Q=>{if(!Q.isDefaultPrevented()){const de=Q.dataTransfer;de&&(Be(de.types,"Files")||de.files.length>0)&&(Q.preventDefault(),"drop"===Q.type&&Rx(L,"Dropped file type is not supported"))}},q=Q=>{Zb(L,Q.target)&&j(Q)},ee=()=>{const Q=vs.DOM,de=L.dom,Oe=document,Re=L.inline?L.getBody():L.getDoc(),Ne=["drop","dragover"];Je(Ne,We=>{Q.bind(Oe,We,q),de.bind(Re,We,j)}),L.on("remove",()=>{Je(Ne,We=>{Q.unbind(Oe,We,q),de.unbind(Re,We,j)})})};L.on("init",()=>{su.setEditorTimeout(L,ee,0)})})(D),(D=>{const L=ds(()=>{if(!D.removed&&D.getBody().contains(document.activeElement)){const j=D.selection.getRng();if(j.collapsed){const q=$k(D,j,!1);D.selection.setRng(q)}}},0);D.on("focus",()=>{L.throttle()}),D.on("blur",()=>{L.cancel()})})(n),(D=>{D.on("init",()=>{D.on("focusin",L=>{const j=L.target;if(Tt(j)){const q=Nm(D.getBody(),j),ee=K(q)?q:j;D.selection.getNode()!==ee&&g2(D,ee).each(Q=>D.selection.setRng(Q))}})})})(n)),{showCaret:y,showBlockCaretContainer:D=>{D.hasAttribute("data-mce-caret")&&(np(D),o.scrollIntoView(D))},hideFakeCaret:$,destroy:()=>{i.destroy(),h=null}};var D},VD=(n,o)=>{let s=o;for(let a=n.previousSibling;yt(a);a=a.previousSibling)s+=a.data.length;return s},_O=(n,o,s,a,i)=>{if(yt(s)&&(a<0||a>s.data.length))return[];const u=i&&yt(s)?[VD(s,a)]:[a];let m=s;for(;m!==o&&m.parentNode;)u.push(n.nodeIndex(m,i)),m=m.parentNode;return m===o?u.reverse():[]},p_=(n,o,s,a,i,u,m=!1)=>({start:_O(n,o,s,a,m),end:_O(n,o,i,u,m)}),OO=(n,o)=>{const s=o.slice(),a=s.pop();return Vo(a)?fo(s,(i,u)=>i.bind(m=>U.from(m.childNodes[u])),U.some(n)).bind(i=>yt(i)&&(a<0||a>i.data.length)?U.none():U.some({node:i,offset:a})):U.none()},AO=(n,o)=>OO(n,o.start).bind(({node:s,offset:a})=>OO(n,o.end).map(({node:i,offset:u})=>{const m=document.createRange();return m.setStart(s,a),m.setEnd(i,u),m})),M1=(n,o,s)=>{if(o&&n.isEmpty(o)&&!s(o)){const a=o.parentNode;n.remove(o,yt(o.firstChild)&&Mi(o.firstChild.data)),M1(n,a,s)}},PS=(n,o,s,a=!0)=>{const i=o.startContainer.parentNode,u=o.endContainer.parentNode;o.deleteContents(),a&&!s(o.startContainer)&&(yt(o.startContainer)&&0===o.startContainer.data.length&&n.remove(o.startContainer),yt(o.endContainer)&&0===o.endContainer.data.length&&n.remove(o.endContainer),M1(n,i,s),i!==u&&M1(n,u,s))},b_=(n,o)=>U.from(n.dom.getParent(o.startContainer,n.dom.isBlock)),RO=(n,o,s)=>{const a=n.dynamicPatternsLookup({text:s,block:o});return{...n,blockPatterns:ww(a).concat(n.blockPatterns),inlinePatterns:Cw(a).concat(n.inlinePatterns)}},DO=(n,o,s,a)=>{const i=n.createRng();return i.setStart(o,0),i.setEnd(s,a),i.toString()},MO=(n,o,s)=>{((a,i,u)=>{if(yt(a)&&0>=a.length)return U.some(Lm(a,0));{const m=El(k2);return U.from(m.forwards(a,0,L0(a),u)).map(h=>Lm(h.container,0))}})(o,0,o).each(a=>{const i=a.container;_3(i,s.start.length,o).each(h=>{const p=n.createRng();p.setStart(i,0),p.setEnd(h.container,h.offset),PS(n,p,y=>y===o)});const u=F(i),m=sa(u);var h,p;/^\s[^\s]/.test(m)&&(h=u,p=m.slice(1),Ur.set(h,p))})},zD=(n,o)=>n.create("span",{"data-mce-type":"bookmark",id:o}),v_=(n,o)=>{const s=n.createRng();return s.setStartAfter(o.start),s.setEndBefore(o.end),s},NO=(n,o,s)=>{const a=AO(n.getRoot(),s).getOrDie("Unable to resolve path range"),i=a.startContainer,u=a.endContainer,m=0===a.endOffset?u:u.splitText(a.endOffset),h=0===a.startOffset?i:i.splitText(a.startOffset),p=h.parentNode;return{prefix:o,end:m.parentNode.insertBefore(zD(n,o+"-end"),m),start:p.insertBefore(zD(n,o+"-start"),h)}},BO=(n,o,s)=>{M1(n,n.get(o.prefix+"-end"),s),M1(n,n.get(o.prefix+"-start"),s)},PO=n=>0===n.start.length,FO=(n,o,s,a)=>{const i=o.start;var u;return _E(n,a.container,a.offset,(u=i,(m,h)=>{const p=m.data.substring(0,h),y=p.lastIndexOf(u.charAt(u.length-1)),w=p.lastIndexOf(u);return-1!==w?w+u.length:-1!==y?y+1:-1}),s).bind(m=>{var h,p;const y=null!==(p=null===(h=s.textContent)||void 0===h?void 0:h.indexOf(i))&&void 0!==p?p:-1;if(-1!==y&&m.offset>=y+i.length){const w=n.createRng();return w.setStart(m.container,m.offset-i.length),w.setEnd(m.container,m.offset),U.some(w)}return EE(m.container,m.offset-i.length,s).map(S=>{const _=n.createRng();return _.setStart(S.container,S.offset),_.setEnd(m.container,m.offset),_}).filter(S=>S.toString()===i).orThunk(()=>FO(n,o,s,Lm(m.container,0)))})},la=(n,o,s,a)=>{const i=n.dom,u=i.getRoot(),m=s.pattern,h=s.position.container,p=s.position.offset;return EE(h,p-s.pattern.end.length,o).bind(y=>{const w=p_(i,u,y.container,y.offset,h,p,a);if(PO(m))return U.some({matches:[{pattern:m,startRng:w,endRng:w}],position:y});{const S=K0(n,s.remainingPatterns,y.container,y.offset,o,a),_=S.getOr({matches:[],position:y}),N=_.position;return(($,D,L,j,q,ee=!1)=>{if(0===D.start.length&&!ee){const Q=$.createRng();return Q.setStart(L,j),Q.setEnd(L,j),U.some(Q)}return aS(L,j,q).bind(Q=>FO($,D,q,Q).bind(de=>{var Oe;return ee&&(de.endContainer===Q.container&&de.endOffset===Q.offset||0===Q.offset&&(null===(Oe=de.endContainer.textContent)||void 0===Oe?void 0:Oe.length)===de.endOffset)?U.none():U.some(de)}))})(i,m,N.container,N.offset,o,S.isNone()).map($=>{const D=((L,j,q,ee=!1)=>p_(L,j,q.startContainer,q.startOffset,q.endContainer,q.endOffset,ee))(i,u,$,a);return{matches:_.matches.concat([{pattern:m,startRng:D,endRng:w}]),position:Lm($.startContainer,$.startOffset)}})}})},K0=(n,o,s,a,i,u)=>{const m=n.dom;return aS(s,a,m.getRoot()).bind(h=>{const p=DO(m,i,s,a);for(let y=0;y<o.length;y++){const w=o[y];if(!Ss(p,w.end))continue;const S=o.slice();S.splice(y,1);const _=la(n,i,{pattern:w,remainingPatterns:S,position:h},u);if(_.isNone()&&a>0)return K0(n,o,s,a-1,i,u);if(_.isSome())return _}return U.none()})},UD=(n,o,s)=>{n.selection.setRng(s),"inline-format"===o.type?Je(o.format,a=>{n.formatter.apply(a)}):n.execCommand(o.cmd,!1,o.value)},$O=(n,o,s,a,i,u)=>{var m;return((h,p)=>{const y=Ls(h,w=>lt(p,S=>w.pattern.start===S.pattern.start&&w.pattern.end===S.pattern.end));return h.length===p.length?y?h:p:h.length>p.length?h:p})(K0(n,i.inlinePatterns,s,a,o,u).fold(()=>[],h=>h.matches),K0(n,(m=i.inlinePatterns,Hs(m,(h,p)=>p.end.length-h.end.length)),s,a,o,u).fold(()=>[],h=>h.matches))},IO=(n,o)=>{if(0===o.length)return;const s=n.dom,a=n.selection.getBookmark(),i=((u,m)=>{const h=sh("mce_textpattern"),p=ro(m,(y,w)=>{const S=NO(u,h+`_end${y.length}`,w.endRng);return y.concat([{...w,endMarker:S}])},[]);return ro(p,(y,w)=>{const S=p.length-y.length-1,_=PO(w.pattern)?w.endMarker:NO(u,h+`_start${S}`,w.startRng);return y.concat([{...w,startMarker:_}])},[])})(s,o);Je(i,u=>{const m=s.getParent(u.startMarker.start,s.isBlock),h=p=>p===m;PO(u.pattern)?((p,y,w,S)=>{const _=v_(p.dom,w);PS(p.dom,_,S),UD(p,y,_)})(n,u.pattern,u.endMarker,h):((p,y,w,S,_)=>{const N=p.dom,A=v_(N,S),$=v_(N,w);PS(N,$,_),PS(N,A,_);const L=v_(N,{prefix:w.prefix,start:w.end,end:S.start});UD(p,y,L)})(n,u.pattern,u.startMarker,u.endMarker,h),BO(s,u.endMarker,h),BO(s,u.startMarker,h)}),n.selection.moveToBookmark(a)},ZD=(n,o,s)=>{for(let a=0;a<n.length;a++)if(s(n[a],o))return!0;return!1},Pc=vs.DOM,LO=n=>n.inline?n.getElement().nodeName.toLowerCase():void 0,FS=n=>sr(n,o=>!1===en(o)),y_=n=>{const o=n.options.get,s=n.editorUpload.blobCache;return FS({allow_conditional_comments:o("allow_conditional_comments"),allow_html_data_urls:o("allow_html_data_urls"),allow_svg_data_urls:o("allow_svg_data_urls"),allow_html_in_named_anchor:o("allow_html_in_named_anchor"),allow_script_urls:o("allow_script_urls"),allow_unsafe_link_target:o("allow_unsafe_link_target"),convert_fonts_to_spans:o("convert_fonts_to_spans"),fix_list_elements:o("fix_list_elements"),font_size_legacy_values:o("font_size_legacy_values"),forced_root_block:o("forced_root_block"),forced_root_block_attrs:o("forced_root_block_attrs"),preserve_cdata:o("preserve_cdata"),inline_styles:o("inline_styles"),root_name:LO(n),sanitize:o("xss_sanitization"),validate:!0,blob_cache:s,document:n.getDoc()})},HO=n=>{const o=n.options.get;return FS({custom_elements:o("custom_elements"),extended_valid_elements:o("extended_valid_elements"),invalid_elements:o("invalid_elements"),invalid_styles:o("invalid_styles"),schema:o("schema"),valid_children:o("valid_children"),valid_classes:o("valid_classes"),valid_elements:o("valid_elements"),valid_styles:o("valid_styles"),verify_html:o("verify_html"),padd_empty_block_inline_children:o("format_empty_lines")})},VO=n=>n.inline?n.ui.styleSheetLoader:n.dom.styleSheetLoader,V2=n=>{const o=VO(n),s=Tp(n),a=n.contentCSS,i=()=>{o.unloadAll(a),n.inline||n.ui.styleSheetLoader.unloadAll(s)},u=()=>{n.removed?i():n.on("remove",i)};if(n.contentStyles.length>0){let p="";wt.each(n.contentStyles,y=>{p+=y+"\r\n"}),n.dom.addStyle(p)}const m=Promise.all(((p,y,w)=>{const S=[VO(p).loadAll(y)];return p.inline?S:S.concat([p.ui.styleSheetLoader.loadAll(w)])})(n,a,s)).then(u).catch(u),h=gb(n);return h&&((p,y)=>{const w=F(p.getBody()),S=vd(Ir(w)),_=Nr("style");ls(_,"type","text/css"),Or(_,fc(y)),Or(S,_),p.on("remove",()=>{gr(_)})})(n,h),m},w_=n=>{var o;!0!==n.removed&&(Ag(o=n)||o.load({initial:!0,format:"html"}),o.startContent=o.getContent({format:"raw"}),(o=>{o.bindPendingEventDelegates(),o.initialized=!0,o.dispatch("Init"),o.focus(!0),(a=>{const i=a.dom.getRoot();a.inline||Ip(a)&&a.selection.getStart(!0)!==i||Mc(i).each(u=>{const m=u.getNode(),h=Gl(m)?Mc(m).getOr(u):u;a.selection.setRng(h.toRange())})})(o),o.nodeChanged({initial:!0});const s=Mw(o);mo(s)&&s.call(o,o),(a=>{const i=kT(a);i&&su.setEditorTimeout(a,()=>{let u;u=!0===i?a:a.editorManager.get(i),u&&!u.destroyed&&(u.focus(),u.selection.scrollIntoView())},100)})(o)})(n))},$S=n=>{const o=n.getElement();let s=n.getDoc();n.inline&&(Pc.addClass(o,"mce-content-body"),n.contentDocument=s=document,n.contentWindow=window,n.bodyElement=o,n.contentAreaContainer=o);const a=n.getBody();var m,h;a.disabled=!0,n.readonly=kv(n),n._editableRoot=pb(n),!n.readonly&&n.hasEditableRoot()&&(n.inline&&"static"===Pc.getStyle(a,"position",!0)&&(a.style.position="relative"),a.contentEditable="true"),a.disabled=!1,n.editorUpload=(n=>{const o=(()=>{let $=[];const D=q=>{if(!q.blob||!q.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const ee=q.id||"blobid"+kR+++(()=>{const Re=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+Re()+Re()+Re()})(),Q=q.name||ee,de=q.blob;var Oe;return{id:qe(ee),name:qe(Q),filename:qe(q.filename||Q+"."+(Oe=de.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[Oe.toLowerCase()]||"dat")),blob:qe(de),base64:qe(q.base64),blobUri:qe(q.blobUri||URL.createObjectURL(de)),uri:qe(q.uri)}},L=q=>En($,q).getOrUndefined(),j=q=>L(ee=>ee.id()===q);return{create:(q,ee,Q,de,Oe)=>{if(zt(q))return D({id:q,name:de,filename:Oe,blob:ee,base64:Q});if(Mo(q))return D(q);throw new Error("Unknown input type")},add:q=>{j(q.id())||$.push(q)},get:j,getByUri:q=>L(ee=>ee.blobUri()===q),getByData:(q,ee)=>L(Q=>Q.base64()===q&&Q.blob().type===ee),findFirst:L,removeByUri:q=>{$=Ht($,ee=>ee.blobUri()!==q||(URL.revokeObjectURL(ee.blobUri()),!1))},destroy:()=>{Je($,q=>{URL.revokeObjectURL(q.blobUri())}),$=[]}}})();let s,a;const i=M4(),u=[],m=$=>D=>n.selection?$(D):[],h=($,D,L)=>{let j=0;do{j=$.indexOf(D,j),-1!==j&&($=$.substring(0,j)+L+$.substr(j+D.length),j+=L.length-D.length+1)}while(-1!==j);return $},p=($,D,L)=>($=h($,`src="${D}"`,`src="${L}"${L===wo.transparentSrc?' data-mce-placeholder="1"':""}`),h($,'data-mce-src="'+D+'"','data-mce-src="'+L+'"')),y=($,D)=>{Je(n.undoManager.data,L=>{"fragmented"===L.type?L.fragments=ln(L.fragments,j=>p(j,$,D)):L.content=p(L.content,$,D)})},w=()=>(s||(s=Ok(n,i)),N().then(m($=>{const D=ln($,L=>L.blobInfo);return s.upload(D,A0(n)).then(m(L=>{const j=[];let q=!1;const ee=ln(L,(Q,de)=>{const{blobInfo:Oe,image:Re}=$[de];let Ne=!1;return Q.status&&cl(n)?(Q.url&&!cs(Re.src,Q.url)&&(q=!0),o.removeByUri(Re.src),Ag(n)||((We,we)=>{const Ee=n.convertURL(we,"src");var ze;y(We.src,we),Lc(F(We),{src:tu(n)?(ze=we,ze+(-1===ze.indexOf("?")?"?":"&")+(new Date).getTime()):we,"data-mce-src":Ee})})(Re,Q.url)):Q.error&&(Q.error.remove&&(y(Re.src,wo.transparentSrc),j.push(Re),Ne=!0),Rx(n,_a.translate(["Failed to upload image: {0}",Q.error.message]))),{element:Re,status:Q.status,uploadUri:Q.url,blobInfo:Oe,removed:Ne}});return j.length>0&&!Ag(n)?n.undoManager.transact(()=>{Je(Hu(j),Q=>{const de=Ts(Q);var Oe;gr(Q),de.each((Oe=n,Re=>{var Ne,We;(Ne=Oe).dom.isEmpty((We=Re).dom)&&Le(Ne.schema.getTextBlockElements()[ce(We)])&&Or(Re,Ws('<br data-mce-bogus="1" />'))})),o.removeByUri(Q.dom.src)})}):q&&n.undoManager.dispatchChange(),ee}))}))),S=()=>bm(n)?w():Promise.resolve([]),_=$=>Ls(u,D=>D($)),N=()=>(a||(a=((n,o)=>{const s={};return{findAll:(a,i=Lt)=>{const u=Ht((h=a)?$o(h.getElementsByTagName("img")):[],h=>{const p=h.src;return!h.hasAttribute("data-mce-bogus")&&!h.hasAttribute("data-mce-placeholder")&&!(!p||p===wo.transparentSrc)&&(ms(p,"blob:")?!n.isUploaded(p)&&i(h):!!ms(p,"data:")&&i(h))}),m=ln(u,h=>{const p=h.src;if(rt(s,p))return s[p].then(y=>zt(y)?y:{image:h,blobInfo:y.blobInfo});{const y=((w,S)=>{const _=()=>Promise.reject("Invalid data URI");if(ms(S,"blob:")){const $=w.getByUri(S);return Le($)?Promise.resolve($):(N=S,ms(N,"blob:")?(D=N,fetch(D).then(L=>L.ok?L.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${D} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):ms(N,"data:")?(A=N,new Promise((D,L)=>{kf(A).bind(({type:j,data:q,base64Encoded:ee})=>Ef(j,q,ee)).fold(()=>L("Invalid data URI"),D)})):Promise.reject("Unknown URI format")).then(D=>p1(D).then(L=>ux(L,!1,j=>U.some(uk(w,D,j))).getOrThunk(_)))}var D,N,A;return ms(S,"data:")?dk(w,S).fold(_,$=>Promise.resolve($)):Promise.reject("Unknown image data format")})(o,p).then(w=>(delete s[p],{image:h,blobInfo:w})).catch(w=>(delete s[p],w));return s[p]=y,y}});var h;return Promise.all(m)}}})(i,o)),a.findAll(n.getBody(),_).then(m($=>{const D=Ht($,L=>zt(L)?(Rx(n,L),!1):"blob"!==L.uriType);return Ag(n)||Je(D,L=>{y(L.image.src,L.blobInfo.blobUri()),L.image.src=L.blobInfo.blobUri(),L.image.removeAttribute("data-mce-src")}),D}))),A=$=>$.replace(/src="(blob:[^"]+)"/g,(D,L)=>{const j=i.getResultUri(L);if(j)return'src="'+j+'"';let q=o.getByUri(L);return q||(q=fo(n.editorManager.get(),(ee,Q)=>ee||Q.editorUpload&&Q.editorUpload.blobCache.getByUri(L),void 0)),q?'src="data:'+q.blob().type+";base64,"+q.base64()+'"':D});return n.on("SetContent",()=>{bm(n)?S():N()}),n.on("RawSaveContent",$=>{$.content=A($.content)}),n.on("GetContent",$=>{$.source_view||"raw"===$.format||"tree"===$.format||($.content=A($.content))}),n.on("PostRender",()=>{n.parser.addNodeFilter("img",$=>{Je($,D=>{const L=D.attr("src");if(!L||o.getByUri(L))return;const j=i.getResultUri(L);j&&D.attr("src",j)})})}),{blobCache:o,addFilter:$=>{u.push($)},uploadImages:w,uploadImagesAuto:S,scanForImages:N,destroy:()=>{o.destroy(),i.destroy(),a=s=null}}})(n),n.schema=ju(HO(n)),n.dom=vs(s,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,update_styles:!0,root_element:n.inline?n.getBody():null,collect:n.inline,schema:n.schema,contentCssCors:_w(n),referrerPolicy:mb(n),onSetAttrib:m=>{n.dispatch("SetAttrib",m)}}),n.parser=(m=>{const h=_0(y_(m),m.schema);return h.addAttributeFilter("src,href,style,tabindex",(p,y)=>{const w=m.dom,S="data-mce-"+y;let _=p.length;for(;_--;){const N=p[_];let A=N.attr(y);if(A&&!N.attr(S)){if(0===A.indexOf("data:")||0===A.indexOf("blob:"))continue;"style"===y?(A=w.serializeStyle(w.parseStyle(A),N.name),A.length||(A=null),N.attr(S,A),N.attr(y,A)):"tabindex"===y?(N.attr(S,A),N.attr(y,null)):N.attr(S,m.convertURL(A,y,N.name))}}}),h.addNodeFilter("script",p=>{let y=p.length;for(;y--;){const w=p[y],S=w.attr("type")||"no/type";0!==S.indexOf("mce-")&&w.attr("type","mce-"+S)}}),Iw(m)&&h.addNodeFilter("#cdata",p=>{var y;let w=p.length;for(;w--;){const S=p[w];S.type=8,S.name="#comment",S.value="[CDATA["+m.dom.encode(null!==(y=S.value)&&void 0!==y?y:"")+"]]"}}),h.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",p=>{let y=p.length;const w=m.schema.getNonEmptyElements();for(;y--;){const S=p[y];S.isEmpty(w)&&0===S.getAll("br").length&&S.append(new vi("br",1))}}),h})(n),n.serializer=T4((m=>{const h=m.options.get;return{...y_(m),...HO(m),...FS({remove_trailing_brs:h("remove_trailing_brs"),pad_empty_with_br:h("pad_empty_with_br"),url_converter:h("url_converter"),url_converter_scope:h("url_converter_scope"),element_format:h("element_format"),entities:h("entities"),entity_encoding:h("entity_encoding"),indent:h("indent"),indent_after:h("indent_after"),indent_before:h("indent_before")})}})(n),n),n.selection=S4(n.dom,n.getWin(),n.serializer,n),n.annotator=aC(n),n.formatter=Dk(n),n.undoManager=So(n),n._nodeChangeDispatcher=new SD(n),n._selectionOverrides=HD(n),(m=>{const h=Po(),p=aa(!1),y=Oa(w=>{m.dispatch("longpress",{...w,type:"longpress"}),p.set(!0)},400);m.on("touchstart",w=>{ZR(w).each(S=>{y.cancel();const _={x:S.clientX,y:S.clientY,target:w.target};y.throttle(w),p.set(!1),h.set(_)})},!0),m.on("touchmove",w=>{y.cancel(),ZR(w).each(S=>{h.on(_=>{((N,A)=>{const $=Math.abs(N.clientX-A.x),D=Math.abs(N.clientY-A.y);return $>5||D>5})(S,_)&&(h.clear(),p.set(!1),m.dispatch("longpresscancel"))})})},!0),m.on("touchend touchcancel",w=>{y.cancel(),"touchcancel"!==w.type&&h.get().filter(S=>S.target.isEqualNode(w.target)).each(()=>{p.get()?w.preventDefault():m.dispatch("tap",{...w,type:"tap"})})},!0)})(n),(h=m=n).on("click",p=>{h.dom.getParent(p.target,"details")&&p.preventDefault()}),(h=>{h.parser.addNodeFilter("details",p=>{const y=Rv(h);Je(p,w=>{"expanded"===y?w.attr("open","open"):"collapsed"===y&&w.attr("open",null)})}),h.serializer.addNodeFilter("details",p=>{const y=ia(h);Je(p,w=>{"expanded"===y?w.attr("open","open"):"collapsed"===y&&w.attr("open",null)})})})(m),(m=>{const h="contenteditable",p=" "+wt.trim(fi(m))+" ",y=" "+wt.trim(Dc(m))+" ",w=d3(p),S=d3(y),_=$w(m);_.length>0&&m.on("BeforeSetContent",N=>{((A,$,D)=>{let L=$.length,j=D.content;if("raw"!==D.format){for(;L--;)j=j.replace($[L],m3(A,j,Dc(A)));D.content=j}})(m,_,N)}),m.parser.addAttributeFilter("class",N=>{let A=N.length;for(;A--;){const $=N[A];w($)?$.attr(h,"true"):S($)&&$.attr(h,"false")}}),m.serializer.addAttributeFilter(h,N=>{let A=N.length;for(;A--;){const $=N[A];(w($)||S($))&&(_.length>0&&$.attr("data-mce-content")?($.name="#text",$.type=3,$.raw=!0,$.value=$.attr("data-mce-content")):$.attr(h,null))}})})(n),Ag(n)||((m=>{m.on("mousedown",h=>{h.detail>=3&&(h.preventDefault(),(n=>{const o=((s,a)=>{const i=Xe.fromRangeStart(s).getNode(),u=(w=a,el(F(i),S=>H(S.dom)||ti(S),i_(w)).getOr(F(w)).dom),m=bO(i,u,!1),h=bO(i,u,!0),p=document.createRange();var w;return pO(m,u).fold(()=>{fO(m)?p.setStart(m,0):p.setStartBefore(m)},y=>p.setStartBefore(y.dom)),pO(h,u).fold(()=>{fO(h)?p.setEnd(h,h.data.length):p.setEndAfter(h)},y=>p.setEndAfter(y.dom)),p})(n.selection.getRng(),n.getBody());n.selection.setRng($l(o))})(m))})})(n),(m=>{(h=>{const p=[",",".",";",":","!","?"],y=[32],w=()=>{return N=DT(h),A=Av(h),{inlinePatterns:Cw(N),blockPatterns:ww(N),dynamicPatternsLookup:A};var N,A},S=()=>h.options.isSet("text_patterns_lookup");h.on("keydown",N=>{if(13===N.keyCode&&!qt.modifierPressed(N)&&h.selection.isCollapsed()){const A=w();(A.inlinePatterns.length>0||A.blockPatterns.length>0||S())&&((n,o)=>{const s=n.selection.getRng();return b_(n,s).map(a=>{var i;const u=Math.max(0,s.startOffset),m=RO(o,a,null!==(i=a.textContent)&&void 0!==i?i:""),h=$O(n,a,s.startContainer,u,m,!0),p=((y,w,S,_)=>{var N;const A=y.dom,$=sc(y);if(!A.is(w,$))return[];const D=null!==(N=w.textContent)&&void 0!==N?N:"";return((L,j)=>{const q=Hs(L,(de,Oe)=>Oe.start.length-de.start.length),ee=j.replace(jo," ");return En(q,Q=>0===j.indexOf(Q.start)||0===ee.indexOf(Q.start))})(S.blockPatterns,D).map(L=>wt.trim(D).length===L.start.length?[]:[{pattern:L,range:p_(A,A.getRoot(),w,0,w,0,!0)}]).getOr([])})(n,a,m);return(p.length>0||h.length>0)&&(n.undoManager.add(),n.undoManager.extra(()=>{n.execCommand("mceInsertNewLine")},()=>{n.insertContent("\ufeff"),IO(n,h),((S,_)=>{if(0===_.length)return;const N=S.selection.getBookmark();Je(_,A=>(($,D)=>{const j=D.pattern,q=AO($.dom.getRoot(),D.range).getOrDie("Unable to resolve path range");return b_($,q).each(ee=>{"block-format"===j.type?((Q,de)=>{const Oe=de.get(Q);return Wn(Oe)&&or(Oe).exists(Re=>rt(Re,"block"))})(j.format,$.formatter)&&$.undoManager.transact(()=>{MO($.dom,ee,j),$.formatter.apply(j.format)}):"block-command"===j.type&&$.undoManager.transact(()=>{MO($.dom,ee,j),$.execCommand(j.cmd,!1,j.value)})}),!0})(S,A)),S.selection.moveToBookmark(N)})(n,p);const y=n.selection.getRng(),w=aS(y.startContainer,y.startOffset,n.dom.getRoot());n.execCommand("mceInsertNewLine"),w.each(S=>{const _=S.container;"\ufeff"===_.data.charAt(S.offset-1)&&(_.deleteData(S.offset-1,1),M1(n.dom,_.parentNode,N=>N===n.dom.getRoot()))})}),!0)}).getOr(!1)})(h,A)&&N.preventDefault()}},!0);const _=()=>{if(h.selection.isCollapsed()){const N=w();(N.inlinePatterns.length>0||S())&&((A,$)=>{const D=A.selection.getRng();b_(A,D).map(L=>{const j=Math.max(0,D.startOffset-1),q=DO(A.dom,L,D.startContainer,j),ee=RO($,L,q),Q=$O(A,L,D.startContainer,j,ee,!1);Q.length>0&&A.undoManager.transact(()=>{IO(A,Q)})})})(h,N)}};h.on("keyup",N=>{ZD(y,N,(A,$)=>A===$.keyCode&&!qt.modifierPressed($))&&_()}),h.on("keypress",N=>{ZD(p,N,(A,$)=>A.charCodeAt(0)===$.charCode)&&su.setEditorTimeout(h,_)})})(m)})(n));const i=xD(n);((n,o)=>{n.addCommand("delete",()=>{var s;mE(s=n,o,!1).fold(()=>{Fy(s),$y(s)},oo)}),n.addCommand("forwardDelete",()=>{var s;mE(s=n,o,!0).fold(()=>s1(s,"ForwardDelete"),oo)})})(n,i),(m=>{m.on("NodeChange",De(eS,m))})(n),(m=>{var h;const p=m.dom,y=sc(m),w=null!==(h=CT(m))&&void 0!==h?h:"",S=(_,N)=>{if((D=>{if(Mk(D)){const L=D.keyCode;return!Nk(D)&&(qt.metaKeyPressed(D)||D.altKey||L>=112&&L<=123||Be($4,L))}return!1})(_))return;const A=m.getBody(),$=!(Mk(D=_)&&!(Nk(D)||"keyup"===D.type&&229===D.keyCode))&&((D,L,j)=>{if(os(F(L),!1)){const q=L.firstElementChild;return!q||!D.getStyle(L.firstElementChild,"padding-left")&&!D.getStyle(L.firstElementChild,"padding-right")&&j===q.nodeName.toLowerCase()}return!1})(p,A,y);var D;(""!==p.getAttrib(A,d2)!==$||N)&&(p.setAttrib(A,d2,$?w:null),p.setAttrib(A,"aria-placeholder",$?w:null),((D,L)=>{D.dispatch("PlaceholderToggle",{state:L})})(m,$),m.on($?"keydown":"keyup",S),m.off($?"keyup":"keydown",S))};Kt(w)&&m.on("init",_=>{S(_,!0),m.on("change SetContent ExecCommand",S),m.on("paste",N=>su.setEditorTimeout(m,()=>S(N)))})})(n),(n=>{const o=aa(!1),s=aa(Yr(n)?"text":"html"),a=(i=>{const u=aa(null);return{create:()=>((m,h)=>{const{dom:p,selection:y}=m,w=m.getBody();h.set(y.getRng());const S=p.add(m.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},SS);wo.browser.isFirefox()&&p.setStyle(S,"left","rtl"===p.getStyle(w,"direction",!0)?65535:-65535),p.bind(S,"beforedeactivate focusin focusout",_=>{_.stopPropagation()}),S.focus(),y.select(S,!0)})(i,u),remove:()=>((m,h)=>{const p=m.dom;if(li(m)){let y;const w=h.get();for(;y=li(m);)p.remove(y),p.unbind(y);w&&m.selection.setRng(w)}h.set(null)})(i,u),getEl:()=>li(i),getHtml:()=>(m=>{const h=m.dom,p=(_,N)=>{_.appendChild(N),h.remove(N,!0)},[y,...w]=Ht(m.getBody().childNodes,OD);Je(w,_=>{p(y,_)});const S=h.select("div[id=mcepastebin]",y);for(let _=S.length-1;_>=0;_--){const N=h.create("div");y.insertBefore(N,S[_]),p(N,S[_])}return y?y.innerHTML:""})(i),getLastRng:u.get}})(n);var i,u,m;i=n,(wo.browser.isChromium()||wo.browser.isSafari())&&(m=MD,(u=i).on("PastePreProcess",h=>{h.content=m(u,h.content,h.internal)})),((i,u)=>{i.addCommand("mceTogglePlainTextPaste",()=>{((m,h)=>{"text"===h.get()?(h.set("html"),lC(m,!1)):(h.set("text"),lC(m,!0)),m.focus()})(i,u)}),i.addCommand("mceInsertClipboardContent",(m,h)=>{h.html&&q0(i,h.html,h.internal,!1),h.text&&o_(i,h.text,!1)})})(n,s),(i=>{const u=p=>y=>{p(i,y)},m=OT(i);mo(m)&&i.on("PastePreProcess",u(m));const h=AT(i);mo(h)&&i.on("PastePostProcess",u(h))})(n),n.on("PreInit",()=>{(i=>{i.on("cut",(u=>m=>{!m.isDefaultPrevented()&&OS(u)&&zm(m,gO(u),_S(u),()=>{if(wo.browser.isChromium()||wo.browser.isFirefox()){const h=u.selection.getRng();su.setEditorTimeout(u,()=>{u.selection.setRng(h),u.execCommand("Delete")},0)}else u.execCommand("Delete")})})(i)),i.on("copy",(u=>m=>{!m.isDefaultPrevented()&&OS(u)&&zm(m,gO(u),_S(u),gt)})(i))})(n),((i,u)=>{Bw(i)&&i.on("dragend dragover draggesture dragdrop drop drag",m=>{m.preventDefault(),m.stopPropagation()}),yb(i)||i.on("drop",m=>{const h=m.dataTransfer;h&&lt(h.files,y=>/^image\//.test(y.type))&&m.preventDefault()}),i.on("drop",m=>{if(m.isDefaultPrevented())return;const h=AS(i,m);if(ve(h))return;const p=s_(m.dataTransfer),y=zf(p,I2());if((!kS(p)||(A=>{const $=A["text/plain"];return!!$&&0===$.indexOf("file://")})(p))&&ES(i,m,h))return;const w=p[I2()],S=w||p["text/html"]||p["text/plain"],_=((A,$,D,L)=>{const j=A.getParent(D,q=>Uc($,q));if(!_t(A.getParent(D,"summary")))return!0;if(j&&rt(L,"text/html")){const q=(new DOMParser).parseFromString(L["text/html"],"text/html").body;return!_t(q.querySelector(j.nodeName.toLowerCase()))}return!1})(i.dom,i.schema,h.startContainer,p),N=u.get();N&&!_||S&&(m.preventDefault(),su.setEditorTimeout(i,()=>{i.undoManager.transact(()=>{(w||N&&_)&&i.execCommand("Delete"),a_(i,h);const A=n_(S);p["text/html"]?q0(i,A,y,!0):o_(i,A,!0)})}))}),i.on("dragstart",m=>{u.set(!0)}),i.on("dragover dragend",m=>{yb(i)&&!u.get()&&(m.preventDefault(),a_(i,AS(i,m))),"dragend"===m.type&&u.set(!1)}),(m=>{m.on("input",h=>{const p=y=>_t(y.querySelector("summary"));if("deleteByDrag"===h.inputType){const y=Ht(m.dom.select("details"),p);Je(y,w=>{Tr(w.firstChild)&&w.firstChild.remove();const S=m.dom.create("summary");S.appendChild(yl().dom),w.prepend(S)})}})})(i)})(n,o),((n,o,s)=>{((a,i,u)=>{let m;a.on("keydown",h=>{var p;(qt.metaKeyPressed(p=h)&&86===p.keyCode||p.shiftKey&&45===p.keyCode)&&!h.isDefaultPrevented()&&(m=h.shiftKey&&86===h.keyCode)}),a.on("paste",h=>{if(h.isDefaultPrevented()||(w=h,wo.os.isAndroid()&&0===(null===(_=null===(S=w.clipboardData)||void 0===S?void 0:S.items)||void 0===_?void 0:_.length)))return;var w,S,_;const p="text"===u.get()||m;m=!1;const y=s_(h.clipboardData);!kS(y)&&ES(a,h,i.getLastRng()||a.selection.getRng())||(zf(y,"text/html")?(h.preventDefault(),r_(a,y,y["text/html"],p,!0)):zf(y,"text/plain")&&zf(y,"text/uri-list")?(h.preventDefault(),r_(a,y,y["text/plain"],p,!0)):(i.create(),su.setEditorTimeout(a,()=>{const w=i.getHtml();i.remove(),r_(a,y,w,p,!1)},0)))})})(n,o,s),(a=>{const i=m=>ms(m,"webkit-fake-url"),u=m=>ms(m,"data:");a.parser.addNodeFilter("img",(m,h,p)=>{if(!yb(a)&&!0===(null===(w=p.data)||void 0===w?void 0:w.paste))for(const y of m){const w=y.attr("src");zt(w)&&!y.attr("data-mce-object")&&w!==wo.transparentSrc&&(i(w)||!Ov(a)&&u(w))&&y.remove()}var w})})(n)})(n,a,s)})})(n);const u=(m=>{const h=m;return(p=m,Uo(p.plugins,"rtc").bind(y=>U.from(y.setup))).fold(()=>(h.rtcInstance=Sk(m),U.none()),p=>(h.rtcInstance=(()=>{const y=qe(null),w=qe("");return{init:{bindEvents:gt},undoManager:{beforeChange:gt,add:y,undo:y,redo:y,clear:gt,reset:gt,hasUndo:yn,hasRedo:yn,transact:y,ignore:gt,extra:gt},formatter:{match:yn,matchAll:qe([]),matchNode:qe(void 0),canApply:yn,closest:w,apply:gt,remove:gt,toggle:gt,formatChanged:qe({unbind:gt})},editor:{getContent:w,setContent:qe({content:"",html:""}),insertContent:qe(""),addVisual:gt},selection:{getContent:w},autocompleter:{addDecoration:gt,removeDecoration:gt},raw:{getModel:qe(U.none())}}})(),U.some(()=>p().then(y=>(h.rtcInstance=(w=>{const S=q=>Mo(q)?q:{},{init:_,undoManager:N,formatter:A,editor:$,selection:D,autocompleter:L,raw:j}=w;return{init:{bindEvents:_.bindEvents},undoManager:{beforeChange:N.beforeChange,add:N.add,undo:N.undo,redo:N.redo,clear:N.clear,reset:N.reset,hasUndo:N.hasUndo,hasRedo:N.hasRedo,transact:(q,ee,Q)=>N.transact(Q),ignore:(q,ee)=>N.ignore(ee),extra:(q,ee,Q,de)=>N.extra(Q,de)},formatter:{match:(q,ee,Q,de)=>A.match(q,S(ee),de),matchAll:A.matchAll,matchNode:A.matchNode,canApply:q=>A.canApply(q),closest:q=>A.closest(q),apply:(q,ee,Q)=>A.apply(q,S(ee)),remove:(q,ee,Q,de)=>A.remove(q,S(ee)),toggle:(q,ee,Q)=>A.toggle(q,S(ee)),formatChanged:(q,ee,Q,de,Oe)=>A.formatChanged(ee,Q,de,Oe)},editor:{getContent:q=>$.getContent(q),setContent:(q,ee)=>({content:$.setContent(q,ee),html:""}),insertContent:(q,ee)=>($.insertContent(q),""),addVisual:$.addVisual},selection:{getContent:(q,ee)=>D.getContent(ee)},autocompleter:{addDecoration:L.addDecoration,removeDecoration:L.removeDecoration},raw:{getModel:()=>U.some(j.getRawModel())}}})(y),y.rtc.isRemote)))));var p})(n);(m=>{const h=m.getDoc(),p=m.getBody();m.dispatch("PreInit"),ET(m)||(h.body.spellcheck=!1,Pc.setAttrib(p,"spellcheck","false")),m.quirks=(n=>{const o=wt.each,s=qt.BACKSPACE,a=qt.DELETE,i=n.dom,u=n.selection,m=n.parser,h=wo.browser,p=h.isFirefox(),y=h.isChromium()||h.isSafari(),w=wo.deviceType.isiPhone()||wo.deviceType.isiPad(),S=wo.os.isMacOS()||wo.os.isiOS(),_=(we,Ee)=>{try{n.getDoc().execCommand(we,!1,String(Ee))}catch{}},N=we=>we.isDefaultPrevented(),A=()=>{n.shortcuts.add("meta+a",null,"SelectAll")},$=()=>{n.inline||i.bind(n.getDoc(),"mousedown mouseup",we=>{let Ee;if(we.target===n.getDoc().documentElement)if(Ee=u.getRng(),n.getBody().focus(),"mousedown"===we.type){if(mi(Ee.startContainer))return;u.placeCaretAt(we.clientX,we.clientY)}else u.setRng(Ee)})},D=()=>{Range.prototype.getClientRects||n.on("mousedown",we=>{if(!N(we)&&"HTML"===we.target.nodeName){const Ee=n.getBody();Ee.blur(),su.setEditorTimeout(n,()=>{Ee.focus()})}})},L=()=>{const we=Ev(n);n.on("click",Ee=>{const ze=Ee.target;/^(IMG|HR)$/.test(ze.nodeName)&&i.isEditable(ze.parentNode)&&(Ee.preventDefault(),n.selection.select(ze),n.nodeChanged()),"A"===ze.nodeName&&i.hasClass(ze,we)&&0===ze.childNodes.length&&i.isEditable(ze.parentNode)&&(Ee.preventDefault(),u.select(ze))})},j=()=>{n.on("keydown",we=>{if(!N(we)&&we.keyCode===s&&u.isCollapsed()&&0===u.getRng().startOffset){const Ee=u.getNode().previousSibling;if(Ee&&Ee.nodeName&&"table"===Ee.nodeName.toLowerCase())return we.preventDefault(),!1}return!0})},q=()=>{kv(n)||n.on("BeforeExecCommand mousedown",()=>{_("StyleWithCSS",!1),_("enableInlineTableEditing",!1),hb(n)||_("enableObjectResizing",!1)})},ee=()=>{n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Q=()=>{n.inline||n.on("keydown",()=>{document.activeElement===document.body&&n.getWin().focus()})},de=()=>{n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",we=>{let Ee;"HTML"===we.target.nodeName&&(Ee=n.selection.getRng(),n.getBody().focus(),n.selection.setRng(Ee),n.selection.normalize(),n.nodeChanged())}))},Oe=()=>{S&&n.on("keydown",we=>{!qt.metaKeyPressed(we)||we.shiftKey||37!==we.keyCode&&39!==we.keyCode||(we.preventDefault(),n.selection.getSel().modify("move",37===we.keyCode?"backward":"forward","lineboundary"))})},Re=()=>{n.on("click",we=>{let Ee=we.target;do{if("A"===Ee.tagName)return void we.preventDefault()}while(Ee=Ee.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ne=()=>{n.on("init",()=>{n.dom.bind(n.getBody(),"submit",we=>{we.preventDefault()})})},We=gt;return Ag(n)?(y&&($(),L(),Ne(),A(),w&&(Q(),de(),Re())),p&&(D(),q(),ee(),Oe())):(n.on("keydown",we=>{if(N(we)||we.keyCode!==qt.BACKSPACE)return;let Ee=u.getRng();const ze=Ee.startContainer,ct=Ee.startOffset,Yt=i.getRoot();let kt=ze;if(Ee.collapsed&&0===ct){for(;kt.parentNode&&kt.parentNode.firstChild===kt&&kt.parentNode!==Yt;)kt=kt.parentNode;"BLOCKQUOTE"===kt.nodeName&&(n.formatter.toggle("blockquote",void 0,kt),Ee=i.createRng(),Ee.setStart(ze,0),Ee.setEnd(ze,0),u.setRng(Ee))}}),(()=>{const we=Ee=>{const ze=i.create("body"),ct=Ee.cloneContents();return ze.appendChild(ct),u.serializer.serialize(ze,{format:"html"})};n.on("keydown",Ee=>{const ze=Ee.keyCode;if(!N(Ee)&&(ze===a||ze===s)&&n.selection.isEditable()){const ct=n.selection.isCollapsed(),Yt=n.getBody();if(ct&&(!i.isEmpty(Yt)||(kt=>{const Cn=F(kt);return lt(Ea(Cn,'[contenteditable="true"]'),dn=>$r(dn).exists(ho=>!vl(ho)))})(Yt))||!ct&&!(kt=>{const Cn=we(kt),dn=i.createRng();return dn.selectNode(n.getBody()),Cn===we(dn)})(n.selection.getRng()))return;Ee.preventDefault(),n.setContent(""),Yt.firstChild&&i.isBlock(Yt.firstChild)?n.selection.setCursorLocation(Yt.firstChild,0):n.selection.setCursorLocation(Yt,0),n.nodeChanged()}})})(),wo.windowsPhone||n.on("keyup focusin mouseup",we=>{qt.modifierPressed(we)||(Ee=>{const ze=Ee.getBody(),ct=Ee.selection.getRng();return ct.startContainer===ct.endContainer&&ct.startContainer===ze&&0===ct.startOffset&&ct.endOffset===ze.childNodes.length})(n)||u.normalize()},!0),y&&($(),L(),n.on("init",()=>{_("DefaultParagraphSeparator",sc(n))}),Ne(),j(),m.addNodeFilter("br",we=>{let Ee=we.length;for(;Ee--;)"Apple-interchange-newline"===we[Ee].attr("class")&&we[Ee].remove()}),w?(Q(),de(),Re()):A()),p&&(n.on("keydown",we=>{if(!N(we)&&we.keyCode===s){if(!n.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&0===u.getRng().startOffset){const Ee=u.getNode(),ze=Ee.previousSibling;if("HR"===Ee.nodeName)return i.remove(Ee),void we.preventDefault();ze&&ze.nodeName&&"hr"===ze.nodeName.toLowerCase()&&(i.remove(ze),we.preventDefault())}}}),D(),(()=>{const we=()=>{const ze=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const ct=u.getStart();ct!==n.getBody()&&(i.setAttrib(ct,"style",null),o(ze,Yt=>{ct.setAttributeNode(Yt.cloneNode(!0))}))}},Ee=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);n.on("keypress",ze=>{let ct;return!(!(N(ze)||8!==ze.keyCode&&46!==ze.keyCode)&&Ee()&&(ct=we(),n.getDoc().execCommand("delete",!1),ct(),ze.preventDefault(),1))}),i.bind(n.getDoc(),"cut",ze=>{if(!N(ze)&&Ee()){const ct=we();su.setEditorTimeout(n,()=>{ct()})}})})(),q(),n.on("SetContent ExecCommand",we=>{"setcontent"!==we.type&&"mceInsertLink"!==we.command||o(i.select("a:not([data-mce-block])"),Ee=>{var ze;let ct=Ee.parentNode;const Yt=i.getRoot();if(ct?.lastChild===Ee){for(;ct&&!i.isBlock(ct);){if((null===(ze=ct.parentNode)||void 0===ze?void 0:ze.lastChild)!==ct||ct===Yt)return;ct=ct.parentNode}i.add(ct,"br",{"data-mce-bogus":1})}})}),ee(),Oe(),j(),n.on("drop",we=>{var Ee;const ze=null===(Ee=we.dataTransfer)||void 0===Ee?void 0:Ee.getData("text/html");zt(ze)&&/^<img[^>]*>$/.test(ze)&&n.dispatch("dragend",new window.DragEvent("dragend",we))}))),{refreshContentEditable:We,isHidden:()=>{if(!p||n.removed)return!1;const we=n.selection.getSel();return!we||!we.rangeCount||0===we.rangeCount}}})(m),m.dispatch("PostRender");const y=yT(m);void 0!==y&&(p.dir=y);const w=_T(m);w&&m.on("BeforeSetContent",S=>{wt.each(w,_=>{S.content=S.content.replace(_,N=>"\x3c!--mce:protected "+escape(N)+"--\x3e")})}),m.on("SetContent",()=>{m.addVisual(m.getBody())}),m.on("compositionstart compositionend",S=>{m.composing="compositionstart"===S.type})})(n),u.fold(()=>{const m=(h=>{let p=!1;const y=setTimeout(()=>{p||h.setProgressState(!0)},500);return()=>{clearTimeout(y),p=!0,h.setProgressState(!1)}})(n);V2(n).then(()=>{w_(n),m()})},m=>{n.setProgressState(!0),V2(n).then(()=>{m().then(h=>{n.setProgressState(!1),w_(n),v4(n)},h=>{n.notificationManager.open({type:"error",text:String(h)}),w_(n),v4(n)})})})},WD=Lt,IS=vs.DOM,C_=vs.DOM,LS=(n,o)=>({editorContainer:n,iframeContainer:o,api:{}}),x_=n=>{const o=n.getElement();return n.inline?LS(null):(s=>{const a=C_.create("div");return C_.insertAfter(a,s),LS(a,a)})(o)},S_=async n=>{n.dispatch("ScriptsLoaded"),(s=>{const a=wt.trim(wv(s)),i=s.ui.registry.getAll().icons,u={...Ax.get("default").icons,...Ax.get(a).icons};Ke(u,(m,h)=>{rt(i,h)||s.ui.registry.addIcon(h,m)})})(n),(s=>{const a=ih(s);if(zt(a)){const i=Rf.get(a);s.theme=i(s,Rf.urls[a])||{},mo(s.theme.init)&&s.theme.init(s,Rf.urls[a]||s.documentBaseUrl.replace(/\/$/,""))}else s.theme={}})(n),(s=>{const a=fb(s),i=O0.get(a);s.model=i(s,O0.urls[a])})(n),(s=>{const a=[];Je(Al(s),i=>{((u,m,h)=>{const p=Jn.get(h),y=Jn.urls[h]||u.documentBaseUrl.replace(/\/$/,"");if(h=wt.trim(h),p&&-1===wt.inArray(m,h)){if(u.plugins[h])return;try{const w=p(u,y)||{};u.plugins[h]=w,mo(w.init)&&(w.init(u,y),m.push(h))}catch(w){((S,_,N)=>{const A=_a.translate(["Failed to initialize plugin: {0}",_]);Pb(S,"PluginLoadError",{message:A}),Nx(A,N),Rx(S,A)})(u,h,w)}}})(s,a,i.replace(/^\-/,""))})})(n);const o=await(s=>{const a=s.getElement();return s.orgDisplay=a.style.display,zt(ih(s))?(i=>{const u=i.theme.renderUI;return u?u():x_(i)})(s):mo(ih(s))?(i=>{const u=i.getElement(),m=ih(i)(i,u);return m.editorContainer.nodeType&&(m.editorContainer.id=m.editorContainer.id||i.id+"_parent"),m.iframeContainer&&m.iframeContainer.nodeType&&(m.iframeContainer.id=m.iframeContainer.id||i.id+"_iframecontainer"),m.height=m.iframeHeight?m.iframeHeight:u.offsetHeight,m})(s):x_(s)})(n);var s,a;((s,a)=>{const i={show:U.from(a.show).getOr(gt),hide:U.from(a.hide).getOr(gt),isEnabled:U.from(a.isEnabled).getOr(Lt),setEnabled:u=>{s.mode.isReadOnly()||U.from(a.setEnabled).each(m=>m(u))}};s.ui={...s.ui,...i}})(n,U.from(o.api).getOr({})),n.editorContainer=o.editorContainer,(s=n).contentCSS=s.contentCSS.concat(D4(a=s,xv(a)),(a=>D4(a,Tp(a)))(s)),n.inline?$S(n):((s,a)=>{((i,u)=>{const m=i.translate("Rich Text Area"),h=Bn(F(i.getElement()),"tabindex").bind(Rn),p=((y,w,S,_)=>{const N=Nr("iframe");return _.each(A=>ls(N,"tabindex",A)),Lc(N,S),Lc(N,{id:y+"_ifr",frameBorder:"0",allowTransparency:"true",title:w}),Xt(N,"tox-edit-area__iframe"),N})(i.id,m,pm(i),h).dom;p.onload=()=>{p.onload=null,i.dispatch("load")},i.contentAreaContainer=u.iframeContainer,i.iframeElement=p,i.iframeHTML=(y=>{let w=ig(y)+"<html><head>";ch(y)!==y.documentBaseUrl&&(w+='<base href="'+y.documentBaseURI.getURI()+'" />'),w+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const S=mT(y),_=lb(y),N=y.translate(vm(y));return yv(y)&&(w+='<meta http-equiv="Content-Security-Policy" content="'+yv(y)+'" />'),w+=`</head><body id="${S}" class="mce-content-body ${_}" data-id="${y.id}" aria-label="${N}"><br></body></html>`,w})(i),IS.add(u.iframeContainer,p)})(s,a),a.editorContainer&&(a.editorContainer.style.display=s.orgDisplay,s.hidden=IS.isHidden(a.editorContainer)),s.getElement().style.display="none",IS.setAttrib(s.id,"aria-hidden","true"),s.getElement().style.visibility=s.orgVisibility,(i=>{const u=i.iframeElement,m=()=>{i.contentDocument=u.contentDocument,$S(i)};if(MT(i)||wo.browser.isFirefox()){const p=i.getDoc();p.open(),p.write(i.iframeHTML),p.close(),m()}else{const p=((n,o,s,a)=>((i,u,m,h,p)=>{const y=(w=m,S=h,_=>{w(_)&&S((N=>{const A=F(Vg(N).getOr(N.target)),$=()=>N.stopPropagation(),D=()=>N.preventDefault(),L=Is(D,$);return{target:A,x:N.clientX,y:N.clientY,stop:$,prevent:D,kill:L,raw:N}})(_))});var w,S;return i.dom.addEventListener(u,y,!1),{unbind:De(zg,i,u,y,!1)}})(n,"load",s,()=>{p.unbind(),m()}))(F(u),0,WD);u.srcdoc=i.iframeHTML}})(s)})(n,{editorContainer:o.editorContainer,iframeContainer:o.iframeContainer})},N1=vs.DOM,zO=n=>"-"===n.charAt(0),UO=(n,o,s)=>U.from(o).filter(a=>Kt(a)&&!Ax.has(a)).map(a=>({url:`${n.editorManager.baseURL}/icons/${a}/icons${s}.js`,name:U.some(a)})),ZO=Sc().deviceType,WO=ZO.isPhone(),jD=ZO.isTablet(),z2=n=>{if(ve(n))return[];{const o=Wn(n)?n:n.split(/[ ,]/),s=ln(o,ie);return Ht(s,Kt)}},HS=(n,o)=>rt(n.sections(),o),qD=(n,o)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Uo(n,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...o?{menubar:!1}:{}}),KD=(n,o)=>{var s;const a=null!==(s=o.external_plugins)&&void 0!==s?s:{};return n&&n.external_plugins?wt.extend({},n.external_plugins,a):a},XD=(n,o)=>{const s=n.selection,a=n.dom;return/^ | $/.test(o)?((i,u,m)=>{const h=F(i.getRoot());return m=mf(h,Xe.fromRangeStart(u))?m.replace(/^ /,"&nbsp;"):m.replace(/^&nbsp;/," "),gf(h,Xe.fromRangeEnd(u))?m.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):m.replace(/&nbsp;(<br( \/)?>)?$/," ")})(a,s.getRng(),o):o},zS=(n,o)=>{if(n.selection.isEditable()){const{content:s,details:a}=(i=>{if("string"!=typeof i){const u=wt.extend({paste:i.paste,data:{paste:i.paste}},i);return{content:i.content,details:u}}return{content:i,details:{}}})(o);wx(n,{...a,content:XD(n,s),format:"html",set:!1,selection:!0}).each(i=>{const u=(h=i.content,p=a,Tk(n).editor.insertContent(h,p));var h,p;Cx(n,u,i),n.addVisual()})}},jO={"font-size":"size","font-family":"face"},T_=Zs("font"),GO=n=>(o,s)=>U.from(s).map(F).filter(an).bind(a=>{return(i=n,u=o,m=a.dom,Zd(F(m),h=>{return tl(p=h,i).orThunk(()=>T_(p)?Uo(jO,i).bind(y=>Bn(p,y)):U.none());var p},h=>cn(F(u),h))).or(((i,u)=>U.from(vs.DOM.getStyle(u,i,!0)))(n,a.dom));var i,u,m}).getOr(""),JD=GO("font-size"),e5=Is(n=>n.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),GO("font-family")),QD=n=>Mc(n.getBody()).bind(o=>{const s=o.container();return U.from(yt(s)?s.parentNode:s)}),k_=(n,o)=>{return s=n,a=ko(U.some,o),(i=s,U.from(i.selection.getRng()).bind(u=>{const m=i.getBody();return u.startContainer===m&&0===u.startOffset?U.none():U.from(i.selection.getStart(!0))})).orThunk(De(QD,s)).map(F).filter(an).bind(a);var s,a,i},E_=(n,o)=>{if(/^[0-9.]+$/.test(o)){const s=parseInt(o,10);if(s>=1&&s<=7){const a=wt.explode(n.options.get("font_size_style_values")),i=wt.explode(n.options.get("font_size_classes"));return i.length>0?i[s-1]||o:a[s-1]||o}return o}return o},qO=n=>{const o=n.split(/\s*,\s*/);return ln(o,s=>-1===s.indexOf(" ")||ms(s,'"')||ms(s,"'")?s:`'${s}'`).join(",")},KO=(n,o)=>{const s=n.dom,a=n.selection.getRng(),i=o?n.selection.getStart():n.selection.getEnd(),u=o?a.startContainer:a.endContainer,m=M2(s,u);if(!m||!m.isContentEditable)return;const h=o?Ya:nl,p=sc(n);((y,w,S,_)=>{const N=y.dom,A=D=>N.isBlock(D)&&D.parentElement===S,$=A(w)?w:N.getParent(_,A,S);return U.from($).map(F)})(n,i,m,u).each(y=>{const w=Z3(n,u,y.dom,m,!1,p);h(y,F(w)),n.selection.setCursorLocation(w,0),n.dispatch("NewBlock",{newBlock:w}),Nh(n,"insertParagraph")})},X0=["toggleview"],J0=n=>Be(X0,n.toLowerCase());class __{constructor(o){this.commands={state:{},exec:{},value:{}},this.editor=o}execCommand(o,s=!1,a,i){const u=this.editor,m=o.toLowerCase(),h=i?.skip_focus;if(u.removed||("mcefocus"!==m&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)||h?vh(y=u).each(w=>y.selection.setRng(w)):u.focus()),u.dispatch("BeforeExecCommand",{command:o,ui:s,value:a}).isDefaultPrevented()))return!1;var y;const p=this.commands.exec[m];return!!mo(p)&&(p(m,s,a),u.dispatch("ExecCommand",{command:o,ui:s,value:a}),!0)}queryCommandState(o){if(!J0(o)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const s=o.toLowerCase(),a=this.commands.state[s];return!!mo(a)&&a(s)}queryCommandValue(o){if(!J0(o)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const s=o.toLowerCase(),a=this.commands.value[s];return mo(a)?a(s):""}addCommands(o,s="exec"){const a=this.commands;Ke(o,(i,u)=>{Je(u.toLowerCase().split(","),m=>{a[s][m]=i})})}addCommand(o,s,a){const i=o.toLowerCase();this.commands.exec[i]=(u,m,h)=>s.call(a??this.editor,m,h)}queryCommandSupported(o){const s=o.toLowerCase();return!!this.commands.exec[s]}addQueryStateHandler(o,s,a){this.commands.state[o.toLowerCase()]=()=>s.call(a??this.editor)}addQueryValueHandler(o,s,a){this.commands.value[o.toLowerCase()]=()=>s.call(a??this.editor)}}const Uf="data-mce-contenteditable",O_=(n,o,s)=>{try{n.getDoc().execCommand(o,!1,String(s))}catch{}},U2=(n,o)=>{n.dom.contentEditable=o?"true":"false"},P1=n=>n.readonly,YO=n=>{n.parser.addAttributeFilter("contenteditable",o=>{P1(n)&&Je(o,s=>{s.attr(Uf,s.attr("contenteditable")),s.attr("contenteditable","false")})}),n.serializer.addAttributeFilter(Uf,o=>{P1(n)&&Je(o,s=>{s.attr("contenteditable",s.attr(Uf))})}),n.serializer.addTempAttr(Uf)},tM=["copy"],XO=wt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class A_{static isNative(o){return!!XO[o.toLowerCase()]}constructor(o){this.bindings={},this.settings=o||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||yn}fire(o,s){return this.dispatch(o,s)}dispatch(o,s){const a=o.toLowerCase(),i=T(a,s??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[a];if(u)for(let m=0,h=u.length;m<h;m++){const p=u[m];if(!p.removed){if(p.once&&this.off(a,p.func),i.isImmediatePropagationStopped())return i;if(!1===p.func.call(this.scope,i))return i.preventDefault(),i}}return i}on(o,s,a,i){if(!1===s&&(s=yn),s){const u={func:s,removed:!1};i&&wt.extend(u,i);const m=o.toLowerCase().split(" ");let h=m.length;for(;h--;){const p=m[h];let y=this.bindings[p];y||(y=[],this.toggleEvent(p,!0)),y=a?[u,...y]:[...y,u],this.bindings[p]=y}}return this}off(o,s){if(o){const a=o.toLowerCase().split(" ");let i=a.length;for(;i--;){const u=a[i];let m=this.bindings[u];if(!u)return Ke(this.bindings,(h,p)=>{this.toggleEvent(p,!1),delete this.bindings[p]}),this;if(m){if(s){const h=jn(m,p=>p.func===s);m=h.fail,this.bindings[u]=m,Je(h.pass,p=>{p.removed=!0})}else m.length=0;m.length||(this.toggleEvent(o,!1),delete this.bindings[u])}}}else Ke(this.bindings,(a,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(o,s,a){return this.on(o,s,a,{once:!0})}has(o){o=o.toLowerCase();const s=this.bindings[o];return!(!s||0===s.length)}}const Z2=n=>(n._eventDispatcher||(n._eventDispatcher=new A_({scope:n,toggleEvent:(o,s)=>{A_.isNative(o)&&n.toggleNativeEvent&&n.toggleNativeEvent(o,s)}})),n._eventDispatcher),F1={fire(n,o,s){return this.dispatch(n,o,s)},dispatch(n,o,s){const a=this;if(a.removed&&"remove"!==n&&"detach"!==n)return T(n.toLowerCase(),o??{},a);const i=Z2(a).dispatch(n,o);if(!1!==s&&a.parent){let u=a.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(n,i,!1),u=u.parent?u.parent():void 0}return i},on(n,o,s){return Z2(this).on(n,o,s)},off(n,o){return Z2(this).off(n,o)},once(n,o){return Z2(this).once(n,o)},hasEventListeners(n){return Z2(this).has(n)}},W2=vs.DOM;let Zf;const US=(n,o)=>{if("selectionchange"===o)return n.getDoc();if(!n.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(o))return n.getDoc().documentElement;const s=Dd(n);return s?(n.eventRoot||(n.eventRoot=W2.select(s)[0]),n.eventRoot):n.getBody()},JO=(n,o,s)=>{var a;(a=n).hidden||P1(a)?P1(n)&&((a,i)=>{if("click"!==i.type||qt.metaKeyPressed(i))Be(tM,i.type)&&a.dispatch(i.type,i);else{const u=F(i.target);(m=a,h=u,Ba(h,"a",p=>cn(p,F(m.getBody()))).bind(p=>Bn(p,"href"))).each(m=>{if(i.preventDefault(),/^#/.test(m)){const h=a.dom.select(`${m},[name="${Rs(m,"#")}"]`);h.length&&a.selection.scrollIntoView(h[0],!0)}else window.open(m,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var m,h})(n,s):n.dispatch(o,s)},QO=(n,o)=>{if(n.delegates||(n.delegates={}),n.delegates[o]||n.removed)return;const s=US(n,o);if(Dd(n)){if(Zf||(Zf={},n.editorManager.on("removeEditor",()=>{n.editorManager.activeEditor||Zf&&(Ke(Zf,(i,u)=>{n.dom.unbind(US(n,u))}),Zf=null)})),Zf[o])return;const a=i=>{const u=i.target,m=n.editorManager.get();let h=m.length;for(;h--;){const p=m[h].getBody();(p===u||W2.isChildOf(u,p))&&JO(m[h],o,i)}};Zf[o]=a,W2.bind(s,o,a)}else{const a=i=>{JO(n,o,i)};W2.bind(s,o,a),n.delegates[o]=a}},R_={...F1,bindPendingEventDelegates(){const n=this;wt.each(n._pendingNativeEvents,o=>{QO(n,o)})},toggleNativeEvent(n,o){const s=this;"focus"!==n&&"blur"!==n&&(s.removed||(o?s.initialized?QO(s,n):s._pendingNativeEvents?s._pendingNativeEvents.push(n):s._pendingNativeEvents=[n]:s.initialized&&s.delegates&&(s.dom.unbind(US(s,n),n,s.delegates[n]),delete s.delegates[n])))},unbindAllNativeEvents(){const n=this,o=n.getBody(),s=n.dom;n.delegates&&(Ke(n.delegates,(a,i)=>{n.dom.unbind(US(n,i),i,a)}),delete n.delegates),!n.inline&&o&&s&&(o.onload=null,s.unbind(n.getWin()),s.unbind(n.getDoc())),s&&(s.unbind(o),s.unbind(n.getContainer()))}},nM=n=>zt(n)?{value:n.split(/[ ,]/),valid:!0}:re(n,zt)?{value:n,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},eA=(n,o)=>n+(hn(o.message)?"":`. ${o.message}`),tA=n=>n.valid,D_=(n,o,s="")=>{const a=o(n);return Ln(a)?a?{value:n,valid:!0}:{valid:!1,message:s}:a},t5=["design","readonly"],Gd=(n,o,s,a)=>{const i=s[o.get()],u=s[a];try{u.activate()}catch(m){return void console.error(`problem while activating editor mode ${a}:`,m)}var m;i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&((n,o)=>{const s=F(n.getBody());var a,i,u;u=o,Ns(a=s,i="mce-content-readonly")&&!u?ka(a,i):u&&Xt(a,i),o?(n.selection.controlSelection.hideResizeRect(),n._selectionOverrides.hideFakeCaret(),(a=>{U.from(a.selection.getNode()).each(i=>{i.removeAttribute("data-mce-selected")})})(n),n.readonly=!0,U2(s,!1),Je(Ea(s,'*[contenteditable="true"]'),a=>{ls(a,Uf,"true"),U2(a,!1)})):(n.readonly=!1,n.hasEditableRoot()&&U2(s,!0),Je(Ea(s,`*[${Uf}="true"]`),a=>{Bo(a,Uf),U2(a,!0)}),O_(n,"StyleWithCSS",!1),O_(n,"enableInlineTableEditing",!1),O_(n,"enableObjectResizing",!1),(a=>Ch(a)||(i=>{const u=Ir(F(i.getElement()));return bh(u).filter(m=>!Yp(m.dom)&&Zb(i,m.dom)).isSome()})(a))(n)&&n.focus(),(a=>{a.selection.setRng(a.selection.getRng())})(n),n.nodeChanged())})(n,u.editorReadOnly),o.set(a),(m=n).dispatch("SwitchMode",{mode:a})},j2=wt.each,M_=wt.explode,oM={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},nA=wt.makeMap("alt,ctrl,shift,meta,access"),sM=n=>{const o={},s=wo.os.isMacOS()||wo.os.isiOS();j2(M_(n.toLowerCase(),"+"),u=>{u in nA?o[u]=!0:/^[0-9]{2,}$/.test(u)?o.keyCode=parseInt(u,10):(o.charCode=u.charCodeAt(0),o.keyCode=oM[u]||u.toUpperCase().charCodeAt(0))});const a=[o.keyCode];let i;for(i in nA)o[i]?a.push(i):o[i]=!1;return o.id=a.join(","),o.access&&(o.alt=!0,s?o.ctrl=!0:o.shift=!0),o.meta&&(s?o.meta=!0:(o.ctrl=!0,o.meta=!1)),o};class Cs{constructor(o){this.shortcuts={},this.pendingPatterns=[],this.editor=o;const s=this;o.on("keyup keypress keydown",a=>{!s.hasModifier(a)&&!s.isFunctionKey(a)||a.isDefaultPrevented()||(j2(s.shortcuts,i=>{s.matchShortcut(a,i)&&(s.pendingPatterns=i.subpatterns.slice(0),"keydown"===a.type&&s.executeShortcutAction(i))}),s.matchShortcut(a,s.pendingPatterns[0])&&(1===s.pendingPatterns.length&&"keydown"===a.type&&s.executeShortcutAction(s.pendingPatterns[0]),s.pendingPatterns.shift()))})}add(o,s,a,i){const u=this,m=u.normalizeCommandFunc(a);return j2(M_(wt.trim(o)),h=>{const p=u.createShortcut(h,s,m,i);u.shortcuts[p.id]=p}),!0}remove(o){const s=this.createShortcut(o);return!!this.shortcuts[s.id]&&(delete this.shortcuts[s.id],!0)}normalizeCommandFunc(o){const s=this,a=o;return"string"==typeof a?()=>{s.editor.execCommand(a,!1,null)}:wt.isArray(a)?()=>{s.editor.execCommand(a[0],a[1],a[2])}:a}createShortcut(o,s,a,i){const u=wt.map(M_(o,">"),sM);return u[u.length-1]=wt.extend(u[u.length-1],{func:a,scope:i||this.editor}),wt.extend(u[0],{desc:this.editor.translate(s),subpatterns:u.slice(1)})}hasModifier(o){return o.altKey||o.ctrlKey||o.metaKey}isFunctionKey(o){return"keydown"===o.type&&o.keyCode>=112&&o.keyCode<=123}matchShortcut(o,s){return!!s&&s.ctrl===o.ctrlKey&&s.meta===o.metaKey&&s.alt===o.altKey&&s.shift===o.shiftKey&&!!(o.keyCode===s.keyCode||o.charCode&&o.charCode===s.charCode)&&(o.preventDefault(),!0)}executeShortcutAction(o){return o.func?o.func.call(o.scope):null}}const n5=()=>{const n=(()=>{const o={},s={},a={},i={},u={},m={},h={},p={},y=(w,S)=>(_,N)=>{w[_.toLowerCase()]={...N,type:S}};return{addButton:y(o,"button"),addGroupToolbarButton:y(o,"grouptoolbarbutton"),addToggleButton:y(o,"togglebutton"),addMenuButton:y(o,"menubutton"),addSplitButton:y(o,"splitbutton"),addMenuItem:y(s,"menuitem"),addNestedMenuItem:y(s,"nestedmenuitem"),addToggleMenuItem:y(s,"togglemenuitem"),addAutocompleter:y(a,"autocompleter"),addContextMenu:y(u,"contextmenu"),addContextToolbar:y(m,"contexttoolbar"),addContextForm:y(m,"contextform"),addSidebar:y(h,"sidebar"),addView:y(p,"views"),addIcon:(w,S)=>i[w.toLowerCase()]=S,getAll:()=>({buttons:o,menuItems:s,icons:i,popups:a,contextMenus:u,contextToolbars:m,sidebars:h,views:p})}})();return{addAutocompleter:n.addAutocompleter,addButton:n.addButton,addContextForm:n.addContextForm,addContextMenu:n.addContextMenu,addContextToolbar:n.addContextToolbar,addIcon:n.addIcon,addMenuButton:n.addMenuButton,addMenuItem:n.addMenuItem,addNestedMenuItem:n.addNestedMenuItem,addSidebar:n.addSidebar,addSplitButton:n.addSplitButton,addToggleButton:n.addToggleButton,addGroupToolbarButton:n.addGroupToolbarButton,addToggleMenuItem:n.addToggleMenuItem,addView:n.addView,getAll:n.getAll}},$1=vs.DOM,oA=wt.extend,Xr=wt.each;class ZS{constructor(o,s,a){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=a,this.documentBaseUrl=a.documentBaseURL,oA(this,R_);const i=this;this.id=o,this.hidden=!1;const u=((n,o,s,a,i)=>{var u;const m=n?{mobile:qD(null!==(u=i.mobile)&&void 0!==u?u:{},o)}:{},h=((n,o)=>{const s=((u,m)=>{const h={},p={};return Xs(u,(y,w)=>Be(n,w),Kn(h),Kn(p)),{t:h,f:p}})(o);return i=s.f,{sections:qe(s.t),options:qe(i)};var i})(["mobile"],RE(m,i)),p=wt.extend(s,a,h.options(),n&&HS(h,"mobile")?((y,w,S={})=>{const _=y.sections(),N=Uo(_,w).getOr({});return wt.extend({},S,N)})(h,"mobile"):{},{external_plugins:KD(a,h.options())});return((y,w,S,_)=>{const N=z2(S.forced_plugins),A=z2(_.plugins),$=HS(j=w,"mobile")?j.sections().mobile:{},D=((j,q,ee,Q)=>j&&HS(q,"mobile")?Q:ee)(y,w,A,$.plugins?z2($.plugins):A),L=((j,q)=>[...z2(j),...z2(q)])(N,D);var j;return wt.extend(_,{forced_plugins:N,plugins:L})})(n,h,a,p)})(WO||jD,WO,A=s,a.defaultOptions,A);var A;this.options=((N,A)=>{const $={},D={},L=(q,ee,Q)=>{const de=D_(ee,Q);return tA(de)?(D[q]=de.value,!0):(console.warn(eA(`Invalid value passed for the ${q} option`,de)),!1)},j=q=>rt($,q);return{register:(q,ee)=>{const Q=zt(ee.processor)?(Oe=>{const Re=(()=>{switch(Oe){case"array":return Wn;case"boolean":return Ln;case"function":return mo;case"number":return Vo;case"object":return Mo;case"string":return zt;case"string[]":return nM;case"object[]":return Ne=>re(Ne,Mo);case"regexp":return Ne=>ys(Ne,RegExp);default:return Lt}})();return Ne=>D_(Ne,Re,`The value must be a ${Oe}.`)})(ee.processor):ee.processor,de=((Oe,Re,Ne)=>{if(!en(Re)){const We=D_(Re,Ne);if(tA(We))return We.value;console.error(eA(`Invalid default value passed for the "${Oe}" option`,We))}})(q,ee.default,Q);$[q]={...ee,default:de,processor:Q},Uo(D,q).orThunk(()=>Uo(A,q)).each(Oe=>L(q,Oe,Q))},isRegistered:j,get:q=>Uo(D,q).orThunk(()=>Uo($,q).map(ee=>ee.default)).getOrUndefined(),set:(q,ee)=>{if(j(q)){const Q=$[q];return Q.immutable?(console.error(`"${q}" is an immutable option and cannot be updated`),!1):L(q,ee,Q.processor)}return console.warn(`"${q}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:q=>{const ee=j(q);return ee&&delete D[q],ee},isSet:q=>rt(D,q)}})(0,u),(N=>{const A=N.options.register;A("id",{processor:"string",default:N.id}),A("selector",{processor:"string"}),A("target",{processor:"object"}),A("suffix",{processor:"string"}),A("cache_suffix",{processor:"string"}),A("base_url",{processor:"string"}),A("referrer_policy",{processor:"string",default:""}),A("language_load",{processor:"boolean",default:!0}),A("inline",{processor:"boolean",default:!1}),A("iframe_attrs",{processor:"object",default:{}}),A("doctype",{processor:"string",default:"<!DOCTYPE html>"}),A("document_base_url",{processor:"string",default:N.documentBaseUrl}),A("body_id",{processor:Sw(N,"tinymce"),default:"tinymce"}),A("body_class",{processor:Sw(N),default:""}),A("content_security_policy",{processor:"string",default:""}),A("br_in_pre",{processor:"boolean",default:!0}),A("forced_root_block",{processor:$=>{const D=zt($)&&Kt($);return D?{value:$,valid:D}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),A("forced_root_block_attrs",{processor:"object",default:{}}),A("newline_behavior",{processor:$=>{const D=Be(["block","linebreak","invert","default"],$);return D?{value:$,valid:D}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),A("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),A("no_newline_selector",{processor:"string",default:""}),A("keep_styles",{processor:"boolean",default:!0}),A("end_container_on_empty_block",{processor:$=>Ln($)||zt($)?{valid:!0,value:$}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),A("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),A("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),A("font_size_classes",{processor:"string",default:""}),A("automatic_uploads",{processor:"boolean",default:!0}),A("images_reuse_filename",{processor:"boolean",default:!1}),A("images_replace_blob_uris",{processor:"boolean",default:!0}),A("icons",{processor:"string",default:""}),A("icons_url",{processor:"string",default:""}),A("images_upload_url",{processor:"string",default:""}),A("images_upload_base_path",{processor:"string",default:""}),A("images_upload_credentials",{processor:"boolean",default:!1}),A("images_upload_handler",{processor:"function"}),A("language",{processor:"string",default:"en"}),A("language_url",{processor:"string",default:""}),A("entity_encoding",{processor:"string",default:"named"}),A("indent",{processor:"boolean",default:!0}),A("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),A("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),A("indent_use_margin",{processor:"boolean",default:!1}),A("indentation",{processor:"string",default:"40px"}),A("content_css",{processor:$=>{const D=!1===$||zt($)||re($,zt);return D?zt($)?{value:ln($.split(","),ie),valid:D}:Wn($)?{value:$,valid:D}:!1===$?{value:[],valid:D}:{value:$,valid:D}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Tv(N)?[]:["default"]}),A("content_style",{processor:"string"}),A("content_css_cors",{processor:"boolean",default:!1}),A("font_css",{processor:$=>{const D=zt($)||re($,zt);return D?{value:Wn($)?$:ln($.split(","),ie),valid:D}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),A("inline_boundaries",{processor:"boolean",default:!0}),A("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),A("object_resizing",{processor:$=>{const D=Ln($)||zt($);return D?!1===$||cb.isiPhone()||cb.isiPad()?{value:"",valid:D}:{value:!0===$?"table,img,figure.image,div,video,iframe":$,valid:D}:{valid:!1,message:"Must be boolean or a string"}},default:!un}),A("resize_img_proportional",{processor:"boolean",default:!0}),A("event_root",{processor:"object"}),A("service_message",{processor:"string"}),A("theme",{processor:$=>!1===$||zt($)||mo($),default:"silver"}),A("theme_url",{processor:"string"}),A("formats",{processor:"object"}),A("format_empty_lines",{processor:"boolean",default:!1}),A("format_noneditable_selector",{processor:"string",default:""}),A("preview_styles",{processor:$=>{const D=!1===$||zt($);return D?{value:!1===$?"":$,valid:D}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),A("custom_ui_selector",{processor:"string",default:""}),A("hidden_input",{processor:"boolean",default:!0}),A("submit_patch",{processor:"boolean",default:!0}),A("encoding",{processor:"string"}),A("add_form_submit_trigger",{processor:"boolean",default:!0}),A("add_unload_trigger",{processor:"boolean",default:!0}),A("custom_undo_redo_levels",{processor:"number",default:0}),A("disable_nodechange",{processor:"boolean",default:!1}),A("readonly",{processor:"boolean",default:!1}),A("editable_root",{processor:"boolean",default:!0}),A("plugins",{processor:"string[]",default:[]}),A("external_plugins",{processor:"object"}),A("forced_plugins",{processor:"string[]"}),A("model",{processor:"string",default:N.hasPlugin("rtc")?"plugin":"dom"}),A("model_url",{processor:"string"}),A("block_unsupported_drop",{processor:"boolean",default:!0}),A("visual",{processor:"boolean",default:!0}),A("visual_table_class",{processor:"string",default:"mce-item-table"}),A("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),A("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),A("setup",{processor:"function"}),A("init_instance_callback",{processor:"function"}),A("url_converter",{processor:"function",default:N.convertURL}),A("url_converter_scope",{processor:"object",default:N}),A("urlconverter_callback",{processor:"function"}),A("allow_conditional_comments",{processor:"boolean",default:!1}),A("allow_html_data_urls",{processor:"boolean",default:!1}),A("allow_svg_data_urls",{processor:"boolean"}),A("allow_html_in_named_anchor",{processor:"boolean",default:!1}),A("allow_script_urls",{processor:"boolean",default:!1}),A("allow_unsafe_link_target",{processor:"boolean",default:!1}),A("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),A("fix_list_elements",{processor:"boolean",default:!1}),A("preserve_cdata",{processor:"boolean",default:!1}),A("remove_trailing_brs",{processor:"boolean",default:!0}),A("pad_empty_with_br",{processor:"boolean",default:!1}),A("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),A("element_format",{processor:"string",default:"html"}),A("entities",{processor:"string"}),A("schema",{processor:"string",default:"html5"}),A("convert_urls",{processor:"boolean",default:!0}),A("relative_urls",{processor:"boolean",default:!0}),A("remove_script_host",{processor:"boolean",default:!0}),A("custom_elements",{processor:"string"}),A("extended_valid_elements",{processor:"string"}),A("invalid_elements",{processor:"string"}),A("invalid_styles",{processor:ib}),A("valid_children",{processor:"string"}),A("valid_classes",{processor:ib}),A("valid_elements",{processor:"string"}),A("valid_styles",{processor:ib}),A("verify_html",{processor:"boolean",default:!0}),A("auto_focus",{processor:$=>zt($)||!0===$}),A("browser_spellcheck",{processor:"boolean",default:!1}),A("protect",{processor:"array"}),A("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),A("deprecation_warnings",{processor:"boolean",default:!0}),A("a11y_advanced_options",{processor:"boolean",default:!1}),A("api_key",{processor:"string"}),A("paste_block_drop",{processor:"boolean",default:!1}),A("paste_data_images",{processor:"boolean",default:!0}),A("paste_preprocess",{processor:"function"}),A("paste_postprocess",{processor:"function"}),A("paste_webkit_styles",{processor:"string",default:"none"}),A("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),A("paste_merge_formats",{processor:"boolean",default:!0}),A("smart_paste",{processor:"boolean",default:!0}),A("paste_as_text",{processor:"boolean",default:!1}),A("paste_tab_spaces",{processor:"number",default:4}),A("text_patterns",{processor:$=>re($,Mo)||!1===$?{value:Cp(!1===$?[]:$),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),A("text_patterns_lookup",{processor:$=>{return mo($)?{value:(D=$,L=>{const j=D(L);return Cp(j)}),valid:!0}:{valid:!1,message:"Must be a single function"};var D},default:$=>[]}),A("noneditable_class",{processor:"string",default:"mceNonEditable"}),A("editable_class",{processor:"string",default:"mceEditable"}),A("noneditable_regexp",{processor:$=>re($,xw)?{value:$,valid:!0}:xw($)?{value:[$],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),A("table_tab_navigation",{processor:"boolean",default:!0}),A("highlight_on_focus",{processor:"boolean",default:!1}),A("xss_sanitization",{processor:"boolean",default:!0}),A("details_initial_state",{processor:$=>{const D=Be(["inherited","collapsed","expanded"],$);return D?{value:$,valid:D}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),A("details_serialized_state",{processor:$=>{const D=Be(["inherited","collapsed","expanded"],$);return D?{value:$,valid:D}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),A("init_content_sync",{processor:"boolean",default:!1}),A("newdocument_content",{processor:"string",default:""}),N.on("ScriptsLoaded",()=>{A("directionality",{processor:"string",default:_a.isRtl()?"rtl":void 0}),A("placeholder",{processor:"string",default:vv.getAttrib(N.getElement(),"placeholder")})})})(i);const m=this.options.get;m("deprecation_warnings")&&((N,A)=>{(($,D)=>{const L=(n=>{const o=E4(n,bR),s=n.forced_root_block;return!1!==s&&""!==s||o.push("forced_root_block (false only)"),Hs(o)})($),j=(n=>Ek(n,yR))(D),q=j.length>0,ee=L.length>0,Q="mobile"===D.theme;if(q||ee||Q){const de="\n- ",Oe=Q?`\n\nThemes:${de}mobile`:"",Re=q?`\n\nPlugins:${de}${j.join(de)}`:"",Ne=ee?`\n\nOptions:${de}${L.join(de)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+Oe+Re+Ne)}})(N,A),(($,D)=>{const L=(n=>E4(n,vR))($),j=(n=>Ek(n,k4.map(o=>o.name)))(D),q=j.length>0,ee=L.length>0;if(q||ee){const Q="\n- ",de=q?`\n\nPlugins:${Q}${j.map(_k).join(Q)}`:"",Oe=ee?`\n\nOptions:${Q}${L.join(Q)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+de+Oe)}})(N,A)})(s,u);const h=m("suffix");h&&(a.suffix=h),this.suffix=a.suffix;const p=m("base_url");p&&a._setBaseUrl(p),this.baseUri=a.baseURI;const y=mb(i);y&&(kl.ScriptLoader._setReferrerPolicy(y),vs.DOM.styleSheetLoader._setReferrerPolicy(y));const w=bb(i);Le(w)&&vs.DOM.styleSheetLoader._setContentCssCors(w),za.languageLoad=m("language_load"),za.baseURL=a.baseURL,this.setDirty(!1),this.documentBaseURI=new dl(ch(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Tv(i),this.hasVisual=vb(i),this.shortcuts=new Cs(this),this.editorCommands=new __(this),(n=>{var o;(n=>{(o=>{const s=a=>()=>{Je("left,center,right,justify".split(","),i=>{a!==i&&o.formatter.remove("align"+i)}),"none"!==a&&(o.formatter.toggle("align"+a,void 0),o.nodeChanged())};o.editorCommands.addCommands({JustifyLeft:s("left"),JustifyCenter:s("center"),JustifyRight:s("right"),JustifyFull:s("justify"),JustifyNone:s("none")})})(n),(o=>{const s=a=>()=>{const i=o.selection,u=i.isCollapsed()?[o.dom.getParent(i.getNode(),o.dom.isBlock)]:i.getSelectedBlocks();return lt(u,m=>Le(o.formatter.matchNode(m,a)))};o.editorCommands.addCommands({JustifyLeft:s("alignleft"),JustifyCenter:s("aligncenter"),JustifyRight:s("alignright"),JustifyFull:s("alignjustify")},"state")})(n)})(n),(o=n).editorCommands.addCommands({"Cut,Copy,Paste":s=>{const a=o.getDoc();let i;try{a.execCommand(s)}catch{i=!0}if("paste"!==s||a.queryCommandEnabled(s)||(i=!0),i||!a.queryCommandSupported(s)){let u=o.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(wo.os.isMacOS()||wo.os.isiOS())&&(u=u.replace(/Ctrl\+/g,"\u2318+")),o.notificationManager.open({text:u,type:"error"})}}}),(o=>{o.editorCommands.addCommands({mceAddUndoLevel:()=>{o.undoManager.add()},mceEndUndoLevel:()=>{o.undoManager.add()},Undo:()=>{o.undoManager.undo()},Redo:()=>{o.undoManager.redo()}})})(n),(o=>{o.editorCommands.addCommands({mceSelectNodeDepth:(s,a,i)=>{let u=0;o.dom.getParent(o.selection.getNode(),m=>!Qt(m)||u++!==i||(o.selection.select(m),!1),o.getBody())},mceSelectNode:(s,a,i)=>{o.selection.select(i)},selectAll:()=>{const s=o.dom.getParent(o.selection.getStart(),H);if(s){const a=o.dom.createRng();a.selectNodeContents(s),o.selection.setRng(a)}}})})(n),(o=>{o.editorCommands.addCommands({mceCleanup:()=>{const s=o.selection.getBookmark();o.setContent(o.getContent()),o.selection.moveToBookmark(s)},insertImage:(s,a,i)=>{zS(o,o.dom.createHTML("img",{src:i}))},insertHorizontalRule:()=>{o.execCommand("mceInsertContent",!1,"<hr>")},insertText:(s,a,i)=>{zS(o,o.dom.encode(i))},insertHTML:(s,a,i)=>{zS(o,i)},mceInsertContent:(s,a,i)=>{zS(o,i)},mceSetContent:(s,a,i)=>{o.setContent(i)},mceReplaceContent:(s,a,i)=>{o.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceNewDocument:()=>{o.setContent(Pw(o))}})})(n),(o=>{const s=(a,i,u)=>{const m=zt(u)?{href:u}:u,h=o.dom.getParent(o.selection.getNode(),"a");Mo(m)&&zt(m.href)&&(m.href=m.href.replace(/ /g,"%20"),h&&m.href||o.formatter.remove("link"),m.href&&o.formatter.apply("link",m,h))};o.editorCommands.addCommands({unlink:()=>{if(o.selection.isEditable()){if(o.selection.isCollapsed()){const a=o.dom.getParent(o.selection.getStart(),"a");return void(a&&o.dom.remove(a,!0))}o.formatter.remove("link")}},mceInsertLink:s,createLink:s})})(n),(o=>{o.editorCommands.addCommands({Indent:()=>{uE(o,"indent")},Outdent:()=>{u3(o)}}),o.editorCommands.addCommands({Outdent:()=>Jx(o)},"state")})(n),(o=>{o.editorCommands.addCommands({InsertNewBlockBefore:()=>{KO(o,!0)},InsertNewBlockAfter:()=>{KO(o,!1)}})})(n),(o=>{o.editorCommands.addCommands({insertParagraph:()=>{F2(pD,o)},mceInsertNewLine:(s,a,i)=>{Y3(o,i)},InsertLineBreak:(s,a,i)=>{F2(_1,o)}})})(n),(o=>{var s;(s=o).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":a=>{s.getDoc().execCommand(a);const i=s.dom.getParent(s.selection.getNode(),"ol,ul");if(i){const u=i.parentNode;if(u&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(u.nodeName)){const m=s.selection.getBookmark();s.dom.split(u,i),s.selection.moveToBookmark(m)}}}}),(s=>{s.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":a=>{const i=s.dom.getParent(s.selection.getNode(),"ul,ol");return i&&("insertunorderedlist"===a&&"UL"===i.tagName||"insertorderedlist"===a&&"OL"===i.tagName)}},"state")})(o)})(n),(o=>{(s=>{const a=(i,u)=>{s.formatter.toggle(i,u),s.nodeChanged()};s.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>{a(i)},"ForeColor,HiliteColor":(i,u,m)=>{a(i,{value:m})},BackColor:(i,u,m)=>{a("hilitecolor",{value:m})},FontName:(i,u,m)=>{((h,p)=>{const y=E_(h,p);h.formatter.toggle("fontname",{value:qO(y)}),h.nodeChanged()})(s,m)},FontSize:(i,u,m)=>{var h;(h=s).formatter.toggle("fontsize",{value:E_(h,m)}),h.nodeChanged()},LineHeight:(i,u,m)=>{var h;(h=s).formatter.toggle("lineheight",{value:String(m)}),h.nodeChanged()},Lang:(i,u,m)=>{var h;a(i,{value:m.code,customValue:null!==(h=m.customCode)&&void 0!==h?h:null})},RemoveFormat:i=>{s.formatter.remove(i)},mceBlockQuote:()=>{a("blockquote")},FormatBlock:(i,u,m)=>{a(zt(m)?m:"p")},mceToggleFormat:(i,u,m)=>{a(m)}})})(o),(s=>{const a=i=>s.formatter.match(i);s.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>a(i),mceBlockQuote:()=>a("blockquote")},"state"),s.editorCommands.addQueryValueHandler("FontName",()=>{return k_(i=s,u=>e5(i.getBody(),u.dom)).getOr("");var i}),s.editorCommands.addQueryValueHandler("FontSize",()=>{return k_(i=s,u=>JD(i.getBody(),u.dom)).getOr("");var i}),s.editorCommands.addQueryValueHandler("LineHeight",()=>{return k_(i=s,u=>{const m=F(i.getBody());return Zd(u,p=>tl(p,"line-height"),De(cn,m)).getOrThunk(()=>{const p=parseFloat(Ei(u,"line-height")),y=parseFloat(Ei(u,"font-size"));return String(p/y)})}).getOr("");var i})})(o)})(n),(o=>{o.editorCommands.addCommands({mceRemoveNode:(s,a,i)=>{const u=i??o.selection.getNode();if(u!==o.getBody()){const m=o.selection.getBookmark();o.dom.remove(u,!0),o.selection.moveToBookmark(m)}},mcePrint:()=>{o.getWin().print()},mceFocus:(s,a,i)=>{var u;(u=o).removed||(!0===i?Xp(u):(h=>{const p=h.selection,y=h.getBody();let w=p.getRng();h.quirks.refreshContentEditable(),Le(h.bookmark)&&!Ch(h)&&vh(h).each(_=>{h.selection.setRng(_),w=_});const S=(_=h,N=p.getNode(),_.dom.getParent(N,A=>"true"===_.dom.getContentEditable(A)));var _,N;if(S&&h.dom.isChildOf(S,y))return Om(S),by(h,w),void Xp(h);h.inline||(wo.browser.isOpera()||Om(y),h.getWin().focus()),(wo.browser.isFirefox()||h.inline)&&(Om(y),by(h,w)),Xp(h)})(u))},mceToggleVisualAid:()=>{o.hasVisual=!o.hasVisual,o.addVisual()}})})(n)})(this);const S=m("cache_suffix");S&&(wo.cacheSuffix=S.replace(/^[\?\&]+/,"")),this.ui={registry:n5(),styleSheetLoader:void 0,show:gt,hide:gt,setEnabled:gt,isEnabled:Lt},this.mode=(N=>{const A=aa("design"),$=aa({design:{activate:gt,deactivate:gt,editorReadOnly:!1},readonly:{activate:gt,deactivate:gt,editorReadOnly:!0}});return(D=N).serializer?YO(D):D.on("PreInit",()=>{YO(D)}),(D=>{D.on("ShowCaret",L=>{P1(D)&&L.preventDefault()}),D.on("ObjectSelected",L=>{P1(D)&&L.preventDefault()})})(N),{isReadOnly:()=>P1(N),set:D=>((L,j,q,ee)=>{if(ee!==q.get()){if(!rt(j,ee))throw new Error(`Editor mode '${ee}' is invalid`);L.initialized?Gd(L,q,j,ee):L.on("init",()=>Gd(L,q,j,ee))}})(N,$.get(),A,D),get:()=>A.get(),register:(D,L)=>{$.set(((j,q,ee)=>{if(Be(t5,q))throw new Error(`Cannot override default mode ${q}`);return{...j,[q]:{...ee,deactivate:()=>{try{ee.deactivate()}catch(Q){console.error(`problem while deactivating editor mode ${q}:`,Q)}}}}})($.get(),D,L))}};var D})(i),a.dispatch("SetupEditor",{editor:this});const _=ym(i);mo(_)&&_.call(i,i)}render(){(o=>{const s=o.id;_a.setCode(xp(o));const a=()=>{N1.unbind(window,"ready",a),o.render()};if(!Ct.Event.domLoaded)return void N1.bind(window,"ready",a);if(!o.getElement())return;const i=F(o.getElement()),u=z(i);var p;o.on("remove",()=>{so(i.dom.attributes,h=>Bo(i,h.name)),Lc(i,u)}),o.ui.styleSheetLoader=Jg.forElement(i,{contentCssCors:bb(p=o),referrerPolicy:mb(p)}),Tv(o)?o.inline=!0:(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden");const m=o.getElement().form||N1.getParent(s,"form");m&&(o.formElement=m,va(o)&&!om(o.getElement())&&(N1.insertAfter(N1.create("input",{type:"hidden",name:s}),s),o.hasHiddenInput=!0),o.formEventDelegate=h=>{o.dispatch(h.type,h)},N1.bind(m,"submit reset",o.formEventDelegate),o.on("reset",()=>{o.resetContent()}),!ST(o)||m.submit.nodeType||m.submit.length||m._mceOldSubmit||(m._mceOldSubmit=m.submit,m.submit=()=>(o.editorManager.triggerSave(),o.setDirty(!1),m._mceOldSubmit(m)))),o.windowManager=SR(o),o.notificationManager=R4(o),"xml"===o.options.get("encoding")&&o.on("GetContent",h=>{h.save&&(h.content=N1.encode(h.content))}),Hr(o)&&o.on("submit",()=>{o.initialized&&o.save()}),Ui(o)&&(o._beforeUnload=()=>{!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0,set_dirty:!1})},o.editorManager.on("BeforeUnload",o._beforeUnload)),o.editorManager.add(o),((n,o)=>{const s=kl.ScriptLoader,a=()=>{!n.removed&&(i=>{const u=ih(i);return!zt(u)||Le(Rf.get(u))})(n)&&(i=>{const u=fb(i);return Le(O0.get(u))})(n)&&S_(n)};((i,u)=>{const m=ih(i);if(zt(m)&&!zO(m)&&!rt(Rf.urls,m)){const h=Aw(i),p=h?i.documentBaseURI.toAbsolute(h):`themes/${m}/theme${u}.js`;Rf.load(m,p).catch(()=>{Dx(i,"ThemeLoadError",Mx("theme",p,m))})}})(n,o),((i,u)=>{const m=fb(i);if("plugin"!==m&&!rt(O0.urls,m)){const h=Q_(i),p=zt(h)?i.documentBaseURI.toAbsolute(h):`models/${m}/model${u}.js`;O0.load(m,p).catch(()=>{Dx(i,"ModelLoadError",Mx("model",p,m))})}})(n,o),((i,u)=>{const m=xp(u),h=vT(u);if(!_a.hasCode(m)&&"en"!==m){const p=Kt(h)?h:`${u.editorManager.baseURL}/langs/${m}.js`;i.add(p).catch(()=>{Dx(u,"LanguageLoadError",Mx("language",p,m))})}})(s,n),((i,u,m)=>{const h=UO(u,"default",m),p=(y=u,U.from(pT(y)).filter(Kt).map(w=>({url:w,name:U.none()}))).orThunk(()=>UO(u,wv(u),""));var y;Je((y=>{const w=[],S=_=>{w.push(_)};for(let _=0;_<y.length;_++)y[_].each(S);return w})([h,p]),y=>{i.add(y.url).catch(()=>{var w,S,_;w=u,S=y.url,_=y.name.getOrUndefined(),Dx(w,"IconsLoadError",Mx("icons",S,_))})})})(s,n,o),((i,u)=>{const m=(h,p)=>{Jn.load(h,p).catch(()=>{Dx(i,"PluginLoadError",Mx("plugin",p,h))})};Ke(ya(i),(h,p)=>{m(p,h),i.options.set("plugins",Al(i).concat(p))}),Je(Al(i),h=>{!(h=wt.trim(h))||Jn.urls[h]||zO(h)||m(h,`plugins/${h}/plugin${u}.js`)})})(n,o),s.loadQueue().then(a,a)})(o,o.suffix)})(this)}focus(o){this.execCommand("mceFocus",!1,o)}hasFocus(){return Ch(this)}translate(o){return _a.translate(o)}getParam(o,s,a){const i=this.options;return i.isRegistered(o)||(Le(a)?i.register(o,{processor:a,default:s}):i.register(o,{processor:Lt,default:s})),i.isSet(o)||en(s)?i.get(o):s}hasPlugin(o,s){return!(!Be(Al(this),o)||s&&void 0===Jn.get(o))}nodeChanged(o){this._nodeChangeDispatcher.nodeChanged(o)}addCommand(o,s,a){this.editorCommands.addCommand(o,s,a)}addQueryStateHandler(o,s,a){this.editorCommands.addQueryStateHandler(o,s,a)}addQueryValueHandler(o,s,a){this.editorCommands.addQueryValueHandler(o,s,a)}addShortcut(o,s,a,i){this.shortcuts.add(o,s,a,i)}execCommand(o,s,a,i){return this.editorCommands.execCommand(o,s,a,i)}queryCommandState(o){return this.editorCommands.queryCommandState(o)}queryCommandValue(o){return this.editorCommands.queryCommandValue(o)}queryCommandSupported(o){return this.editorCommands.queryCommandSupported(o)}show(){const o=this;o.hidden&&(o.hidden=!1,o.inline?o.getBody().contentEditable="true":($1.show(o.getContainer()),$1.hide(o.id)),o.load(),o.dispatch("show"))}hide(){const o=this;o.hidden||(o.save(),o.inline?(o.getBody().contentEditable="false",o===o.editorManager.focusedEditor&&(o.editorManager.focusedEditor=null)):($1.hide(o.getContainer()),$1.setStyle(o.id,"display",o.orgDisplay)),o.hidden=!0,o.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(o,s){this.dispatch("ProgressState",{state:o,time:s})}load(o={}){const s=this,a=s.getElement();if(s.removed)return"";if(a){const i={...o,load:!0},u=om(a)?a.value:a.innerHTML,m=s.setContent(u,i);return i.no_events||s.dispatch("LoadContent",{...i,element:a}),m}return""}save(o={}){const s=this;let a=s.getElement();if(!a||!s.initialized||s.removed)return"";const i={...o,save:!0,element:a};let u=s.getContent(i);const m={...i,content:u};if(m.no_events||s.dispatch("SaveContent",m),"raw"===m.format&&s.dispatch("RawSaveContent",m),u=m.content,om(a))a.value=u;else{!o.is_removing&&s.inline||(a.innerHTML=u);const h=$1.getParent(s.id,"form");h&&Xr(h.elements,p=>p.name!==s.id||(p.value=u,!1))}return m.element=i.element=a=null,!1!==m.set_dirty&&s.setDirty(!1),u}setContent(o,s){return kk(this,o,s)}getContent(o){return((s,a={})=>{const i=(u=a,m=a.format?a.format:"html",{...u,format:m,get:!0,getInner:!0});var u,m;return u4(s,i).fold(Se,u=>{const m=(p=u,Tk(s).editor.getContent(p));var p;return i2(s,m,u)})})(this,o)}insertContent(o,s){s&&(o=oA({content:o},s)),this.execCommand("mceInsertContent",!1,o)}resetContent(o){void 0===o?kk(this,this.startContent,{format:"raw"}):kk(this,o),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(o){const s=!this.isNotDirty;this.isNotDirty=!o,o&&o!==s&&this.dispatch("dirty")}getContainer(){const o=this;return o.container||(o.container=o.editorContainer||$1.get(o.id+"_parent")),o.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=$1.get(this.id)),this.targetElm}getWin(){const o=this;if(!o.contentWindow){const s=o.iframeElement;s&&(o.contentWindow=s.contentWindow)}return o.contentWindow}getDoc(){const o=this;if(!o.contentDocument){const s=o.getWin();s&&(o.contentDocument=s.document)}return o.contentDocument}getBody(){var o,s;const a=this.getDoc();return null!==(s=null!==(o=this.bodyElement)&&void 0!==o?o:a?.body)&&void 0!==s?s:null}convertURL(o,s,a){const i=this,u=i.options.get,m=Nw(i);return mo(m)?m.call(i,o,a,!0,s):!u("convert_urls")||"link"===a||Mo(a)&&"LINK"===a.nodeName||0===o.indexOf("file:")||0===o.length?o:u("relative_urls")?i.documentBaseURI.toRelative(o):o=i.documentBaseURI.toAbsolute(o,u("remove_script_host"))}addVisual(o){((s,a)=>{var u;u=a,Ga(this).editor.addVisual(u)})(0,o)}setEditableRoot(o){var s,a;(s=this)._editableRoot!==(a=o)&&(s._editableRoot=a,s.readonly||(s.getBody().contentEditable=String(s.hasEditableRoot()),s.nodeChanged()),s.dispatch("EditableRootStateChange",{state:a}))}hasEditableRoot(){return this._editableRoot}remove(){(o=>{if(!o.removed){const{_selectionOverrides:s,editorUpload:a}=o,i=o.getBody(),u=o.getElement();i&&o.save({is_removing:!0}),o.removed=!0,o.unbindAllNativeEvents(),o.hasHiddenInput&&Le(u?.nextSibling)&&_x.remove(u.nextSibling),o.dispatch("remove"),o.editorManager.remove(o),!o.inline&&i&&_x.setStyle((m=o).id,"display",m.orgDisplay),(m=>{m.dispatch("detach")})(o),_x.remove(o.getContainer()),Ox(s),Ox(a),o.destroy()}var m})(this)}destroy(o){((s,a)=>{const{selection:i,dom:u}=s;s.destroyed||(a||s.removed?(a||(s.editorManager.off("beforeunload",s._beforeUnload),s.theme&&s.theme.destroy&&s.theme.destroy(),Ox(i),Ox(u)),(m=>{const h=m.formElement;h&&(h._mceOldSubmit&&(h.submit=h._mceOldSubmit,delete h._mceOldSubmit),_x.unbind(h,"submit reset",m.formEventDelegate))})(s),(m=>{const h=m;h.contentAreaContainer=h.formElement=h.container=h.editorContainer=null,h.bodyElement=h.contentDocument=h.contentWindow=null,h.iframeElement=h.targetElm=null;const p=m.selection;p&&(h.selection=p.win=p.dom=p.dom.doc=null)})(s),s.destroyed=!0):s.remove())})(this,o)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ng=vs.DOM,WS=wt.each;let jS,sA=!1,gl=[];const Um=n=>{const o=n.type;WS(hl.get(),s=>{switch(o){case"scroll":s.dispatch("ScrollWindow",n);break;case"resize":s.dispatch("ResizeWindow",n)}})},Ll=n=>{if(n!==sA){const o=vs.DOM;n?(o.bind(window,"resize",Um),o.bind(window,"scroll",Um)):(o.unbind(window,"resize",Um),o.unbind(window,"scroll",Um)),sA=n}},Q0=n=>{const o=gl;return gl=Ht(gl,s=>n!==s),hl.activeEditor===n&&(hl.activeEditor=gl.length>0?gl[0]:null),hl.focusedEditor===n&&(hl.focusedEditor=null),o.length!==gl.length},Wf="CSS1Compat"!==document.compatMode,hl={...F1,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.0",releaseDate:"2023-08-30",i18n:_a,activeEditor:null,focusedEditor:null,setup(){const n=this;let o="",s="",a=dl.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)o=i.base||i.baseURL,s=i.suffix;else{const m=document.getElementsByTagName("script");for(let h=0;h<m.length;h++){const p=m[h].src||"";if(""===p)continue;const y=p.substring(p.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(p)){-1!==y.indexOf(".min")&&(s=".min"),o=p.substring(0,p.lastIndexOf("/"));break}}if(!o&&document.currentScript){const h=document.currentScript.src;-1!==h.indexOf(".min")&&(s=".min"),o=h.substring(0,h.lastIndexOf("/"))}}var u;n.baseURL=new dl(a).toAbsolute(o),n.documentBaseURL=a,n.baseURI=new dl(n.baseURL),n.suffix=s,(u=n).on("AddEditor",De(rR,u)),u.on("RemoveEditor",De(SC,u))},overrideDefaults(n){const o=n.base_url;o&&this._setBaseUrl(o);const s=n.suffix;s&&(this.suffix=s),this.defaultOptions=n;const a=n.plugin_base_urls;void 0!==a&&Ke(a,(i,u)=>{za.PluginManager.urls[u]=i})},init(n){const o=this;let s;const a=wt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let i=m=>{s=m};const u=()=>{let m=0;const h=[];let p;var y;Ng.unbind(window,"ready",u),(y=>{const w=n.onpageload;w&&w.apply(o,[])})(),p=((y,w)=>{const S=[],_=mo(w)?N=>lt(S,A=>w(A,N)):N=>Be(S,N);for(let N=0,A=y.length;N<A;N++){const $=y[N];_($)||S.push($)}return S})((y=n,wo.browser.isIE()||wo.browser.isEdge()?(Nx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Wf?(Nx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):zt(y.selector)?Ng.select(y.selector):Le(y.target)?[y.target]:[])),wt.each(p,y=>{var w;(w=o.get(y.id))&&w.initialized&&!(w.getContainer()||w.getBody()).parentNode&&(Q0(w),w.unbindAllNativeEvents(),w.destroy(!0),w.removed=!0)}),p=wt.grep(p,y=>!o.get(y.id)),0===p.length?i([]):WS(p,y=>{n.inline&&y.tagName.toLowerCase()in a?Nx("Could not initialize inline editor on invalid inline target element",y):((w,S,_)=>{const N=new ZS(w,S,o);h.push(N),N.on("init",()=>{++m===p.length&&i(h)}),N.targetElm=N.targetElm||_,N.render()})((w=>{let S=w.id;return S||(S=Uo(w,"name").filter(_=>!Ng.get(_)).getOrThunk(Ng.uniqueId),w.setAttribute("id",S)),S})(y),n,y)})};return Ng.bind(window,"ready",u),new Promise(m=>{s?m(s):i=h=>{m(h)}})},get(n){return 0===arguments.length?gl.slice(0):zt(n)?En(gl,o=>o.id===n).getOr(null):Vo(n)&&gl[n]?gl[n]:null},add(n){const o=this,s=o.get(n.id);return s===n||(null===s&&gl.push(n),Ll(!0),o.activeEditor=n,o.dispatch("AddEditor",{editor:n}),jS||(jS=a=>{const i=o.dispatch("BeforeUnload");if(i.returnValue)return a.preventDefault(),a.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",jS))),n},createEditor(n,o){return this.add(new ZS(n,o,this))},remove(n){const o=this;let s;if(n){if(!zt(n))return s=n,_t(o.get(s.id))?null:(Q0(s)&&o.dispatch("RemoveEditor",{editor:s}),0===gl.length&&window.removeEventListener("beforeunload",jS),s.remove(),Ll(gl.length>0),s);WS(Ng.select(n),a=>{s=o.get(a.id),s&&o.remove(s)})}else for(let a=gl.length-1;a>=0;a--)o.remove(gl[a])},execCommand(n,o,s){var a;const i=this,u=Mo(s)?null!==(a=s.id)&&void 0!==a?a:s.index:s;switch(n){case"mceAddEditor":return i.get(u)||new ZS(u,s.options,i).render(),!0;case"mceRemoveEditor":{const m=i.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=i.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(i.execCommand("mceAddEditor",!1,s),!0)}}return!!i.activeEditor&&i.activeEditor.execCommand(n,o,s)},triggerSave:()=>{WS(gl,n=>{n.save()})},addI18n:(n,o)=>{_a.add(n,o)},translate:n=>_a.translate(n),setActive(n){const o=this.activeEditor;this.activeEditor!==n&&(o&&o.dispatch("deactivate",{relatedTarget:n}),n.dispatch("activate",{relatedTarget:o})),this.activeEditor=n},_setBaseUrl(n){this.baseURL=new dl(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,"")),this.baseURI=new dl(this.baseURL)}};hl.setup();const G2=(()=>{const n=Po();return{FakeClipboardItem:o=>({items:o,types:Vs(o),getType:s=>Uo(o,s).getOrUndefined()}),write:o=>{n.set(o)},read:()=>n.get().getOrUndefined(),clear:n.clear}})(),GS=Math.min,jf=Math.max,q2=Math.round,N_=(n,o,s)=>{let a=o.x,i=o.y;const u=n.w,m=n.h,h=o.w,p=o.h,y=(s||"").split("");return"b"===y[0]&&(i+=p),"r"===y[1]&&(a+=h),"c"===y[0]&&(i+=q2(p/2)),"c"===y[1]&&(a+=q2(h/2)),"b"===y[3]&&(i-=m),"r"===y[4]&&(a-=u),"c"===y[3]&&(i-=q2(m/2)),"c"===y[4]&&(a-=q2(u/2)),ev(a,i,u,m)},ev=(n,o,s,a)=>({x:n,y:o,w:s,h:a}),rM={inflate:(n,o,s)=>ev(n.x-o,n.y-s,n.w+2*o,n.h+2*s),relativePosition:N_,findBestRelativePosition:(n,o,s,a)=>{for(let i=0;i<a.length;i++){const u=N_(n,o,a[i]);if(u.x>=s.x&&u.x+u.w<=s.w+s.x&&u.y>=s.y&&u.y+u.h<=s.h+s.y)return a[i]}return null},intersect:(n,o)=>{const s=jf(n.x,o.x),a=jf(n.y,o.y),i=GS(n.x+n.w,o.x+o.w),u=GS(n.y+n.h,o.y+o.h);return i-s<0||u-a<0?null:ev(s,a,i-s,u-a)},clamp:(n,o,s)=>{let a=n.x,i=n.y,u=n.x+n.w,m=n.y+n.h;const h=o.x+o.w,p=o.y+o.h,y=jf(0,o.x-a),w=jf(0,o.y-i),S=jf(0,u-h),_=jf(0,m-p);return a+=y,i+=w,s&&(u+=y,m+=w,a-=S,i-=_),u-=S,m-=_,ev(a,i,u-a,m-i)},create:ev,fromClientRect:n=>ev(n.left,n.top,n.width,n.height)},rA=(()=>{const n={},o={};return{load:(s,a)=>{const i=`Script at URL "${a}" failed to load`,u=`Script at URL "${a}" did not call \`tinymce.Resource.add('${s}', data)\` within 1 second`;if(void 0!==n[s])return n[s];{const m=new Promise((h,p)=>{const y=((w,S,_=1e3)=>{let N=!1,A=null;const $=j=>(...q)=>{N||(N=!0,null!==A&&(clearTimeout(A),A=null),j.apply(null,q))},D=$(w),L=$(S);return{start:(...j)=>{N||null!==A||(A=setTimeout(()=>L.apply(null,j),_))},resolve:D,reject:L}})(h,p);o[s]=y.resolve,kl.ScriptLoader.loadScript(a).then(()=>y.start(u),()=>y.reject(i))});return n[s]=m,m}},add:(s,a)=>{void 0!==o[s]&&(o[s](a),delete o[s]),n[s]=Promise.resolve(a)},unload:s=>{delete n[s]}}})();let tv;try{const n="__storage_test__";tv=window.localStorage,tv.setItem(n,n),tv.removeItem(n)}catch{tv=(()=>{let o={},s=[];const a={getItem:i=>o[i]||null,setItem:(i,u)=>{s.push(i),o[i]=String(u)},key:i=>s[i],removeItem:i=>{s=s.filter(u=>u===i),delete o[i]},clear:()=>{s=[],o={}},length:0};return Object.defineProperty(a,"length",{get:()=>s.length,configurable:!1,enumerable:!1}),a})()}const aA={geom:{Rect:rM},util:{Delay:su,Tools:wt,VK:qt,URI:dl,EventDispatcher:A_,Observable:F1,I18n:_a,LocalStorage:tv,ImageUploader:n=>{const o=M4(),s=Ok(n,o);return{upload:(a,i=!0)=>s.upload(a,i?A0(n):void 0)}}},dom:{EventUtils:Ct,TreeWalker:ir,TextSeeker:El,DOMUtils:vs,ScriptLoader:kl,RangeUtils:$d,Serializer:T4,StyleSheetLoader:pc,ControlSelection:ed,BookmarkManager:zp,Selection:S4,Event:Ct.Event},html:{Styles:Fi,Entities:Bi,Node:vi,Schema:ju,DomParser:_0,Writer:RC,Serializer:td},Env:wo,AddOnManager:za,Annotator:aC,Formatter:Dk,UndoManager:So,EditorCommands:__,WindowManager:SR,NotificationManager:R4,EditorObservable:R_,Shortcuts:Cs,Editor:ZS,FocusManager:py,EditorManager:hl,DOM:vs.DOM,ScriptLoader:kl.ScriptLoader,PluginManager:Jn,ThemeManager:Rf,ModelManager:O0,IconManager:Ax,Resource:rA,FakeClipboard:G2,trim:wt.trim,isArray:wt.isArray,is:wt.is,toArray:wt.toArray,makeMap:wt.makeMap,each:wt.each,map:wt.map,grep:wt.grep,inArray:wt.inArray,extend:wt.extend,walk:wt.walk,resolve:wt.resolve,explode:wt.explode,_addCacheSuffix:wt._addCacheSuffix},B_=wt.extend(hl,aA);(n=>{window.tinymce=n,window.tinyMCE=n})(B_),(n=>{if("object"==typeof module)try{module.exports=n}catch{}})(B_)})(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.ModelManager");const Ks=l=>g=>(l=>{const g=typeof l;return null===l?"null":"object"===g&&Array.isArray(l)?"array":"object"===g&&((l,g,b)=>{var C;return!!((b,C)=>C.isPrototypeOf(b))(l,g.prototype)||(null===(C=l.constructor)||void 0===C?void 0:C.name)===g.name})(l,String)?"string":g})(g)===l,Os=l=>g=>typeof g===l,vr=l=>g=>l===g,As=Ks("string"),bn=Ks("object"),qn=Ks("array"),qo=vr(null),Oo=Os("boolean"),ys=vr(void 0),Mo=l=>!(l=>null==l)(l),Ro=Os("function"),Wn=Os("number"),_t=()=>{},ve=l=>()=>l,Le=l=>l,mo=(l,g)=>l===g;function Vo(l,...g){return(...b)=>{const C=g.concat(b);return l.apply(null,C)}}const re=l=>g=>!l(g),gt=l=>()=>{throw new Error(l)},Is=l=>l(),ko=ve(!1),qe=ve(!0);class Se{constructor(g,b){this.tag=g,this.value=b}static some(g){return new Se(!0,g)}static none(){return Se.singletonNone}fold(g,b){return this.tag?b(this.value):g()}isSome(){return this.tag}isNone(){return!this.tag}map(g){return this.tag?Se.some(g(this.value)):Se.none()}bind(g){return this.tag?g(this.value):Se.none()}exists(g){return this.tag&&g(this.value)}forall(g){return!this.tag||g(this.value)}filter(g){return!this.tag||g(this.value)?this:Se.none()}getOr(g){return this.tag?this.value:g}or(g){return this.tag?this:g}getOrThunk(g){return this.tag?this.value:g()}orThunk(g){return this.tag?this:g()}getOrDie(g){if(this.tag)return this.value;throw new Error(g??"Called getOrDie on None")}static from(g){return Mo(g)?Se.some(g):Se.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(g){this.tag&&g(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Se.singletonNone=new Se(!1);const dr=Array.prototype.slice,De=Array.prototype.indexOf,Ot=Array.prototype.push,An=(l,g)=>((l,g)=>De.call(l,g))(l,g)>-1,oo=(l,g)=>{for(let b=0,C=l.length;b<C;b++)if(g(l[b],b))return!0;return!1},yn=(l,g)=>{const b=[];for(let C=0;C<l;C++)b.push(g(C));return b},Lt=(l,g)=>{const b=l.length,C=new Array(b);for(let E=0;E<b;E++)C[E]=g(l[E],E);return C},U=(l,g)=>{for(let b=0,C=l.length;b<C;b++)g(l[b],b)},Ys=(l,g)=>{const b=[],C=[];for(let E=0,P=l.length;E<P;E++){const W=l[E];(g(W,E)?b:C).push(W)}return{pass:b,fail:C}},bt=(l,g)=>{const b=[];for(let C=0,E=l.length;C<E;C++){const P=l[C];g(P,C)&&b.push(P)}return b},vn=(l,g,b)=>(((l,g)=>{for(let b=l.length-1;b>=0;b--)g(l[b],b)})(l,(C,E)=>{b=g(b,C,E)}),b),Be=(l,g,b)=>(U(l,(C,E)=>{b=g(b,C,E)}),b),ln=(l,g)=>((l,g,b)=>{for(let C=0,E=l.length;C<E;C++){const P=l[C];if(g(P,C))return Se.some(P);if(b(P,C))break}return Se.none()})(l,g,ko),Je=(l,g)=>{for(let b=0,C=l.length;b<C;b++)if(g(l[b],b))return Se.some(b);return Se.none()},so=l=>{const g=[];for(let b=0,C=l.length;b<C;++b){if(!qn(l[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+l);Ot.apply(g,l[b])}return g},jn=(l,g)=>so(Lt(l,g)),Ht=(l,g)=>{for(let b=0,C=l.length;b<C;++b)if(!0!==g(l[b],b))return!1;return!0},fo=(l,g)=>{const b={};for(let C=0,E=l.length;C<E;C++){const P=l[C];b[String(P)]=g(P,C)}return b},En=(l,g)=>g>=0&&g<l.length?Se.some(l[g]):Se.none(),No=l=>En(l,0),yr=l=>En(l,l.length-1),Ao=(l,g)=>{for(let b=0;b<l.length;b++){const C=g(l[b],b);if(C.isSome())return C}return Se.none()},Ls=Object.keys,Qr=Object.hasOwnProperty,zo=(l,g)=>{const b=Ls(l);for(let C=0,E=b.length;C<E;C++){const P=b[C];g(l[P],P)}},Mr=(l,g)=>Hs(l,(b,C)=>({k:C,v:g(b,C)})),Hs=(l,g)=>{const b={};return zo(l,(C,E)=>{const P=g(C,E);b[P.k]=P.v}),b},$o=(l,g)=>{const b=[];return zo(l,(C,E)=>{b.push(g(C,E))}),b},Xo=l=>$o(l,Le),Ye=(l,g)=>Qr.call(l,g),tn=typeof window<"u"?window:Function("return this;")(),Xs=(l,g)=>((l,g)=>{let b=g??tn;for(let C=0;C<l.length&&null!=b;++C)b=b[l[C]];return b})(l.split("."),g),Es=Object.getPrototypeOf,rt=l=>{const g=Xs("ownerDocument.defaultView",l);return bn(l)&&((l=>((l,g)=>{const b=((l,g)=>Xs(l,g))(l,g);if(null==b)throw new Error(l+" not available on this browser");return b})("HTMLElement",l))(g).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Es(l).constructor.name))},as=l=>l.dom.nodeName.toLowerCase(),Sa=l=>l.dom.nodeType,Fr=l=>g=>Sa(g)===l,qa=l=>8===Sa(l)||"#comment"===as(l),rr=l=>zs(l)&&rt(l.dom),zs=Fr(1),qr=Fr(3),Da=Fr(9),Ma=Fr(11),ar=l=>g=>zs(g)&&as(g)===l,ts=(l,g,b)=>{if(!(As(b)||Oo(b)||Wn(b)))throw console.error("Invalid call to Attribute.set. Key ",g,":: Value ",b,":: Element ",l),new Error("Attribute value was not simple");l.setAttribute(g,b+"")},Rs=(l,g,b)=>{ts(l.dom,g,b)},cs=(l,g)=>{const b=l.dom;zo(g,(C,E)=>{ts(b,E,C)})},Ss=(l,g)=>{const b=l.dom.getAttribute(g);return null===b?void 0:b},le=(l,g)=>Se.from(Ss(l,g)),ie=(l,g)=>{l.dom.removeAttribute(g)},je=l=>Be(l.dom.attributes,(g,b)=>(g[b.name]=b.value,g),{}),Rn=l=>{if(null==l)throw new Error("Node cannot be null or undefined");return{dom:l}},be={fromHtml:(l,g)=>{const C=(g||document).createElement("div");if(C.innerHTML=l,!C.hasChildNodes()||C.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,l),new Error(E)}return Rn(C.childNodes[0])},fromTag:(l,g)=>{const C=(g||document).createElement(l);return Rn(C)},fromText:(l,g)=>{const C=(g||document).createTextNode(l);return Rn(C)},fromDom:Rn,fromPoint:(l,g,b)=>Se.from(l.dom.elementFromPoint(g,b)).map(Rn)},Vn=(l,g)=>{const b=l.dom;if(1!==b.nodeType)return!1;{const C=b;if(void 0!==C.matches)return C.matches(g);if(void 0!==C.msMatchesSelector)return C.msMatchesSelector(g);if(void 0!==C.webkitMatchesSelector)return C.webkitMatchesSelector(g);if(void 0!==C.mozMatchesSelector)return C.mozMatchesSelector(g);throw new Error("Browser lacks native selectors")}},ge=l=>1!==l.nodeType&&9!==l.nodeType&&11!==l.nodeType||0===l.childElementCount,at=(l,g)=>{const b=void 0===g?document:g.dom;return ge(b)?Se.none():Se.from(b.querySelector(l)).map(be.fromDom)},ht=(l,g)=>l.dom===g.dom,Ft=(l,g)=>{const b=l.dom,C=g.dom;return b!==C&&b.contains(C)},gn=Vn,sn=l=>be.fromDom(l.dom.ownerDocument),rn=l=>Da(l)?l:sn(l),To=l=>Se.from(l.dom.parentNode).map(be.fromDom),ws=l=>Se.from(l.dom.parentElement).map(be.fromDom),gc=(l,g)=>{const b=Ro(g)?g:ko;let C=l.dom;const E=[];for(;null!=C.parentNode;){const P=C.parentNode,W=be.fromDom(P);if(E.push(W),!0===b(W))break;C=P}return E},Ta=l=>Se.from(l.dom.previousSibling).map(be.fromDom),Ka=l=>Se.from(l.dom.nextSibling).map(be.fromDom),co=l=>Lt(l.dom.childNodes,be.fromDom),Wo=(l,g)=>Se.from(l.dom.childNodes[g]).map(be.fromDom),ma=(l,g)=>{To(l).each(C=>{C.dom.insertBefore(g.dom,l.dom)})},ga=(l,g)=>{Ka(l).fold(()=>{To(l).each(E=>{is(E,g)})},C=>{ma(C,g)})},hc=(l,g)=>{(l=>Wo(l,0))(l).fold(()=>{is(l,g)},C=>{l.dom.insertBefore(g.dom,C.dom)})},is=(l,g)=>{l.dom.appendChild(g.dom)},Qi=(l,g)=>{ma(l,g),is(g,l)},Jo=(l,g)=>{U(g,(b,C)=>{ga(0===C?l:g[C-1],b)})},Cr=(l,g)=>{U(g,b=>{is(l,b)})},cr=l=>{l.dom.textContent="",U(co(l),g=>{Us(g)})},Us=l=>{const g=l.dom;null!==g.parentNode&&g.parentNode.removeChild(g)},xi=l=>{const g=co(l);g.length>0&&Jo(l,g),Us(l)},wo=(l,g)=>be.fromDom(l.dom.cloneNode(g)),Kr=l=>wo(l,!1),Ic=l=>wo(l,!0),Tc=(l,g)=>{const b=be.fromTag(g),C=je(l);return cs(b,C),b},Qc=["tfoot","thead","tbody","colgroup"],Ia=(l,g)=>({rows:l,columns:g}),Ec=(l,g,b)=>({element:l,rowspan:g,colspan:b}),Vl=(l,g,b,C)=>({element:l,rowspan:g,colspan:b,isNew:C}),ce=(l,g,b)=>({element:l,cells:g,section:b}),Ve=(l,g,b)=>({element:l,isNew:g,isLocked:b}),vt=(l,g,b,C)=>({element:l,cells:g,section:b,isNew:C}),xr=(l,g)=>({element:l,columns:g}),Zs=Ro(Element.prototype.attachShadow)&&Ro(Node.prototype.getRootNode),ns=ve(Zs),ls=Zs?l=>be.fromDom(l.dom.getRootNode()):rn,zr=l=>be.fromDom(l.dom.host),Bo=l=>{const g=qr(l)?l.dom.parentNode:l.dom;if(null==g||null===g.ownerDocument)return!1;const b=g.ownerDocument;return(l=>{const g=ls(l);return(l=>Ma(l)&&Mo(l.dom.host))(g)?Se.some(g):Se.none()})(be.fromDom(g)).fold(()=>b.body.contains(g),((l,g)=>b=>l(g(b)))(Bo,zr))},ne=l=>{const g=l.dom.body;if(null==g)throw new Error("Body is not available yet");return be.fromDom(g)},It=(l,g)=>{let b=[];return U(co(l),C=>{g(C)&&(b=b.concat([C])),b=b.concat(It(C,g))}),b},go=(l,g,b)=>((l,g,b)=>bt(gc(l,b),g))(l,C=>Vn(C,g),b),Xt=(l,g)=>((l,g)=>bt(co(l),g))(l,b=>Vn(b,g)),Ms=(l,g)=>((l,g)=>{const b=void 0===g?document:g.dom;return ge(b)?[]:Lt(b.querySelectorAll(l),be.fromDom)})(g,l);var ka=(l,g,b,C,E)=>l(b,C)?Se.some(b):Ro(E)&&E(b)?Se.none():g(b,C,E);const Ns=(l,g,b)=>{let C=l.dom;const E=Ro(b)?b:ko;for(;C.parentNode;){C=C.parentNode;const P=be.fromDom(C);if(g(P))return Se.some(P);if(E(P))break}return Se.none()},ha=(l,g,b)=>ka((E,P)=>P(E),Ns,l,g,b),fc=(l,g,b)=>Ns(l,C=>Vn(C,g),b),F=(l,g)=>((l,g)=>ln(l.dom.childNodes,E=>g(be.fromDom(E))).map(be.fromDom))(l,b=>Vn(b,g)),ue=(l,g)=>at(g,l),Pe=(l,g,b)=>ka((E,P)=>Vn(E,P),fc,l,g,b),ot=(l,g,b=mo)=>l.exists(C=>b(C,g)),Ut=l=>{const g=[],b=C=>{g.push(C)};for(let C=0;C<l.length;C++)l[C].each(b);return g},bs=(l,g)=>l?Se.some(g):Se.none(),ta=(l,g,b)=>""===g||l.length>=g.length&&l.substr(b,b+g.length)===g,po=(l,g,b=0,C)=>{const E=l.indexOf(g,b);return-1!==E&&(!!ys(C)||E+g.length<=C)},Sr=(l,g)=>ta(l,g,0),Ts=(l,g)=>ta(l,g,l.length-g.length),_c=(l=/^\s+|\s+$/g,g=>g.replace(l,"")),Hc=l=>l.length>0,Fs=l=>void 0!==l.style&&Ro(l.style.getPropertyValue),fa=(l,g,b)=>{if(!As(b))throw console.error("Invalid call to CSS.set. Property ",g,":: Value ",b,":: Element ",l),new Error("CSS value must be a string: "+b);Fs(l)&&l.style.setProperty(g,b)},js=(l,g,b)=>{fa(l.dom,g,b)},bd=(l,g)=>{const b=l.dom;zo(g,(C,E)=>{fa(b,E,C)})},zl=(l,g)=>{const b=l.dom,E=window.getComputedStyle(b).getPropertyValue(g);return""!==E||Bo(l)?E:jm(b,g)},jm=(l,g)=>Fs(l)?l.style.getPropertyValue(g):"",bl=(l,g)=>{const C=jm(l.dom,g);return Se.from(C).filter(E=>E.length>0)},ei=(l,g)=>{((l,g)=>{Fs(l)&&l.style.removeProperty(g)})(l.dom,g),ot(le(l,"style").map(_c),"")&&ie(l,"style")},Ir=(l,g,b=0)=>le(l,g).map(C=>parseInt(C,10)).getOr(b),vd=(l,g)=>Ir(l,g,1),Jd=l=>ar("col")(l)?Ir(l,"span",1)>1:vd(l,"colspan")>1,Vg=l=>vd(l,"rowspan")>1,na=(l,g)=>parseInt(zl(l,g),10),ki=ve(10),Oc=ve(10),Vc=(l,g)=>el(l,g,qe),el=(l,g,b)=>jn(co(l),C=>Vn(C,g)?b(C)?[C]:[]:el(C,g,b)),Ul=(l,g)=>((l,g,b=ko)=>b(g)?Se.none():An(l,as(g))?Se.some(g):fc(g,l.join(","),E=>Vn(E,"table")||b(E)))(["td","th"],l,g),Ba=l=>Vc(l,"th,td"),vl=l=>Vn(l,"colgroup")?Xt(l,"col"):jn($u(l),g=>Xt(g,"col")),zc=(l,g)=>Pe(l,"table",g),ui=l=>Vc(l,"tr"),$u=l=>zc(l).fold(ve([]),g=>Xt(g,"colgroup")),Qd=(l,g)=>Lt(l,b=>{if("colgroup"===as(b)){const C=Lt(vl(b),E=>{const P=Ir(E,"span",1);return Ec(E,1,P)});return ce(b,C,"colgroup")}{const C=Lt(Ba(b),E=>{const P=Ir(E,"rowspan",1),W=Ir(E,"colspan",1);return Ec(E,P,W)});return ce(b,C,g(b))}}),Iu=l=>To(l).map(g=>{const b=as(g);return(l=>An(Qc,l))(b)?b:"tbody"}).getOr("tbody"),Ei=l=>{const g=ui(l),C=[...$u(l),...g];return Qd(C,Iu)},tl=l=>{let b,g=!1;return(...C)=>(g||(g=!0,b=l.apply(null,C)),b)},em=()=>Or(0,0),Or=(l,g)=>({major:l,minor:g}),Lu={nu:Or,detect:(l,g)=>{const b=String(g).toLowerCase();return 0===l.length?em():((l,g)=>{const b=((l,g)=>{for(let b=0;b<l.length;b++){const C=l[b];if(C.test(g))return C}})(l,g);if(!b)return{major:0,minor:0};const C=E=>Number(g.replace(b,"$"+E));return Or(C(1),C(2))})(l,b)},unknown:em},bu=(l,g)=>{const b=String(g).toLowerCase();return ln(l,C=>C.search(b))},Hu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ol=l=>g=>po(g,l),_i=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>po(l,"edge/")&&po(l,"chrome")&&po(l,"safari")&&po(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Hu],search:l=>po(l,"chrome")&&!po(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>po(l,"msie")||po(l,"trident")},{name:"Opera",versionRegexes:[Hu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ol("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ol("firefox")},{name:"Safari",versionRegexes:[Hu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(po(l,"safari")||po(l,"mobile/"))&&po(l,"applewebkit")}],tm=[{name:"Windows",search:ol("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>po(l,"iphone")||po(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ol("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ol("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ol("linux"),versionRegexes:[]},{name:"Solaris",search:ol("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ol("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ol("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],zg={browsers:ve(_i),oses:ve(tm)},Wl="Chromium",Ug="Firefox",Ym=l=>{const g=l.current,C=E=>()=>g===E;return{current:g,version:l.version,isEdge:C("Edge"),isChromium:C(Wl),isIE:C("IE"),isOpera:C("Opera"),isFirefox:C(Ug),isSafari:C("Safari")}},Ac_unknown=()=>Ym({current:void 0,version:Lu.unknown()}),Ac_nu=Ym,Zg=(ve("Edge"),ve(Wl),ve("IE"),ve("Opera"),ve(Ug),ve("Safari"),"Windows"),nm="Android",xd="Solaris",Qt="FreeBSD",jl="ChromeOS",Vu=l=>{const g=l.current,C=E=>()=>g===E;return{current:g,version:l.version,isWindows:C(Zg),isiOS:C("iOS"),isAndroid:C(nm),isMacOS:C("macOS"),isLinux:C("Linux"),isSolaris:C(xd),isFreeBSD:C(Qt),isChromeOS:C(jl)}},Xm_unknown=()=>Vu({current:void 0,version:Lu.unknown()}),Xm_nu=Vu,Wg=(ve(Zg),ve("iOS"),ve(nm),ve("Linux"),ve("macOS"),ve(xd),ve(Qt),ve(jl),l=>window.matchMedia(l).matches);var l;let om=tl(()=>((l,g,b)=>{const C=zg.browsers(),E=zg.oses(),P=g.bind(se=>((l,g)=>Ao(g.brands,b=>{const C=b.brand.toLowerCase();return ln(l,E=>{var P;return C===(null===(P=E.brand)||void 0===P?void 0:P.toLowerCase())}).map(E=>({current:E.name,version:Lu.nu(parseInt(b.version,10),0)}))}))(C,se)).orThunk(()=>((l,g)=>bu(l,g).map(b=>{const C=Lu.detect(b.versionRegexes,g);return{current:b.name,version:C}}))(C,l)).fold(Ac_unknown,Ac_nu),W=((l,g)=>bu(l,g).map(b=>{const C=Lu.detect(b.versionRegexes,g);return{current:b.name,version:C}}))(E,l).fold(Xm_unknown,Xm_nu),X=((l,g,b,C)=>{const E=l.isiOS()&&!0===/ipad/i.test(b),P=l.isiOS()&&!E,W=l.isiOS()||l.isAndroid(),X=W||C("(pointer:coarse)"),se=E||!P&&W&&C("(min-device-width:768px)"),fe=P||W&&!se,Me=g.isSafari()&&l.isiOS()&&!1===/safari/i.test(b),ft=!fe&&!se&&!Me;return{isiPad:ve(E),isiPhone:ve(P),isTablet:ve(se),isPhone:ve(fe),isTouch:ve(X),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ve(Me),isDesktop:ve(ft)}})(W,P,l,b);return{browser:P,os:W,deviceType:X}})(navigator.userAgent,Se.from(navigator.userAgentData),Wg));const yt=()=>om(),Jm=(l,g)=>{const C=X=>{const se=g(X);if(se<=0||null===se){const fe=zl(X,l);return parseFloat(fe)||0}return se},P=(X,se)=>Be(se,(fe,Me)=>{const ft=zl(X,Me),jt=void 0===ft?0:parseInt(ft,10);return isNaN(jt)?fe:fe+jt},0);return{set:(X,se)=>{if(!Wn(se)&&!se.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+se);const fe=X.dom;Fs(fe)&&(fe.style[l]=se+"px")},get:C,getOuter:C,aggregate:P,max:(X,se,fe)=>{const Me=P(X,fe);return se>Me?se-Me:0}}},_s=(l,g,b)=>((l,g)=>(l=>{const g=parseFloat(l);return isNaN(g)?Se.none():Se.some(g)})(l).getOr(g))(zl(l,g),b),K=Jm("width",l=>l.dom.offsetWidth),me=l=>K.get(l),Ce=l=>K.getOuter(l),Tt=l=>((l,g)=>{const b=l.dom,C=b.getBoundingClientRect().width||b.offsetWidth;return"border-box"===g?C:((l,g,b,C)=>g-_s(l,"padding-left",0)-_s(l,`padding-${C}`,0)-_s(l,"border-left-width",0)-_s(l,`border-${C}-width`,0))(l,C,0,"right")})(l,"content-box"),Hn=(l,g,b)=>{const C=l.cells,E=C.slice(0,g),P=C.slice(g),W=E.concat(b).concat(P);return jo(l,W)},io=(l,g,b)=>Hn(l,g,[b]),Dn=(l,g,b)=>{l.cells[g]=b},jo=(l,g)=>vt(l.element,g,l.section,l.isNew),Ur=(l,g)=>l.cells[g],sa=(l,g)=>Ur(l,g).element,Oi=l=>l.cells.length,Ja=l=>{const g=Ys(l,b=>"colgroup"===b.section);return{rows:g.fail,cols:g.pass}},yu=(l,g,b)=>{const C=Lt(l.cells,b);return vt(g(l.element),C,l.section,!0)},ti="data-snooker-locked-cols",Br=l=>le(l,ti).bind(g=>Se.from(g.match(/\d+/g))).map(g=>fo(g,qe)),Ai=l=>{const g=Be(Ja(l).rows,(C,E)=>(U(E.cells,(P,W)=>{P.isLocked&&(C[W]=!0)}),C),{});return((l,g)=>{const b=dr.call(l,0);return b.sort(void 0),b})($o(g,(C,E)=>parseInt(E,10)))},Wh=(l,g)=>l+","+g,W1=(l,g)=>{const b=jn(l.all,C=>C.cells);return bt(b,g)},Js=l=>{const g={},b=[],E=No(l).map(At=>At.element).bind(zc).bind(Br).getOr({});let P=0,W=0,X=0;const{pass:se,fail:fe}=Ys(l,At=>"colgroup"===At.section);U(fe,At=>{const it=[];U(At.cells,Dt=>{let Ie=0;for(;void 0!==g[Wh(X,Ie)];)Ie++;const on=((l,g)=>Ye(l,g)&&null!=l[g])(E,Ie.toString()),zn=((l,g,b,C,E,P)=>({element:l,rowspan:g,colspan:b,row:C,column:E,isLocked:P}))(Dt.element,Dt.rowspan,Dt.colspan,X,Ie,on);for(let Co=0;Co<Dt.colspan;Co++)for(let pr=0;pr<Dt.rowspan;pr++){const Ca=Ie+Co,ii=Wh(X+pr,Ca);g[ii]=zn,W=Math.max(W,Ca+1)}it.push(zn)}),P++,b.push(ce(At.element,it,At.section)),X++});const{columns:Me,colgroups:ft}=yr(se).map(At=>{const it=(l=>{const g={};let b=0;return U(l.cells,C=>{const E=C.colspan;yn(E,P=>{const W=b+P;g[W]=((l,g,b)=>({element:l,colspan:g,column:b}))(C.element,E,W)}),b+=E}),g})(At);return{colgroups:[xr(At.element,Xo(it))],columns:it}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Ia(P,W),access:g,all:b,columns:Me,colgroups:ft}},Pn_fromTable=l=>{const g=Ei(l);return Js(g)},Pn_generate=Js,Pn_getAt=(l,g,b)=>Se.from(l.access[Wh(g,b)]),Pn_findItem=(l,g,b)=>{const C=W1(l,E=>b(g,E.element));return C.length>0?Se.some(C[0]):Se.none()},Pn_filterItems=W1,Pn_justCells=l=>jn(l.all,g=>g.cells),Pn_justColumns=l=>Xo(l.columns),Pn_hasColumns=l=>Ls(l.columns).length>0,Pn_getColumnAt=(l,g)=>Se.from(l.columns[g]),rm=(l,g=qe)=>{const b=l.grid,C=yn(b.columns,Le),E=yn(b.rows,Le);return Lt(C,P=>ql(()=>jn(E,fe=>Pn_getAt(l,fe,P).filter(Me=>Me.column===P).toArray()),fe=>1===fe.colspan&&g(fe.element),()=>Pn_getAt(l,0,P)))},ql=(l,g,b)=>{const C=l();return ln(C,g).orThunk(()=>Se.from(C[0]).orThunk(b)).map(W=>W.element)},ep=l=>{const g=l.grid,b=yn(g.rows,Le),C=yn(g.columns,Le);return Lt(b,E=>ql(()=>jn(C,se=>Pn_getAt(l,E,se).filter(fe=>fe.row===E).fold(ve([]),fe=>[fe])),se=>1===se.rowspan,()=>Pn_getAt(l,E,0)))},am=(l,g)=>b=>"rtl"===Kl(b)?g:l,Kl=l=>"rtl"===zl(l,"direction")?"rtl":"ltr",mi=Jm("height",l=>{const g=l.dom;return Bo(l)?g.getBoundingClientRect().height:g.offsetHeight}),tg=l=>mi.get(l),Sd=l=>mi.getOuter(l),Kg=(l,g)=>({left:l,top:g,translate:(C,E)=>Kg(l+C,g+E)}),wl=Kg,Yg=(l,g)=>void 0!==l?l:void 0!==g?g:0,Cl=l=>{const g=l.dom.ownerDocument,b=g.body,C=g.defaultView,E=g.documentElement;if(b===l.dom)return wl(b.offsetLeft,b.offsetTop);const P=Yg(C?.pageYOffset,E.scrollTop),W=Yg(C?.pageXOffset,E.scrollLeft),X=Yg(E.clientTop,b.clientTop),se=Yg(E.clientLeft,b.clientLeft);return j1(l).translate(W-se,P-X)},j1=l=>{const g=l.dom,C=g.ownerDocument.body;return C===g?wl(C.offsetLeft,C.offsetTop):Bo(l)?(l=>{const g=l.getBoundingClientRect();return wl(g.left,g.top)})(g):wl(0,0)},G1=(l,g)=>({row:l,y:g}),op=(l,g)=>({col:l,x:g}),sp=l=>Cl(l).left+Ce(l),rp=l=>Cl(l).left,ap=(l,g)=>op(l,rp(g)),q1=(l,g)=>op(l,sp(g)),gi=l=>Cl(l).top,K1=(l,g)=>G1(l,gi(g)),Di=(l,g)=>G1(l,gi(g)+Sd(g)),Tn=(l,g,b)=>{if(0===b.length)return[];const C=Lt(b.slice(1),(P,W)=>P.map(X=>l(W,X))),E=b[b.length-1].map(P=>g(b.length-1,P));return C.concat([E])},Xg={delta:Le,positions:l=>Tn(K1,Di,l),edge:gi},Uu=am({delta:Le,edge:rp,positions:l=>Tn(ap,q1,l)},{delta:l=>-l,edge:sp,positions:l=>Tn(q1,ap,l)}),hi={delta:(l,g)=>Uu(g).delta(l,g),positions:(l,g)=>Uu(g).positions(l,g),edge:l=>Uu(l).edge(l)},ng={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Gh=(()=>{const l="[0-9]+",b="[eE][+-]?[0-9]+",E=X=>`(?:${X})?`,W=`[+-]?(?:${["Infinity",l+"\\."+E(l)+E(b),"\\."+l+E(b),l+E(b)].join("|")})`;return new RegExp(`^(${W})(.*)$`)})(),og=/(\d+(\.\d+)?)%/,ip=/(\d+(\.\d+)?)px|em/,Y1=ar("col"),qh=(l,g,b)=>{const C=ws(l).getOrThunk(()=>ne(sn(l)));return g(l)/b(C)*100},cm=(l,g)=>{js(l,"width",g+"px")},Kh=(l,g)=>{js(l,"width",g+"%")},kd=(l,g)=>{js(l,"height",g+"px")},Uc=l=>{const g=(l=>(l=>_s(l,"height",l.dom.offsetHeight))(l)+"px")(l);return g?((l,g,b,C)=>{const E=parseFloat(l);return Ts(l,"%")&&"table"!==as(g)?((l,g,b,C)=>{const E=zc(l).map(P=>{const W=b(P);return Math.floor(g/100*W)}).getOr(g);return C(l,E),E})(g,E,b,C):E})(g,l,tg,kd):tg(l)},Zu=(l,g)=>bl(l,g).orThunk(()=>le(l,g).map(b=>b+"px")),Qa=l=>Zu(l,"width"),Ha=l=>qh(l,me,Tt),pc=l=>Y1(l)?me(l):(l=>_s(l,"width",l.dom.offsetWidth))(l),Jg=l=>((l,g,b)=>b(l)/vd(l,"rowspan"))(l,0,Uc),si=(l,g,b)=>{js(l,"width",g+b)},ra=l=>qh(l,me,Tt)+"%",hv=ve(og),Wu=ar("col"),Ed=l=>Qa(l).getOrThunk(()=>pc(l)+"px"),Ni=l=>(l=>Zu(l,"height"))(l).getOrThunk(()=>Jg(l)+"px"),_d=(l,g,b,C,E,P)=>l.filter(C).fold(()=>P(((l,g)=>{if(g<0||g>=l.length-1)return Se.none();const b=l[g].fold(()=>{const E=(l=>{const g=dr.call(l,0);return g.reverse(),g})(l.slice(0,g));return Ao(E,(P,W)=>P.map(X=>({value:X,delta:W+1})))},E=>Se.some({value:E,delta:0})),C=l[g+1].fold(()=>{const E=l.slice(g+1);return Ao(E,(P,W)=>P.map(X=>({value:X,delta:W+1})))},E=>Se.some({value:E,delta:1}));return b.bind(E=>C.map(P=>{const W=P.delta+E.delta;return Math.abs(P.value-E.value)/W}))})(b,g)),W=>E(W)),ec=(l,g,b,C)=>{const E=rm(l),P=Pn_hasColumns(l)?(l=>Lt(Pn_justColumns(l),g=>Se.from(g.element)))(l):E,W=[Se.some(hi.edge(g))].concat(Lt(hi.positions(E,g),se=>se.map(fe=>fe.x))),X=re(Jd);return Lt(P,(se,fe)=>_d(se,fe,W,X,Me=>{if((l=>{const g=yt().browser,b=g.isChromium()||g.isFirefox();return!Wu(l)||b})(Me))return b(Me);{const ft=((l,g)=>null!=l?g(l):Se.none())(E[fe],Le);return _d(ft,fe,W,X,jt=>C(Se.some(me(jt))),C)}},C))},eh=l=>l.map(g=>g+"px").getOr(""),Rc=(l,g,b)=>ec(l,g,pc,C=>C.getOrThunk(b.minCellWidth)),th=(l,g,b,C,E)=>{const P=ep(l),W=[Se.some(b.edge(g))].concat(Lt(b.positions(P,g),X=>X.map(se=>se.y)));return Lt(P,(X,se)=>_d(X,se,W,re(Vg),C,E))},Yl=(l,g)=>()=>Bo(l)?g(l):parseFloat(bl(l,"width").getOr("0")),rl=l=>{const g=Yl(l,se=>parseFloat(ra(se))),b=Yl(l,me);return{width:g,pixelWidth:b,getWidths:(se,fe)=>((l,g,b)=>ec(l,g,Ha,C=>C.fold(()=>b.minCellWidth(),E=>E/b.pixelWidth()*100)))(se,l,fe),getCellDelta:se=>se/b()*100,singleColumnWidth:(se,fe)=>[100-se],minCellWidth:()=>ki()/b()*100,setElementWidth:Kh,adjustTableWidth:se=>{const fe=g();Kh(l,fe+se/100*fe)},isRelative:!0,label:"percent"}},Va=l=>{const g=Yl(l,me);return{width:g,pixelWidth:g,getWidths:(W,X)=>Rc(W,l,X),getCellDelta:Le,singleColumnWidth:(W,X)=>[Math.max(ki(),W+X)-W],minCellWidth:ki,setElementWidth:cm,adjustTableWidth:W=>{const X=g()+W;cm(l,X)},isRelative:!1,label:"pixel"}},Fi_getTableSize=l=>Qa(l).fold(()=>(l=>{const g=Yl(l,me),b=ve(0);return{width:g,pixelWidth:g,getWidths:(E,P)=>Rc(E,l,P),getCellDelta:b,singleColumnWidth:ve([0]),minCellWidth:b,setElementWidth:_t,adjustTableWidth:_t,isRelative:!0,label:"none"}})(l),b=>((l,g)=>null!==hv().exec(g)?rl(l):Va(l))(l,b)),Fi_pixelSize=Va,Fi_percentageSize=rl,T=(l,g,b)=>{const C=l[b].element,E=be.fromTag("td");is(E,be.fromTag("br")),(g?is:hc)(C,E)},Zt=((l,g)=>{const C=P=>l(P)?Se.from(P.dom.nodeValue):Se.none();return{get:P=>{if(!l(P))throw new Error("Can only get text value of a text node");return C(P).getOr("")},getOption:C,set:(P,W)=>{if(!l(P))throw new Error("Can only set raw text value of a text node");P.dom.nodeValue=W}}})(qr),Fn=l=>Zt.get(l),eo=l=>Zt.getOption(l),Lr=(l,g)=>Zt.set(l,g),Qo=l=>"img"===as(l)?1:eo(l).fold(()=>co(l).length,g=>g.length),$i=["img","br"],Xl=l=>(l=>eo(l).filter(g=>0!==g.trim().length||g.indexOf("\xa0")>-1).isSome())(l)||An($i,as(l))||(l=>rr(l)&&"false"===Ss(l,"contenteditable"))(l),vs=l=>((l,g)=>{const b=C=>{for(let E=0;E<C.childNodes.length;E++){const P=be.fromDom(C.childNodes[E]);if(g(P))return Se.some(P);const W=b(C.childNodes[E]);if(W.isSome())return W}return Se.none()};return b(l.dom)})(l,Xl),Gu=l=>kl(l,Xl),kl=(l,g)=>{const b=C=>{const E=co(C);for(let P=E.length-1;P>=0;P--){const W=E[P];if(g(W))return Se.some(W);const X=b(W);if(X.isSome())return X}return Se.none()};return b(l)},aa={scope:["row","col"]},Jl=l=>()=>{const g=be.fromTag("td",l.dom);return is(g,be.fromTag("br",l.dom)),g},im=l=>()=>be.fromTag("col",l.dom),ca=l=>()=>be.fromTag("colgroup",l.dom),_a=l=>()=>be.fromTag("tr",l.dom),za=(l,g,b)=>{const C=((l,g)=>{const b=Tc(l,g),C=co(Ic(l));return Cr(b,C),b})(l,g);return zo(b,(E,P)=>{null===E?ie(C,P):Rs(C,P,E)}),C},lm=l=>l,Oa=(l,g,b)=>{const C=(W,X)=>{((l,g)=>{const b=l.dom,C=g.dom;Fs(b)&&Fs(C)&&(C.style.cssText=b.style.cssText)})(W.element,X),ei(X,"height"),1!==W.colspan&&ei(X,"width")};return{col:W=>{const X=be.fromTag(as(W.element),g.dom);return C(W,X),l(W.element,X),X},colgroup:ca(g),row:_a(g),cell:W=>{const X=be.fromTag(as(W.element),g.dom),se=b.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),fe=se.length>0?((l,g,b)=>vs(l).map(E=>{const P=b.join(","),W=go(E,P,X=>ht(X,l));return vn(W,(X,se)=>{const fe=Kr(se);return is(X,fe),fe},g)}).getOr(g))(W.element,X,se):X;return is(fe,be.fromTag("br")),C(W,X),((l,g)=>{zo(aa,(b,C)=>le(l,C).filter(E=>An(b,E)).each(E=>Rs(g,C,E)))})(W.element,X),l(W.element,X),X},replace:za,colGap:im(g),gap:Jl(g)}},oc=l=>({col:im(l),colgroup:ca(l),row:_a(l),cell:Jl(l),replace:lm,colGap:im(l),gap:Jl(l)}),Pa=l=>g=>g.options.get(l),Li=l=>{var g;const b=l.dom,C=null!==(g=b.getParent(l.selection.getStart(),b.isBlock))&&void 0!==g?g:l.getBody();return Tt(be.fromDom(C))+"px"},um=l=>Se.from(l.options.get("table_clone_elements")),oh=Pa("table_header_type"),sh=Pa("table_column_resizing"),fv=l=>"preservetable"===sh(l),kr=l=>"resizetable"===sh(l),X1=Pa("table_sizing_mode"),Cu=l=>"relative"===X1(l),El=l=>"fixed"===X1(l),xu=l=>"responsive"===X1(l),Ql=Pa("table_resize_bars"),Hi=Pa("table_style_by_css"),Jh=Pa("table_merge_content_on_paste"),dm=l=>{const g=l.options,b=g.get("table_default_attributes");return g.isSet("table_default_attributes")?b:((l,g)=>xu(l)||Hi(l)?g:El(l)?{...g,width:Li(l)}:{...g,width:"100%"})(l,b)},gp=Pa("table_use_colgroups"),rh=l=>Pe(l,"[contenteditable]"),al=(l,g=!1)=>Bo(l)?l.dom.isContentEditable:rh(l).fold(ve(g),b=>"true"===hw(b)),hw=l=>l.dom.contentEditable,hp=l=>be.fromDom(l.getBody()),mm=l=>g=>ht(g,hp(l)),Od=l=>{ie(l,"data-mce-style");const g=b=>ie(b,"data-mce-style");U(Ba(l),g),U(vl(l),g),U(ui(l),g)},_l=l=>be.fromDom(l.selection.getStart()),ah=l=>l.getBoundingClientRect().width,Su=l=>l.getBoundingClientRect().height,pp=l=>ha(l,ar("table")).exists(al),bp=(l,g)=>g.column<=l.finishCol&&g.column+g.colspan-1>=l.startCol&&g.row<=l.finishRow&&g.row+g.rowspan-1>=l.startRow,J1=(l,g)=>g.column>=l.startCol&&g.column+g.colspan-1<=l.finishCol&&g.row>=l.startRow&&g.row+g.rowspan-1<=l.finishRow,es=(l,g,b)=>{const C=Pn_findItem(l,g,ht),E=Pn_findItem(l,b,ht);return C.bind(P=>E.map(W=>((l,g)=>((l,g,b,C)=>({startRow:l,startCol:g,finishRow:b,finishCol:C}))(Math.min(l.row,g.row),Math.min(l.column,g.column),Math.max(l.row+l.rowspan-1,g.row+g.rowspan-1),Math.max(l.column+l.colspan-1,g.column+g.colspan-1)))(P,W)))},Ad=(l,g,b)=>es(l,g,b).map(C=>{const E=Pn_filterItems(l,Vo(bp,C));return Lt(E,P=>P.element)}),Xe=(l,g)=>Pn_findItem(l,g,(C,E)=>Ft(E,C)).map(C=>C.element),nb=(l,g,b)=>{const C=vp(l);return Ad(C,g,b)},ss=(l,g,b,C,E)=>{const P=vp(l),W=ht(l,b)?Se.some(g):Xe(P,g),X=ht(l,E)?Se.some(C):Xe(P,C);return W.bind(se=>X.bind(fe=>Ad(P,se,fe)))},vp=Pn_fromTable;var bv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ut=()=>({up:ve({selector:fc,closest:Pe,predicate:Ns,all:gc}),down:ve({selector:Ms,predicate:It}),styles:ve({get:zl,getRaw:bl,set:js,remove:ei}),attrs:ve({get:Ss,set:Rs,remove:ie,copyTo:(fe,Me)=>{const ft=je(fe);cs(Me,ft)}}),insert:ve({before:ma,after:ga,afterAll:Jo,append:is,appendAll:Cr,prepend:hc,wrap:Qi}),remove:ve({unwrap:xi,remove:Us}),create:ve({nu:be.fromTag,clone:fe=>be.fromDom(fe.dom.cloneNode(!1)),text:be.fromText}),query:ve({comparePosition:(fe,Me)=>fe.dom.compareDocumentPosition(Me.dom),prevSibling:Ta,nextSibling:Ka}),property:ve({children:co,name:as,parent:To,document:fe=>rn(fe).dom,isText:qr,isComment:qa,isElement:zs,isSpecial:fe=>{const Me=as(fe);return An(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Me)},getLanguage:fe=>zs(fe)?le(fe,"lang"):Se.none(),getText:Fn,setText:Lr,isBoundary:fe=>!!zs(fe)&&("body"===as(fe)||An(bv,as(fe))),isEmptyTag:fe=>!!zs(fe)&&An(["br","img","hr","input"],as(fe)),isNonEditable:fe=>zs(fe)&&"false"===Ss(fe,"contenteditable")}),eq:ht,is:gn});const yp=(l,g,b,C)=>{const E=g(l,b);return vn(C,(P,W)=>{const X=g(l,W);return bw(l,P,X)},E)},bw=(l,g,b)=>g.bind(C=>b.filter(Vo(l.eq,C))),ag=ut(),lr=(l,g)=>((l,g,b)=>b.length>0?((l,g,b,C)=>C(l,g,b[0],b.slice(1)))(l,g,b,yp):Se.none())(ag,(b,C)=>l(C),g),rb=l=>fc(l,"table"),eu=(l,g,b)=>{const C=E=>P=>void 0!==b&&b(P)||ht(P,E);return ht(l,g)?Se.some({boxes:Se.some([l]),start:l,finish:g}):rb(l).bind(E=>rb(g).bind(P=>{if(ht(E,P))return Se.some({boxes:nb(E,l,g),start:l,finish:g});if(Ft(E,P)){const W=go(g,"td,th",C(E)),X=W.length>0?W[W.length-1]:g;return Se.some({boxes:ss(E,l,E,g,P),start:l,finish:X})}if(Ft(P,E)){const W=go(l,"td,th",C(P)),X=W.length>0?W[W.length-1]:l;return Se.some({boxes:ss(P,l,E,g,P),start:l,finish:X})}return((l,g,b)=>((l,g,b,C=ko)=>{const E=[g].concat(l.up().all(g)),P=[b].concat(l.up().all(b)),W=Me=>Je(Me,C).fold(()=>Me,jt=>Me.slice(0,jt+1)),X=W(E),se=W(P),fe=ln(X,Me=>oo(se,((l,g)=>Vo(l.eq,g))(l,Me)));return{firstpath:X,secondpath:se,shared:fe}})(ag,l,g,void 0))(l,g).shared.bind(W=>Pe(W,"table",b).bind(X=>{const se=go(g,"td,th",C(X)),fe=se.length>0?se[se.length-1]:g,Me=go(l,"td,th",C(X)),ft=Me.length>0?Me[Me.length-1]:l;return Se.some({boxes:ss(X,l,E,g,P),start:ft,finish:fe})}))}))},wp=(l,g)=>{const b=Ms(l,g);return b.length>0?Se.some(b):Se.none()},cg=(l,g,b)=>ue(l,g).bind(C=>ue(l,b).bind(E=>lr(rb,[C,E]).map(P=>({first:C,last:E,table:P})))),Rd=(l,g,b,C,E)=>((l,g)=>ln(l,b=>Vn(b,g)))(l,E).bind(P=>((l,g,b)=>zc(l).bind(C=>((l,g,b,C)=>Pn_findItem(l,g,ht).bind(E=>Pn_getAt(l,(b>0?E.row+E.rowspan-1:E.row)+b,(C>0?E.column+E.colspan-1:E.column)+C).map(se=>se.element)))(vp(C),l,g,b)))(P,g,b).bind(W=>((l,g)=>fc(l,"table").bind(b=>ue(b,g).bind(C=>eu(C,l).bind(E=>E.boxes.map(P=>({boxes:P,start:E.start,finish:E.finish}))))))(W,C))),yw=(l,g)=>wp(l,g),dT=(l,g,b)=>cg(l,g,b).bind(C=>{const E=se=>ht(l,se),P="thead,tfoot,tbody,table",W=fc(C.first,P,E),X=fc(C.last,P,E);return W.bind(se=>X.bind(fe=>ht(se,fe)?((l,g,b)=>((l,g,b)=>es(l,g,b).bind(C=>((l,g)=>{let b=!0;const C=Vo(J1,g);for(let E=g.startRow;E<=g.finishRow;E++)for(let P=g.startCol;P<=g.finishCol;P++)b=b&&Pn_getAt(l,E,P).exists(C);return b?Se.some(g):Se.none()})(l,C)))(vp(l),g,b))(C.table,C.first,C.last):Se.none()))}),fm=Le,ww=l=>{const g=(C,E)=>le(C,E).exists(P=>parseInt(P,10)>1);return l.length>0&&Ht(l,C=>g(C,"rowspan")||g(C,"colspan"))?Se.some(l):Se.none()},Cw=(l,g,b)=>g.length<=1?Se.none():dT(l,b.firstSelectedSelector,b.lastSelectedSelector).map(C=>({bounds:C,cells:g})),pm={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},ig=(l,g,b)=>({element:b,mergable:Cw(g,l,pm),unmergable:ww(l),selection:fm(l)}),yv=l=>(g,b)=>{const C=as(g),E="col"===C||"colgroup"===C?(l=>zc(l).bind(g=>yw(g,pm.firstSelectedSelector)).fold(ve(l),g=>g[0]))(g):g;return Pe(E,l,b)},gT=yv("th,td,caption"),sc=yv("th,td"),zi=l=>(l=>Lt(l,be.fromDom))(l.model.table.getSelectedCells()),kw=(l,g)=>{l.on("BeforeGetContent",b=>{const C=E=>{b.preventDefault(),(l=>zc(l[0]).map(g=>{const b=((l,g)=>{const b=jt=>Vn(jt.element,g),C=Ic(l),E=Ei(C),P=Fi_getTableSize(l),W=Pn_generate(E),X=((l,g)=>{let E=l.grid.rows,P=l.grid.columns,W=0,X=0;const se=[],fe=[];return zo(l.access,Me=>{if(se.push(Me),g(Me)){fe.push(Me);const ft=Me.row,jt=ft+Me.rowspan-1,At=Me.column,it=At+Me.colspan-1;ft<E?E=ft:jt>W&&(W=jt),At<P?P=At:it>X&&(X=it)}}),((l,g,b,C,E,P)=>({minRow:l,minCol:g,maxRow:b,maxCol:C,allCells:E,selectedCells:P}))(E,P,W,X,se,fe)})(W,b),se="th:not("+g+"),td:not("+g+")",fe=el(C,"th,td",jt=>Vn(jt,se));U(fe,Us),((l,g,b,C)=>{const E=bt(l,X=>"colgroup"!==X.section),P=g.grid.columns,W=g.grid.rows;for(let X=0;X<W;X++){let se=!1;for(let fe=0;fe<P;fe++)X<b.minRow||X>b.maxRow||fe<b.minCol||fe>b.maxCol||(Pn_getAt(g,X,fe).filter(C).isNone()?T(E,se,X):se=!0)}})(E,W,X,b);const ft=((l,g,b,C)=>{if(0===C.minCol&&g.grid.columns===C.maxCol+1)return 0;const E=Rc(g,l,b),P=Be(E,(fe,Me)=>fe+Me,0),se=Be(E.slice(C.minCol,C.maxCol+1),(fe,Me)=>fe+Me,0)/P*b.pixelWidth()-b.pixelWidth();return b.getCellDelta(se)})(l,Pn_fromTable(l),P,X);return((l,g,b,C)=>{zo(b.columns,W=>{(W.column<g.minCol||W.column>g.maxCol)&&Us(W.element)});const E=bt(Vc(l,"tr"),W=>0===W.dom.childElementCount);U(E,Us),(g.minCol===g.maxCol||g.minRow===g.maxRow)&&U(Vc(l,"th,td"),W=>{ie(W,"rowspan"),ie(W,"colspan")}),ie(l,ti),ie(l,"data-snooker-col-series"),Fi_getTableSize(l).adjustTableWidth(C)})(C,X,W,ft),C})(g,"[data-mce-selected]");return Od(b),[b]}))(E).each(P=>{b.content="text"===b.format?(l=>Lt(l,g=>g.dom.innerText).join(""))(P):((l,g)=>Lt(g,b=>l.selection.serializer.serialize(b.dom,{})).join(""))(l,P)})};if(!0===b.selection){const E=(l=>bt(zi(l),g=>Vn(g,pm.selectedSelector)))(l);E.length>=1&&C(E)}}),l.on("BeforeSetContent",b=>{if(!0===b.selection&&!0===b.paste){const C=zi(l);No(C).each(E=>{zc(E).each(P=>{const W=bt(((l,g)=>{const C=document.createElement("div");return C.innerHTML=l,co(be.fromDom(C))})(b.content),se=>"meta"!==as(se)),X=ar("table");if(Jh(l)&&1===W.length&&X(W[0])){b.preventDefault();const se=be.fromDom(l.getDoc()),fe=oc(se),Me=((l,g,b)=>({element:l,clipboard:g,generators:b}))(E,W[0],fe);g.pasteCells(P,Me).each(()=>{l.focus()})}})})}})},bm=(l,g)=>({element:l,offset:g}),tu=(l,g,b)=>l.property().isText(g)&&0===l.property().getText(g).trim().length||l.property().isComment(g)?b(g).bind(C=>tu(l,C,b).orThunk(()=>Se.some(C))):Se.none(),cl=(l,g)=>l.property().isText(g)?l.property().getText(g).length:l.property().children(g).length,wv=(l,g)=>{const b=tu(l,g,l.query().prevSibling).getOr(g);if(l.property().isText(b))return bm(b,cl(l,b));const C=l.property().children(b);return C.length>0?wv(l,C[C.length-1]):bm(b,cl(l,b))},pT=wv,bT=ut(),Tu=(l,g)=>{Jd(l)||(l=>Qa(l).bind(b=>((l,g)=>Se.from(Gh.exec(l)).bind(C=>{const E=Number(C[1]),P=C[2];return((l,g)=>oo(g,b=>oo(ng[b],C=>l===C)))(P,g)?Se.some({value:E,unit:P}):Se.none()}))(b,["fixed","relative","empty"])))(l).each(C=>{const E=C.value/2;si(l,E,C.unit),si(g,E,C.unit)})},db=l=>Lt(l,ve(0)),_w=(l,g,b,C,E)=>E(l.slice(0,g)).concat(C).concat(E(l.slice(b))),mb=l=>(g,b,C,E)=>{if(l(C)){const P=Math.max(E,g[b]-Math.abs(C)),W=Math.abs(P-g[b]);return C>=0?W:-W}return C},xp=mb(l=>l<0),vT=mb(qe),Cv=()=>{const g=(X,se,fe,Me)=>{const ft=(100+fe)/100,jt=Math.max(Me,(X[se]+fe)/ft);return Lt(X,(At,it)=>(it===se?jt:At/ft)-At)},b=(X,se,fe,Me,ft,jt)=>jt?g(X,se,Me,ft):((X,se,fe,Me,ft)=>{const jt=xp(X,se,Me,ft);return _w(X,se,fe+1,[jt,0],db)})(X,se,fe,Me,ft);return{resizeTable:(X,se)=>X(se),clampTableDelta:xp,calcLeftEdgeDeltas:b,calcMiddleDeltas:(X,se,fe,Me,ft,jt,At)=>b(X,fe,Me,ft,jt,At),calcRightEdgeDeltas:(X,se,fe,Me,ft,jt)=>{if(jt)return g(X,fe,Me,ft);{const At=xp(X,fe,Me,ft);return db(X.slice(0,fe)).concat([At])}},calcRedestributedWidths:(X,se,fe,Me)=>{if(Me){const jt=(se+fe)/se,At=Lt(X,it=>it/jt);return{delta:100*jt-100,newSizes:At}}return{delta:fe,newSizes:X}}}},Sp=()=>{const l=(W,X,se,fe,Me)=>{const jt=vT(W,fe>=0?se:X,fe,Me);return _w(W,X,se+1,[jt,-jt],db)};return{resizeTable:(W,X,se)=>{se&&W(X)},clampTableDelta:(W,X,se,fe,Me)=>{if(Me){if(se>=0)return se;{const ft=Be(W,(jt,At)=>jt+At-fe,0);return Math.max(-ft,se)}}return xp(W,X,se,fe)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(W,X,se,fe,Me,ft)=>l(W,se,fe,Me,ft),calcRightEdgeDeltas:(W,X,se,fe,Me,ft)=>ft?db(W):Lt(W,ve(fe/W.length)),calcRedestributedWidths:(W,X,se,fe)=>({delta:0,newSizes:W})}},xv=l=>Pn_fromTable(l).grid,gb=ar("th"),Tp=l=>Ht(l,g=>gb(g.element)),yT=(l,g)=>l&&g?"sectionCells":l?"section":"cells",Ow=l=>{const g="thead"===l.section,b=ot(hb(l.cells),"th");return"tfoot"===l.section?{type:"footer"}:g||b?{type:"header",subType:yT(g,b)}:{type:"body"}},hb=l=>{const g=bt(l,b=>gb(b.element));return 0===g.length?Se.some("td"):g.length===l.length?Se.some("th"):Se.none()},Dd=(l,g,b)=>Ve(b(l.element,g),!0,l.isLocked),Sv=(l,g)=>l.section!==g?vt(l.element,l.cells,g,l.isNew):l,ih=()=>({transformRow:Sv,transformCell:(l,g,b)=>{const C=b(l.element,g),E="td"!==as(C)?((l,g)=>{const b=Tc(l,"td");ga(l,b);const C=co(l);return Cr(b,C),Us(l),b})(C):C;return Ve(E,l.isNew,l.isLocked)}}),Aw=()=>({transformRow:Sv,transformCell:Dd}),fb=()=>({transformRow:(l,g)=>Sv(l,"thead"===g?"tbody":g),transformCell:Dd}),kp_section=ih,kp_sectionCells=Aw,kp_cells=fb,kp_fallback=()=>({transformRow:Le,transformCell:Dd}),Ep=(l,g,b,C)=>{b===C?ie(l,g):Rs(l,g,b)},ef=(l,g,b)=>{yr(Xt(l,g)).fold(()=>hc(l,b),C=>ga(C,b))},xT=(l,g)=>{const b=[],C=[],E=At=>Lt(At,it=>{it.isNew&&b.push(it.element);const Dt=it.element;return cr(Dt),U(it.cells,Ie=>{Ie.isNew&&C.push(Ie.element),Ep(Ie.element,"colspan",Ie.colspan,1),Ep(Ie.element,"rowspan",Ie.rowspan,1),is(Dt,Ie.element)}),Dt}),P=At=>jn(At,it=>Lt(it.cells,Dt=>(Ep(Dt.element,"span",Dt.colspan,1),Dt.element))),W=(At,it)=>{const Dt=((l,g)=>{const b=F(l,g).getOrThunk(()=>{const C=be.fromTag(g,sn(l).dom);return"thead"===g?ef(l,"caption,colgroup",C):"colgroup"===g?ef(l,"caption",C):is(l,C),C});return cr(b),b})(l,it),on=("colgroup"===it?P:E)(At);Cr(Dt,on)},se=(At,it)=>{At.length>0?W(At,it):(At=>{F(l,At).each(Us)})(it)},fe=[],Me=[],ft=[],jt=[];return U(g,At=>{switch(At.section){case"thead":fe.push(At);break;case"tbody":Me.push(At);break;case"tfoot":ft.push(At);break;case"colgroup":jt.push(At)}}),se(jt,"colgroup"),se(fe,"thead"),se(Me,"tbody"),se(ft,"tfoot"),{newRows:b,newCells:C}},Hr=(l,g)=>{if(0===l.length)return 0;const b=l[0];return Je(l,E=>!g(b.element,E.element)).getOr(l.length)},Md=(l,g)=>{const b=Lt(l,E=>Lt(E.cells,ko));return Lt(l,(E,P)=>{const W=jn(E.cells,(X,se)=>{if(!1===b[P][se]){const fe=((l,g,b,C)=>{const E=((l,g)=>l[g])(l,g),P="colgroup"===E.section,W=Hr(E.cells.slice(b),C),X=P?1:Hr(((l,g)=>Lt(l,b=>Ur(b,g)))(l.slice(g),b),C);return{colspan:W,rowspan:X}})(l,P,se,g);return((E,P,W,X)=>{for(let se=E;se<E+W;se++)for(let fe=P;fe<P+X;fe++)b[se][fe]=!0})(P,se,fe.rowspan,fe.colspan),[Vl(X.element,fe.rowspan,fe.colspan,X.isNew)]}return[]});return((l,g,b,C)=>({element:l,cells:g,section:b,isNew:C}))(E.element,W,E.section,E.isNew)})},ri=(l,g,b)=>{const C=[];U(l.colgroups,E=>{const P=[];for(let W=0;W<l.grid.columns;W++){const X=Pn_getColumnAt(l,W).map(se=>Ve(se.element,b,!1)).getOrThunk(()=>Ve(g.colGap(),!0,!1));P.push(X)}C.push(vt(E.element,P,"colgroup",b))});for(let E=0;E<l.grid.rows;E++){const P=[];for(let se=0;se<l.grid.columns;se++){const fe=Pn_getAt(l,E,se).map(Me=>Ve(Me.element,b,Me.isLocked)).getOrThunk(()=>Ve(g.gap(),!0,!1));P.push(fe)}const W=l.all[E],X=vt(W.element,P,W.section,b);C.push(X)}return C},pb=l=>Md(l,ht),bb=(l,g)=>Ao(l.all,b=>ln(b.cells,C=>ht(g,C.element))),Al=(l,g,b)=>{const C=Lt(g.selection,P=>Ul(P).bind(W=>bb(l,W)).filter(b)),E=Ut(C);return bs(E.length>0,E)},ya=(l,g,b,C,E)=>(P,W,X,se)=>{const fe=Pn_fromTable(P),Me=Se.from(se?.section).getOrThunk(kp_fallback);return g(fe,W).map(jt=>{const At=((l,g)=>ri(l,g,!1))(fe,X),it=l(At,jt,ht,E(X),Me),Dt=Ai(it.grid);return{info:jt,grid:pb(it.grid),cursor:it.cursor,lockedColumns:Dt}}).bind(jt=>{const At=xT(P,jt.grid),it=Se.from(se?.sizing).getOrThunk(()=>Fi_getTableSize(P)),Dt=Se.from(se?.resize).getOrThunk(Sp);return b(P,jt.grid,jt.info,{sizing:it,resize:Dt,section:Me}),C(P),ie(P,ti),jt.lockedColumns.length>0&&Rs(P,ti,jt.lockedColumns.join(",")),Se.some({cursor:jt.cursor,newRows:At.newRows,newCells:At.newCells})})},vb=(l,g)=>Al(l,g,qe).map(b=>({cells:b,generators:g.generators,clipboard:g.clipboard})),vm=(l,g)=>Al(l,g,qe),ym=(l,g)=>Al(l,g,b=>!b.isLocked),Nw=(l,g)=>Ht(g,b=>((l,g)=>bb(l,g).exists(b=>!b.isLocked))(l,b)),Bw=(l,g,b,C)=>{const E=Ja(l).rows;let P=!0;for(let W=0;W<E.length;W++)for(let X=0;X<Oi(E[0]);X++){const se=E[W],fe=Ur(se,X),ft=b(fe.element,g);ft&&!P?Dn(se,X,Ve(C(),!0,fe.isLocked)):ft&&(P=!1)}return l},Pw=l=>{const g=P=>P(l),b=ve(l),C=()=>E,E={tag:!0,inner:l,fold:(P,W)=>W(l),isValue:qe,isError:ko,map:P=>wb.value(P(l)),mapError:C,bind:g,exists:g,forall:g,getOr:b,or:C,getOrThunk:b,orThunk:C,getOrDie:b,each:P=>{P(l)},toOptional:()=>Se.some(l)};return E},Fw=l=>{const g=()=>b,b={tag:!1,inner:l,fold:(C,E)=>C(l),isValue:ko,isError:qe,map:g,mapError:C=>wb.error(C(l)),bind:g,exists:ko,forall:qe,getOr:Le,or:Le,getOrThunk:Is,orThunk:Is,getOrDie:gt(String(l)),each:_t,toOptional:Se.none};return b},wb={value:Pw,error:Fw,fromOption:(l,g)=>l.fold(()=>Fw(g),Pw)},Yr=(l,g)=>({rowDelta:0,colDelta:Oi(l[0])-Oi(g[0])}),_v=(l,g)=>({rowDelta:l.length-g.length,colDelta:0}),Ov=(l,g,b,C)=>{const E="colgroup"===g.section?b.col:b.cell;return yn(l,P=>Ve(E(),!0,C(P)))},DT=(l,g,b,C)=>{const E=l[l.length-1];return l.concat(yn(g,()=>{const W=yu(E,"colgroup"===E.section?b.colgroup:b.row,Le),X=Ov(W.cells.length,W,b,se=>Ye(C,se.toString()));return jo(W,X)}))},Av=(l,g,b,C)=>Lt(l,E=>{const P=Ov(g,E,b,ko);return Hn(E,C,P)}),fi=(l,g,b)=>{const C=g.colDelta<0?Av:Le,E=g.rowDelta<0?DT:Le,P=Ai(l),W=Oi(l[0]),X=oo(P,Me=>Me===W-1),se=C(l,Math.abs(g.colDelta),b,X?W-1:W),fe=Ai(se);return E(se,Math.abs(g.rowDelta),b,fo(fe,qe))},$w=(l,g,b,C)=>{const P=Vo(C,Ur(l[g],b).element),W=l[g];return l.length>1&&Oi(W)>1&&(b>0&&P(sa(W,b-1))||b<W.cells.length-1&&P(sa(W,b+1))||g>0&&P(sa(l[g-1],b))||g<l.length-1&&P(sa(l[g+1],b)))},Cb=(l,g,b)=>bt(b,C=>C>=l.column&&C<=Oi(g[0])+l.column),xb=(l,g,b,C,E)=>{((l,g,b,C)=>{g>0&&g<l[0].cells.length&&U(l,E=>{const P=E.cells[g-1];let W=0;const X=C();for(;E.cells.length>g+W&&b(P.element,E.cells[g+W].element);)Dn(E,g+W,Ve(X,!0,E.cells[g+W].isLocked)),W++})})(g,l,E,C.cell);const P=_v(b,g),W=fi(b,P,C),X=_v(g,W),se=fi(g,X,C);return Lt(se,(fe,Me)=>Hn(fe,l,W[Me].cells))},wm=(l,g,b,C,E)=>{((l,g,b,C)=>{const E=Ja(l).rows;if(g>0&&g<E.length){const W=((l,g)=>Be(l,(b,C)=>oo(b,E=>g(E.element,C.element))?b:b.concat([C]),[]))(E[g-1].cells,b);U(W,X=>{let se=Se.none();for(let fe=g;fe<E.length;fe++)for(let Me=0;Me<Oi(E[0]);Me++){const ft=E[fe],jt=Ur(ft,Me);b(jt.element,X.element)&&(se.isNone()&&(se=Se.some(C())),se.each(it=>{Dn(ft,Me,Ve(it,!0,jt.isLocked))}))}})}})(g,l,E,C.cell);const P=Ai(g),W=Yr(g,b),X={...W,colDelta:W.colDelta-P.length},se=fi(g,X,C),{cols:fe,rows:Me}=Ja(se),ft=Ai(se),jt=Yr(b,g),At={...jt,colDelta:jt.colDelta+ft.length},it=((l,g,b)=>Lt(l,C=>Be(b,(E,P)=>{const W=Ov(1,C,g,qe)[0];return io(E,P,W)},C)))(b,C,ft),Dt=fi(it,At,C);return[...fe,...Me.slice(0,l),...Dt,...Me.slice(l,Me.length)]},ia=(l,g,b,C,E)=>{const{rows:P,cols:W}=Ja(l),X=P.slice(0,g),se=P.slice(g),fe=((l,g,b,C)=>yu(l,E=>C(E,b),g))(P[b],(Me,ft)=>g>0&&g<P.length&&C(sa(P[g-1],ft),sa(P[g],ft))?Ur(P[g],ft):Ve(E(Me.element,C),!0,Me.isLocked),C,E);return[...W,...X,fe,...se]},lh=(l,g,b,C,E)=>Lt(l,P=>{const W=g>0&&g<Oi(P)&&C(sa(P,g-1),sa(P,g)),X=((l,g,b,C,E,P,W)=>{if("colgroup"!==b&&C)return Ur(l,g);{const X=Ur(l,E);return Ve(W(X.element,P),!0,!1)}})(P,g,P.section,W,b,C,E);return io(P,g,X)}),Mv=(l,g,b,C)=>((l,g,b,C)=>void 0!==sa(l[g],b)&&g>0&&C(sa(l[g-1],b),sa(l[g],b)))(l,g,b,C)||((l,g,b)=>g>0&&b(sa(l,g-1),sa(l,g)))(l[g],b,C),zw=(l,g,b,C)=>{const P=W=>(W=>"row"===W?Vg(g):Jd(g))(W)?`${W}group`:W;return l?gb(g)?P(b):null:C&&gb(g)?P("row"===b?"col":"row"):null},Zw=(l,g,b)=>Ve(b(l.element,g),!0,l.isLocked),Sb=(l,g,b,C,E,P,W)=>Lt(l,(se,fe)=>((l,g)=>{const C=Lt(l.cells,g);return vt(l.element,C,l.section,l.isNew)})(se,(Me,ft)=>{if((se=>oo(g,fe=>b(se.element,fe.element)))(Me)){const jt=W(Me,fe,ft)?E(Me,b,C):Me;return P(jt,fe,ft).each(At=>{((l,g)=>{zo(g,(b,C)=>{b.fold(()=>{ie(l,C)},E=>{ts(l.dom,C,E)})})})(jt.element,{scope:Se.from(At)})}),jt}return Me})),ug=(l,g,b)=>jn(l,(C,E)=>Mv(l,E,g,b)?[]:[Ur(C,g)]),Bv=(l,g,b,C,E)=>{const P=Ja(l).rows,W=jn(g,Me=>ug(P,Me,C)),X=Lt(P,Me=>Tp(Me.cells)),se=((l,g)=>Ht(g,Le)&&Tp(l)?qe:(C,E,P)=>!("th"===as(C.element)&&g[E]))(W,X),fe=((l,g)=>(b,C)=>Se.some(zw(l,b.element,"row",g[C])))(b,X);return Sb(l,W,C,E,Zw,fe,se)},Ww=(l,g,b,C)=>{const E=Ja(l).rows,P=Lt(g,W=>Ur(E[W.row],W.column));return Sb(l,P,b,C,Zw,Se.none,qe)},dg_generate=l=>{if(!qn(l))throw new Error("cases must be an array");if(0===l.length)throw new Error("there must be at least one case");const g=[],b={};return U(l,(C,E)=>{const P=Ls(C);if(1!==P.length)throw new Error("one and only one name per case");const W=P[0],X=C[W];if(void 0!==b[W])throw new Error("duplicate key detected:"+W);if("cata"===W)throw new Error("cannot have a case named cata (sorry)");if(!qn(X))throw new Error("case arguments must be an array");g.push(W),b[W]=(...se)=>{const fe=se.length;if(fe!==X.length)throw new Error("Wrong number of arguments to case "+W+". Expected "+X.length+" ("+X+"), got "+fe);return{fold:(...ft)=>{if(ft.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+ft.length);return ft[E].apply(null,se)},match:ft=>{const jt=Ls(ft);if(g.length!==jt.length)throw new Error("Wrong number of arguments to match. Expected: "+g.join(",")+"\nActual: "+jt.join(","));if(!Ht(g,it=>An(jt,it)))throw new Error("Not all branches were specified when using match. Specified: "+jt.join(", ")+"\nRequired: "+g.join(", "));return ft[W].apply(null,se)},log:ft=>{console.log(ft,{constructors:g,constructor:W,params:se})}}}}),b},Eu={...dg_generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},bc=(l,g,b)=>{let C=0;for(let E=l;E<g;E++)C+=void 0!==b[E]?b[E]:0;return C},Ju=(l,g,b)=>{const C=((l,g)=>Pn_hasColumns(l)?((l,g)=>{const b=Pn_justColumns(l);return Lt(b,(C,E)=>({element:C.element,width:g[E],colspan:C.colspan}))})(l,g):((l,g)=>{const b=Pn_justCells(l);return Lt(b,C=>{const E=bc(C.column,C.column+C.colspan,g);return{element:C.element,width:E,colspan:C.colspan}})})(l,g))(l,g);U(C,E=>{b.setElementWidth(E.element,E.width)})},jw=(l,g,b,C,E)=>{const P=Pn_fromTable(l),W=E.getCellDelta(g),X=E.getWidths(P,E),se=b===P.grid.columns-1,fe=C.clampTableDelta(X,b,W,E.minCellWidth(),se),Me=((l,g,b,C,E)=>{const P=l.slice(0),W=((l,g)=>0===l.length?Eu.none():1===l.length?Eu.only(0):0===g?Eu.left(0,1):g===l.length-1?Eu.right(g-1,g):g>0&&g<l.length-1?Eu.middle(g-1,g,g+1):Eu.none())(l,g),X=ve(Lt(P,ve(0)));return W.fold(X,jt=>C.singleColumnWidth(P[jt],b),(jt,At)=>E.calcLeftEdgeDeltas(P,jt,At,b,C.minCellWidth(),C.isRelative),(jt,At,it)=>E.calcMiddleDeltas(P,jt,At,it,b,C.minCellWidth(),C.isRelative),(jt,At)=>E.calcRightEdgeDeltas(P,jt,At,b,C.minCellWidth(),C.isRelative))})(X,b,fe,E,C),ft=Lt(Me,(jt,At)=>jt+X[At]);Ju(P,ft,E),C.resizeTable(E.adjustTableWidth,fe,se)},Nd=l=>Be(l,(b,C)=>oo(b,P=>P.column===C.column)?b:b.concat([C]),[]).sort((b,C)=>b.column-C.column),Rp=ar("col"),gg=ar("colgroup"),nf=l=>"tr"===as(l)||gg(l),Eb=l=>({element:l,colspan:Ir(l,"colspan",1),rowspan:Ir(l,"rowspan",1)}),uh=l=>le(l,"scope").map(g=>g.substr(0,3)),Zi_modification=(l,g=Eb)=>{const E=X=>{if(nf(X))return(X=>gg(X.element)?l.colgroup(X):l.row(X))({element:X});{const se=X,fe=(X=>Rp(X.element)?l.col(X):l.cell(X))(g(se));return P=Se.some({item:se,replacement:fe}),fe}};let P=Se.none();return{getOrInit:(X,se)=>P.fold(()=>E(X),fe=>se(X,fe.item)?fe.replacement:E(X))}},Zi_transform=l=>g=>{const b=[],E=W=>{const se=g.replace(W,l,"td"===l?{scope:null}:{});return b.push({item:W,sub:se}),se};return{replaceOrInit:(W,X)=>{if(nf(W)||Rp(W))return W;{const se=W;return((W,X)=>ln(b,se=>X(se.item,W)))(se,X).fold(()=>E(se),fe=>X(W,fe.item)?fe.sub:E(se))}}}},Zi_merging=l=>({unmerge:C=>{const E=uh(C);return E.each(P=>Rs(C,"scope",P)),()=>{const P=l.cell({element:C,colspan:1,rowspan:1});return ei(P,"width"),ei(C,"width"),E.each(W=>Rs(P,"scope",W)),P}},merge:C=>(ei(C[0],"width"),(()=>{const P=Ut(Lt(C,uh));if(0===P.length)return Se.none();{const W=P[0],X=["row","col"];return oo(P,fe=>fe!==W&&An(X,fe))?Se.none():Se.from(W)}})().fold(()=>ie(C[0],"scope"),P=>Rs(C[0],"scope",P+"group")),ve(C[0]))}),ic=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Np=ut(),Bp=l=>((l,g)=>{const b=l.property().name(g);return An(ic,b)})(Np,l),Pp=l=>((l,g)=>{const b=l.property().name(g);return An(["ol","ul"],b)})(Np,l),Pv=l=>{const g=ar("br"),P=se=>Gu(se).bind(fe=>{const Me=(se=>Ka(se).map(fe=>!!Bp(fe)||!!(l=>((l,g)=>An(["br","img","hr","input"],l.property().name(g)))(Np,l))(fe)&&"img"!==as(fe)).getOr(!1))(fe);return To(fe).map(ft=>!0===Me||(se=>"li"===as(se)||Ns(se,Pp).isSome())(ft)||g(fe)||Bp(ft)&&!ht(se,ft)?[]:[be.fromTag("br")])}).getOr([]),X=(()=>{const se=jn(l,fe=>{const Me=co(fe);return(se=>Ht(se,fe=>g(fe)||qr(fe)&&0===Fn(fe).trim().length))(Me)?[]:Me.concat(P(fe))});return 0===se.length?[be.fromTag("br")]:se})();cr(l[0]),Cr(l[0],X)},Fv=l=>al(l,!0),$v=l=>{0===Ba(l).length&&Us(l)},ur=(l,g)=>({grid:l,cursor:g}),Qs=(l,g,b)=>{const C=((l,g,b)=>{var C,E;const P=Ja(l).rows;return Se.from(null===(E=null===(C=P[g])||void 0===C?void 0:C.cells[b])||void 0===E?void 0:E.element).filter(Fv).orThunk(()=>(l=>Ao(l,g=>Ao(g.cells,b=>{const C=b.element;return bs(Fv(C),C)})))(P))})(l,g,b);return ur(l,C)},er=l=>Be(l,(b,C)=>oo(b,P=>P.row===C.row)?b:b.concat([C]),[]).sort((b,C)=>b.row-C.row),fg=(l,g)=>(b,C,E,P,W)=>{const X=er(C),fe=((l,g,b,C,E,P,W)=>{const{cols:X,rows:se}=Ja(l),fe=se[g[0]],Me=jn(g,Ie=>((l,g,b)=>jn(l[g].cells,(E,P)=>Mv(l,g,P,b)?[]:[E]))(se,Ie,E)),ft=Lt(fe.cells,(Ie,on)=>Tp(ug(se,on,E))),jt=[...se];U(g,Ie=>{jt[Ie]=W.transformRow(se[Ie],b)});const At=[...X,...jt],it=((l,g)=>Ht(g,Le)&&Tp(l.cells)?qe:(C,E,P)=>!("th"===as(C.element)&&g[P]))(fe,ft),Dt=((l,g)=>(b,C,E)=>Se.some(zw(l,b.element,"col",g[E])))(C,ft);return Sb(At,Me,E,P,W.transformCell,Dt,it)})(b,Lt(X,Me=>Me.row),l,g,E,P.replaceOrInit,W);return Qs(fe,C[0].row,C[0].column)},qw=fg("thead",!0),t4=fg("tbody",!1),Kw=fg("tfoot",!1),Wi=(l,g,b)=>{const C=((l,g)=>Qd(l,()=>g))(l,b.section),E=Pn_generate(C);return ri(E,g,!0)},zv=(l,g,b,C)=>((l,g,b,C)=>{const E=Pn_generate(g),P=C.getWidths(E,C);Ju(E,P,C)})(0,g,0,C.sizing),ai=(l,g,b,C)=>((l,g,b,C,E)=>{const P=Pn_generate(g),W=C.getWidths(P,C),X=C.pixelWidth(),{newSizes:se,delta:fe}=E.calcRedestributedWidths(W,X,b.pixelDelta,C.isRelative);Ju(P,se,C),C.adjustTableWidth(fe)})(0,g,b,C.sizing,C.resize),Jw=(l,g)=>oo(g,b=>0===b.column&&b.isLocked),Fp=(l,g)=>oo(g,b=>b.column+b.colspan>=l.grid.columns&&b.isLocked),il=(l,g)=>{const b=rm(l),C=Nd(g);return Be(C,(E,P)=>E+b[P.column].map(Ce).getOr(0),0)},$p=l=>(g,b)=>vm(g,b).filter(C=>!(l?Jw:Fp)(g,C)).map(C=>({details:C,pixelDelta:il(g,C)})),ll=l=>(g,b)=>vb(g,b).filter(C=>!(l?Jw:Fp)(g,C.cells)),Dl=Zi_transform("th"),pg=Zi_transform("td"),Ml=ya((l,g,b,C)=>{const E=g[0].row,P=er(g),W=vn(P,(X,se)=>({grid:ia(X.grid,E,se.row+X.delta,b,C.getOrInit),delta:X.delta+1}),{grid:l,delta:0}).grid;return Qs(W,E,g[0].column)},vm,_t,_t,Zi_modification),Uv=ya((l,g,b,C)=>{const E=er(g),P=E[E.length-1],W=P.row+P.rowspan,X=vn(E,(se,fe)=>ia(se,W,fe.row,b,C.getOrInit),l);return Qs(X,W,g[0].column)},vm,_t,_t,Zi_modification),Ip=ya((l,g,b,C)=>{const E=g.details,P=Nd(E),W=P[0].column,X=vn(P,(se,fe)=>({grid:lh(se.grid,W,fe.column+se.delta,b,C.getOrInit),delta:se.delta+1}),{grid:l,delta:0}).grid;return Qs(X,E[0].row,W)},$p(!0),ai,_t,Zi_modification),Lp=ya((l,g,b,C)=>{const E=g.details,P=E[E.length-1],W=P.column+P.colspan,X=Nd(E),se=vn(X,(fe,Me)=>lh(fe,W,Me.column,b,C.getOrInit),l);return Qs(se,E[0].row,W)},$p(!1),ai,_t,Zi_modification),Zv=ya((l,g,b,C)=>{const E=Nd(g.details),P=((l,g)=>jn(l,b=>{const E=vn(g,(P,W)=>W>=0&&W<P.length?P.slice(0,W).concat(P.slice(W+1)):P,b.cells);return E.length>0?[vt(b.element,E,b.section,b.isNew)]:[]}))(l,Lt(E,X=>X.column));return Qs(P,E[0].row,Math.min(E[0].column,P.length>0?P[0].cells.length-1:0))},(l,g)=>ym(l,g).map(b=>({details:b,pixelDelta:-il(l,b)})),ai,$v,Zi_modification),sf=ya((l,g,b,C)=>{const E=er(g),P=((l,g,b)=>{const{rows:C,cols:E}=Ja(l);return[...E,...C.slice(0,g),...C.slice(b+1)]})(l,E[0].row,E[E.length-1].row);return Qs(P,Math.min(g[0].row,P.length>0?P.length-1:0),g[0].column)},vm,_t,$v,Zi_modification),Hp=ya((l,g,b,C)=>{const E=Nd(g),P=Lt(E,X=>X.column),W=Bv(l,P,!0,b,C.replaceOrInit);return Qs(W,g[0].row,g[0].column)},ym,_t,_t,Dl),dh=ya((l,g,b,C)=>{const E=Nd(g),P=Lt(E,X=>X.column),W=Bv(l,P,!1,b,C.replaceOrInit);return Qs(W,g[0].row,g[0].column)},ym,_t,_t,pg),Wv=ya(qw,ym,_t,_t,Dl),IT=ya(t4,ym,_t,_t,pg),Qw=ya(Kw,ym,_t,_t,pg),jv=ya((l,g,b,C)=>{const E=Ww(l,g,b,C.replaceOrInit);return Qs(E,g[0].row,g[0].column)},ym,_t,_t,Dl),rf=ya((l,g,b,C)=>{const E=Ww(l,g,b,C.replaceOrInit);return Qs(E,g[0].row,g[0].column)},ym,_t,_t,pg),Gv=ya((l,g,b,C)=>{const E=g.cells;Pv(E);const P=((l,g,b,C)=>{const E=Ja(l).rows;if(0===E.length)return l;for(let P=g.startRow;P<=g.finishRow;P++)for(let W=g.startCol;W<=g.finishCol;W++){const X=E[P],se=Ur(X,W).isLocked;Dn(X,W,Ve(C(),!1,se))}return l})(l,g.bounds,0,C.merge(E));return ur(P,Se.from(E[0]))},(l,g)=>((l,g)=>g.mergable)(0,g).filter(b=>Nw(l,b.cells)),zv,_t,Zi_merging),Db=ya((l,g,b,C)=>{const P=vn(g,(W,X)=>Bw(W,X,b,C.unmerge(X)),l);return ur(P,Se.from(g[0]))},(l,g)=>((l,g)=>g.unmergable)(0,g).filter(b=>Nw(l,b)),zv,_t,Zi_merging),bg=ya((l,g,b,C)=>{const P=((se,fe)=>{const Me=Pn_fromTable(se);return ri(Me,fe,!0)})(g.clipboard,g.generators),W=((l,g)=>({row:l,column:g}))(g.row,g.column);return((l,g,b,C,E)=>{const P=Ai(g),W=((l,g,b)=>{const C=Oi(g[0]),E=Ja(g).cols.length+l.row,P=yn(C-l.column,X=>X+l.column);return{row:E,column:ln(P,X=>Ht(b,se=>se!==X)).getOr(C-1)}})(l,g,P),X=Ja(b).rows,se=Cb(W,X,P);return((l,g,b)=>{if(l.row>=g.length||l.column>Oi(g[0]))return wb.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const C=g.slice(l.row),E=C[0].cells.slice(l.column),P=Oi(b[0]);return wb.value({rowDelta:C.length-b.length,colDelta:E.length-P})})(W,g,X).map(Me=>{const ft={...Me,colDelta:Me.colDelta-se.length},jt=fi(g,ft,C),At=Ai(jt),it=Cb(W,X,At);return((l,g,b,C,E,P)=>{const W=l.row,X=l.column,Me=W+b.length,ft=X+Oi(b[0])+P.length,jt=fo(P,qe);for(let At=W;At<Me;At++){let it=0;for(let Dt=X;Dt<ft;Dt++){if(jt[Dt]){it++;continue}$w(g,At,Dt,E)&&Bw(g,sa(g[At],Dt),E,C.cell);const on=Ur(b[At-W],Dt-X-it),Co=C.replace(on.element);Dn(g[At],Dt,Ve(Co,!0,on.isLocked))}}return g})(W,jt,X,C,E,it)})})(W,l,P,g.generators,b).fold(()=>ur(l,Se.some(g.element)),se=>Qs(se,g.row,g.column))},(l,g)=>Ul(g.element).bind(b=>bb(l,b).map(C=>({...C,generators:g.generators,clipboard:g.clipboard}))),zv,_t,Zi_modification),Mb=ya((l,g,b,C)=>{const E=Ja(l).rows,P=g.cells[0].column,X=Wi(g.clipboard,g.generators,E[g.cells[0].row]),se=xb(P,l,X,g.generators,b);return Qs(se,g.cells[0].row,g.cells[0].column)},ll(!0),_t,_t,Zi_modification),qv=ya((l,g,b,C)=>{const E=Ja(l).rows,P=g.cells[g.cells.length-1].column+g.cells[g.cells.length-1].colspan,X=Wi(g.clipboard,g.generators,E[g.cells[0].row]),se=xb(P,l,X,g.generators,b);return Qs(se,g.cells[0].row,g.cells[0].column)},ll(!1),_t,_t,Zi_modification),mh=ya((l,g,b,C)=>{const E=Ja(l).rows,P=g.cells[0].row,X=Wi(g.clipboard,g.generators,E[P]),se=wm(P,l,X,g.generators,b);return Qs(se,g.cells[0].row,g.cells[0].column)},vb,_t,_t,Zi_modification),eC=ya((l,g,b,C)=>{const E=Ja(l).rows,P=g.cells[g.cells.length-1].row+g.cells[g.cells.length-1].rowspan,X=Wi(g.clipboard,g.generators,E[g.cells[0].row]),se=wm(P,l,X,g.generators,b);return Qs(se,g.cells[0].row,g.cells[0].column)},vb,_t,_t,Zi_modification),Nb=(l,g)=>{const b=Pn_fromTable(l);return vm(b,g).bind(E=>{const P=E[E.length-1],W=E[0].column,X=P.column+P.colspan,se=so(Lt(b.all,fe=>bt(fe.cells,Me=>Me.column>=W&&Me.column<X)));return hb(se)}).getOr("")},Kv=(l,g)=>{const b=Pn_fromTable(l);return vm(b,g).bind(hb).getOr("")},Pd=(l,g)=>{const b=Pn_fromTable(l);return vm(b,g).bind(E=>{const P=E[E.length-1];return(l=>{const g=Lt(l,E=>Ow(E).type),b=An(g,"header"),C=An(g,"footer");if(!b&&!C)return Se.some("body");{const E=An(g,"body");return!b||E||C?b||E||!C?Se.none():Se.some("footer"):Se.some("header")}})(b.all.slice(E[0].row,P.row+P.rowspan))}).getOr("")},Nl=(l,g)=>l.dispatch("NewRow",{node:g}),Ra=(l,g)=>l.dispatch("NewCell",{node:g}),Sm=(l,g,b)=>{l.dispatch("TableModified",{...b,table:g})},gh={structure:!1,style:!0},Za={structure:!0,style:!1},tC={structure:!0,style:!0},Vp=(l,g)=>Cu(l)?Fi_percentageSize(g):El(l)?Fi_pixelSize(g):Fi_getTableSize(g),nC=(l,g,b)=>{const C=wi=>"table"===as(hp(wi)),W=um(l),X=kr(l)?_t:Tu,se=wi=>{switch(oh(l)){case"section":return kp_section();case"sectionCells":return kp_sectionCells();case"cells":return kp_cells();default:return((l,g)=>{switch((l=>Ao(l.all,g=>{const b=Ow(g);return"header"===b.type?Se.from(b.subType):Se.none()}))(Pn_fromTable(l)).getOr(g)){case"section":return ih();case"sectionCells":return Aw();case"cells":return fb()}})(wi,"section")}},Me=(wi,r2,y1,Wd)=>(lc,gx,hx=!1)=>{Od(lc);const fx=be.fromDom(l.getDoc()),px=Oa(y1,fx,W),gk={sizing:Vp(l,lc),resize:kr(l)?Cv():Sp(),section:se(lc)};return r2(lc)?wi(lc,gx,px,gk).bind(a2=>{g.refresh(lc.dom),U(a2.newRows,dl=>{Nl(l,dl.dom)}),U(a2.newCells,dl=>{Ra(l,dl.dom)});const bx=((wi,r2)=>r2.cursor.fold(()=>{const y1=Ba(wi);return No(y1).filter(Bo).map(Wd=>{b.clearSelectedCells(wi.dom);const lc=l.dom.createRng();return lc.selectNode(Wd.dom),l.selection.setRng(lc),Rs(Wd,"data-mce-selected","1"),lc})},y1=>{const Wd=(l=>pT(bT,l))(y1),lc=l.dom.createRng();return lc.setStart(Wd.element.dom,Wd.offset),lc.setEnd(Wd.element.dom,Wd.offset),l.selection.setRng(lc),b.clearSelectedCells(wi.dom),Se.some(lc)}))(lc,a2);return Bo(lc)&&(Od(lc),hx||Sm(l,lc.dom,Wd)),bx.map(dl=>({rng:dl,effect:Wd}))}):Se.none()};return{deleteRow:Me(sf,wi=>!C(l)||xv(wi).rows>1,_t,Za),deleteColumn:Me(Zv,wi=>!C(l)||xv(wi).columns>1,_t,Za),insertRowsBefore:Me(Ml,qe,_t,Za),insertRowsAfter:Me(Uv,qe,_t,Za),insertColumnsBefore:Me(Ip,qe,X,Za),insertColumnsAfter:Me(Lp,qe,X,Za),mergeCells:Me(Gv,qe,_t,Za),unmergeCells:Me(Db,qe,_t,Za),pasteColsBefore:Me(Mb,qe,_t,Za),pasteColsAfter:Me(qv,qe,_t,Za),pasteRowsBefore:Me(mh,qe,_t,Za),pasteRowsAfter:Me(eC,qe,_t,Za),pasteCells:Me(bg,qe,_t,tC),makeCellsHeader:Me(jv,qe,_t,Za),unmakeCellsHeader:Me(rf,qe,_t,Za),makeColumnsHeader:Me(Hp,qe,_t,Za),unmakeColumnsHeader:Me(dh,qe,_t,Za),makeRowsHeader:Me(Wv,qe,_t,Za),makeRowsBody:Me(IT,qe,_t,Za),makeRowsFooter:Me(Qw,qe,_t,Za),getTableRowType:Pd,getTableCellType:Kv,getTableColType:Nb}},Xv=(l,g,b)=>{const C=Ir(l,g,1);1===b||C<=1?ie(l,g):Rs(l,g,Math.min(b,C))},Jv=(l,g)=>b=>b.column+b.colspan-1>=l&&b.column<g,Tm=dg_generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),rC=(l,g,b)=>{const C=b.substring(0,b.length-l.length),E=parseFloat(C);return C===E.toString()?g(E):Tm.invalid(b)},vg={...Tm,from:l=>Ts(l,"%")?rC("%",Tm.percent,l):Ts(l,"px")?rC("px",Tm.pixels,l):Tm.invalid(l)},Pb=(l,g,b)=>{const C=vg.from(b),E=Ht(l,P=>"0px"===P)?((l,g)=>{const b=l.fold(()=>ve(""),C=>ve(C/g+"px"),()=>ve(100/g+"%"));return yn(g,b)})(C,l.length):((l,g,b)=>l.fold(()=>g,C=>((l,g,b)=>{const C=b/g;return Lt(l,E=>vg.from(E).fold(()=>E,W=>W*C+"px",W=>W/100*b+"px"))})(g,b,C),C=>((l,g)=>Lt(l,b=>vg.from(b).fold(()=>b,E=>E/g*100+"%",E=>E+"%")))(g,b)))(C,l,g);return iC(E)},km=(l,g)=>0===l.length?g:vn(l,(b,C)=>vg.from(C).fold(ve(0),Le,Le)+b,0),cC=(l,g)=>vg.from(l).fold(ve(l),b=>b+g+"px",b=>b+g+"%"),iC=l=>{if(0===l.length)return l;const g=vn(l,(C,E)=>{const P=vg.from(E).fold(()=>({value:E,remainder:0}),W=>((l,g)=>{const b=Math.floor(l);return{value:b+"px",remainder:l-b}})(W),W=>({value:W+"%",remainder:0}));return{output:[P.value].concat(C.output),remainder:C.remainder+P.remainder}},{output:[],remainder:0}),b=g.output;return b.slice(0,b.length-1).concat([cC(b[b.length-1],Math.round(g.remainder))])},lC=vg.from,fh=l=>lC(l).fold(ve("px"),ve("px"),ve("%")),Fb=(l,g,b)=>{const C=Pn_fromTable(l),E=C.all,P=Pn_justCells(C),W=Pn_justColumns(C);g.each(X=>{const se=fh(X),fe=me(l),Me=((l,g)=>ec(l,g,Ed,eh))(C,l),ft=Pb(Me,fe,X);Pn_hasColumns(C)?((l,g,b)=>{U(g,(C,E)=>{const P=km([l[E]],ki());js(C.element,"width",P+b)})})(ft,W,se):((l,g,b)=>{U(g,C=>{const E=l.slice(C.column,C.colspan+C.column),P=km(E,ki());js(C.element,"width",P+b)})})(ft,P,se),js(l,"width",X)}),b.each(X=>{const se=fh(X),fe=tg(l),Me=((l,g,b)=>th(l,g,b,Ni,eh))(C,l,Xg);((l,g,b,C)=>{U(b,E=>{const P=l.slice(E.row,E.rowspan+E.row),W=km(P,Oc());js(E.element,"height",W+C)}),U(g,(E,P)=>{js(E.element,"height",l[P])})})(Pb(Me,fe,X),E,P,se),js(l,"height",X)})},ed=l=>Qa(l).exists(g=>og.test(g)),Zp=l=>Qa(l).exists(g=>ip.test(g)),$b=l=>Qa(l).isNone(),ul=l=>{ie(l,"width")},Em=l=>{const g=ra(l);Fb(l,Se.some(g),Se.none()),ul(l)},Ib=l=>{const g=(l=>me(l)+"px")(l);Fb(l,Se.some(g),Se.none()),ul(l)},uC=l=>{ei(l,"width");const g=vl(l),b=g.length>0?g:Ba(l);U(b,C=>{ei(C,"width"),ul(C)}),ul(l)},ty={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},ny=(l,g,b,C)=>yn(l,E=>((l,g,b,C)=>{const E=be.fromTag("tr");for(let P=0;P<l;P++){const W=be.fromTag(C<g||P<b?"th":"td");P<b&&Rs(W,"scope","row"),C<g&&Rs(W,"scope","col"),is(W,be.fromTag("br")),is(E,W)}return E})(g,b,C,E)),oy=(l,g)=>{l.selection.select(g.dom,!0),l.selection.collapse(!0)},hC=(l,g,b,C,E)=>{const P=(l=>{const g=l.options,b=g.get("table_default_styles");return g.isSet("table_default_styles")?b:((l,g)=>xu(l)||!Hi(l)?g:El(l)?{...g,width:Li(l)}:{...g,width:"100%"})(l,b)})(l),W={styles:P,attributes:dm(l),colGroups:gp(l)};return l.undoManager.ignore(()=>{const X=((l,g,b,C,E,P=ty)=>{const W=be.fromTag("table"),X="cells"!==E;bd(W,P.styles),cs(W,P.attributes),P.colGroups&&is(W,(l=>{const g=be.fromTag("colgroup");return yn(l,()=>is(g,be.fromTag("col"))),g})(g));const se=Math.min(l,b);if(X&&b>0){const At=be.fromTag("thead");is(W,At);const Dt=ny(b,g,"sectionCells"===E?se:0,C);Cr(At,Dt)}const fe=be.fromTag("tbody");is(W,fe);const jt=ny(X?l-se:l,g,X?0:b,C);return Cr(fe,jt),W})(b,g,E,C,oh(l),W);Rs(X,"data-mce-id","__mce");const se=(l=>{const g=be.fromTag("div"),b=be.fromDom(l.dom.cloneNode(!0));return is(g,b),(l=>l.dom.innerHTML)(g)})(X);l.insertContent(se),l.addVisual()}),ue(hp(l),'table[data-mce-id="__mce"]').map(X=>(El(l)?Ib(X):xu(l)?uC(X):(Cu(l)||(l=>As(l)&&-1!==l.indexOf("%"))(P.width))&&Em(X),Od(X),ie(X,"data-mce-id"),((l,g)=>{U(Ms(g,"tr"),b=>{Nl(l,b.dom),U(Ms(b,"th,td"),C=>{Ra(l,C.dom)})})})(l,X),((l,g)=>{ue(g,"td,th").each(Vo(oy,l))})(l,X),X.dom)).getOrNull()};var jp=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Gp="x-tinymce/dom-table-",qp=Gp+"rows",yg=Gp+"columns",$d=l=>{const g=jp.FakeClipboardItem(l);jp.write([g])},cy=l=>{var g;const b=null!==(g=jp.read())&&void 0!==g?g:[];return Ao(b,C=>Se.from(C.getType(l)))},iy=l=>{cy(l).isSome()&&jp.clear()},ly=l=>{l.fold(uy,g=>$d({[qp]:g}))},fC=()=>cy(qp),uy=()=>iy(qp),dy=l=>{l.fold(pC,g=>$d({[yg]:g}))},cf=()=>cy(yg),pC=()=>iy(yg),my=l=>gT(_l(l),mm(l)).filter(pp),zT=(l,g)=>{const b=mm(l),P=Ie=>zc(Ie,b),W=Ie=>(l=>sc(_l(l),mm(l)).filter(pp))(l).bind(on=>P(on).map(zn=>Ie(zn,on))),Me=Ie=>{l.focus()},ft=(Ie,on=!1)=>W((zn,Co)=>{const pr=ig(zi(l),zn,Co);Ie(zn,pr,on).each(Me)}),jt=()=>W((Ie,on)=>((l,g,b)=>{const C=Pn_fromTable(l);return vm(C,g).bind(P=>{const W=ri(C,b,!1),se=Ja(W).rows.slice(P[0].row,P[P.length-1].row+P[P.length-1].rowspan),fe=jn(se,ft=>{const jt=bt(ft.cells,At=>!At.isLocked);return jt.length>0?[{...ft,cells:jt}]:[]}),Me=pb(fe);return bs(Me.length>0,Me)}).map(P=>(l=>Lt(l,g=>{const b=Kr(g.element);return U(g.cells,C=>{const E=Ic(C.element);Ep(E,"colspan",C.colspan,1),Ep(E,"rowspan",C.rowspan,1),is(b,E)}),b}))(P))})(Ie,ig(zi(l),Ie,on),Oa(_t,be.fromDom(l.getDoc()),Se.none()))),At=()=>W((Ie,on)=>((l,g)=>{const b=Pn_fromTable(l);return ym(b,g).map(E=>{const P=E[E.length-1],W=E[0].column,X=P.column+P.colspan,se=((l,g,b)=>{if(Pn_hasColumns(l)){const C=bt(Pn_justColumns(l),Jv(g,b)),E=Lt(C,W=>{const X=Ic(W.element);return Xv(X,"span",b-g),X}),P=be.fromTag("colgroup");return Cr(P,E),[P]}return[]})(b,W,X),fe=((l,g,b)=>Lt(l.all,C=>{const E=bt(C.cells,Jv(g,b)),P=Lt(E,X=>{const se=Ic(X.element);return Xv(se,"colspan",b-g),se}),W=be.fromTag("tr");return Cr(W,P),W}))(b,W,X);return[...se,...fe]})})(Ie,ig(zi(l),Ie,on))),it=(Ie,on)=>on().each(zn=>{const Co=Lt(zn,pr=>Ic(pr));W((pr,wa)=>{const Ca=oc(be.fromDom(l.getDoc())),ii=((l,g,b,C)=>({selection:fm(l),clipboard:b,generators:C}))(zi(l),0,Co,Ca);Ie(pr,ii).each(Me)})}),Dt=Ie=>(on,zn)=>((l,g)=>Ye(l,g)?Se.from(l[g]):Se.none())(zn,"type").each(Co=>{ft(Ie(Co),zn.no_events)});zo({mceTableSplitCells:()=>ft(g.unmergeCells),mceTableMergeCells:()=>ft(g.mergeCells),mceTableInsertRowBefore:()=>ft(g.insertRowsBefore),mceTableInsertRowAfter:()=>ft(g.insertRowsAfter),mceTableInsertColBefore:()=>ft(g.insertColumnsBefore),mceTableInsertColAfter:()=>ft(g.insertColumnsAfter),mceTableDeleteCol:()=>ft(g.deleteColumn),mceTableDeleteRow:()=>ft(g.deleteRow),mceTableCutCol:()=>At().each(Ie=>{dy(Ie),ft(g.deleteColumn)}),mceTableCutRow:()=>jt().each(Ie=>{ly(Ie),ft(g.deleteRow)}),mceTableCopyCol:()=>At().each(Ie=>dy(Ie)),mceTableCopyRow:()=>jt().each(Ie=>ly(Ie)),mceTablePasteColBefore:()=>it(g.pasteColsBefore,cf),mceTablePasteColAfter:()=>it(g.pasteColsAfter,cf),mceTablePasteRowBefore:()=>it(g.pasteRowsBefore,fC),mceTablePasteRowAfter:()=>it(g.pasteRowsAfter,fC),mceTableDelete:()=>my(l).each(Ie=>{zc(Ie,b).filter(re(b)).each(on=>{const zn=be.fromText("");if(ga(on,zn),Us(on),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Co=l.dom.createRng();Co.setStart(zn.dom,0),Co.setEnd(zn.dom,0),l.selection.setRng(Co),l.nodeChanged()}})}),mceTableCellToggleClass:(Ie,on)=>{W(zn=>{const Co=zi(l),wa=Ht(Co,Ca=>l.formatter.match("tablecellclass",{value:on},Ca.dom))?l.formatter.remove:l.formatter.apply;U(Co,Ca=>wa("tablecellclass",{value:on},Ca.dom)),Sm(l,zn.dom,gh)})},mceTableToggleClass:(Ie,on)=>{W(zn=>{l.formatter.toggle("tableclass",{value:on},zn.dom),Sm(l,zn.dom,gh)})},mceTableToggleCaption:()=>{my(l).each(Ie=>{zc(Ie,b).each(on=>{F(on,"caption").fold(()=>{const zn=be.fromTag("caption");is(zn,be.fromText("Caption")),((l,g,b)=>{Wo(l,0).fold(()=>{is(l,g)},C=>{ma(C,g)})})(on,zn),l.selection.setCursorLocation(zn.dom,0)},zn=>{ar("caption")(Ie)&&at("td",on).each(Co=>l.selection.setCursorLocation(Co.dom,0)),Us(zn)}),Sm(l,on.dom,Za)})})},mceTableSizingMode:(Ie,on)=>(Ie=>my(l).each(on=>{xu(l)||El(l)||Cu(l)||zc(on,b).each(Co=>{"relative"!==Ie||ed(Co)?"fixed"!==Ie||Zp(Co)?"responsive"===Ie&&!$b(Co)&&uC(Co):Ib(Co):Em(Co),Od(Co),Sm(l,Co.dom,Za)})}))(on),mceTableCellType:Dt(Ie=>"th"===Ie?g.makeCellsHeader:g.unmakeCellsHeader),mceTableColType:Dt(Ie=>"th"===Ie?g.makeColumnsHeader:g.unmakeColumnsHeader),mceTableRowType:Dt(Ie=>{switch(Ie){case"header":return g.makeRowsHeader;case"footer":return g.makeRowsFooter;default:return g.makeRowsBody}})},(Ie,on)=>l.addCommand(on,Ie)),l.addCommand("mceInsertTable",(Ie,on)=>{((l,g,b,C={})=>{const E=P=>Wn(P)&&P>0;if(E(g)&&E(b))return hC(l,b,g,C.headerColumns||0,C.headerRows||0);console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(l,on.rows,on.columns,on.options)}),l.addCommand("mceTableApplyCellStyle",(Ie,on)=>{const zn=wa=>"tablecell"+wa.toLowerCase().replace("-","");if(!bn(on))return;const Co=bt(zi(l),pp);if(0===Co.length)return;const pr=((l,g)=>{const b={};return((l,g,b,C)=>{zo(l,(E,P)=>{(g(E,P)?b:C)(E,P)})})(l,g,(l=>(g,b)=>{l[b]=g})(b),_t),b})(on,(wa,Ca)=>l.formatter.has(zn(Ca))&&As(wa));(l=>{for(const g in l)if(Qr.call(l,g))return!1;return!0})(pr)||(zo(pr,(wa,Ca)=>{const ii=zn(Ca);U(Co,_f=>{""===wa?l.formatter.remove(ii,{value:null},_f.dom,!0):l.formatter.apply(ii,{value:wa},_f.dom)})}),P(Co[0]).each(wa=>Sm(l,wa.dom,gh)))})},Vb=dg_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ci={before:Vb.before,on:Vb.on,after:Vb.after,cata:(l,g,b,C)=>l.fold(g,b,C),getStart:l=>l.fold(Le,Le,Le)},ph_create=(l,g)=>({selection:l,kill:g}),wC=(l,g)=>{const b=l.document.createRange();return b.selectNode(g.dom),b},bh=(l,g)=>{const b=l.document.createRange();return hy(b,g),b},hy=(l,g)=>l.selectNodeContents(g.dom),fy=(l,g,b)=>{const C=l.document.createRange();return((l,g)=>{g.fold(b=>{l.setStartBefore(b.dom)},(b,C)=>{l.setStart(b.dom,C)},b=>{l.setStartAfter(b.dom)})})(C,g),((l,g)=>{g.fold(b=>{l.setEndBefore(b.dom)},(b,C)=>{l.setEnd(b.dom,C)},b=>{l.setEndAfter(b.dom)})})(C,b),C},zb=(l,g,b,C,E)=>{const P=l.document.createRange();return P.setStart(g.dom,b),P.setEnd(C.dom,E),P},xC=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),vh=dg_generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),py=(l,g,b)=>g(be.fromDom(b.startContainer),b.startOffset,be.fromDom(b.endContainer),b.endOffset),Ub=(l,g)=>{const b=((l,g)=>g.match({domRange:b=>({ltr:ve(b),rtl:Se.none}),relative:(b,C)=>({ltr:tl(()=>fy(l,b,C)),rtl:tl(()=>Se.some(fy(l,C,b)))}),exact:(b,C,E,P)=>({ltr:tl(()=>zb(l,b,C,E,P)),rtl:tl(()=>Se.some(zb(l,E,P,b,C)))})}))(l,g);return((l,g)=>{const b=g.ltr();return b.collapsed?g.rtl().filter(E=>!1===E.collapsed).map(E=>vh.rtl(be.fromDom(E.endContainer),E.endOffset,be.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>py(0,vh.ltr,b)):py(0,vh.ltr,b)})(0,b)},Yp=(l,g)=>Ub(l,g).match({ltr:(C,E,P,W)=>{const X=l.document.createRange();return X.setStart(C.dom,E),X.setEnd(P.dom,W),X},rtl:(C,E,P,W)=>{const X=l.document.createRange();return X.setStart(P.dom,W),X.setEnd(C.dom,E),X}}),wh_create=(l,g,b,C)=>({start:l,soffset:g,finish:b,foffset:C}),SC_create=(l,g,b,C)=>({start:ci.on(l,g),finish:ci.on(b,C)}),by=(l,g)=>{const b=Yp(l,g);return wh_create(be.fromDom(b.startContainer),b.startOffset,be.fromDom(b.endContainer),b.endOffset)},Om=SC_create,Xp=(l,g,b,C,E)=>ht(b,C)?Se.none():eu(b,C,g).bind(P=>{const W=P.boxes.getOr([]);return W.length>1?(E(l,W,P.start,P.finish),Se.some(ph_create(Se.some(Om(b,0,b,Qo(b))),!0))):Se.none()}),Jp=(l,g)=>({item:l,mode:g}),vy=(l,g,b,C=xh)=>l.property().parent(g).map(E=>Jp(E,C)),xh=(l,g,b,C=Id)=>b.sibling(l,g).map(E=>Jp(E,C)),Id=(l,g,b,C=Id)=>{const E=l.property().children(g);return b.first(E).map(W=>Jp(W,C))},TC=[{current:vy,next:xh,fallback:Se.none()},{current:xh,next:Id,fallback:Se.some(vy)},{current:Id,next:Id,fallback:Se.some(xh)}],jb=(l,g,b,C,E=TC)=>ln(E,W=>W.current===b).bind(W=>W.current(l,g,C,W.next).orThunk(()=>W.fallback.bind(X=>jb(l,g,X,C)))),qb=(l,g,b,C,E,P)=>jb(l,g,C,E).bind(X=>P(X.item)?Se.none():b(X.item)?Se.some(X.item):qb(l,X.item,b,X.mode,E,P)),Kb=l=>g=>0===l.property().children(g).length,OC=(l,g,b,C)=>qb(l,g,b,xh,{sibling:(b,C)=>b.query().prevSibling(C),first:b=>b.length>0?Se.some(b[b.length-1]):Se.none()},C),yy=(l,g,b,C)=>qb(l,g,b,xh,{sibling:(b,C)=>b.query().nextSibling(C),first:b=>b.length>0?Se.some(b[0]):Se.none()},C),Yb=ut(),wy=(l,g)=>((l,g,b)=>OC(l,g,Kb(l),b))(Yb,l,g),Cy=(l,g)=>((l,g,b)=>yy(l,g,Kb(l),b))(Yb,l,g),td=dg_generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),qT=l=>Pe(l,"tr"),uf={...td,verify:(l,g,b,C,E,P,W)=>Pe(C,"td,th",W).bind(X=>Pe(g,"td,th",W).map(se=>ht(X,se)?ht(C,X)&&Qo(X)===E?P(se):td.none("in same cell"):lr(qT,[X,se]).fold(()=>((l,g,b)=>{const C=l.getRect(g),E=l.getRect(b);return E.right>C.left&&E.left<C.right})(l,se,X)?td.success():P(se),fe=>P(se)))).getOr(td.none("default")),cata:(l,g,b,C,E)=>l.fold(g,b,C,E)},Bl=ar("br"),wg=(l,g,b)=>g(l,b).bind(C=>qr(C)&&0===Fn(C).trim().length?wg(C,g,b):Se.some(C)),DC=(l,g,b,C)=>((l,g)=>Wo(l,g).filter(Bl).orThunk(()=>Wo(l,g-1).filter(Bl)))(g,b).bind(E=>C.traverse(E).fold(()=>wg(E,C.gather,l).map(C.relative),P=>(l=>To(l).bind(g=>{const b=co(g);return((l,g)=>Je(l,Vo(ht,g)))(b,l).map(C=>((l,g,b,C)=>({parent:l,children:g,element:b,index:C}))(g,b,l,C))}))(P).map(W=>ci.on(W.parent,W.index)))),n1=(l,g)=>({left:l.left,top:l.top+g,right:l.right,bottom:l.bottom+g}),nd=(l,g)=>({left:l.left,top:l.top-g,right:l.right,bottom:l.bottom-g}),Ld=(l,g,b)=>({left:l.left+g,top:l.top+b,right:l.right+g,bottom:l.bottom+b}),Cg=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),df=(l,g)=>Se.some(l.getRect(g)),Xb=(l,g,b)=>zs(g)?df(l,g).map(Cg):qr(g)?((l,g,b)=>b>=0&&b<Qo(g)?l.getRangedRect(g,b,g,b+1):b>0?l.getRangedRect(g,b-1,g,b):Se.none())(l,g,b).map(Cg):Se.none(),_y=(l,g)=>zs(g)?df(l,g).map(Cg):qr(g)?l.getRangedRect(g,0,g,Qo(g)).map(Cg):Se.none(),Ud=dg_generate([{none:[]},{retry:["caret"]}]),Ay=(l,g,b)=>ha(g,Bp).fold(ko,C=>_y(l,C).exists(E=>((l,g)=>l.left<g.left||Math.abs(g.right-l.left)<1||l.left>g.right)(b,E))),Ry={point:l=>l.top,adjuster:(l,g,b,C,E)=>{const P=nd(E,5);return Math.abs(b.top-C.top)<1||b.bottom<E.top?Ud.retry(P):b.bottom===E.top?Ud.retry(nd(E,1)):Ay(l,g,E)?Ud.retry(Ld(P,5,0)):Ud.none()},move:nd,gather:wy},XT={point:l=>l.bottom,adjuster:(l,g,b,C,E)=>{const P=n1(E,5);return Math.abs(b.bottom-C.bottom)<1||b.top>E.bottom?Ud.retry(P):b.top===E.bottom?Ud.retry(n1(E,1)):Ay(l,g,E)?Ud.retry(Ld(P,5,0)):Ud.none()},move:n1,gather:Cy},Jb=(l,g,b,C,E)=>0===E?Se.some(C):((l,g,b)=>l.elementFromPoint(g,b).filter(C=>"table"===as(C)).isSome())(l,C.left,g.point(C))?((l,g,b,C,E)=>Jb(l,g,b,g.move(C,5),E))(l,g,b,C,E-1):l.situsFromPoint(C.left,g.point(C)).bind(P=>P.start.fold(Se.none,W=>_y(l,W).bind(X=>g.adjuster(l,W,X,b,C).fold(Se.none,se=>Jb(l,g,b,se,E-1))).orThunk(()=>Se.some(C)),Se.none)),Ny=(l,g,b)=>{const C=l.move(b,5),E=Jb(g,l,b,C,100).getOr(C);return((l,g,b)=>l.point(g)>b.getInnerHeight()?Se.some(l.point(g)-b.getInnerHeight()):l.point(g)<0?Se.some(-l.point(g)):Se.none())(l,E,g).fold(()=>g.situsFromPoint(E.left,l.point(E)),P=>(g.scrollBy(0,P),g.situsFromPoint(E.left,l.point(E)-P)))},Qb={tryUp:Vo(Ny,Ry),tryDown:Vo(Ny,XT),getJumpSize:ve(5)},BC=(l,g,b)=>l.getSelection().bind(C=>((l,g,b,C)=>(Bl(g)?((l,g,b)=>b.traverse(g).orThunk(()=>wg(g,b.gather,l)).map(b.relative))(l,g,C):DC(l,g,b,C)).map(P=>({start:P,finish:P})))(g,C.finish,C.foffset,b).fold(()=>Se.some(bm(C.finish,C.foffset)),E=>{const P=l.fromSitus(E);return(l=>uf.cata(l,g=>Se.none(),()=>Se.none(),g=>Se.some(bm(g,0)),g=>Se.some(bm(g,Qo(g)))))(uf.verify(l,C.finish,C.foffset,P.finish,P.foffset,b.failure,g))})),mf=(l,g,b,C,E,P)=>0===P?Se.none():Rm(l,g,b,C,E).bind(W=>{const X=l.fromSitus(W),se=uf.verify(l,b,C,X.finish,X.foffset,E.failure,g);return uf.cata(se,()=>Se.none(),()=>Se.some(W),fe=>ht(b,fe)&&0===C?gf(l,b,C,nd,E):mf(l,g,fe,0,E,P-1),fe=>ht(b,fe)&&C===Qo(fe)?gf(l,b,C,n1,E):mf(l,g,fe,Qo(fe),E,P-1))}),gf=(l,g,b,C,E)=>Xb(l,g,b).bind(P=>Io(l,E,C(P,Qb.getJumpSize()))),Io=(l,g,b)=>{const C=yt().browser;return C.isChromium()||C.isSafari()||C.isFirefox()?g.retry(l,b):Se.none()},Rm=(l,g,b,C,E)=>Xb(l,b,C).bind(P=>Io(l,E,P)),By=(l,g,b,C,E)=>Pe(C,"td,th",g).bind(P=>Pe(P,"table",g).bind(W=>((l,g)=>((l,g,b)=>Ns(l,g,void 0).isSome())(l,b=>To(b).exists(C=>ht(C,g))))(E,W)?((l,g,b)=>BC(l,g,b).bind(C=>mf(l,g,C.element,C.offset,b,20).map(l.fromSitus)))(l,g,b).bind(X=>Pe(X.finish,"td,th",g).map(se=>({start:P,finish:se,range:X}))):Se.none())),t0=(l,g,b,C,E,P)=>P(C,g).orThunk(()=>By(l,g,b,C,E).map(W=>{const X=W.range;return ph_create(Se.some(Om(X.start,X.soffset,X.finish,X.foffset)),!0)})),PC=(l,g)=>Pe(l,"tr",g).bind(b=>Pe(b,"table",g).bind(C=>{const E=Ms(C,"tr");return ht(b,E[0])?((l,g,b)=>OC(Yb,l,P=>Gu(P).isSome(),b))(C,0,g).map(P=>{const W=Qo(P);return ph_create(Se.some(Om(P,W,P,W)),!0)}):Se.none()})),hf=(l,g)=>Pe(l,"tr",g).bind(b=>Pe(b,"table",g).bind(C=>{const E=Ms(C,"tr");return ht(b,E[E.length-1])?((l,g,b)=>yy(Yb,l,P=>vs(P).isSome(),b))(C,0,g).map(P=>ph_create(Se.some(Om(P,0,P,0)),!0)):Se.none()})),ff=(l,g,b,C,E,P,W)=>By(l,b,C,E,P).bind(X=>Xp(g,b,X.start,X.finish,W)),pf=l=>{let g=l;return{get:()=>g,set:E=>{g=E}}},n0=()=>{const l=(l=>{const g=pf(Se.none()),b=()=>g.get().each(l);return{clear:()=>{b(),g.set(Se.none())},isSet:()=>g.get().isSome(),get:()=>g.get(),set:X=>{b(),g.set(Se.some(X))}}})(_t);return{...l,on:b=>l.get().each(b)}},FC=(l,g)=>Pe(l,"td,th",g),QT=l=>ws(l).exists(al),$C={traverse:Ka,gather:Cy,relative:ci.before,retry:Qb.tryDown,failure:uf.failedDown},Py={traverse:Ta,gather:wy,relative:ci.before,retry:Qb.tryUp,failure:uf.failedUp},Ou=l=>g=>g===l,o0=Ou(38),Dm=Ou(40),Th=l=>l>=37&&l<=40,Mm={isBackward:Ou(37),isForward:Ou(39)},ru={isBackward:Ou(39),isForward:Ou(37)},s1=dg_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),xg={domRange:s1.domRange,relative:s1.relative,exact:s1.exact,exactFromRange:l=>s1.exact(l.start,l.soffset,l.finish,l.foffset),getWin:l=>{const g=(l=>l.match({domRange:g=>be.fromDom(g.startContainer),relative:(g,b)=>ci.getStart(g),exact:(g,b,C,E)=>g}))(l);return(l=>be.fromDom(rn(l).dom.defaultView))(g)},range:wh_create},Wt=document.caretPositionFromPoint?(l,g,b)=>{var C,E;return Se.from(null===(E=(C=l.dom).caretPositionFromPoint)||void 0===E?void 0:E.call(C,g,b)).bind(P=>{if(null===P.offsetNode)return Se.none();const W=l.dom.createRange();return W.setStart(P.offsetNode,P.offset),W.collapse(),Se.some(W)})}:document.caretRangeFromPoint?(l,g,b)=>{var C,E;return Se.from(null===(E=(C=l.dom).caretRangeFromPoint)||void 0===E?void 0:E.call(C,g,b))}:Se.none,Sg=(l,g)=>{const b=as(l);return"input"===b?ci.after(l):An(["br","img"],b)?0===g?ci.before(l):ci.after(l):ci.on(l,g)},kh=l=>Se.from(l.getSelection()),UC=(l,g)=>{kh(l).each(b=>{b.removeAllRanges(),b.addRange(g)})},r0=(l,g,b,C,E)=>{const P=zb(l,g,b,C,E);UC(l,P)},Hy=(l,g)=>Ub(l,g).match({ltr:(b,C,E,P)=>{r0(l,b,C,E,P)},rtl:(b,C,E,P)=>{kh(l).each(W=>{if(W.setBaseAndExtent)W.setBaseAndExtent(b.dom,C,E.dom,P);else if(W.extend)try{((l,g,b,C,E,P)=>{g.collapse(b.dom,C),g.extend(E.dom,P)})(0,W,b,C,E,P)}catch{r0(l,E,P,b,C)}else r0(l,E,P,b,C)})}}),Vy=(l,g,b,C,E)=>{const P=((l,g,b,C)=>{const E=Sg(l,g),P=Sg(b,C);return xg.relative(E,P)})(g,b,C,E);Hy(l,P)},ZC=(l,g,b)=>{const C=((l,g)=>{const b=l.fold(ci.before,Sg,ci.after),C=g.fold(ci.before,Sg,ci.after);return xg.relative(b,C)})(g,b);Hy(l,C)},a1=l=>{if(l.rangeCount>0){const g=l.getRangeAt(0),b=l.getRangeAt(l.rangeCount-1);return Se.some(wh_create(be.fromDom(g.startContainer),g.startOffset,be.fromDom(b.endContainer),b.endOffset))}return Se.none()},nk=l=>{if(null===l.anchorNode||null===l.focusNode)return a1(l);{const g=be.fromDom(l.anchorNode),b=be.fromDom(l.focusNode);return((l,g,b,C)=>{const E=((l,g,b,C)=>{const P=sn(l).dom.createRange();return P.setStart(l.dom,g),P.setEnd(b.dom,C),P})(l,g,b,C),P=ht(l,b)&&g===C;return E.collapsed&&!P})(g,l.anchorOffset,b,l.focusOffset)?Se.some(wh_create(g,l.anchorOffset,b,l.focusOffset)):a1(l)}},c0=(l,g,b=!0)=>{const E=(b?bh:wC)(l,g);UC(l,E)},Tg=l=>(l=>kh(l).filter(g=>g.rangeCount>0).bind(nk))(l).map(g=>xg.exact(g.start,g.soffset,g.finish,g.foffset)),Nm=l=>({elementFromPoint:(Ie,on)=>be.fromPoint(be.fromDom(l.document),Ie,on),getRect:Ie=>Ie.dom.getBoundingClientRect(),getRangedRect:(Ie,on,zn,Co)=>{const pr=xg.exact(Ie,on,zn,Co);return((l,g)=>(l=>{const g=l.getClientRects(),b=g.length>0?g[0]:l.getBoundingClientRect();return b.width>0||b.height>0?Se.some(b).map(xC):Se.none()})(Yp(l,g)))(l,pr)},getSelection:()=>Tg(l).map(Ie=>by(l,Ie)),fromSitus:Ie=>{const on=xg.relative(Ie.start,Ie.finish);return by(l,on)},situsFromPoint:(Ie,on)=>((l,g,b)=>((l,g,b)=>{const C=be.fromDom(l.document);return Wt(C,g,b).map(E=>wh_create(be.fromDom(E.startContainer),E.startOffset,be.fromDom(E.endContainer),E.endOffset))})(l,g,b))(l,Ie,on).map(zn=>SC_create(zn.start,zn.soffset,zn.finish,zn.foffset)),clearSelection:()=>{(l=>{kh(l).each(g=>g.removeAllRanges())})(l)},collapseSelection:(Ie=!1)=>{Tg(l).each(on=>on.fold(zn=>zn.collapse(Ie),(zn,Co)=>{const pr=Ie?zn:Co;ZC(l,pr,pr)},(zn,Co,pr,wa)=>{const Ca=Ie?zn:pr,ii=Ie?Co:wa;Vy(l,Ca,ii,Ca,ii)}))},setSelection:Ie=>{Vy(l,Ie.start,Ie.soffset,Ie.finish,Ie.foffset)},setRelativeSelection:(Ie,on)=>{ZC(l,Ie,on)},selectNode:Ie=>{c0(l,Ie,!1)},selectContents:Ie=>{c0(l,Ie)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>(l=>{const g=void 0!==l?l.dom:document;return wl(g.body.scrollLeft||g.documentElement.scrollLeft,g.body.scrollTop||g.documentElement.scrollTop)})(be.fromDom(l.document)).top,scrollBy:(Ie,on)=>{((l,g,b)=>{const E=(void 0!==b?b.dom:document).defaultView;E&&E.scrollBy(l,g)})(Ie,on,be.fromDom(l.document))}}),Bm=(l,g)=>({rows:l,cols:g}),d0=l=>ha(l,rr).exists(al),m0=(l,g)=>d0(l)||d0(g),Eh=l=>void 0!==l.dom.classList,Pl=(l,g)=>((l,g,b)=>{const E=((l,g)=>{const b=Ss(l,g);return void 0===b||""===b?[]:b.split(" ")})(l,g).concat([b]);return Rs(l,g,E.join(" ")),!0})(l,"class",g),$l=(l,g)=>{Eh(l)?l.dom.classList.add(g):Pl(l,g)},_h=(l,g)=>Eh(l)&&l.dom.classList.contains(g),Wy=()=>({tag:"none"}),$s=l=>({tag:"multiple",elements:l}),Zd=l=>({tag:"single",element:l}),cu=l=>{const g=be.fromDom((l=>{if(ns()&&Mo(l.target)){const g=be.fromDom(l.target);if(zs(g)&&(l=>Mo(l.dom.shadowRoot))(g)&&l.composed&&l.composedPath){const b=l.composedPath();if(b)return No(b)}}return Se.from(l.target)})(l).getOr(l.target)),b=()=>l.stopPropagation(),C=()=>l.preventDefault(),E=((l,g)=>(...b)=>l(g.apply(null,b)))(C,b);return((l,g,b,C,E,P,W)=>({target:l,x:g,y:b,stop:C,prevent:E,kill:P,raw:W}))(g,l.clientX,l.clientY,b,C,E,l)},qC=(l,g,b,C)=>{l.dom.removeEventListener(g,b,C)},d1=qe,kg=(l,g,b)=>((l,g,b,C)=>((l,g,b,C,E)=>{const P=((l,g)=>b=>{l(b)&&g(cu(b))})(b,C);return l.dom.addEventListener(g,P,E),{unbind:Vo(qC,l,g,P,E)}})(l,g,b,C,!1))(l,g,d1,b),Eg=cu,p0=l=>!_h(be.fromDom(l.target),"ephox-snooker-resizer-bar"),KC=(l,g)=>{const b=((l,g,b)=>({get:()=>yw(l(),b).fold(()=>g().fold(Wy,Zd),$s)}))(()=>be.fromDom(l.getBody()),()=>sc(_l(l),mm(l)),pm.selectedSelector),P=((l,g,b)=>{const C=se=>{ie(se,l.selected),ie(se,l.firstSelected),ie(se,l.lastSelected)},E=se=>{Rs(se,l.selected,"1")},P=se=>{W(se),b()},W=se=>{const fe=Ms(se,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);U(fe,C)};return{clearBeforeUpdate:W,clear:P,selectRange:(se,fe,Me,ft)=>{P(se),U(fe,E),Rs(Me,l.firstSelected,"1"),Rs(ft,l.lastSelected,"1"),g(fe,Me,ft)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}})(pm,(se,fe,Me)=>{zc(fe).each(jt=>{const At=um(l),it=Oa(_t,be.fromDom(l.getDoc()),At),Ie=((l,g,b)=>{const C=Pn_fromTable(l);return vm(C,g).map(P=>{const W=ri(C,b,!1),{rows:X}=Ja(W),se=((l,g)=>{const b=l.slice(0,g[g.length-1].row+1),C=pb(b);return jn(C,E=>{const P=E.cells.slice(0,g[g.length-1].column+1);return Lt(P,W=>W.element)})})(X,P),fe=((l,g)=>{const b=l.slice(g[0].row+g[0].rowspan-1,l.length),C=pb(b);return jn(C,E=>{const P=E.cells.slice(g[0].column+g[0].colspan-1,E.cells.length);return Lt(P,W=>W.element)})})(X,P);return{upOrLeftCells:se,downOrRightCells:fe}})})(jt,{selection:zi(l)},it);((l,g,b,C,E)=>{l.dispatch("TableSelectionChange",{cells:g,start:b,finish:C,otherCells:E})})(l,se,fe,Me,Ie)})},()=>(l=>{l.dispatch("TableSelectionClear")})(l));return l.on("init",se=>{const fe=l.getWin(),Me=hp(l),ft=mm(l),At=((l,g,b,C)=>{const P=((l,g,b,C)=>{const E=n0(),P=E.clear,W=Me=>{E.on(ft=>{C.clearBeforeUpdate(g),FC(Me.target,b).each(jt=>{eu(ft,jt,b).each(At=>{const it=At.boxes.getOr([]);if(1===it.length){const Dt=it[0],Ie="false"===hw(Dt),on=ot(rh(Me.target),Dt,ht);Ie&&on&&(C.selectRange(g,it,Dt,Dt),l.selectContents(Dt))}else it.length>1&&(C.selectRange(g,it,At.start,At.finish),l.selectContents(jt))})})})};return{clearstate:P,mousedown:Me=>{C.clear(g),FC(Me.target,b).filter(QT).each(E.set)},mouseover:Me=>{W(Me)},mouseup:Me=>{W(Me),P()}}})(Nm(l),g,b,C);return{clearstate:P.clearstate,mousedown:P.mousedown,mouseover:P.mouseover,mouseup:P.mouseup}})(fe,Me,ft,P),it=((l,g,b,C)=>{const E=Nm(l),P=()=>(C.clear(g),Se.none());return{keydown:(se,fe,Me,ft,jt,At)=>{const it=se.raw,Dt=it.which,Ie=!0===it.shiftKey;return wp(g,C.selectedSelector).fold(()=>(Th(Dt)&&!Ie&&C.clearBeforeUpdate(g),Th(Dt)&&Ie&&!m0(fe,ft)?Se.none:Dm(Dt)&&Ie?Vo(ff,E,g,b,$C,ft,fe,C.selectRange):o0(Dt)&&Ie?Vo(ff,E,g,b,Py,ft,fe,C.selectRange):Dm(Dt)?Vo(t0,E,b,$C,ft,fe,hf):o0(Dt)?Vo(t0,E,b,Py,ft,fe,PC):Se.none),zn=>{const Co=pr=>()=>Ao(pr,Ca=>((l,g,b,C,E)=>Rd(C,l,g,E.firstSelectedSelector,E.lastSelectedSelector).map(W=>(E.clearBeforeUpdate(b),E.selectRange(b,W.boxes,W.start,W.finish),W.boxes)))(Ca.rows,Ca.cols,g,zn,C)).fold(()=>cg(g,C.firstSelectedSelector,C.lastSelectedSelector).map(Ca=>{const ii=Dm(Dt)||At.isForward(Dt)?ci.after:ci.before;return E.setRelativeSelection(ci.on(Ca.first,0),ii(Ca.table)),C.clear(g),ph_create(Se.none(),!0)}),Ca=>Se.some(ph_create(Se.none(),!0)));return Th(Dt)&&Ie&&!m0(fe,ft)?Se.none:Dm(Dt)&&Ie?Co([Bm(1,0)]):o0(Dt)&&Ie?Co([Bm(-1,0)]):At.isBackward(Dt)&&Ie?Co([Bm(0,-1),Bm(-1,0)]):At.isForward(Dt)&&Ie?Co([Bm(0,1),Bm(1,0)]):Th(Dt)&&!Ie?P:Se.none})()},keyup:(se,fe,Me,ft,jt)=>wp(g,C.selectedSelector).fold(()=>{const At=se.raw;return!0===At.shiftKey&&Th(At.which)&&m0(fe,ft)?((l,g,b,C,E,P,W)=>ht(b,E)&&C===P?Se.none():Pe(b,"td,th",g).bind(X=>Pe(E,"td,th",g).bind(se=>Xp(l,g,X,se,W))))(g,b,fe,Me,ft,jt,C.selectRange):Se.none()},Se.none)}})(fe,Me,ft,P),Dt=((l,g,b,C)=>{const E=Nm(l);return(P,W)=>{C.clearBeforeUpdate(g),eu(P,W,b).each(X=>{const se=X.boxes.getOr([]);C.selectRange(g,se,X.start,X.finish),E.selectContents(W),E.collapseSelection()})}})(fe,Me,ft,P);l.on("TableSelectorChange",Bs=>Dt(Bs.start,Bs.finish));const on=(Bs,wc)=>{!(Bs=>!0===Bs.raw.shiftKey)(Bs)||(wc.kill&&Bs.kill(),wc.selection.each(yi=>{const Ru=xg.relative(yi.start,yi.finish),lu=Yp(fe,Ru);l.selection.setRng(lu)}))},pr=Bs=>0===Bs.button,Of=(()=>{const Bs=pf(be.fromDom(Me)),wc=pf(0);return{touchEnd:Ru=>{const lu=be.fromDom(Ru.target);if(ar("td")(lu)||ar("th")(lu)){const Af=Bs.get(),wi=wc.get();ht(Af,lu)&&Ru.timeStamp-wi<300&&(Ru.preventDefault(),Dt(lu,lu))}Bs.set(lu),wc.set(Ru.timeStamp)}}})();l.on("dragstart",Bs=>{At.clearstate()}),l.on("mousedown",Bs=>{pr(Bs)&&p0(Bs)&&At.mousedown(Eg(Bs))}),l.on("mouseover",Bs=>{(Bs=>void 0===Bs.buttons||0!=(1&Bs.buttons))(Bs)&&p0(Bs)&&At.mouseover(Eg(Bs))}),l.on("mouseup",Bs=>{pr(Bs)&&p0(Bs)&&At.mouseup(Eg(Bs))}),l.on("touchend",Of.touchEnd),l.on("keyup",Bs=>{const wc=Eg(Bs);if(wc.raw.shiftKey&&Th(wc.raw.which)){const yi=l.selection.getRng(),Ru=be.fromDom(yi.startContainer),lu=be.fromDom(yi.endContainer);it.keyup(wc,Ru,yi.startOffset,lu,yi.endOffset).each(Af=>{on(wc,Af)})}}),l.on("keydown",Bs=>{const wc=Eg(Bs);g.hide();const yi=l.selection.getRng(),Ru=be.fromDom(yi.startContainer),lu=be.fromDom(yi.endContainer),Af=am(Mm,ru)(be.fromDom(l.selection.getStart()));it.keydown(wc,Ru,yi.startOffset,lu,yi.endOffset,Af).each(wi=>{on(wc,wi)}),g.show()}),l.on("NodeChange",()=>{const Bs=l.selection,wc=be.fromDom(Bs.getStart()),yi=be.fromDom(Bs.getEnd());lr(zc,[wc,yi]).fold(()=>P.clear(Me),_t)})}),l.on("PreInit",()=>{l.serializer.addTempAttr(pm.firstSelected),l.serializer.addTempAttr(pm.lastSelected)}),{getSelectedCells:()=>((l,g,b,C)=>{switch(l.tag){case"none":return g();case"single":return[l.element.dom];case"multiple":return(se=>Lt(se,fe=>fe.dom))(l.elements)}})(b.get(),ve([])),clearSelectedCells:se=>P.clear(be.fromDom(se))}},Au=l=>{let g=[];return{bind:P=>{if(void 0===P)throw new Error("Event bind error: undefined handler");g.push(P)},unbind:P=>{g=bt(g,W=>W!==P)},trigger:(...P)=>{const W={};U(l,(X,se)=>{W[X]=P[se]}),U(g,X=>{X(W)})}}},yc=l=>({registry:Mr(l,C=>({bind:C.bind,unbind:C.unbind})),trigger:Mr(l,C=>C.trigger)}),od=l=>l.slice(0).sort(),JC=(l,g)=>{const b=bt(g,C=>!An(l,C));b.length>0&&(l=>{throw new Error("Unsupported keys for object: "+od(l).join(", "))})(b)},v0=l=>((l,g)=>((l,g,b)=>{if(0===g.length)throw new Error("You must specify at least one required field.");return((l,g)=>{if(!qn(g))throw new Error("The "+l+" fields must be an array. Was: "+g+".");U(g,b=>{if(!As(b))throw new Error("The value "+b+" in the "+l+" fields was not a string.")})})("required",g),(l=>{const g=od(l);ln(g,(C,E)=>E<g.length-1&&C===g[E+1]).each(C=>{throw new Error("The field: "+C+" occurs more than once in the combined fields: ["+g.join(", ")+"].")})})(g),C=>{const E=Ls(C);Ht(g,X=>An(E,X))||((l,g)=>{throw new Error("All required keys ("+od(l).join(", ")+") were not specified. Specified keys were: "+od(g).join(", ")+".")})(g,E),l(g,E);const W=bt(g,X=>!b.validate(C[X],X));return W.length>0&&((l,g)=>{throw new Error("All values need to be of type: "+g+". Keys ("+od(l).join(", ")+") were not.")})(W,b.label),C}})(l,g,{validate:Ro,label:"function"}))(JC,l),Xy=v0(["compare","extract","mutate","sink"]),Jy=v0(["element","start","stop","destroy"]),QC=v0(["forceDrop","drop","move","delayDrop"]),g1=()=>{const l=(()=>{const l=yc({move:Au(["info"])});return{onEvent:_t,reset:_t,events:l.registry}})(),g=(()=>{let l=Se.none();const E=yc({move:Au(["info"])});return{onEvent:(P,W)=>{W.extract(P).each(se=>{((P,W)=>{const X=l.map(se=>P.compare(se,W));return l=Se.some(W),X})(W,se).each(Me=>{E.trigger.move(Me)})})},reset:()=>{l=Se.none()},events:E.registry}})();let b=l;return{on:()=>{b.reset(),b=g},off:()=>{b.reset(),b=l},isOn:()=>b===g,onEvent:(X,se)=>{b.onEvent(X,se)},events:g.events}},tx=l=>{const g=l.replace(/\./g,"-");return{resolve:C=>g+"-"+C}},ck=tx("ephox-dragster").resolve;var t2=Xy({compare:(l,g)=>wl(g.left-l.left,g.top-l.top),extract:l=>Se.some(wl(l.x,l.y)),sink:(l,g)=>{const b=(l=>{const g={layerClass:ck("blocker"),...l},b=be.fromTag("div");return Rs(b,"role","presentation"),bd(b,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),$l(b,ck("blocker")),$l(b,g.layerClass),{element:ve(b),destroy:()=>{Us(b)}}})(g),C=kg(b.element(),"mousedown",l.forceDrop),E=kg(b.element(),"mouseup",l.drop),P=kg(b.element(),"mousemove",l.move),W=kg(b.element(),"mouseout",l.delayDrop);return Jy({element:b.element,start:Me=>{is(Me,b.element())},stop:()=>{Us(b.element())},destroy:()=>{b.destroy(),E.unbind(),P.unbind(),W.unbind(),C.unbind()}})},mutate:(l,g)=>{l.mutate(g.left,g.top)}});const f1=tx("ephox-snooker").resolve,w0=f1("resizer-bar"),Sf=f1("resizer-rows"),C0=f1("resizer-cols"),x0=l=>{const g=Ms(l.parent(),"."+w0);U(g,Us)},S0=(l,g,b)=>{const C=l.origin();U(g,E=>{E.each(P=>{const W=b(C,P);$l(W,w0),is(l.parent(),W)})})},rs=(l,g,b,C,E)=>{const P=Cl(b),W=g.isResizable,X=C.length>0?Xg.positions(C,b):[],se=X.length>0?((l,g)=>jn(l.all,(b,C)=>g(b.element)?[C]:[]))(l,W):[];((l,g,b,C)=>{S0(l,g,(E,P)=>{const W=((l,g,b,C,E)=>{const P=be.fromTag("div");return bd(P,{position:"absolute",left:g+"px",top:b-3.5+"px",height:"7px",width:C+"px"}),cs(P,{"data-row":l,role:"presentation"}),P})(P.row,b.left-E.left,P.y-E.top,C);return $l(W,Sf),W})})(g,bt(X,(At,it)=>oo(se,Dt=>it===Dt)),P,Ce(b));const Me=E.length>0?hi.positions(E,b):[],ft=Me.length>0?((l,g)=>{const b=[];return yn(l.grid.columns,C=>{Pn_getColumnAt(l,C).map(P=>P.element).forall(g)&&b.push(C)}),bt(b,C=>{const E=Pn_filterItems(l,P=>P.column===C);return Ht(E,P=>g(P.element))})})(l,W):[];((l,g,b,C)=>{S0(l,g,(E,P)=>{const W=((l,g,b,C,E)=>{const P=be.fromTag("div");return bd(P,{position:"absolute",left:g-3.5+"px",top:b+"px",height:E+"px",width:"7px"}),cs(P,{"data-column":l,role:"presentation"}),P})(P.col,P.x-E.left,b.top-E.top,0,C);return $l(W,C0),W})})(g,bt(Me,(At,it)=>oo(ft,Dt=>it===Dt)),P,Sd(b))},T0=(l,g)=>{if(x0(l),l.isResizable(g)){const b=Pn_fromTable(g),C=ep(b),E=rm(b);rs(b,l,g,C,E)}},sd=(l,g)=>{const b=Ms(l.parent(),"."+w0);U(b,g)},rd=l=>{sd(l,g=>{js(g,"display","none")})},k0=l=>{sd(l,g=>{js(g,"display","block")})},Ef=f1("resizer-bar-dragging"),p1=l=>{const g=(()=>{const l=yc({drag:Au(["xDelta","yDelta","target"])});let g=Se.none();const b=(()=>{const l=yc({drag:Au(["xDelta","yDelta"])});return{mutate:(b,C)=>{l.trigger.drag(b,C)},events:l.registry}})();return b.events.drag.bind(P=>{g.each(W=>{l.trigger.drag(P.xDelta,P.yDelta,W)})}),{assign:P=>{g=Se.some(P)},get:()=>g,mutate:b.mutate,events:l.registry}})(),b=((l,g={})=>{var b;return((l,g,b)=>{let C=!1;const E=yc({start:Au([]),stop:Au([])}),P=g1(),W=()=>{it.stop(),P.isOn()&&(P.off(),E.trigger.stop())},X=((l,g)=>{let b=null;const C=()=>{qo(b)||(clearTimeout(b),b=null)};return{cancel:C,throttle:(...P)=>{C(),b=setTimeout(()=>{b=null,l.apply(null,P)},200)}}})(W);P.events.move.bind(Ie=>{g.mutate(l,Ie.info)});const At=Ie=>(...on)=>{C&&Ie.apply(null,on)},it=g.sink(QC({forceDrop:W,drop:At(W),move:At(Ie=>{X.cancel(),P.onEvent(Ie,g)}),delayDrop:At(X.throttle)}),b);return{element:it.element,go:Ie=>{it.start(Ie),P.on(),E.trigger.start()},on:()=>{C=!0},off:()=>{C=!1},isActive:()=>C,destroy:()=>{it.destroy()},events:E.registry}})(l,null!==(b=g.mode)&&void 0!==b?b:t2,g)})(g,{});let C=Se.none();const E=(it,Dt)=>Se.from(Ss(it,Dt));g.events.drag.bind(it=>{E(it.target,"data-row").each(Dt=>{const Ie=na(it.target,"top");js(it.target,"top",Ie+it.yDelta+"px")}),E(it.target,"data-column").each(Dt=>{const Ie=na(it.target,"left");js(it.target,"left",Ie+it.xDelta+"px")})});const P=(it,Dt)=>na(it,Dt)-Ir(it,"data-initial-"+Dt,0);b.events.stop.bind(()=>{g.get().each(it=>{C.each(Dt=>{E(it,"data-row").each(Ie=>{const on=P(it,"top");ie(it,"data-initial-top"),At.trigger.adjustHeight(Dt,on,parseInt(Ie,10))}),E(it,"data-column").each(Ie=>{const on=P(it,"left");ie(it,"data-initial-left"),At.trigger.adjustWidth(Dt,on,parseInt(Ie,10))}),T0(l,Dt)})})});const W=(it,Dt)=>{At.trigger.startAdjust(),g.assign(it),Rs(it,"data-initial-"+Dt,na(it,Dt)),$l(it,Ef),js(it,"opacity","0.2"),b.go(l.parent())},X=kg(l.parent(),"mousedown",it=>{(l=>_h(l,Sf))(it.target)&&W(it.target,"top"),(l=>_h(l,C0))(it.target)&&W(it.target,"left")}),se=it=>ht(it,l.view()),Me=kg(l.view(),"mouseover",it=>{(it=>Pe(it,"table",se).filter(al))(it.target).fold(()=>{Bo(it.target)&&x0(l)},Dt=>{b.isActive()&&(C=Se.some(Dt),T0(l,Dt))})}),At=yc({adjustHeight:Au(["table","delta","row"]),adjustWidth:Au(["table","delta","column"]),startAdjust:Au([])});return{destroy:()=>{X.unbind(),Me.unbind(),b.destroy(),x0(l)},refresh:it=>{T0(l,it)},on:b.on,off:b.off,hideBars:Vo(rd,l),showBars:Vo(k0,l),events:At.registry}},ux_create=(l,g,b)=>{const C=Xg,E=hi,P=p1(l),W=yc({beforeResize:Au(["table","type"]),afterResize:Au(["table","type"]),startDrag:Au([])});return P.events.adjustHeight.bind(X=>{const se=X.table;W.trigger.beforeResize(se,"row");((l,g,b,C)=>{const E=Pn_fromTable(l),P=((l,g,b)=>th(l,g,b,Jg,C=>C.getOrThunk(Oc)))(E,l,C),W=Lt(P,(Me,ft)=>b===ft?Math.max(g+Me,Oc()):Me),X=((l,g)=>{const b=Pn_justCells(l);return Lt(b,C=>{const E=bc(C.row,C.row+C.rowspan,g);return{element:C.element,height:E,rowspan:C.rowspan}})})(E,W),se=((l,g)=>Lt(l.all,(b,C)=>({element:b.element,height:g[C]})))(E,W);U(se,Me=>{kd(Me.element,Me.height)}),U(X,Me=>{kd(Me.element,Me.height)});const fe=(l=>vn(l,(g,b)=>g+b,0))(W);kd(l,fe)})(se,C.delta(X.delta,se),X.row,C),W.trigger.afterResize(se,"row")}),P.events.startAdjust.bind(X=>{W.trigger.startDrag()}),P.events.adjustWidth.bind(X=>{const se=X.table;W.trigger.beforeResize(se,"col");const fe=E.delta(X.delta,se),Me=b(se);jw(se,fe,X.column,g,Me),W.trigger.afterResize(se,"col")}),{on:P.on,off:P.off,refreshBars:P.refresh,hideBars:P.hideBars,showBars:P.showBars,destroy:P.destroy,events:W.registry}},Og=l=>Mo(l)&&"TABLE"===l.nodeName,Go="bar-",dx=l=>"false"!==Ss(l,"data-mce-resize"),s2=l=>{const g=n0(),b=n0(),C=n0();let E,P;const W=it=>Vp(l,it),X=()=>fv(l)?Sp():Cv();return l.on("init",()=>{const it=((l,g)=>l.inline?((l,g,b)=>({parent:ve(g),view:ve(l),origin:ve(wl(0,0)),isResizable:b}))(be.fromDom(l.getBody()),(()=>{const l=be.fromTag("div");return bd(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),is(ne(be.fromDom(document)),l),l})(),g):((l,g)=>{const b=Da(l)?(l=>be.fromDom(rn(l).dom.documentElement))(l):l;return{parent:ve(b),view:ve(l),origin:ve(wl(0,0)),isResizable:g}})(be.fromDom(l.getDoc()),g))(l,dx);if(C.set(it),(l=>{const g=l.options.get("object_resizing");return An(g.split(","),"table")})(l)&&Ql(l)){const Dt=X(),Ie=ux_create(it,Dt,W);Ie.on(),Ie.events.startDrag.bind(on=>{g.set(l.selection.getRng())}),Ie.events.beforeResize.bind(on=>{const zn=on.table.dom;((l,g,b,C,E)=>{l.dispatch("ObjectResizeStart",{target:g,width:b,height:C,origin:E})})(l,zn,ah(zn),Su(zn),Go+on.type)}),Ie.events.afterResize.bind(on=>{const zn=on.table,Co=zn.dom;Od(zn),g.on(pr=>{l.selection.setRng(pr),l.focus()}),((l,g,b,C,E)=>{l.dispatch("ObjectResized",{target:g,width:b,height:C,origin:E})})(l,Co,ah(Co),Su(Co),Go+on.type),l.undoManager.add()}),b.set(Ie)}}),l.on("ObjectResizeStart",it=>{const Dt=it.target;if(Og(Dt)){const Ie=be.fromDom(Dt);U(l.dom.select(".mce-clonedresizable"),on=>{l.dom.addClass(on,"mce-"+sh(l)+"-columns")}),!Zp(Ie)&&El(l)?Ib(Ie):!ed(Ie)&&Cu(l)&&Em(Ie),$b(Ie)&&Sr(it.origin,Go)&&Em(Ie),E=it.width,P=xu(l)?"":((l,g)=>{const b=l.dom.getStyle(g,"width")||l.dom.getAttrib(g,"width");return Se.from(b).filter(Hc)})(l,Dt).getOr("")}}),l.on("ObjectResized",it=>{const Dt=it.target;if(Og(Dt)){const Ie=be.fromDom(Dt),on=it.origin;Sr(on,"corner-")&&((it,Dt,Ie)=>{const on=Ts(Dt,"e");if(""===P&&Em(it),Ie!==E&&""!==P){js(it,"width",P);const zn=X(),Co=W(it),pr=fv(l)||on?(it=>xv(it).columns)(it)-1:0;jw(it,Ie-E,pr,zn,Co)}else if((l=>/^(\d+(\.\d+)?)%$/.test(l))(P)){const zn=parseFloat(P.replace("%",""));js(it,"width",Ie*zn/E+"%")}(l=>/^(\d+(\.\d+)?)px$/.test(l))(P)&&(l=>{const g=Pn_fromTable(l);Pn_hasColumns(g)||U(Ba(l),b=>{const C=zl(b,"width");js(b,"width",C),ie(b,"width")})})(it)})(Ie,on,it.width),Od(Ie),Sm(l,Ie.dom,gh)}}),l.on("SwitchMode",()=>{b.on(it=>{l.mode.isReadOnly()?it.hideBars():it.showBars()})}),l.on("dragstart dragend",it=>{b.on(Dt=>{"dragstart"===it.type?(Dt.hideBars(),Dt.off()):(Dt.on(),Dt.showBars())})}),l.on("remove",()=>{b.on(it=>{it.destroy()}),C.on(it=>{((l,g)=>{l.inline&&Us(g.parent())})(l,it)})}),{refresh:it=>{b.on(Dt=>Dt.refreshBars(be.fromDom(it)))},hide:()=>{b.on(it=>it.hideBars())},show:()=>{b.on(it=>it.showBars())}}},mk=l=>{(l=>{const g=l.options.register;g("table_clone_elements",{processor:"string[]"}),g("table_use_colgroups",{processor:"boolean",default:!0}),g("table_header_type",{processor:b=>{const C=An(["section","cells","sectionCells","auto"],b);return C?{value:b,valid:C}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),g("table_sizing_mode",{processor:"string",default:"auto"}),g("table_default_attributes",{processor:"object",default:{border:"1"}}),g("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),g("table_column_resizing",{processor:b=>{const C=An(["preservetable","resizetable"],b);return C?{value:b,valid:C}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),g("table_resize_bars",{processor:"boolean",default:!0}),g("table_style_by_css",{processor:"boolean",default:!0}),g("table_merge_content_on_paste",{processor:"boolean",default:!0})})(l);const g=s2(l),b=KC(l,g),C=nC(l,g,b);return zT(l,C),((l,g)=>{const b=mm(l),C=E=>sc(_l(l)).bind(P=>zc(P,b).map(W=>{const X=ig(zi(l),W,P);return E(W,X)})).getOr("");zo({mceTableRowType:()=>C(g.getTableRowType),mceTableCellType:()=>C(g.getTableCellType),mceTableColType:()=>C(g.getTableColType)},(E,P)=>l.addQueryValueHandler(P,E))})(l,C),kw(l,C),{getSelectedCells:b.getSelectedCells,clearSelectedCells:b.clearSelectedCells}};da.add("dom",l=>({table:mk(l)}))}(),tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}}),function(){"use strict";const da=Object.getPrototypeOf,Dr=(e,t,r)=>{var c;return!!r(e,t.prototype)||(null===(c=e.constructor)||void 0===c?void 0:c.name)===t.name},Ks=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&Dr(e,String,(r,c)=>c.isPrototypeOf(r))?"string":t})(t)===e,Os=e=>t=>typeof t===e,vr=e=>t=>e===t,bn=Ks("string"),qn=Ks("object"),qo=e=>((e,t)=>qn(e)&&Dr(e,t,(r,c)=>da(r)===c))(e,Object),Oo=Ks("array"),ys=vr(null),zt=Os("boolean"),Mo=vr(void 0),Ro=e=>null==e,Wn=e=>!Ro(e),_t=Os("function"),Ln=Os("number"),en=(e,t)=>{if(Oo(e)){for(let r=0,c=e.length;r<c;++r)if(!t(e[r]))return!1;return!0}return!1},ve=()=>{},Le=e=>()=>e(),mo=(e,t)=>(...r)=>e(t.apply(null,r)),re=e=>()=>e,gt=e=>e,Is=(e,t)=>e===t;function ko(e,...t){return(...r)=>{const c=t.concat(r);return e.apply(null,c)}}const qe=e=>t=>!e(t),Se=e=>()=>{throw new Error(e)},dr=e=>e(),De=re(!1),Ot=re(!0);class B{constructor(t,r){this.tag=t,this.value=r}static some(t){return new B(!0,t)}static none(){return B.singletonNone}fold(t,r){return this.tag?r(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?B.some(t(this.value)):B.none()}bind(t){return this.tag?t(this.value):B.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:B.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return Wn(t)?B.some(t):B.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}B.singletonNone=new B(!1);const An=Array.prototype.slice,oo=Array.prototype.indexOf,yn=Array.prototype.push,Lt=(e,t)=>oo.call(e,t),U=(e,t)=>{const r=Lt(e,t);return-1===r?B.none():B.some(r)},xo=(e,t)=>Lt(e,t)>-1,Ys=(e,t)=>{for(let r=0,c=e.length;r<c;r++)if(t(e[r],r))return!0;return!1},bt=(e,t)=>{const r=[];for(let c=0;c<e;c++)r.push(t(c));return r},vn=(e,t)=>{const r=[];for(let c=0;c<e.length;c+=t){const d=An.call(e,c,c+t);r.push(d)}return r},Be=(e,t)=>{const r=e.length,c=new Array(r);for(let d=0;d<r;d++)c[d]=t(e[d],d);return c},lt=(e,t)=>{for(let r=0,c=e.length;r<c;r++)t(e[r],r)},Je=(e,t)=>{const r=[],c=[];for(let d=0,f=e.length;d<f;d++){const v=e[d];(t(v,d)?r:c).push(v)}return{pass:r,fail:c}},so=(e,t)=>{const r=[];for(let c=0,d=e.length;c<d;c++){const f=e[c];t(f,c)&&r.push(f)}return r},jn=(e,t,r)=>(((e,t)=>{for(let r=e.length-1;r>=0;r--)t(e[r],r)})(e,(c,d)=>{r=t(r,c,d)}),r),Ht=(e,t,r)=>(lt(e,(c,d)=>{r=t(r,c,d)}),r),fo=(e,t)=>((e,t,r)=>{for(let c=0,d=e.length;c<d;c++){const f=e[c];if(t(f,c))return B.some(f);if(r(f,c))break}return B.none()})(e,t,De),mr=(e,t)=>{for(let r=0,c=e.length;r<c;r++)if(t(e[r],r))return B.some(r);return B.none()},En=e=>{const t=[];for(let r=0,c=e.length;r<c;++r){if(!Oo(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);yn.apply(t,e[r])}return t},No=(e,t)=>En(Be(e,t)),yr=(e,t)=>{for(let r=0,c=e.length;r<c;++r)if(!0!==t(e[r],r))return!1;return!0},Ao=e=>{const t=An.call(e,0);return t.reverse(),t},Ls=(e,t)=>so(e,r=>!xo(t,r)),Qr=(e,t)=>{const r={};for(let c=0,d=e.length;c<d;c++){const f=e[c];r[String(f)]=t(f,c)}return r},zo=e=>[e],Mr=(e,t)=>{const r=An.call(e,0);return r.sort(t),r},Hs=(e,t)=>t>=0&&t<e.length?B.some(e[t]):B.none(),Ps=e=>Hs(e,0),or=e=>Hs(e,e.length-1),wr=_t(Array.from)?Array.from:e=>An.call(e),$o=(e,t)=>{for(let r=0;r<e.length;r++){const c=t(e[r],r);if(c.isSome())return c}return B.none()},Xo=Object.keys,Vs=Object.hasOwnProperty,Ye=(e,t)=>{const r=Xo(e);for(let c=0,d=r.length;c<d;c++){const f=r[c];t(e[f],f)}},Ke=(e,t)=>Sn(e,(r,c)=>({k:c,v:t(r,c)})),Sn=(e,t)=>{const r={};return Ye(e,(c,d)=>{const f=t(c,d);r[f.k]=f.v}),r},tn=e=>(t,r)=>{e[r]=t},Kn=(e,t,r,c)=>{Ye(e,(d,f)=>{(t(d,f)?r:c)(d,f)})},sr=(e,t)=>{const r={};return Kn(e,t,tn(r),ve),r},jr=(e,t)=>{const r=[];return Ye(e,(c,d)=>{r.push(t(c,d))}),r},Es=(e,t)=>{const r=Xo(e);for(let c=0,d=r.length;c<d;c++){const f=r[c],v=e[f];if(t(v,f,e))return B.some(v)}return B.none()},Uo=e=>jr(e,gt),rt=(e,t)=>Qn(e,t)?B.from(e[t]):B.none(),Qn=(e,t)=>Vs.call(e,t),_r=(e,t)=>Qn(e,t)&&null!=e[t],ea=(e,t,r=Is)=>e.exists(c=>r(c,t)),Vr=e=>{const t=[],r=c=>{t.push(c)};for(let c=0;c<e.length;c++)e[c].each(r);return t},Sa=(e,t,r)=>e.isSome()&&t.isSome()?B.some(r(e.getOrDie(),t.getOrDie())):B.none(),qa=(e,t)=>null!=e?B.some(t(e)):B.none(),rr=(e,t)=>e?B.some(t):B.none(),Da=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,Ma=(e,t)=>Rs(e,t)?((e,t)=>e.substring(t))(e,t.length):e,ts=(e,t,r=0,c)=>{const d=e.indexOf(t,r);return-1!==d&&(!!Mo(c)||d+t.length<=c)},Rs=(e,t)=>Da(e,t,0),cs=(e,t)=>Da(e,t,e.length-t.length),Ss=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),le=e=>e.length>0,je=e=>void 0!==e.style&&_t(e.style.getPropertyValue),Rn=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},be_fromHtml=(e,t)=>{const c=(t||document).createElement("div");if(c.innerHTML=e,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,e),new Error(d)}return Rn(c.childNodes[0])},be_fromTag=(e,t)=>{const c=(t||document).createElement(e);return Rn(c)},be_fromText=(e,t)=>{const c=(t||document).createTextNode(e);return Rn(c)},be_fromDom=Rn,Vn=typeof window<"u"?window:Function("return this;")(),he=(e,t)=>((e,t)=>{let r=t??Vn;for(let c=0;c<e.length&&null!=r;++c)r=r[e[c]];return r})(e.split("."),t),Ft=Object.getPrototypeOf,sn=e=>{const t=he("ownerDocument.defaultView",e);return qn(e)&&((e=>((e,t)=>{const r=((e,t)=>he(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Ft(e).constructor.name))},ws=e=>e.dom.nodeName.toLowerCase(),Ta=e=>t=>(e=>e.dom.nodeType)(t)===e,Ka=e=>co(e)&&sn(e.dom),co=Ta(1),Wo=Ta(3),gs=Ta(9),ma=Ta(11),ga=e=>t=>co(t)&&ws(t)===e,hc=(e,t)=>{const r=e.dom;if(1!==r.nodeType)return!1;{const c=r;if(void 0!==c.matches)return c.matches(t);if(void 0!==c.msMatchesSelector)return c.msMatchesSelector(t);if(void 0!==c.webkitMatchesSelector)return c.webkitMatchesSelector(t);if(void 0!==c.mozMatchesSelector)return c.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},is=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Jo=(e,t)=>e.dom===t.dom,Cr=(e,t)=>{const r=e.dom,c=t.dom;return r!==c&&r.contains(c)},cr=e=>be_fromDom(e.dom.ownerDocument),Us=e=>gs(e)?e:cr(e),xi=e=>be_fromDom(Us(e).dom.documentElement),wo=e=>be_fromDom(Us(e).dom.defaultView),Kr=e=>B.from(e.dom.parentNode).map(be_fromDom),Tc=e=>B.from(e.dom.parentElement).map(be_fromDom),kc=e=>B.from(e.dom.offsetParent).map(be_fromDom),Ds=e=>Be(e.dom.childNodes,be_fromDom),Ia=(e,t)=>B.from(e.dom.childNodes[t]).map(be_fromDom),Si=e=>Ia(e,0),Ec=(e,t)=>({element:e,offset:t}),Vl=(e,t)=>{const r=Ds(e);return r.length>0&&t<r.length?Ec(r[t],0):Ec(e,t)},J=e=>ma(e)&&Wn(e.dom.host),ce=_t(Element.prototype.attachShadow)&&_t(Node.prototype.getRootNode),Ae=re(ce),Ve=ce?e=>be_fromDom(e.dom.getRootNode()):Us,vt=e=>J(e)?e:be_fromDom(Us(e).dom.body),Eo=e=>{const t=Ve(e);return J(t)?B.some(t):B.none()},xr=e=>be_fromDom(e.dom.host),ns=e=>{const t=Wo(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return Eo(be_fromDom(t)).fold(()=>r.body.contains(t),((e,t)=>r=>e(t(r)))(ns,xr))},ls=()=>Lc(be_fromDom(document)),Lc=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return be_fromDom(t)},zr=(e,t,r)=>{if(!(bn(r)||zt(r)||Ln(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},Bn=(e,t,r)=>{zr(e.dom,t,r)},pl=(e,t)=>{const r=e.dom;Ye(t,(c,d)=>{zr(r,d,c)})},Bo=(e,t)=>{const r=e.dom.getAttribute(t);return null===r?void 0:r},z=(e,t)=>B.from(Bo(e,t)),ne=(e,t)=>{const r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute(t)},ae=(e,t)=>{e.dom.removeAttribute(t)},It=(e,t,r)=>{if(!bn(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);je(e)&&e.style.setProperty(t,r)},go=(e,t)=>{je(e)&&e.style.removeProperty(t)},Xt=(e,t,r)=>{It(e.dom,t,r)},Ms=(e,t)=>{const r=e.dom;Ye(t,(c,d)=>{It(r,d,c)})},ka=(e,t)=>{const r=e.dom;Ye(t,(c,d)=>{c.fold(()=>{go(r,d)},f=>{It(r,d,f)})})},Ns=(e,t)=>{const r=e.dom,d=window.getComputedStyle(r).getPropertyValue(t);return""!==d||ns(e)?d:ha(r,t)},ha=(e,t)=>je(e)?e.style.getPropertyValue(t):"",Ws=(e,t)=>{const c=ha(e.dom,t);return B.from(c).filter(d=>d.length>0)},Nr=e=>{const t={},r=e.dom;if(je(r))for(let c=0;c<r.style.length;c++){const d=r.style.item(c);t[d]=r.style[d]}return t},fc=(e,t,r)=>{const c=be_fromTag(e);return Xt(c,t,r),Ws(c,t).isSome()},F=(e,t)=>{go(e.dom,t),ea(z(e,"style").map(Ss),"")&&ae(e,"style")},ue=e=>e.dom.offsetWidth,Pe=(e,t)=>{const c=x=>{const k=t(x);if(k<=0||null===k){const R=Ns(x,e);return parseFloat(R)||0}return k},f=(x,k)=>Ht(k,(R,I)=>{const V=Ns(x,I),Z=void 0===V?0:parseInt(V,10);return isNaN(Z)?R:R+Z},0);return{set:(x,k)=>{if(!Ln(k)&&!k.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+k);const R=x.dom;je(R)&&(R.style[e]=k+"px")},get:c,getOuter:c,aggregate:f,max:(x,k,R)=>{const I=f(x,R);return k>I?k-I:0}}},ot=Pe("height",e=>{const t=e.dom;return ns(e)?t.getBoundingClientRect().height:t.offsetHeight}),Ut=e=>ot.get(e),cn=e=>ot.getOuter(e),ta=(e,t)=>({left:e,top:t,translate:(c,d)=>ta(e+c,t+d)}),po=ta,Ts=(e,t)=>void 0!==e?e:void 0!==t?t:0,$r=e=>{const t=e.dom.ownerDocument,r=t.body,c=t.defaultView,d=t.documentElement;if(r===e.dom)return po(r.offsetLeft,r.offsetTop);const f=Ts(c?.pageYOffset,d.scrollTop),v=Ts(c?.pageXOffset,d.scrollLeft),x=Ts(d.clientTop,r.clientTop),k=Ts(d.clientLeft,r.clientLeft);return _c(e).translate(v-k,f-x)},_c=e=>{const t=e.dom,c=t.ownerDocument.body;return c===t?po(c.offsetLeft,c.offsetTop):ns(e)?(e=>{const t=e.getBoundingClientRect();return po(t.left,t.top)})(t):po(0,0)},Hc=Pe("width",e=>e.dom.offsetWidth),Fs=e=>Hc.get(e),fa=e=>Hc.getOuter(e),js=e=>{let r,t=!1;return(...c)=>(t||(t=!0,r=e.apply(null,c)),r)},ei=()=>Fu(0,0),Fu=(e,t)=>({major:e,minor:t}),Ir={nu:Fu,detect:(e,t)=>{const r=String(t).toLowerCase();return 0===e.length?ei():((e,t)=>{const r=((e,t)=>{for(let r=0;r<e.length;r++){const c=e[r];if(c.test(t))return c}})(e,t);if(!r)return{major:0,minor:0};const c=d=>Number(t.replace(r,"$"+d));return Fu(c(1),c(2))})(e,r)},unknown:ei},Jd=(e,t)=>{const r=String(t).toLowerCase();return fo(e,c=>c.search(r))},ki=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Oc=e=>t=>ts(t,e),Vc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ts(e,"edge/")&&ts(e,"chrome")&&ts(e,"safari")&&ts(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ki],search:e=>ts(e,"chrome")&&!ts(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ts(e,"msie")||ts(e,"trident")},{name:"Opera",versionRegexes:[ki,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Oc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Oc("firefox")},{name:"Safari",versionRegexes:[ki,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ts(e,"safari")||ts(e,"mobile/"))&&ts(e,"applewebkit")}],el=[{name:"Windows",search:Oc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ts(e,"iphone")||ts(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Oc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Oc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Oc("linux"),versionRegexes:[]},{name:"Solaris",search:Oc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Oc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Oc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],fu={browsers:re(Vc),oses:re(el)},Ba="Chromium",ui="Firefox",Iu=e=>{const t=e.current,c=d=>()=>t===d;return{current:t,version:e.version,isEdge:c("Edge"),isChromium:c(Ba),isIE:c("IE"),isOpera:c("Opera"),isFirefox:c(ui),isSafari:c("Safari")}},Ei_unknown=()=>Iu({current:void 0,version:Ir.unknown()}),Ei_nu=Iu,Gm=(re("Edge"),re(Ba),re("IE"),re("Opera"),re(ui),re("Safari"),"Windows"),qm="Android",nl="Solaris",em="FreeBSD",Or="ChromeOS",pu=e=>{const t=e.current,c=d=>()=>t===d;return{current:t,version:e.version,isWindows:c(Gm),isiOS:c("iOS"),isAndroid:c(qm),isMacOS:c("macOS"),isLinux:c("Linux"),isSolaris:c(nl),isFreeBSD:c(em),isChromeOS:c(Or)}},bu_unknown=()=>pu({current:void 0,version:Ir.unknown()}),bu_nu=pu,Hu=(re(Gm),re("iOS"),re(qm),re("Linux"),re("macOS"),re(nl),re(em),re(Or),e=>window.matchMedia(e).matches);var e;let ol=js(()=>((e,t,r)=>{const c=fu.browsers(),d=fu.oses(),f=t.bind(k=>((e,t)=>$o(t.brands,r=>{const c=r.brand.toLowerCase();return fo(e,d=>{var f;return c===(null===(f=d.brand)||void 0===f?void 0:f.toLowerCase())}).map(d=>({current:d.name,version:Ir.nu(parseInt(r.version,10),0)}))}))(c,k)).orThunk(()=>((e,t)=>Jd(e,t).map(r=>{const c=Ir.detect(r.versionRegexes,t);return{current:r.name,version:c}}))(c,e)).fold(Ei_unknown,Ei_nu),v=((e,t)=>Jd(e,t).map(r=>{const c=Ir.detect(r.versionRegexes,t);return{current:r.name,version:c}}))(d,e).fold(bu_unknown,bu_nu),x=((e,t,r,c)=>{const d=e.isiOS()&&!0===/ipad/i.test(r),f=e.isiOS()&&!d,v=e.isiOS()||e.isAndroid(),x=v||c("(pointer:coarse)"),k=d||!f&&v&&c("(min-device-width:768px)"),R=f||v&&!k,I=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),V=!R&&!k&&!I;return{isiPad:re(d),isiPhone:re(f),isTablet:re(k),isPhone:re(R),isTouch:re(x),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:re(I),isDesktop:re(V)}})(v,f,e,r);return{browser:f,os:v,deviceType:x}})(navigator.userAgent,B.from(navigator.userAgentData),Hu));const _i=()=>ol(),zg=e=>{const t=be_fromDom((e=>{if(Ae()&&Wn(e.target)){const t=be_fromDom(e.target);if(co(t)&&(e=>Wn(e.dom.shadowRoot))(t)&&e.composed&&e.composedPath){const r=e.composedPath();if(r)return Ps(r)}}return B.from(e.target)})(e).getOr(e.target)),r=()=>e.stopPropagation(),c=()=>e.preventDefault(),d=mo(c,r);return((e,t,r,c,d,f,v)=>({target:e,x:t,y:r,stop:c,prevent:d,kill:f,raw:v}))(t,e.clientX,e.clientY,r,c,d,e)},Wl=(e,t,r,c,d)=>{const f=((e,t)=>r=>{e(r)&&t(zg(r))})(r,c);return e.dom.addEventListener(t,f,d),{unbind:ko(Ug,e,t,f,d)}},Ug=(e,t,r,c)=>{e.dom.removeEventListener(t,r,c)},vu=(e,t)=>{Kr(e).each(c=>{c.dom.insertBefore(t.dom,e.dom)})},Uh=(e,t)=>{(e=>B.from(e.dom.nextSibling).map(be_fromDom))(e).fold(()=>{Kr(e).each(d=>{Ac(d,t)})},c=>{vu(c,t)})},Ym=(e,t)=>{Si(e).fold(()=>{Ac(e,t)},c=>{e.dom.insertBefore(t.dom,c.dom)})},Ac=(e,t)=>{e.dom.appendChild(t.dom)},Ea=(e,t)=>{lt(t,r=>{Ac(e,r)})},nm=e=>{e.dom.textContent="",lt(Ds(e),t=>{ir(t)})},ir=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},La=e=>{const t=void 0!==e?e.dom:document;return po(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},xd=(e,t,r)=>{const d=(void 0!==r?r.dom:document).defaultView;d&&d.scrollTo(e,t)},jl=(e,t,r,c)=>({x:e,y:t,width:r,height:c,right:e+r,bottom:t+c}),di=e=>{const t=void 0===e?window:e,c=La(be_fromDom(t.document));return(e=>{const t=void 0===e?window:e;return _i().browser.isFirefox()?B.none():B.from(t.visualViewport)})(t).fold(()=>{const d=t.document.documentElement;return jl(c.left,c.top,d.clientWidth,d.clientHeight)},d=>jl(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},Vu=()=>be_fromDom(document),Xm=(e,t)=>e.view(t).fold(re([]),c=>{const d=e.owner(c),f=Xm(e,d);return[c].concat(f)});var om=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?B.none():B.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(be_fromDom)},owner:e=>cr(e)});const yt=e=>{const t=Vu(),r=La(t);return((e,t)=>{const r=t.owner(e),c=Xm(t,r);return B.some(c)})(e,om).fold(ko($r,e),d=>{const f=_c(e),v=jn(d,(x,k)=>{const R=_c(k);return{left:x.left+R.left,top:x.top+R.top}},{left:0,top:0});return po(v.left+f.left+r.left,v.top+f.top+r.top)})},_s=(e,t,r,c)=>({x:e,y:t,width:r,height:c,right:e+r,bottom:t+c}),oa=e=>{const t=$r(e),r=fa(e),c=cn(e);return _s(t.left,t.top,r,c)},sl=e=>{const t=yt(e),r=fa(e),c=cn(e);return _s(t.left,t.top,r,c)},Tr=(e,t)=>{const r=Math.max(e.x,t.x),c=Math.max(e.y,t.y),d=Math.min(e.right,t.right),f=Math.min(e.bottom,t.bottom);return _s(r,c,d-r,f-c)},H=()=>di(window);var K=tinymce.util.Tools.resolve("tinymce.ThemeManager");const me=e=>{const t=f=>f(e),r=re(e),c=()=>d,d={tag:!0,inner:e,fold:(f,v)=>v(e),isValue:Ot,isError:De,map:f=>Rt.value(f(e)),mapError:c,bind:t,exists:t,forall:t,getOr:r,or:c,getOrThunk:r,orThunk:c,getOrDie:r,each:f=>{f(e)},toOptional:()=>B.some(e)};return d},Ce=e=>{const t=()=>r,r={tag:!1,inner:e,fold:(c,d)=>c(e),isValue:De,isError:Ot,map:t,mapError:c=>Rt.error(c(e)),bind:t,exists:De,forall:Ot,getOr:gt,or:gt,getOrThunk:dr,orThunk:dr,getOrDie:Se(String(e)),each:ve,toOptional:B.none};return r},Rt={value:me,error:Ce,fromOption:(e,t)=>e.fold(()=>Ce(t),me)};var Hn;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Hn||(Hn={}));const io=(e,t,r)=>e.stype===Hn.Error?t(e.serror):r(e.svalue),Oi=e=>({stype:Hn.Value,svalue:e}),Ja=e=>({stype:Hn.Error,serror:e}),Br_svalue=Oi,Br_serror=Ja,Br_fold=io,Ai=(e,t,r,c)=>({tag:"field",key:e,newKey:t,presence:r,prop:c}),sm=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},Qm=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const r={};for(let c=0;c<t.length;c++){const d=t[c];for(const f in d)Qn(d,f)&&(r[f]=e(r[f],d[f]))}return r},Js=Qm((e,t)=>qo(e)&&qo(t)?Js(e,t):t),Gg=Qm((e,t)=>t),yl=e=>({tag:"defaultedThunk",process:e}),Ri=e=>yl(re(e)),Pn=e=>({tag:"mergeWithThunk",process:e}),Kl_consolidateArr=e=>{const t=(e=>{const t=[],r=[];return lt(e,c=>{io(c,d=>r.push(d),d=>t.push(d))}),{values:t,errors:r}})(e);return t.errors.length>0?(e=>mo(Br_serror,En)(e))(t.errors):Br_svalue(t.values)},mi=e=>qn(e)&&Xo(e).length>100?" removed due to size":JSON.stringify(e,null,2),Sd=(e,t)=>Br_serror([{path:e,getErrorInfo:t}]),Cl=e=>({extract:(c,d)=>((e,t)=>e.stype===Hn.Error?t(e.serror):e)(e(d),f=>((e,t)=>Sd(e,re(t)))(c,f)),toString:re("val")}),j1=Cl(Br_svalue),op=(e,t,r,c)=>c(rt(e,t).getOrThunk(()=>r(e))),ap=(e,t,r,c,d)=>{const f=x=>d.extract(t.concat([c]),x),v=x=>x.fold(()=>Br_svalue(B.none()),k=>((e,t)=>e.stype===Hn.Value?{stype:Hn.Value,svalue:t(e.svalue)}:e)(d.extract(t.concat([c]),k),B.some));switch(e.tag){case"required":return((e,t,r,c)=>rt(t,r).fold(()=>((e,t,r)=>Sd(e,()=>'Could not find valid *required* value for "'+t+'" in '+mi(r)))(e,r,t),c))(t,r,c,f);case"defaultedThunk":return op(r,c,e.process,f);case"option":return((e,t,r)=>r(rt(e,t)))(r,c,v);case"defaultedOptionThunk":return((e,t,r,c)=>c(rt(e,t).map(f=>!0===f?r(e):f)))(r,c,e.process,v);case"mergeWithThunk":return op(r,c,re({}),x=>{const k=Js(e.process(r),x);return f(k)})}},gi=e=>({extract:(c,d)=>e().extract(c,d),toString:()=>e().toString()}),Di=e=>{const t=Tn(e),r=jn(e,(d,f)=>sm(f,v=>Js(d,{[v]:!0}),re(d)),{});return{extract:(d,f)=>{const v=zt(f)?[]:(e=>Xo(sr(e,Wn)))(f),x=so(v,k=>!_r(r,k));return 0===x.length?t.extract(d,f):((e,t)=>Sd(e,()=>"There are unsupported fields: ["+t.join(", ")+"] specified"))(d,x)},toString:t.toString}},Tn=e=>({extract:(c,d)=>((e,t,r)=>{const c={},d=[];for(const f of r)sm(f,(v,x,k,R)=>{const I=ap(k,e,t,v,R);Br_fold(I,V=>{d.push(...V)},V=>{c[x]=V})},(v,x)=>{c[v]=x(t)});return d.length>0?Br_serror(d):Br_svalue(c)})(c,d,e),toString:()=>"obj{\n"+Be(e,d=>sm(d,(f,v,x,k)=>f+" -> "+k.toString(),(f,v)=>"state("+f+")")).join("\n")+"}"}),Mi=e=>({extract:(c,d)=>{const f=Be(d,(v,x)=>e.extract(c.concat(["["+x+"]"]),v));return Kl_consolidateArr(f)},toString:()=>"array("+e.toString()+")"}),Xg=(e,t)=>{const r=void 0!==t?t:gt;return{extract:(f,v)=>{const x=[];for(const k of e){const R=k.extract(f,v);if(R.stype===Hn.Value)return{stype:Hn.Value,svalue:r(R.svalue)};x.push(R)}return Kl_consolidateArr(x)},toString:()=>"oneOf("+Be(e,f=>f.toString()).join(", ")+")"}},jh=(e,t)=>({extract:(f,v)=>{const x=Xo(v),k=((f,v)=>Mi(Cl(e)).extract(f,v))(f,x);return((e,t)=>e.stype===Hn.Value?t(e.svalue):e)(k,R=>{const I=Be(R,V=>Ai(V,V,{tag:"required",process:{}},t));return Tn(I).extract(f,v)})},toString:()=>"setOf("+t.toString()+")"}),Uu=mo(Mi,Tn),hi=re(j1),ng=(e,t)=>Cl(r=>{const c=typeof r;return e(r)?Br_svalue(r):Br_serror(`Expected type: ${t} but got: ${c}`)}),Gh=ng(Ln,"number"),os=ng(bn,"string"),Td=ng(zt,"boolean"),og=ng(_t,"function"),ip=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(t=>ip(e[t]));default:return!1}},Y1=Cl(e=>ip(e)?Br_svalue(e):Br_serror("Expected value to be acceptable for sending via postMessage")),cm=(e,t)=>({extract:(d,f)=>rt(f,e).fold(()=>((e,t)=>Sd(e,()=>'Choice schema did not contain choice key: "'+t+'"'))(d,e),x=>((e,t,r,c)=>rt(r,c).fold(()=>((e,t,r)=>Sd(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+mi(t)))(e,r,c),f=>f.extract(e.concat(["branch: "+c]),t)))(d,f,t,x)),toString:()=>"chooseOn("+e+"). Possible values: "+Xo(t)}),kd=e=>Cl(t=>e(t).fold(Br_serror,Br_svalue)),Yh=(e,t)=>jh(r=>(e=>e.fold(Ja,Oi))(e(r)),t),Ar=(e,t,r)=>(e=>io(e,Rt.error,Rt.value))(((e,t,r)=>((e,t)=>e.stype===Hn.Error?{stype:Hn.Error,serror:t(e.serror)}:e)(t.extract([e],r),d=>({input:r,errors:d})))(e,t,r)),Uc=e=>e.fold(t=>{throw new Error(Zu(t))},gt),oi=(e,t,r)=>Uc(Ar(e,t,r)),Zu=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:re("... (only showing first ten failures)")}]):e;return Be(t,r=>"Failed path: ("+r.path.join(" > ")+")\n"+r.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+mi(e.input),Qa=(e,t)=>cm(e,Ke(t,Tn)),Xh=(e,t)=>((e,t)=>{const r=js(t);return{extract:(f,v)=>r().extract(f,v),toString:()=>r().toString()}})(0,t),Ha=Ai,pc=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Jg=e=>kd(t=>xo(e,t)?Rt.value(t):Rt.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),dt=e=>Ha(e,e,{tag:"required",process:{}},hi()),si=(e,t)=>Ha(e,e,{tag:"required",process:{}},t),up=e=>si(e,Gh),ra=e=>si(e,os),xl=(e,t)=>Ha(e,e,{tag:"required",process:{}},Jg(t)),Sl=e=>si(e,og),Wu=(e,t)=>Ha(e,e,{tag:"required",process:{}},Tn(t)),Ed=(e,t)=>Ha(e,e,{tag:"required",process:{}},Uu(t)),Ni=(e,t)=>Ha(e,e,{tag:"required",process:{}},Mi(t)),us=e=>Ha(e,e,{tag:"option",process:{}},hi()),Tl=(e,t)=>Ha(e,e,{tag:"option",process:{}},t),_d=e=>Tl(e,Gh),ec=e=>Tl(e,os),eh=(e,t)=>Tl(e,Jg(t)),Bi=e=>Tl(e,og),tc=(e,t)=>Tl(e,Mi(t)),Rc=(e,t)=>Tl(e,Tn(t)),th=(e,t)=>Tl(e,Di(t)),$e=(e,t)=>Ha(e,e,Ri(t),hi()),pa=(e,t,r)=>Ha(e,e,Ri(t),r),Yl=(e,t)=>pa(e,t,Gh),Pi=(e,t)=>pa(e,t,os),rl=(e,t,r)=>pa(e,t,Jg(r)),Va=(e,t)=>pa(e,t,Td),ba=(e,t)=>pa(e,t,og),Fi=(e,t,r)=>pa(e,t,Mi(r)),dp=(e,t,r)=>pa(e,t,Tn(r)),_n=e=>{let t=e;return{get:()=>t,set:d=>{t=d}}},O_generate=e=>{if(!Oo(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],r={};return lt(e,(c,d)=>{const f=Xo(c);if(1!==f.length)throw new Error("one and only one name per case");const v=f[0],x=c[v];if(void 0!==r[v])throw new Error("duplicate key detected:"+v);if("cata"===v)throw new Error("cannot have a case named cata (sorry)");if(!Oo(x))throw new Error("case arguments must be an array");t.push(v),r[v]=(...k)=>{const R=k.length;if(R!==x.length)throw new Error("Wrong number of arguments to case "+v+". Expected "+x.length+" ("+x+"), got "+R);return{fold:(...V)=>{if(V.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+V.length);return V[d].apply(null,k)},match:V=>{const Z=Xo(V);if(t.length!==Z.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+Z.join(","));if(!yr(t,oe=>xo(Z,oe)))throw new Error("Not all branches were specified when using match. Specified: "+Z.join(", ")+"\nRequired: "+t.join(", "));return V[v].apply(null,k)},log:V=>{console.log(V,{constructors:t,constructor:v,params:k})}}}}),r};O_generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Zt=(e,t)=>((e,t)=>({[e]:t}))(e,t),Fn=e=>(e=>{const t={};return lt(e,r=>{t[r.key]=r.value}),t})(e),hr=e=>_t(e)?e:De,nc=(e,t,r)=>{let c=e.dom;const d=hr(r);for(;c.parentNode;){c=c.parentNode;const f=be_fromDom(c),v=t(f);if(v.isSome())return v;if(d(f))break}return B.none()},$i=(e,t,r)=>{const c=t(e),d=hr(r);return c.orThunk(()=>d(e)?B.none():nc(e,t,d))},Xl=(e,t)=>Jo(e.element,t.event.target),vs={can:Ot,abort:De,run:ve},Gu=e=>{if(!_r(e,"can")&&!_r(e,"abort")&&!_r(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...vs,...e}},ca=re,_a=ca("touchstart"),za=ca("touchmove"),lm=ca("touchend"),Po=ca("touchcancel"),ds=ca("mousedown"),Oa=ca("mousemove"),oc=ca("mouseout"),qu=ca("mouseup"),Ii=ca("mouseover"),Pa=ca("focusin"),wu=ca("focusout"),Li=ca("keydown"),mw=ca("keyup"),sg=ca("input"),nh=ca("change"),um=ca("click"),gw=ca("transitioncancel"),oh=ca("transitionend"),sh=ca("transitionstart"),fv=ca("selectstart"),kr=e=>re("alloy."+e),X1={tap:kr("tap")},Cu=kr("focus"),El=kr("blur.post"),xu=kr("paste.post"),Ql=kr("receive"),Hi=kr("execute"),Jh=kr("focus.item"),dm=X1.tap,mp=kr("longpress"),gp=kr("sandbox.close"),rh=kr("typeahead.cancel"),al=kr("system.init"),hw=kr("system.touchmove"),hp=kr("system.touchend"),mm=kr("system.scroll"),Od=kr("system.resize"),_l=kr("system.attached"),ah=kr("system.detached"),Su=kr("system.dismissRequested"),fw=kr("system.repositionRequested"),rg=kr("focusmanager.shifted"),fp=kr("slotcontainer.visibility"),pp=kr("system.external.element.scroll"),bp=kr("change.tab"),J1=kr("dismiss.tab"),Q1=kr("highlight"),eb=kr("dehighlight"),es=(e,t)=>{Xe(e,e.element,t,{})},wn=(e,t,r)=>{Xe(e,e.element,t,r)},Ol=e=>{es(e,Hi())},Ad=(e,t,r)=>{Xe(e,t,r,{})},Xe=(e,t,r,c)=>{const d={target:t,...c};e.getSystem().triggerEvent(r,t,d)},nb=(e,t,r,c)=>{e.getSystem().triggerEvent(r,t,c.event)},ss=e=>Fn(e),pv=(e,t)=>({key:e,value:Gu({abort:t})}),bv=e=>({key:e,value:Gu({run:(t,r)=>{r.event.prevent()}})}),ut=(e,t)=>({key:e,value:Gu({run:t})}),ob=(e,t,r)=>({key:e,value:Gu({run:(c,d)=>{t.apply(void 0,[c,d].concat(r))}})}),yp=e=>t=>({key:e,value:Gu({run:(r,c)=>{Xl(r,c)&&t(r,c)}})}),gm=(e,t,r)=>((e,t)=>ut(e,(r,c)=>{r.getSystem().getByUid(t).each(d=>{nb(d,d.element,e,c)})}))(e,t.partUids[r]),sb=(e,t)=>ut(e,(r,c)=>{const d=c.event,f=r.getSystem().getByDom(d.target).getOrThunk(()=>$i(d.target,x=>r.getSystem().getByDom(x).toOptional(),De).getOr(r));t(r,f,c)}),hm=e=>ut(e,(t,r)=>{r.cut()}),vw=e=>ut(e,(t,r)=>{r.stop()}),ag=(e,t)=>yp(e)(t),lr=yp(_l()),Ku=yp(ah()),rb=yp(al()),eu=(e=>t=>ut(e,t))(Hi()),ab=e=>e.dom.innerHTML,cg=(e,t)=>{const c=cr(e).dom,d=be_fromDom(c.createDocumentFragment()),f=((e,t)=>{const c=(t||document).createElement("div");return c.innerHTML=e,Ds(be_fromDom(c))})(t,c);Ea(d,f),nm(e),Ac(e,d)},dT=e=>J(e)?"#shadow-root":(e=>{const t=be_fromTag("div"),r=be_fromDom(e.dom.cloneNode(!0));return Ac(t,r),ab(t)})((e=>((e,t)=>be_fromDom(e.dom.cloneNode(!1)))(e))(e)),fm=e=>dT(e),Cw=ss([((e,t)=>({key:e,value:Gu({can:(e,t)=>{const r=t.event,c=r.originator,d=r.target;return!((e,t,r)=>Jo(t,e.element)&&!Jo(t,r))(e,c,d)||(console.warn(Cu()+" did not get interpreted by the desired target. \nOriginator: "+fm(c)+"\nTarget: "+fm(d)+"\nCheck the "+Cu()+" event handlers"),!1)}})}))(Cu())]);var Cp=Object.freeze({__proto__:null,events:Cw});let cb=0;const un=e=>{const r=(new Date).getTime(),c=Math.floor(1e9*Math.random());return cb++,e+"_"+c+cb+String(r)},vv=re("alloy-id-"),xw=re("data-alloy-id"),nn=vv(),ib=xw(),pm=(e,t)=>{Object.defineProperty(e.dom,ib,{value:t,writable:!0})},ig=e=>{const t=co(e)?e.dom[ib]:null;return B.from(t)},ch=e=>un(e),mT=gt,lb=e=>{const t=d=>`The component must be in a context to execute: ${d}`+(e?"\n"+fm(e().element)+" is not in context.":""),r=d=>()=>{throw new Error(t(d))},c=d=>()=>{console.warn(t(d))};return{debugInfo:re("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:r("build"),buildOrPatch:r("buildOrPatch"),addToWorld:r("addToWorld"),removeFromWorld:r("removeFromWorld"),addToGui:r("addToGui"),removeFromGui:r("removeFromGui"),getByUid:r("getByUid"),getByDom:r("getByDom"),isConnected:De}},yv=lb(),sc=e=>Be(e,t=>cs(t,"/*")?t.substring(0,t.length-2):t),zi=(e,t)=>{const r=e.toString(),c=r.indexOf(")")+1,d=r.indexOf("("),f=r.substring(d+1,c-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:sc(f)}),e},ub=un("alloy-premade"),Tw=e=>(Object.defineProperty(e.element.dom,ub,{value:e.uid,writable:!0}),Zt(ub,e)),kw=e=>rt(e,ub),bm=e=>((e,t)=>{const r=t.toString(),c=r.indexOf(")")+1,d=r.indexOf("("),f=r.substring(d+1,c-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:sc(f.slice(1))}),e})((t,...r)=>e(t.getApis(),t,...r),e),tu={init:()=>cl({readState:re("No State required")})},cl=e=>e,Ew=(e,t)=>{const r={};return Ye(e,(c,d)=>{Ye(c,(f,v)=>{const x=rt(r,v).getOr([]);r[v]=x.concat([t(d,f)])})}),r},Tu=e=>({classes:Mo(e.classes)?[]:e.classes,attributes:Mo(e.attributes)?{}:e.attributes,styles:Mo(e.styles)?{}:e.styles}),Sp=e=>e.cHandler,xv=(e,t)=>({name:e,handler:t}),gb=(e,t)=>{const r={};return lt(e,c=>{r[c.name()]=c.handlers(t)}),r},wT=(e,t,r)=>{const c=t[r];return c?((e,t,r,c)=>{try{const d=Mr(r,(f,v)=>{const x=f[t],k=v[t],R=c.indexOf(x),I=c.indexOf(k);if(-1===R)throw new Error("The ordering for "+e+" does not have an entry for "+x+".\nOrder specified: "+JSON.stringify(c,null,2));if(-1===I)throw new Error("The ordering for "+e+" does not have an entry for "+k+".\nOrder specified: "+JSON.stringify(c,null,2));return R<I?-1:I<R?1:0});return Rt.value(d)}catch(d){return Rt.error([d])}})("Event: "+r,"name",e,c).map(d=>(e=>{const t=((e,t)=>(...r)=>Ht(e,(c,d)=>c&&(d=>d.can)(d).apply(void 0,r),!0))(e),r=((e,t)=>(...r)=>Ht(e,(c,d)=>c||(d=>d.abort)(d).apply(void 0,r),!1))(e);return{can:t,abort:r,run:(...d)=>{lt(e,f=>{f.run.apply(void 0,d)})}}})(Be(d,v=>v.handler))):((e,t)=>Rt.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Be(t,r=>r.name),null,2)]))(r,e)},CT=(e,t)=>{const r=jr(e,(c,d)=>(1===c.length?Rt.value(c[0].handler):wT(c,t,d)).map(v=>{const x=(e=>{const t=(e=>_t(e)?{can:Ot,abort:De,run:e}:e)(e);return(r,c,...d)=>{const f=[r,c].concat(d);t.abort.apply(void 0,f)?c.stop():t.can.apply(void 0,f)&&t.run.apply(void 0,f)}})(v),k=c.length>1?so(t[d],R=>Ys(c,I=>I.name===R)).join(" > "):c[0].name;return Zt(d,((e,t)=>({handler:e,purpose:t}))(x,k))}));return((e,t)=>{const r=(e=>{const t=[],r=[];return lt(e,c=>{c.fold(d=>{t.push(d)},d=>{r.push(d)})}),{errors:t,values:r}})(e);return r.errors.length>0?(e=>Rt.error(En(e)))(r.errors):((e,t)=>Rt.value(0===e.length?t:Js(t,Gg.apply(void 0,e))))(r.values,t)})(r,{})},Dd="alloy.base.behaviour",Sv=Tn([Ha("dom","dom",{tag:"required",process:{}},Tn([dt("tag"),$e("styles",{}),$e("classes",[]),$e("attributes",{}),us("value"),us("innerHtml")])),dt("components"),dt("uid"),$e("events",{}),$e("apis",{}),Ha("eventOrder","eventOrder",(e=>Pn(re(e)))({[Hi()]:["disabling",Dd,"toggling","typeaheadevents"],[Cu()]:[Dd,"focusing","keying"],[al()]:[Dd,"disabling","toggling","representing"],[sg()]:[Dd,"representing","streaming","invalidating"],[ah()]:[Dd,"representing","item-events","tooltipping"],[ds()]:["focusing",Dd,"item-type-events"],[_a()]:["focusing",Dd,"item-type-events"],[Ii()]:["item-type-events","tooltipping"],[Ql()]:["receiving","reflecting","tooltipping"]}),hi()),us("domModification")]),Q_=e=>e.events,Qh=(e,t)=>{const r=Bo(e,t);return void 0===r||""===r?[]:r.split(" ")},ef=e=>void 0!==e.dom.classList,Rw=e=>Qh(e,"class"),va=(e,t)=>{ef(e)?e.dom.classList.add(t):((e,t)=>{((e,t,r)=>{const d=Qh(e,t).concat([r]);Bn(e,t,d.join(" "))})(e,"class",t)})(e,t)},Hr=(e,t)=>{ef(e)?e.dom.classList.remove(t):((e,t)=>{((e,t,r)=>{const c=so(Qh(e,t),d=>d!==r);c.length>0?Bn(e,t,c.join(" ")):ae(e,t)})(e,"class",t)})(e,t),(e=>{0===(ef(e)?e.dom.classList:Rw(e)).length&&ae(e,"class")})(e)},Ui=(e,t)=>ef(e)&&e.dom.classList.contains(t),Md=(e,t)=>{lt(t,r=>{va(e,r)})},ri=(e,t)=>{lt(t,r=>{Hr(e,r)})},kv=(e,t)=>yr(t,r=>Ui(e,r)),Al=e=>e.dom.value,ya=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},vb=(e,t,r)=>{r.fold(()=>Ac(e,t),c=>{Jo(c,t)||(vu(c,t),ir(c))})},Dw=(e,t,r)=>{const c=Be(t,r),d=Ds(e);return lt(d.slice(c.length),ir),c},Ev=(e,t,r,c)=>{const d=Ia(e,t),f=c(r,d),v=((e,t,r)=>Ia(e,t).map(d=>{if(r.exists(v=>!Jo(v,d))){const v=r.map(ws).getOr("span"),x=be_fromTag(v);return vu(d,x),x}return d}))(e,t,d);return vb(e,f.element,v),f},Mw=(e,t)=>{const r=Xo(e),c=Xo(t),d=Ls(c,r),f=((e,t)=>{const r={},c={};return Kn(e,t,tn(r),tn(c)),{t:r,f:c}})(e,(v,x)=>!Qn(t,x)||v!==t[x]).t;return{toRemove:d,toSet:f}},Nw=(e,t)=>{const{class:r,style:c,...d}=(e=>Ht(e.dom.attributes,(t,r)=>(t[r.name]=r.value,t),{}))(t),{toSet:f,toRemove:v}=Mw(e.attributes,d),k=Nr(t),{toSet:R,toRemove:I}=Mw(e.styles,k),Z=(e=>ef(e)?(e=>{const t=e.dom.classList,r=new Array(t.length);for(let c=0;c<t.length;c++){const d=t.item(c);null!==d&&(r[c]=d)}return r})(e):Rw(e))(t),Y=Ls(Z,e.classes),oe=Ls(e.classes,Z);return lt(v,Qe=>ae(t,Qe)),pl(t,f),Md(t,oe),ri(t,Y),lt(I,Qe=>F(t,Qe)),Ms(t,R),e.innerHtml.fold(()=>{((e,t)=>{Dw(e,t,(r,c)=>{const d=Ia(e,c);return vb(e,r,d),r})})(t,e.domChildren)},Qe=>{cg(t,Qe)}),(()=>{const Qe=t,He=e.value.getOrUndefined();He!==Al(Qe)&&ya(Qe,He??"")})(),t},AT=e=>{const t=(e=>{const t=rt(e,"behaviours").getOr({});return No(Xo(t),r=>{const c=t[r];return Wn(c)?[c.me]:[]})})(e);return((e,t)=>((e,t)=>{const r=Be(t,d=>Rc(d.name(),[dt("config"),$e("state",tu)])),c=Ar("component.behaviours",Tn(r),e.behaviours).fold(d=>{throw new Error(Zu(d)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},gt);return{list:t,data:Ke(c,d=>{const f=d.map(v=>({config:v.config,state:v.state.init(v.config)}));return re(f)})}})(e,t))(e,t)},e4=(e,t)=>{const r=()=>Qe,c=_n(yv),d=Uc((e=>Ar("custom.definition",Sv,e))(e)),f=AT(e),v=(e=>e.list)(f),x=(e=>e.data)(f),k=((e,t,r)=>{const c=(e=>({...e.dom,uid:e.uid,domChildren:Be(e.components,t=>t.element)}))(e),d=(e=>e.domModification.fold(()=>Tu({}),Tu))(e),v=t.length>0?((e,t,r,c)=>{const d={...t};lt(r,I=>{d[I.name()]=I.exhibit(e,c)});const f=Ew(d,(I,V)=>({name:I,modification:V})),v=I=>jn(I,(V,Z)=>({...Z.modification,...V}),{}),x=jn(f.classes,(I,V)=>V.modification.concat(I),[]),k=v(f.attributes),R=v(f.styles);return Tu({classes:x,attributes:k,styles:R})})(r,{"alloy.base.modification":d},t,c):d;return((e,t)=>({...e,attributes:{...e.attributes,...t.attributes},styles:{...e.styles,...t.styles},classes:e.classes.concat(t.classes)}))(c,v)})(d,v,x),R=((e,t)=>{const c=t.filter(d=>ws(d)===e.tag&&!(e=>e.innerHtml.isSome()&&e.domChildren.length>0)(e)&&!(e=>Qn(e.dom,ub))(d)).bind(d=>((e,t)=>{try{const r=Nw(e,t);return B.some(r)}catch{return B.none()}})(e,d)).getOrThunk(()=>(e=>{const t=be_fromTag(e.tag);return pl(t,e.attributes),Md(t,e.classes),Ms(t,e.styles),e.innerHtml.each(c=>cg(t,c)),Ea(t,e.domChildren),e.value.each(c=>{ya(t,c)}),t})(e));return pm(c,e.uid),c})(k,t),I=((e,t,r)=>{const c={"alloy.base.behaviour":Q_(e)};return((e,t,r,c)=>{const d=((e,t,r)=>{const c={...r,...gb(t,e)};return Ew(c,xv)})(e,r,c);return CT(d,t)})(r,e.eventOrder,t,c).getOrDie()})(d,v,x),V=_n(d.components),Qe={uid:e.uid,getSystem:c.get,config:He=>{const St=x;return(_t(St[He.name()])?St[He.name()]:()=>{throw new Error("Could not find "+He.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:He=>_t(x[He.name()]),spec:e,readState:He=>x[He]().map(St=>St.state.readState()).getOr("not enabled"),getApis:()=>d.apis,connect:He=>{c.set(He)},disconnect:()=>{c.set(lb(r))},element:R,syncComponents:()=>{const He=Ds(R),St=No(He,pt=>c.get().getByDom(pt).fold(()=>[],zo));V.set(St)},components:V.get,events:I};return Qe},Yr=e=>{const t=be_fromText(e);return _v({element:t})},_v=e=>{const t=oi("external.component",Di([dt("element"),us("uid")]),e),r=_n(lb()),f=t.uid.getOrThunk(()=>ch("external"));pm(t.element,f);const v={uid:f,getSystem:r.get,config:B.none,hasConfigured:De,connect:x=>{r.set(x)},disconnect:()=>{r.set(lb(()=>v))},getApis:()=>({}),element:t.element,spec:e,readState:re("No state"),syncComponents:ve,components:re([]),events:{}};return Tw(v)},Ov=ch,Av=(e,t)=>kw(e).getOrThunk(()=>((e,t)=>{const{events:r,...c}=mT(e),d=((e,t)=>{const r=rt(e,"components").getOr([]);return t.fold(()=>Be(r,Dc),c=>Be(r,(d,f)=>Av(d,Ia(c,f))))})(c,t),f={...c,events:{...Cp,...r},components:d};return Rt.value(e4(f,t))})((e=>Qn(e,"uid"))(e)?e:{uid:Ov(""),...e},t).getOrDie()),Dc=e=>Av(e,B.none()),fi=Tw;var $w=(e,t,r,c,d)=>e(r,c)?B.some(r):_t(d)&&d(r)?B.none():t(r,c,d);const Iw=(e,t,r)=>{let c=e.dom;const d=_t(r)?r:De;for(;c.parentNode;){c=c.parentNode;const f=be_fromDom(c);if(t(f))return B.some(f);if(d(f))break}return B.none()},Lw=(e,t,r)=>$w((d,f)=>f(d),Iw,e,t,r),xb=(e,t,r)=>Lw(e,t,r).isSome(),wm=(e,t,r)=>Iw(e,c=>hc(c,t),r),Rv=(e,t)=>((e,t)=>fo(e.dom.childNodes,d=>t(be_fromDom(d))).map(be_fromDom))(e,r=>hc(r,t)),ia=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return is(r)?B.none():B.from(r.querySelector(e)).map(be_fromDom)})(t,e),Yu=(e,t,r)=>$w((d,f)=>hc(d,f),wm,e,t,r),lh="aria-controls",Dv=()=>{const e=un(lh);return{id:e,link:c=>{Bn(c,lh,e)},unlink:c=>{ae(c,lh)}}},lg=(e,t)=>xb(t,r=>Jo(r,e.element),De)||((e,t)=>(e=>Lw(e,r=>{if(!co(r))return!1;const c=Bo(r,"id");return void 0!==c&&c.indexOf(lh)>-1}).bind(r=>{const c=Bo(r,"id"),d=Ve(r);return ia(d,`[${lh}="${c}"]`)}))(t).exists(r=>lg(e,r)))(e,t);var ku;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(ku||(ku={}));const Nv=_n({}),Uw=["alloy/data/Fields","alloy/debugging/Debugging"],ug=(e,t,r)=>((e,t,r)=>{switch(rt(Nv.get(),e).orThunk(()=>{const d=Xo(Nv.get());return $o(d,f=>e.indexOf(f)>-1?B.some(Nv.get()[f]):B.none())}).getOr(ku.NORMAL)){case ku.NORMAL:return r(_p());case ku.LOGGING:{const d=((e,t)=>{const r=[],c=(new Date).getTime();return{logEventCut:(d,f,v)=>{r.push({outcome:"cut",target:f,purpose:v})},logEventStopped:(d,f,v)=>{r.push({outcome:"stopped",target:f,purpose:v})},logNoParent:(d,f,v)=>{r.push({outcome:"no-parent",target:f,purpose:v})},logEventNoHandlers:(d,f)=>{r.push({outcome:"no-handlers-left",target:f})},logEventResponse:(d,f,v)=>{r.push({outcome:"response",purpose:v,target:f})},write:()=>{const d=(new Date).getTime();xo(["mousemove","mouseover","mouseout",al()],e)||console.log(e,{event:e,time:d-c,target:t.dom,sequence:Be(r,f=>xo(["cut","stopped","response"],f.outcome)?"{"+f.purpose+"} "+f.outcome+" at ("+fm(f.target)+")":f.outcome)})}}})(e,t),f=r(d);return d.write(),f}case ku.STOP:return!0}})(e,t,r),_p=re({logEventCut:ve,logEventStopped:ve,logNoParent:ve,logEventNoHandlers:ve,logEventResponse:ve,write:ve}),Bv=re([dt("menu"),dt("selectedMenu")]),Op=re([dt("item"),dt("selectedItem")]);re(Tn(Op().concat(Bv())));const Ww=re(Tn(Op())),BT=Wu("initSize",[dt("numColumns"),dt("numRows")]),Tb=()=>Wu("markers",[dt("backgroundMenu")].concat(Bv()).concat(Op())),Eu=e=>Wu("markers",Be(e,dt)),kb=(e,t,r)=>((()=>{const e=new Error;if(void 0!==e.stack){const t=e.stack.split("\n");fo(t,r=>r.indexOf("alloy")>0&&!Ys(Uw,c=>r.indexOf(c)>-1)).getOr("unknown")}})(),Ha(t,t,r,kd(c=>Rt.value((...d)=>c.apply(void 0,d))))),Ko=e=>kb(0,e,Ri(ve)),bc=e=>kb(0,e,Ri(B.none)),nu=e=>kb(0,e,{tag:"required",process:{}}),tf=e=>kb(0,e,{tag:"required",process:{}}),Gs=(e,t)=>pc(e,re(t)),Cm=e=>pc(e,gt),Xu=re(BT),rc=(e,t,r,c,d,f,v,x=!1)=>({x:e,y:t,bubble:r,direction:c,placement:d,restriction:f,label:`${v}-${d}`,alwaysFit:x}),Ju=O_generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ap=(e,t,r,c)=>e.fold(t,c,t,c,r,r,t,c),mg=Ju.southeast,Nd=Ju.southwest,Rp=Ju.northeast,gg=Ju.northwest,nf=Ju.south,Eb=Ju.north,Dp=Ju.east,ac=Ju.west,uh=(e,t,r,c)=>{const d=e+t;return d>c?r:d<r?c:d},cc=(e,t,r)=>Math.min(Math.max(e,t),r),ic=(e,t)=>Qr(["left","right","top","bottom"],r=>rt(t,r).map(c=>((e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}})(e,c))),xm="layout",Mp=e=>e.x,Np=(e,t)=>e.x+e.width/2-t.width/2,Bp=(e,t)=>e.x+e.width-t.width,Pp=(e,t)=>e.y-t.height,_u=e=>e.y+e.height,Pv=(e,t)=>e.y+e.height/2-t.height/2,ur=(e,t,r)=>rc(Mp(e),_u(e),r.southeast(),mg(),"southeast",ic(e,{left:1,top:3}),xm),Aa=(e,t,r)=>rc(Bp(e,t),_u(e),r.southwest(),Nd(),"southwest",ic(e,{right:0,top:3}),xm),pi=(e,t,r)=>rc(Mp(e),Pp(e,t),r.northeast(),Rp(),"northeast",ic(e,{left:1,bottom:2}),xm),Qs=(e,t,r)=>rc(Bp(e,t),Pp(e,t),r.northwest(),gg(),"northwest",ic(e,{right:0,bottom:2}),xm),er=(e,t,r)=>rc(Np(e,t),Pp(e,t),r.north(),Eb(),"north",ic(e,{bottom:2}),xm),tr=(e,t,r)=>rc(Np(e,t),_u(e),r.south(),nf(),"south",ic(e,{top:3}),xm),Mc=(e,t,r)=>rc((e=>e.x+e.width)(e),Pv(e,t),r.east(),Dp(),"east",ic(e,{left:0}),xm),Rl=(e,t,r)=>rc(((e,t)=>e.x-t.width)(e,t),Pv(e,t),r.west(),ac(),"west",ic(e,{right:1}),xm),_b=()=>[ur,Aa,pi,Qs,tr,er,Mc,Rl],ou=()=>[Aa,ur,Qs,pi,tr,er,Mc,Rl],hg=()=>[pi,Qs,ur,Aa,er,tr],Iv=()=>[Qs,pi,Aa,ur,er,tr],Ob=()=>[ur,Aa,pi,Qs,tr,er],fg=()=>[Aa,ur,Qs,pi,tr,er];var Kw=Object.freeze({__proto__:null,events:e=>ss([ut(Ql(),(t,r)=>{const c=e.channels,d=Xo(c),f=r,v=((e,t)=>t.universal?e:so(e,r=>xo(t.channels,r)))(d,f);lt(v,x=>{const k=c[x],R=k.schema,I=oi("channel["+x+"] data\nReceiver: "+fm(t.element),R,f.data);k.onReceive(t,I)})})])}),Yw=[si("channels",Yh(Rt.value,Di([nu("onReceive"),$e("schema",hi())])))];const Ab=(e,t,r)=>rb((c,d)=>{r(c,e,t)}),Rb=e=>({key:e,value:void 0}),Hv=(e,t,r,c,d,f,v)=>{const x=V=>_r(V,r)?V[r]():B.none(),k=Ke(d,(V,Z)=>((e,t,r)=>((e,t,r)=>{const c=r.toString(),d=c.indexOf(")")+1,f=c.indexOf("("),v=c.substring(f+1,d-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:sc(v.slice(0,1).concat(v.slice(3)))}),e})((d,...f)=>{const v=[d].concat(f);return d.config({name:re(e)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+r)},x=>{const k=Array.prototype.slice.call(v,1);return t.apply(void 0,[d,x.config,x.state].concat(k))})},r,t))(r,V,Z)),I={...Ke(f,(V,Z)=>zi(V,Z)),...k,revoke:ko(Rb,r),config:V=>{const Z=oi(r+"-config",e,V);return{key:r,value:{config:Z,me:I,configAsRaw:js(()=>oi(r+"-config",e,V)),initialConfig:V,state:v}}},schema:re(t),exhibit:(V,Z)=>Sa(x(V),rt(c,"exhibit"),(Y,oe)=>oe(Z,Y.config,Y.state)).getOrThunk(()=>Tu({})),name:re(r),handlers:V=>x(V).map(Z=>rt(c,"events").getOr(()=>({}))(Z.config,Z.state)).getOr({})};return I},Et=e=>Fn(e),Vv=Di([dt("fields"),dt("name"),$e("active",{}),$e("apis",{}),$e("state",tu),$e("extra",{})]),Ua=e=>{const t=oi("Creating behaviour: "+e.name,Vv,e);return((e,t,r,c,d,f)=>{const v=Di(e),x=Rc(t,[th("config",e)]);return Hv(v,x,t,r,c,d,f)})(t.fields,t.name,t.active,t.apis,t.extra,t.state)},$T=Di([dt("branchKey"),dt("branches"),dt("name"),$e("active",{}),$e("apis",{}),$e("state",tu),$e("extra",{})]),Xw=e=>{const t=oi("Creating behaviour: "+e.name,$T,e);return((e,t,r,c,d,f)=>{const v=e,x=Rc(t,[Tl("config",e)]);return Hv(v,x,t,r,c,d,f)})(Qa(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},zv=re(void 0),ai=Ua({fields:Yw,name:"receiving",active:Kw});var Fp=Object.freeze({__proto__:null,exhibit:(e,t)=>Tu({classes:[],styles:t.useFixed()?{}:{position:"relative"}})});const il=e=>e.dom.focus(),$p=e=>e.dom.blur(),Bd=e=>{const t=Ve(e).dom;return e.dom===t.activeElement},ll=(e=Vu())=>B.from(e.dom.activeElement).map(be_fromDom),Dl=e=>ll(Ve(e)).filter(t=>e.dom.contains(t.dom)),pg=(e,t)=>{const r=Ve(t),c=ll(r).bind(f=>{const v=x=>Jo(f,x);return v(t)?B.some(t):((e,t)=>{const r=c=>{for(let d=0;d<c.childNodes.length;d++){const f=be_fromDom(c.childNodes[d]);if(t(f))return B.some(f);const v=r(c.childNodes[d]);if(v.isSome())return v}return B.none()};return r(e.dom)})(t,v)}),d=e(t);return c.each(f=>{ll(r).filter(v=>Jo(v,f)).fold(()=>{il(f)},ve)}),d},Ml=(e,t,r,c,d)=>{const f=v=>v+"px";return{position:e,left:t.map(f),top:r.map(f),right:c.map(f),bottom:d.map(f)}},Ip=(e,t)=>{ka(e,(e=>({...e,position:B.some(e.position)}))(t))},Lp=O_generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Zv=(e,t,r,c,d,f)=>{const v=t.rect,x=v.x-r,k=v.y-c,V=d-(x+v.width),Z=f-(k+v.height),Y=B.some(x),oe=B.some(k),pe=B.some(V),Ge=B.some(Z),Te=B.none();return((e,t,r,c,d,f,v,x,k)=>e.fold(t,r,c,d,f,v,x,k))(t.direction,()=>Ml(e,Y,oe,Te,Te),()=>Ml(e,Te,oe,pe,Te),()=>Ml(e,Y,Te,Te,Ge),()=>Ml(e,Te,Te,pe,Ge),()=>Ml(e,Y,oe,Te,Te),()=>Ml(e,Y,Te,Te,Ge),()=>Ml(e,Y,oe,Te,Te),()=>Ml(e,Te,oe,pe,Te))},sf=(e,t)=>e.fold(()=>{const r=t.rect;return Ml("absolute",B.some(r.x),B.some(r.y),B.none(),B.none())},(r,c,d,f)=>Zv("absolute",t,r,c,d,f),(r,c,d,f)=>Zv("fixed",t,r,c,d,f)),Hp=(e,t)=>{const r=ko(yt,t),c=e.fold(r,r,()=>{const v=La();return yt(t).translate(-v.left,-v.top)}),d=fa(t),f=cn(t);return _s(c.left,c.top,d,f)},dh=(e,t)=>t.fold(()=>e.fold(H,H,_s),r=>e.fold(re(r),re(r),()=>{const c=Wv(e,r.x,r.y);return _s(c.left,c.top,r.width,r.height)})),Wv=(e,t,r)=>{const c=po(t,r);return e.fold(re(c),re(c),()=>{const f=La();return c.translate(-f.left,-f.top)})},Qw=Lp.relative,jv=Lp.fixed,Db="data-alloy-placement",Mb=e=>z(e,Db),mh=O_generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Ra=e=>{const t=_n(B.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(B.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:x=>{r(),t.set(B.some(x))}}},Qu=()=>Ra(e=>e.unbind()),fr=()=>{const e=Ra(ve);return{...e,on:r=>e.get().each(r)}},Yv=Ot,bi=(e,t,r)=>((e,t,r,c)=>Wl(e,t,r,c,!1))(e,t,Yv,r),gh=(e,t,r)=>((e,t,r,c)=>Wl(e,t,r,c,!0))(e,t,Yv,r),Za=zg,tC=["top","bottom","right","left"],Vp="data-alloy-transition-timer",hh=(e,t,r,c,d,f)=>{const v=((e,t,r)=>r.exists(c=>{const d=e.mode;return"all"===d||c[d]!==t[d]}))(c,d,f);if(v||((e,t)=>kv(e,t.classes))(e,c)){Xt(e,"position",r.position);const x=Hp(t,e),k=sf(t,{...d,rect:x}),R=Qr(tC,I=>k[I]);((e,t)=>{const r=c=>parseFloat(c).toFixed(3);return Es(t,(c,d)=>!((e,t,r=Is)=>Sa(e,t,r).getOr(e.isNone()&&t.isNone()))(e[d].map(r),c.map(r))).isSome()})(r,R)&&(ka(e,R),v&&((e,t)=>{Md(e,t.classes),z(e,Vp).each(r=>{clearTimeout(parseInt(r,10)),ae(e,Vp)}),((e,t)=>{const r=Qu(),c=Qu();let d;const f=R=>{var I;const V=null!==(I=R.raw.pseudoElement)&&void 0!==I?I:"";return Jo(R.target,e)&&(e=>!le(e))(V)&&xo(tC,R.raw.propertyName)},v=R=>{if(Ro(R)||f(R)){r.clear(),c.clear();const I=R?.raw.type;(Ro(I)||I===oh())&&(clearTimeout(d),ae(e,Vp),ri(e,t.classes))}},x=bi(e,sh(),R=>{f(R)&&(x.unbind(),r.set(bi(e,oh(),v)),c.set(bi(e,gw(),v)))}),k=(e=>{const t=f=>{const x=Ns(e,f).split(/\s*,\s*/);return so(x,le)},r=f=>{if(bn(f)&&/^[\d.]+/.test(f)){const v=parseFloat(f);return cs(f,"ms")?v:1e3*v}return 0},c=t("transition-delay"),d=t("transition-duration");return Ht(d,(f,v,x)=>{const k=r(c[x])+r(v);return Math.max(f,k)},0)})(e);requestAnimationFrame(()=>{d=setTimeout(v,k+17),Bn(e,Vp,d)})})(e,t)})(e,c),ue(e))}else ri(e,c.classes)},rC=(e,t,r,c)=>{F(t,"max-height"),F(t,"max-width");const d=(e=>({width:fa(e),height:cn(e)}))(t);return((e,t,r,c,d,f)=>{const v=c.width,x=c.height,k=(I,V,Z,Y,oe)=>{const Ge=((e,t,r,c)=>{const d=e.bubble,f=d.offset,v=((e,t,r)=>{const c=(k,R)=>t[k].map(I=>{const V="top"===k||"bottom"===k,Z=V?r.top:r.left,oe=("left"===k||"top"===k?Math.max:Math.min)(I,R)+Z;return V?cc(oe,e.y,e.bottom):cc(oe,e.x,e.right)}).getOr(R),d=c("left",e.x),f=c("top",e.y),v=c("right",e.right),x=c("bottom",e.bottom);return _s(d,f,v-d,x-f)})(c,e.restriction,f),k=e.y+f.top,R=_s(e.x+f.left,k,t,r),{originInBounds:I,sizeInBounds:V,visibleW:Z,visibleH:Y}=((e,t)=>{const{x:r,y:c,right:d,bottom:f}=t,{x:v,y:x,right:k,bottom:R,width:I,height:V}=e;return{originInBounds:v>=r&&v<=d&&x>=c&&x<=f,sizeInBounds:k<=d&&k>=r&&R<=f&&R>=c,visibleW:Math.min(I,v>=r?d-v:k-r),visibleH:Math.min(V,x>=c?f-x:R-c)}})(R,v),oe=I&&V,pe=oe?R:((e,t)=>{const{x:r,y:c,right:d,bottom:f}=t,{x:v,y:x,width:k,height:R}=e,I=Math.max(r,d-k),V=Math.max(c,f-R),Z=cc(v,r,I),Y=cc(x,c,V),oe=Math.min(Z+k,d)-Z,pe=Math.min(Y+R,f)-Y;return _s(Z,Y,oe,pe)})(R,v),Ge=pe.width>0&&pe.height>0,{maxWidth:Te,maxHeight:xe}=((e,t,r)=>{const c=re(t.bottom-r.y),d=re(r.bottom-t.y),f=((e,t,r,c)=>e.fold(t,t,c,c,t,c,r,r))(e,d,d,c),v=re(t.right-r.x),x=re(r.right-t.x);return{maxWidth:Ap(e,x,x,v),maxHeight:f}})(e.direction,pe,c),Qe={rect:pe,maxHeight:xe,maxWidth:Te,direction:e.direction,placement:e.placement,classes:{on:d.classesOn,off:d.classesOff},layout:e.label,testY:k};return oe||e.alwaysFit?mh.fit(Qe):mh.nofit(Qe,Z,Y,Ge)})(I(r,c,d,e,f),v,x,f);return Ge.fold(re(Ge),(Te,xe,Qe,He)=>(oe===He?Qe>Y||xe>Z:!oe&&He)?Ge:mh.nofit(V,Z,Y,oe))};return Ht(t,(I,V)=>{const Z=ko(k,V);return I.fold(re(I),Z)},mh.nofit({rect:r,maxHeight:c.height,maxWidth:c.width,direction:mg(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:r.y},-1,-1,!1)).fold(gt,gt)})(t,c.preference,e,d,r,c.bounds)},Qv=(e,t)=>{((e,t)=>{const c=ot.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Xt(e,"max-height",c+"px")})(e,Math.floor(t))},Pb=re((e,t)=>{Qv(e,t),Ms(e,{"overflow-x":"hidden","overflow-y":"auto"})}),km=re((e,t)=>{Qv(e,t)}),ey=(e,t,r)=>void 0===e[t]?r:e[t],iC=(e,t,r,c)=>{const d=rC(e,t,r,c);return((e,t,r)=>{const c=sf(r.origin,t);r.transition.each(d=>{hh(e,r.origin,c,d,t,r.lastPlacement)}),Ip(e,c)})(t,d,c),((e,t)=>{((e,t)=>{Bn(e,Db,t)})(e,t.placement)})(t,d),((e,t)=>{const r=t.classes;ri(e,r.off),Md(e,r.on)})(t,d),((e,t,r)=>{(0,r.maxHeightFunction)(e,t.maxHeight)})(t,d,c),((e,t,r)=>{(0,r.maxWidthFunction)(e,t.maxWidth)})(t,d,c),{layout:d.layout,placement:d.placement}},lC=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],qt=(e,t,r,c=1)=>{const d=e*c,f=t*c,v=k=>rt(r,k).getOr([]),x=(k,R,I)=>{const V=Ls(lC,I);return{offset:po(k,R),classesOn:No(I,v),classesOff:No(V,v)}};return{southeast:()=>x(-e,t,["top","alignLeft"]),southwest:()=>x(e,t,["top","alignRight"]),south:()=>x(-e/2,t,["top","alignCentre"]),northeast:()=>x(-e,-t,["bottom","alignLeft"]),northwest:()=>x(e,-t,["bottom","alignRight"]),north:()=>x(-e/2,-t,["bottom","alignCentre"]),east:()=>x(e,-t/2,["valignCentre","left"]),west:()=>x(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>x(d,f,["top","alignLeft","inset"]),insetNorthwest:()=>x(-d,f,["top","alignRight","inset"]),insetNorth:()=>x(-d/2,f,["top","alignCentre","inset"]),insetSoutheast:()=>x(d,-f,["bottom","alignLeft","inset"]),insetSouthwest:()=>x(-d,-f,["bottom","alignRight","inset"]),insetSouth:()=>x(-d/2,-f,["bottom","alignCentre","inset"]),insetEast:()=>x(-d,-f/2,["valignCentre","right","inset"]),insetWest:()=>x(d,-f/2,["valignCentre","left","inset"])}},Fd=()=>qt(0,0,{}),Up=gt,fh=(e,t)=>r=>"rtl"===Fb(r)?t:e,Fb=e=>"rtl"===Ns(e,"direction")?"rtl":"ltr";var ed;!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(ed||(ed={}));const Zp="data-alloy-vertical-dir",$b=e=>xb(e,t=>co(t)&&Bo(t,"data-alloy-vertical-dir")===ed.BottomToTop),ul=()=>Rc("layouts",[dt("onLtr"),dt("onRtl"),us("onBottomLtr"),us("onBottomRtl")]),Em=(e,t,r,c,d,f,v)=>{const x=v.map($b).getOr(!1),k=t.layouts.map(Y=>Y.onLtr(e)),R=t.layouts.map(Y=>Y.onRtl(e)),I=x?t.layouts.bind(Y=>Y.onBottomLtr.map(oe=>oe(e))).or(k).getOr(d):k.getOr(r),V=x?t.layouts.bind(Y=>Y.onBottomRtl.map(oe=>oe(e))).or(R).getOr(f):R.getOr(c);return fh(I,V)(e)};var uC=[dt("hotspot"),us("bubble"),$e("overrides",{}),ul(),Gs("placement",(e,t,r)=>{const d=Hp(r,t.hotspot.element),f=Em(e.element,t,Ob(),fg(),hg(),Iv(),B.some(t.hotspot.element));return B.some(Up({anchorBox:d,bubble:t.bubble.getOr(Fd()),overrides:t.overrides,layouts:f}))})],_m=[dt("x"),dt("y"),$e("height",0),$e("width",0),$e("bubble",Fd()),$e("overrides",{}),ul(),Gs("placement",(e,t,r)=>{const c=Wv(r,t.x,t.y),d=_s(c.left,c.top,t.width,t.height),f=Em(e.element,t,_b(),ou(),_b(),ou(),B.none());return B.some(Up({anchorBox:d,bubble:t.bubble,overrides:t.overrides,layouts:f}))})];const Wp=O_generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),af=e=>e.fold(gt,(t,r,c)=>t.translate(-r,-c)),Lb=e=>e.fold(gt,gt),dC=e=>Ht(e,(t,r)=>t.translate(r.left,r.top),po(0,0)),Hb=e=>{const t=Be(e,Lb);return dC(t)},VT=Wp.screen,mC=Wp.absolute,sy=(e,t,r)=>{const c=cr(e.element),d=La(c),f=((e,t,r)=>{const c=wo(r.root).dom;return B.from(c.frameElement).map(be_fromDom).filter(f=>{const v=cr(f),x=cr(e.element);return Jo(v,x)}).map($r)})(e,0,r).getOr(d);return mC(f,d.left,d.top)},ry=(e,t,r,c)=>{const d=VT(po(e,t));return B.some(((e,t,r)=>({point:e,width:t,height:r}))(d,r,c))},gC=(e,t,r,c,d)=>e.map(f=>{const v=[t,f.point],x=((e,t,r,c)=>e.fold(()=>Hb(v),()=>Hb(v),()=>(e=>{const t=Be(e,af);return dC(t)})(v)))(c),k=((e,t,r,c)=>({x:e,y:t,width:r,height:c}))(x.left,x.top,f.width,f.height),R=r.showAbove?hg():Ob(),I=r.showAbove?Iv():fg(),V=Em(d,r,R,I,R,I,B.none());return Up({anchorBox:k,bubble:r.bubble.getOr(Fd()),overrides:r.overrides,layouts:V})});var ay=[dt("node"),dt("root"),us("bubble"),ul(),$e("overrides",{}),$e("showAbove",!1),Gs("placement",(e,t,r)=>{const c=sy(e,0,t);return t.node.filter(ns).bind(d=>{const f=d.dom.getBoundingClientRect(),v=ry(f.left,f.top,f.width,f.height),x=t.node.getOr(e.element);return gC(v,c,t,r,x)})})];const yg_create=(e,t,r,c)=>({start:e,soffset:t,finish:r,foffset:c}),dy_getStart=(O_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),e=>e.fold(gt,gt,gt)),cf=O_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lf={domRange:cf.domRange,relative:cf.relative,exact:cf.exact,exactFromRange:e=>cf.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:t=>be_fromDom(t.startContainer),relative:(t,r)=>dy_getStart(t),exact:(t,r,c,d)=>t}))(e);return wo(t)},range:yg_create},yC=(e,t,r)=>{const c=e.document.createRange();return((e,t)=>{t.fold(r=>{e.setStartBefore(r.dom)},(r,c)=>{e.setStart(r.dom,c)},r=>{e.setStartAfter(r.dom)})})(c,t),((e,t)=>{t.fold(r=>{e.setEndBefore(r.dom)},(r,c)=>{e.setEnd(r.dom,c)},r=>{e.setEndAfter(r.dom)})})(c,r),c},ci=(e,t,r,c,d)=>{const f=e.document.createRange();return f.setStart(t.dom,r),f.setEnd(c.dom,d),f},Kp=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),bh=O_generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),hy=(e,t,r)=>t(be_fromDom(r.startContainer),r.startOffset,be_fromDom(r.endContainer),r.endOffset),zb=(e,t)=>((e,t)=>{const r=((e,t)=>t.match({domRange:r=>({ltr:re(r),rtl:B.none}),relative:(r,c)=>({ltr:js(()=>yC(e,r,c)),rtl:js(()=>B.some(yC(e,c,r)))}),exact:(r,c,d,f)=>({ltr:js(()=>ci(e,r,c,d,f)),rtl:js(()=>B.some(ci(e,d,f,r,c)))})}))(e,t);return((e,t)=>{const r=t.ltr();return r.collapsed?t.rtl().filter(d=>!1===d.collapsed).map(d=>bh.rtl(be_fromDom(d.endContainer),d.endOffset,be_fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>hy(0,bh.ltr,r)):hy(0,bh.ltr,r)})(0,r)})(e,t).match({ltr:(c,d,f,v)=>{const x=e.document.createRange();return x.setStart(c.dom,d),x.setEnd(f.dom,v),x},rtl:(c,d,f,v)=>{const x=e.document.createRange();return x.setStart(f.dom,v),x.setEnd(c.dom,d),x}}),xC=(e,t,r)=>so(((e,t)=>{const r=_t(t)?t:De;let c=e.dom;const d=[];for(;null!=c.parentNode;){const f=c.parentNode,v=be_fromDom(f);if(d.push(v),!0===r(v))break;c=f}return d})(e,r),t),Zc=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return is(r)?[]:Be(r.querySelectorAll(e),be_fromDom)})(t,e),yh=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return B.some(yg_create(be_fromDom(t.startContainer),t.startOffset,be_fromDom(r.endContainer),r.endOffset))}return B.none()},Ub=e=>{if(null===e.anchorNode||null===e.focusNode)return yh(e);{const t=be_fromDom(e.anchorNode),r=be_fromDom(e.focusNode);return((e,t,r,c)=>{const d=((e,t,r,c)=>{const f=cr(e).dom.createRange();return f.setStart(e.dom,t),f.setEnd(r.dom,c),f})(e,t,r,c),f=Jo(e,r)&&t===c;return d.collapsed&&!f})(t,e.anchorOffset,r,e.focusOffset)?B.some(yg_create(t,e.anchorOffset,r,e.focusOffset)):yh(e)}},Zb=(e,t)=>(e=>{const t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?B.some(r).map(Kp):B.none()})(zb(e,t)),SC=((e,t)=>{const c=f=>e(f)?B.from(f.dom.nodeValue):B.none();return{get:f=>{if(!e(f))throw new Error("Can only get text value of a text node");return c(f).getOr("")},getOption:c,set:(f,v)=>{if(!e(f))throw new Error("Can only set raw text value of a text node");f.dom.nodeValue=v}}})(Wo),Om=(e,t)=>({element:e,offset:t}),Xp=(e,t)=>Wo(e)?Om(e,t):((e,t)=>{const r=Ds(e);if(0===r.length)return Om(e,t);if(t<r.length)return Om(r[t],0);{const c=r[r.length-1],d=Wo(c)?(e=>SC.get(e))(c).length:Ds(c).length;return Om(c,d)}})(e,t),Wb=e=>void 0!==e.foffset,Jp=(e,t)=>t.getSelection.getOrThunk(()=>()=>(e=>(e=>B.from(e.getSelection()))(e).filter(t=>t.rangeCount>0).bind(Ub))(e))().map(c=>{if(Wb(c)){const d=Xp(c.start,c.soffset),f=Xp(c.finish,c.foffset);return lf.range(d.element,d.offset,f.element,f.offset)}return c});var xh=[us("getSelection"),dt("root"),us("bubble"),ul(),$e("overrides",{}),$e("showAbove",!1),Gs("placement",(e,t,r)=>{const c=wo(t.root).dom,d=sy(e,0,t),f=Jp(c,t).bind(k=>{if(Wb(k))return((e,t)=>(e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?B.some(t).map(Kp):B.none()})(zb(e,t)))(c,lf.exactFromRange(k)).orThunk(()=>{const I=be_fromText("\ufeff");vu(k.start,I);const V=Zb(c,lf.exact(I,0,I,1));return ir(I),V}).bind(I=>ry(I.left,I.top,I.width,I.height));{const R=Ke(k,V=>V.dom.getBoundingClientRect()),I={left:Math.min(R.firstCell.left,R.lastCell.left),right:Math.max(R.firstCell.right,R.lastCell.right),top:Math.min(R.firstCell.top,R.lastCell.top),bottom:Math.max(R.firstCell.bottom,R.lastCell.bottom)};return ry(I.left,I.top,I.right-I.left,I.bottom-I.top)}}),x=Jp(c,t).bind(k=>Wb(k)?co(k.start)?B.some(k.start):Tc(k.start):B.some(k.firstCell)).getOr(e.element);return gC(f,d,t,r,x)})];const Id="link-layout",TC=e=>e.x+e.width,jb=(e,t)=>e.x-t.width,kC=(e,t)=>e.y-t.height+e.height,jT=e=>e.y,Gb=(e,t,r)=>rc(TC(e),jT(e),r.southeast(),mg(),"southeast",ic(e,{left:0,top:2}),Id),qb=(e,t,r)=>rc(jb(e,t),jT(e),r.southwest(),Nd(),"southwest",ic(e,{right:1,top:2}),Id),Qp=(e,t,r)=>rc(TC(e),kC(e,t),r.northeast(),Rp(),"northeast",ic(e,{left:0,bottom:3}),Id),EC=(e,t,r)=>rc(jb(e,t),kC(e,t),r.northwest(),gg(),"northwest",ic(e,{right:1,bottom:3}),Id),Kb=()=>[Gb,qb,Qp,EC],vi=()=>[qb,Gb,EC,Qp];var OC=[dt("item"),ul(),$e("overrides",{}),Gs("placement",(e,t,r)=>{const c=Hp(r,t.item.element),d=Em(e.element,t,Kb(),vi(),Kb(),vi(),B.none());return B.some(Up({anchorBox:c,bubble:Fd(),overrides:t.overrides,layouts:d}))})],yy=Qa("type",{selection:xh,node:ay,hotspot:uC,submenu:OC,makeshift:_m});const Yb=[Ni("classes",os),rl("mode","all",["all","layout","placement"])],wy=[$e("useFixed",De),us("getBounds")],Cy=[si("anchor",yy),Rc("transition",Yb)],xy=(e,t,r,c,d,f)=>{const v=oi("placement.info",Tn(Cy),d),x=v.anchor,k=c.element,R=r.get(c.uid);pg(()=>{Xt(k,"position","fixed");const I=Ws(k,"visibility");Xt(k,"visibility","hidden");const V=t.useFixed()?(()=>{const e=document.documentElement;return jv(0,0,e.clientWidth,e.clientHeight)})():(e=>{const t=$r(e.element),r=e.element.dom.getBoundingClientRect();return Qw(t.left,t.top,r.width,r.height)})(e);x.placement(e,x,V).each(Z=>{const Y=f.orThunk(()=>t.getBounds.map(dr)),oe=((e,t,r,c,d,f)=>{const v=((e,t)=>((e,t)=>({anchorBox:e,origin:t}))(e,t))(t.anchorBox,e);return((e,t,r,c,d,f,v,x)=>{const k=ey(v,"maxHeightFunction",Pb()),R=ey(v,"maxWidthFunction",ve),I=e.anchorBox,V=e.origin,Z={bounds:dh(V,f),origin:V,preference:c,maxHeightFunction:k,maxWidthFunction:R,lastPlacement:d,transition:x};return iC(I,t,r,Z)})(v,c.element,t.bubble,t.layouts,d,r,t.overrides,f)})(V,Z,Y,c,R,v.transition);r.set(c.uid,oe)}),I.fold(()=>{F(k,"visibility")},Z=>{Xt(k,"visibility",Z)}),Ws(k,"left").isNone()&&Ws(k,"top").isNone()&&Ws(k,"right").isNone()&&Ws(k,"bottom").isNone()&&ea(Ws(k,"position"),"fixed")&&F(k,"position")},k)};var n4=Object.freeze({__proto__:null,position:(e,t,r,c,d)=>{const f=B.none();xy(e,t,r,c,d,f)},positionWithinBounds:xy,getMode:(e,t,r)=>t.useFixed()?"fixed":"absolute",reset:(e,t,r,c)=>{const d=c.element;lt(["position","left","right","top","bottom"],f=>F(d,f)),(e=>{ae(e,Db)})(d),r.clear(c.uid)}}),Sy=Object.freeze({__proto__:null,init:()=>{let e={};return cl({readState:()=>e,clear:d=>{Wn(d)?delete e[d]:e={}},set:(d,f)=>{e[d]=f},get:d=>rt(e,d)})}});const Nc=Ua({fields:wy,name:"positioning",active:Fp,apis:n4,state:Sy}),Ty=e=>e.getSystem().isConnected(),Bl=e=>{es(e,ah());const t=e.components();lt(t,Bl)},wg=e=>{const t=e.components();lt(t,wg),es(e,_l())},ky=(e,t)=>{e.getSystem().addToWorld(t),ns(e.element)&&wg(t)},Ey=e=>{Bl(e),e.getSystem().removeFromWorld(e)},DC=(e,t)=>{Ac(e.element,t.element)},nd=(e,t)=>{Ld(e,t,Ac)},Ld=(e,t,r)=>{e.getSystem().addToWorld(t),r(e.element,t.element),ns(e.element)&&wg(t),e.syncComponents()},Am=e=>{Bl(e),ir(e.element),e.getSystem().removeFromWorld(e)},Hd=e=>{const t=Kr(e.element).bind(r=>e.getSystem().getByDom(r).toOptional());Am(e),t.each(r=>{r.syncComponents()})},Vd=e=>{const t=e.components();lt(t,Am),nm(e.element),e.syncComponents()},Cg=(e,t)=>{Xb(e,t,Ac)},df=(e,t)=>{Xb(e,t,Uh)},Xb=(e,t,r)=>{r(e,t.element);const c=Ds(t.element);lt(c,d=>{t.getByDom(d).each(wg)})},_y=e=>{const t=Ds(e.element);lt(t,r=>{e.getByDom(r).each(Bl)}),ir(e.element)},zd=(e,t,r,c)=>{r.get().each(v=>{Vd(e)});const d=t.getAttachPoint(e);nd(d,e);const f=e.getSystem().build(c);return nd(e,f),r.set(f),f},Oy=(e,t,r,c)=>{const d=zd(e,t,r,c);return t.onOpen(e,d),d},Ay=(e,t,r)=>{r.get().each(c=>{Vd(e),Hd(e),t.onClose(e,c),r.clear()})},o1=(e,t,r)=>r.isOpen(),Dy=(e,t,r)=>{const c=t.getAttachPoint(e);Xt(e.element,"position",Nc.getMode(c)),((e,t,r,c)=>{Ws(e.element,t).fold(()=>{ae(e.element,r)},d=>{Bn(e.element,r,d)}),Xt(e.element,t,"hidden")})(e,"visibility",t.cloakVisibilityAttr)},My=(e,t,r)=>{(e=>Ys(["top","left","right","bottom"],t=>Ws(e,t).isSome()))(e.element)||F(e.element,"position"),((e,t,r)=>{z(e.element,r).fold(()=>F(e.element,t),c=>Xt(e.element,t,c))})(e,"visibility",t.cloakVisibilityAttr)};var Ny=Object.freeze({__proto__:null,cloak:Dy,decloak:My,open:Oy,openWhileCloaked:(e,t,r,c,d)=>{Dy(e,t),Oy(e,t,r,c),d(),My(e,t)},close:Ay,isOpen:o1,isPartOf:(e,t,r,c)=>o1(0,0,r)&&r.get().exists(d=>t.isPartOf(e,d,c)),getState:(e,t,r)=>r.get(),setContent:(e,t,r,c)=>r.get().map(()=>zd(e,t,r,c))}),NC=Object.freeze({__proto__:null,events:(e,t)=>ss([ut(gp(),(r,c)=>{Ay(r,e,t)})])}),BC=[Ko("onOpen"),Ko("onClose"),dt("isPartOf"),dt("getAttachPoint"),$e("cloakVisibilityAttr","data-precloak-visibility")],gf=Object.freeze({__proto__:null,init:()=>{const e=fr(),t=re("not-implemented");return cl({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const Io=Ua({fields:BC,name:"sandboxing",active:NC,apis:Ny,state:gf}),Rm=re("dismiss.popups"),Sh=re("reposition.popups"),e0=re("mouse.released"),By=Di([$e("isExtraPart",De),Rc("fireEventInstead",[$e("event",Su())])]),t0=e=>{const t=oi("Dismissal",By,e);return{[Rm()]:{schema:Di([dt("target")]),onReceive:(r,c)=>{Io.isOpen(r)&&(Io.isPartOf(r,c.target)||t.isExtraPart(r,c.target)||t.fireEventInstead.fold(()=>Io.close(r),f=>es(r,f.event)))}}}},PC=Di([Rc("fireEventInstead",[$e("event",fw())]),Sl("doReposition")]),hf=e=>{const t=oi("Reposition",PC,e);return{[Sh()]:{onReceive:r=>{Io.isOpen(r)&&t.fireEventInstead.fold(()=>t.doReposition(r),c=>es(r,c.event))}}}},ff=(e,t,r)=>{t.store.manager.onLoad(e,t,r)},pf=(e,t,r)=>{t.store.manager.onUnload(e,t,r)};var QT=Object.freeze({__proto__:null,onLoad:ff,onUnload:pf,setValue:(e,t,r,c)=>{t.store.manager.setValue(e,t,r,c)},getValue:(e,t,r)=>t.store.manager.getValue(e,t,r),getState:(e,t,r)=>r}),$C=Object.freeze({__proto__:null,events:(e,t)=>{const r=e.resetOnDom?[lr((c,d)=>{ff(c,e,t)}),Ku((c,d)=>{pf(c,e,t)})]:[Ab(e,t,ff)];return ss(r)}});const Py=()=>{const e=_n(null);return cl({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},o0=()=>{const e=_n({}),t=_n({});return cl({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:v=>rt(e.get(),v).orThunk(()=>rt(t.get(),v)),update:v=>{const x=e.get(),k=t.get(),R={},I={};lt(v,V=>{R[V.value]=V,rt(V,"meta").each(Z=>{rt(Z,"text").each(Y=>{I[Y]=V})})}),e.set({...x,...R}),t.set({...k,...I})},clear:()=>{e.set({}),t.set({})}})};var Th=Object.freeze({__proto__:null,memory:Py,dataset:o0,manual:()=>cl({readState:ve}),init:e=>e.store.manager.state(e)});const Mm=(e,t,r,c)=>{const d=t.store;r.update([c]),d.setValue(e,c),t.onSetValue(e,c)};var s1=[us("initialValue"),dt("getFallbackEntry"),dt("getDataKey"),dt("setValue"),Gs("manager",{setValue:Mm,getValue:(e,t,r)=>{const c=t.store,d=c.getDataKey(e);return r.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},onLoad:(e,t,r)=>{t.store.initialValue.each(d=>{Mm(e,t,r,d)})},onUnload:(e,t,r)=>{r.clear()},state:o0})],$y=[dt("getValue"),$e("setValue",ve),us("initialValue"),Gs("manager",{setValue:(e,t,r,c)=>{t.store.setValue(e,c),t.onSetValue(e,c)},getValue:(e,t,r)=>t.store.getValue(e),onLoad:(e,t,r)=>{t.store.initialValue.each(c=>{t.store.setValue(e,c)})},onUnload:ve,state:tu.init})],Iy=[us("initialValue"),Gs("manager",{setValue:(e,t,r,c)=>{r.set(c),t.onSetValue(e,c)},getValue:(e,t,r)=>r.get(),onLoad:(e,t,r)=>{t.store.initialValue.each(c=>{r.isNotSet()&&r.set(c)})},onUnload:(e,t,r)=>{r.clear()},state:Py})],r1=[pa("store",{mode:"memory"},Qa("mode",{memory:Iy,manual:$y,dataset:s1})),Ko("onSetValue"),$e("resetOnDom",!1)];const Wt=Ua({fields:r1,name:"representing",active:$C,apis:QT,extra:{setValueFrom:(e,t)=>{const r=Wt.getValue(t);Wt.setValue(e,r)}},state:Th}),Wa=(e,t)=>dp(e,{},Be(t,r=>((e,t)=>Ha(e,e,{tag:"option",process:{}},Cl(r=>Br_serror("The field: "+e+" is forbidden. "+t))))(r.name(),"Cannot configure "+r.name()+" for "+e)).concat([pc("dump",gt)])),Sg=e=>e.dump,ja=(e,t)=>({...Et(t),...e.dump}),au_field=Wa,au_augment=ja,Ly="placeholder",bf=O_generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),kh=e=>Qn(e,"uiType"),a0=(e,t,r,c)=>((e,t,r,c)=>kh(r)&&r.uiType===Ly?((e,t,r,c)=>e.exists(d=>d!==r.owner)?bf.single(!0,re(r)):rt(c,r.name).fold(()=>{throw new Error("Unknown placeholder component: "+r.name+"\nKnown: ["+Xo(c)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(r,null,2))},d=>d.replace()))(e,0,r,c):bf.single(!1,re(r)))(e,0,r,c).fold((f,v)=>{const x=kh(r)?v(t,r.config,r.validated):v(t),k=rt(x,"components").getOr([]),R=No(k,I=>a0(e,t,I,c));return[{...x,components:R}]},(f,v)=>{if(kh(r)){const x=v(t,r.config,r.validated);return r.validated.preprocess.getOr(gt)(x)}return v(t)}),a1=bf.single,nk=bf.multiple,c0=re(Ly),vf=O_generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Tg=$e("factory",{sketch:gt}),i0=$e("schema",[]),l0=dt("name"),c1=Ha("pname","pname",yl(e=>"<alloy."+un(e.name)+">"),hi()),Nm=pc("schema",()=>[us("preprocess")]),Bm=$e("defaults",re({})),u0=$e("overrides",re({})),d0=Tn([Tg,i0,l0,c1,Bm,u0]),m0=Tn([Tg,i0,l0,Bm,u0]),WC=Tn([Tg,i0,l0,c1,Bm,u0]),jC=Tn([Tg,Nm,l0,dt("unit"),c1,Bm,u0]),yf=e=>e.fold(B.some,B.none,B.some,B.some),zy=e=>{const t=r=>r.name;return e.fold(t,t,t,t)},Eh=(e,t)=>r=>{const c=oi("Converting part type",t,r);return e(c)},vc=Eh(vf.required,d0),Pl=Eh(vf.external,m0),Fl=Eh(vf.optional,WC),$l=Eh(vf.group,jC),Uy=re("entirety");var ok=Object.freeze({__proto__:null,required:vc,external:Pl,optional:Fl,group:$l,asNamedPart:yf,name:zy,asCommon:e=>e.fold(gt,gt,gt,gt),original:Uy});const _h=(e,t,r,c)=>Js(t.defaults(e,r,c),r,{uid:e.partUids[t.name]},t.overrides(e,r,c)),Zy=(e,t)=>{const r={};return lt(t,c=>{yf(c).each(d=>{const f=sk(e,d.pname);r[d.name]=v=>{const x=oi("Part: "+d.name+" in "+e,Tn(d.schema),v);return{...f,config:v,validated:x}}})}),r},sk=(e,t)=>({uiType:c0(),owner:e,name:t}),g0=(e,t,r)=>({uiType:c0(),owner:e,name:t,config:r,validated:{}}),rk=e=>No(e,t=>t.fold(B.none,B.some,B.none,B.none).map(r=>Wu(r.name,r.schema.concat([Cm(Uy())]))).toArray()),l1=e=>Be(e,zy),u1=(e,t,r)=>((e,t,r)=>{const c={},d={};return lt(r,f=>{f.fold(v=>{c[v.pname]=a1(!0,(x,k,R)=>v.factory.sketch(_h(x,v,k,R)))},v=>{const x=t.parts[v.name];d[v.name]=re(v.factory.sketch(_h(t,v,x[Uy()]),x))},v=>{c[v.pname]=a1(!1,(x,k,R)=>v.factory.sketch(_h(x,v,k,R)))},v=>{c[v.pname]=nk(!0,(x,k,R)=>Be(x[v.name],V=>v.factory.sketch(Js(v.defaults(x,V,R),V,v.overrides(x,V)))))})}),{internals:re(c),externals:re(d)}})(0,t,r),Wy=(e,t,r)=>((e,t,r,c)=>{const d=Ke(c,(v,x)=>((e,t)=>{let r=!1;return{name:re(e),required:()=>t.fold((v,x)=>v,(v,x)=>v),used:()=>r,replace:()=>{if(r)throw new Error("Trying to use the same placeholder more than once: "+e);return r=!0,t}}})(x,v)),f=((e,t,r,c)=>No(r,d=>a0(e,t,d,c)))(e,t,r,d);return Ye(d,v=>{if(!1===v.used()&&v.required())throw new Error("Placeholder: "+v.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))}),f})(B.some(e),t,t.components,r),$s=(e,t,r)=>{const c=t.partUids[r];return e.getSystem().getByUid(c).toOptional()},Zd=(e,t,r)=>$s(e,t,r).getOrDie("Could not find part: "+r),h0=(e,t,r)=>{const c={},d=t.partUids,f=e.getSystem();return lt(r,v=>{c[v]=re(f.getByUid(d[v]))}),c},jy=(e,t)=>{const r=e.getSystem();return Ke(t.partUids,(c,d)=>re(r.getByUid(c)))},f0=e=>Xo(e.partUids),wf=(e,t,r)=>{const c={},d=t.partUids,f=e.getSystem();return lt(r,v=>{c[v]=re(f.getByUid(d[v]).getOrDie())}),c},Gy=(e,t)=>{const r=l1(t);return Fn(Be(r,c=>({key:c,value:e+"-"+c})))},cu=e=>Ha("partUids","partUids",Pn(t=>Gy(t.uid,e)),hi());var qy=Object.freeze({__proto__:null,generate:Zy,generateOne:g0,schemas:rk,names:l1,substitutes:u1,components:Wy,defaultUids:Gy,defaultUidsSchema:cu,getAllParts:jy,getAllPartNames:f0,getPart:$s,getPartOrDie:Zd,getParts:h0,getPartsOrDie:wf});const Ky=(e,t,r,c,d)=>{const f=((e,t)=>(e.length>0?[Wu("parts",e)]:[]).concat([dt("uid"),$e("dom",{}),$e("components",[]),Cm("originalSpec"),$e("debug.sketcher",{})]).concat(t))(c,d);return oi(e+" [SpecSchema]",Di(f.concat(t)),r)},d1=(e,t,r,c,d)=>{const f=Eg(d),v=rk(r),x=cu(r),k=Ky(e,t,f,v,[x]),R=u1(0,k,r);return c(k,Wy(e,k,R.internals()),f,R.externals())},Eg=e=>(e=>Qn(e,"uid"))(e)?e:{...e,uid:ch("uid")},KC=Di([dt("name"),dt("factory"),dt("configFields"),$e("apis",{}),$e("extraApis",{})]),Au=Di([dt("name"),dt("factory"),dt("configFields"),dt("partFields"),$e("apis",{}),$e("extraApis",{})]),yc=e=>{const t=oi("Sketcher for "+e.name,KC,e),c=Ke(t.apis,bm),d=Ke(t.extraApis,(f,v)=>zi(f,v));return{name:t.name,configFields:t.configFields,sketch:f=>((e,t,r,c)=>{const d=Eg(c);return r(Ky(e,t,d,[],[]),d)})(t.name,t.configFields,t.factory,f),...c,...d}},Wc=e=>{const t=oi("Sketcher for "+e.name,Au,e),c=Zy(t.name,t.partFields),d=Ke(t.apis,bm),f=Ke(t.extraApis,(v,x)=>zi(v,x));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:v=>d1(t.name,t.configFields,t.partFields,t.factory,v),parts:c,...d,...f}},od=e=>ga("input")(e)&&"radio"!==Bo(e,"type")||ga("textarea")(e);var m1=Object.freeze({__proto__:null,getCurrent:(e,t,r)=>t.find(e)});const YC=[dt("find")],Lo=Ua({fields:YC,name:"composing",apis:m1}),XC=["input","button","textarea","select"],Yy=(e,t,r)=>{(t.disabled()?y0:g1)(e,t)},b0=(e,t)=>!0===t.useNative&&xo(XC,ws(e.element)),v0=e=>{Bn(e.element,"disabled","disabled")},Xy=e=>{ae(e.element,"disabled")},QC=e=>{Bn(e.element,"aria-disabled","true")},ex=e=>{Bn(e.element,"aria-disabled","false")},y0=(e,t,r)=>{t.disableClass.each(d=>{va(e.element,d)}),(b0(e,t)?v0:QC)(e),t.onDisabled(e)},g1=(e,t,r)=>{t.disableClass.each(d=>{Hr(e.element,d)}),(b0(e,t)?Xy:ex)(e),t.onEnabled(e)},Qy=(e,t)=>b0(e,t)?(e=>ne(e.element,"disabled"))(e):(e=>"true"===Bo(e.element,"aria-disabled"))(e);var xf=Object.freeze({__proto__:null,enable:g1,disable:y0,isDisabled:Qy,onLoad:Yy,set:(e,t,r,c)=>{(c?y0:g1)(e,t)}}),e2=Object.freeze({__proto__:null,exhibit:(e,t)=>Tu({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>ss([pv(Hi(),(r,c)=>Qy(r,e)),Ab(e,t,Yy)])}),ik=[ba("disabled",De),$e("useNative",!0),us("disableClass"),Ko("onDisabled"),Ko("onEnabled")];const Nn=Ua({fields:ik,name:"disabling",active:e2,apis:xf}),ox=(e,t,r,c)=>{const d=Zc(e.element,"."+t.highlightClass);lt(d,f=>{Ys(c,x=>Jo(x.element,f))||(Hr(f,t.highlightClass),e.getSystem().getByDom(f).each(x=>{t.onDehighlight(e,x),es(x,eb())}))})},h1=(e,t,r,c)=>{ox(e,t,0,[c]),n2(e,t,r,c)||(va(c.element,t.highlightClass),t.onHighlight(e,c),es(c,Q1()))},n2=(e,t,r,c)=>Ui(c.element,t.highlightClass),C0=(e,t,r)=>ia(e.element,"."+t.itemClass).bind(c=>e.getSystem().getByDom(c).toOptional()),Tf=(e,t,r)=>{const c=Zc(e.element,"."+t.itemClass);return(c.length>0?B.some(c[c.length-1]):B.none()).bind(f=>e.getSystem().getByDom(f).toOptional())},o2=(e,t,r,c)=>{const d=Zc(e.element,"."+t.itemClass);return mr(d,v=>Ui(v,t.highlightClass)).bind(v=>{const x=uh(v,c,0,d.length-1);return e.getSystem().getByDom(d[x]).toOptional()})},S0=(e,t,r)=>{const c=Zc(e.element,"."+t.itemClass);return Vr(Be(c,d=>e.getSystem().getByDom(d).toOptional()))};var ix=Object.freeze({__proto__:null,dehighlightAll:(e,t,r)=>ox(e,t,0,[]),dehighlight:(e,t,r,c)=>{n2(e,t,r,c)&&(Hr(c.element,t.highlightClass),t.onDehighlight(e,c),es(c,eb()))},highlight:h1,highlightFirst:(e,t,r)=>{C0(e,t).each(c=>{h1(e,t,r,c)})},highlightLast:(e,t,r)=>{Tf(e,t).each(c=>{h1(e,t,r,c)})},highlightAt:(e,t,r,c)=>{((e,t,r,c)=>{const d=Zc(e.element,"."+t.itemClass);return B.from(d[c]).fold(()=>Rt.error(new Error("No element found with index "+c)),e.getSystem().getByDom)})(e,t,0,c).fold(d=>{throw d},d=>{h1(e,t,r,d)})},highlightBy:(e,t,r,c)=>{const d=S0(e,t);fo(d,c).each(v=>{h1(e,t,r,v)})},isHighlighted:n2,getHighlighted:(e,t,r)=>ia(e.element,"."+t.highlightClass).bind(c=>e.getSystem().getByDom(c).toOptional()),getFirst:C0,getLast:Tf,getPrevious:(e,t,r)=>o2(e,t,0,-1),getNext:(e,t,r)=>o2(e,t,0,1),getCandidates:S0}),lx=[dt("highlightClass"),dt("itemClass"),Ko("onHighlight"),Ko("onDehighlight")];const rs=Ua({fields:lx,name:"highlighting",apis:ix}),T0=[8],sd=[9],rd=[13],k0=[27],ji=[32],kf=[37],Ef=[38],p1=[39],b1=[40],ux=(e,t,r)=>{const c=Ao(e.slice(0,t)),d=Ao(e.slice(t+1));return fo(c.concat(d),r)},uk=(e,t,r)=>{const c=Ao(e.slice(0,t));return fo(c,r)},dk=(e,t,r)=>{const c=e.slice(0,t),d=e.slice(t+1);return fo(d.concat(c),r)},s4=(e,t,r)=>{const c=e.slice(t+1);return fo(c,r)},_o=e=>t=>xo(e,t.raw.which),iu=e=>t=>yr(e,r=>r(t)),_g=e=>!0===e.raw.shiftKey,ad=e=>!0===e.raw.ctrlKey,Og=qe(_g),Go=(e,t)=>({matches:e,classification:t}),mx=(e,t,r)=>{t.exists(d=>r.exists(f=>Jo(f,d)))||wn(e,rg(),{prevFocus:t,newFocus:r})},s2=()=>{const e=r=>Dl(r.element);return{get:e,set:(r,c)=>{const d=e(r);r.getSystem().triggerFocus(c,r.element);const f=e(r);mx(r,d,f)}}},mk=()=>{const e=r=>rs.getHighlighted(r).map(c=>c.element);return{get:e,set:(r,c)=>{const d=e(r);r.getSystem().getByDom(c).fold(ve,v=>{rs.highlight(r,v)});const f=e(r);mx(r,d,f)}}};var Bc;!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(Bc||(Bc={}));const Gi=(e,t,r,c,d)=>{const v=(R,I,V,Z,Y)=>((e,t)=>fo(e,c=>c.matches(t)).map(c=>c.classification))(V(R,I,Z,Y),I.event).bind(pe=>pe(R,I,Z,Y)),k={schema:()=>e.concat([$e("focusManager",s2()),pa("focusInside","onFocus",kd(R=>xo(["onFocus","onEnterOrSpace","onApi"],R)?Rt.value(R):Rt.error("Invalid value for focusInside"))),Gs("handler",k),Gs("state",t),Gs("sendFocusIn",d)]),processKey:v,toEvents:(R,I)=>{const V=R.focusInside!==Bc.OnFocusMode?B.none():d(R).map(oe=>ut(Cu(),(pe,Ge)=>{oe(pe,R,I),Ge.stop()})),Y=[ut(Li(),(oe,pe)=>{v(oe,pe,r,R,I).fold(()=>{((oe,pe)=>{const Ge=_o(ji.concat(rd))(pe.event);R.focusInside===Bc.OnEnterOrSpaceMode&&Ge&&Xl(oe,pe)&&d(R).each(Te=>{Te(oe,R,I),pe.stop()})})(oe,pe)},Ge=>{pe.stop()})}),ut(mw(),(oe,pe)=>{v(oe,pe,c,R,I).each(Ge=>{pe.stop()})})];return ss(V.toArray().concat(Y))}};return k},l=e=>{const t=[us("onEscape"),us("onEnter"),$e("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),$e("firstTabstop",0),$e("useTabstopAt",Ot),us("visibilitySelector")].concat([e]),r=(Te,xe)=>{const Qe=Te.visibilitySelector.bind(He=>Yu(xe,He)).getOr(xe);return Ut(Qe)>0},d=(Te,xe)=>xe.focusManager.get(Te).bind(Qe=>Yu(Qe,xe.selector)),v=(Te,xe,Qe)=>{((Te,xe)=>{const Qe=Zc(Te.element,xe.selector),He=so(Qe,St=>r(xe,St));return B.from(He[xe.firstTabstop])})(Te,xe).each(He=>{xe.focusManager.set(Te,He)})},k=(Te,xe,Qe,He)=>{const St=Zc(Te.element,Qe.selector);return d(Te,Qe).bind(pt=>mr(St,ko(Jo,pt)).bind(Gt=>((Te,xe,Qe,He,St)=>St(xe,Qe,pt=>((Te,xe)=>r(Te,xe)&&Te.useTabstopAt(xe))(He,pt)).fold(()=>He.cyclic?B.some(!0):B.none(),pt=>(He.focusManager.set(Te,pt),B.some(!0))))(Te,St,Gt,Qe,He)))},R=(Te,xe,Qe)=>k(Te,0,Qe,Qe.cyclic?ux:uk),I=(Te,xe,Qe)=>k(Te,0,Qe,Qe.cyclic?dk:s4),pe=re([Go(iu([_g,_o(sd)]),R),Go(_o(sd),I),Go(iu([Og,_o(rd)]),(Te,xe,Qe)=>Qe.onEnter.bind(He=>He(Te,xe)))]),Ge=re([Go(_o(k0),(Te,xe,Qe)=>Qe.onEscape.bind(He=>He(Te,xe))),Go(_o(sd),(Te,xe,Qe)=>d(Te,Qe).filter(He=>!Qe.useTabstopAt(He)).bind(He=>((Te=>(e=>Kr(e))(Te).bind(Si).exists(xe=>Jo(xe,Te)))(He)?R:I)(Te,xe,Qe)))]);return Gi(t,tu.init,pe,Ge,()=>B.some(v))};var g=l(pc("cyclic",De)),b=l(pc("cyclic",Ot));const E=(e,t,r)=>od(r)&&_o(ji)(t.event)?B.none():((e,t,r)=>(Ad(e,r,Hi()),B.some(!0)))(e,0,r),P=(e,t)=>B.some(!0),W=[$e("execute",E),$e("useSpace",!1),$e("useEnter",!0),$e("useControlEnter",!1),$e("useDown",!1)],X=(e,t,r)=>r.execute(e,t,e.element);var Me=Gi(W,tu.init,(e,t,r,c)=>{const d=r.useSpace&&!od(e.element)?ji:[],v=r.useDown?b1:[],x=d.concat(r.useEnter?rd:[]).concat(v);return[Go(_o(x),X)].concat(r.useControlEnter?[Go(iu([ad,_o(rd)]),X)]:[])},(e,t,r,c)=>r.useSpace&&!od(e.element)?[Go(_o(ji),P)]:[],()=>B.none());const ft=()=>{const e=fr();return cl({readState:()=>e.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,f)=>{e.set({numRows:d,numColumns:f})},getNumRows:()=>e.get().map(d=>d.numRows),getNumColumns:()=>e.get().map(d=>d.numColumns)})};var At=Object.freeze({__proto__:null,flatgrid:ft,init:e=>e.state(e)});const it=e=>(t,r,c,d)=>{const f=e(t.element);return zn(f,t,r,c,d)},Dt=(e,t)=>{const r=fh(e,t);return it(r)},Ie=(e,t)=>{const r=fh(t,e);return it(r)},on=e=>(t,r,c,d)=>zn(e,t,r,c,d),zn=(e,t,r,c,d)=>c.focusManager.get(t).bind(v=>e(t.element,v,c,d)).map(v=>(c.focusManager.set(t,v),!0)),Co=on,pr=on,wa=on,ii=e=>!(e=>e.offsetWidth<=0&&e.offsetHeight<=0)(e.dom),v1=(e,t,r)=>{const d=Zc(e,r);return((e,t)=>mr(e,t).map(r=>({index:r,candidates:e})))(so(d,ii),v=>Jo(v,t))},E0=(e,t)=>mr(e,r=>Jo(t,r)),Of=(e,t,r,c)=>c(Math.floor(t/r),t%r).bind(v=>{const x=v.row*r+v.column;return x>=0&&x<e.length?B.some(e[x]):B.none()}),Bs=(e,t,r,c,d)=>Of(e,t,c,(f,v)=>{const R=uh(v,d,0,(f===r-1?e.length-f*c:c)-1);return B.some({row:f,column:R})}),wc=(e,t,r,c,d)=>Of(e,t,c,(f,v)=>{const x=uh(f,d,0,r-1),I=cc(v,0,(x===r-1?e.length-x*c:c)-1);return B.some({row:x,column:I})}),wi=[dt("selector"),$e("execute",E),bc("onEscape"),$e("captureTab",!1),Xu()],r2=(e,t,r)=>{ia(e.element,t.selector).each(c=>{t.focusManager.set(e,c)})},lc=e=>(t,r,c,d)=>v1(t,r,c.selector).bind(f=>e(f.candidates,f.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),gx=(e,t,r)=>r.captureTab?B.some(!0):B.none(),fx=lc((e,t,r,c)=>Bs(e,t,r,c,-1)),px=lc((e,t,r,c)=>Bs(e,t,r,c,1)),gk=lc((e,t,r,c)=>wc(e,t,r,c,-1)),a2=lc((e,t,r,c)=>wc(e,t,r,c,1)),bx=re([Go(_o(kf),Dt(fx,px)),Go(_o(p1),Ie(fx,px)),Go(_o(Ef),Co(gk)),Go(_o(b1),pr(a2)),Go(iu([_g,_o(sd)]),gx),Go(iu([Og,_o(sd)]),gx),Go(_o(ji.concat(rd)),(e,t,r,c)=>((e,t)=>t.focusManager.get(e).bind(r=>Yu(r,t.selector)))(e,r).bind(d=>r.execute(e,t,d)))]),dl=re([Go(_o(k0),(e,t,r)=>r.onEscape(e,t)),Go(_o(ji),P)]);var aR=Gi(wi,ft,bx,dl,()=>B.some(r2));const vx=(e,t,r,c,d)=>{const v=(x,k,R)=>d(x,k,c,0,R.length-1,R[k],I=>(x=>"button"===ws(x)&&"disabled"===Bo(x,"disabled"))(R[I])?v(x,I,R):B.from(R[I]));return v1(e,r,t).bind(x=>{const k=x.index;return v(k,k,x.candidates)})},hk=(e,t,r,c)=>vx(e,t,r,c,(d,f,v,x,k,R,I)=>{const V=cc(f+v,x,k);return V===d?B.from(R):I(V)}),c2=(e,t,r,c)=>vx(e,t,r,c,(d,f,v,x,k,R,I)=>{const V=uh(f,v,x,k);return V===d?B.none():I(V)}),r4=[dt("selector"),$e("getInitial",B.none),$e("execute",E),bc("onEscape"),$e("executeOnMove",!1),$e("allowVertical",!0),$e("allowHorizontal",!0),$e("cycles",!0)],yx=(e,t,r)=>((e,t)=>t.focusManager.get(e).bind(r=>Yu(r,t.selector)))(e,r).bind(c=>r.execute(e,t,c)),cR=(e,t,r)=>{t.getInitial(e).orThunk(()=>ia(e.element,t.selector)).each(c=>{t.focusManager.set(e,c)})},c4=(e,t,r)=>(r.cycles?c2:hk)(e,r.selector,t,-1),fk=(e,t,r)=>(r.cycles?c2:hk)(e,r.selector,t,1),pk=e=>(t,r,c,d)=>e(t,r,c,d).bind(()=>c.executeOnMove?yx(t,r,c):B.some(!0)),l4=re([Go(_o(ji),P),Go(_o(k0),(e,t,r)=>r.onEscape(e,t))]);var u4=Gi(r4,tu.init,(e,t,r,c)=>{const d=[...r.allowHorizontal?kf:[]].concat(r.allowVertical?Ef:[]),f=[...r.allowHorizontal?p1:[]].concat(r.allowVertical?b1:[]);return[Go(_o(d),pk(Dt(c4,fk))),Go(_o(f),pk(Ie(c4,fk))),Go(_o(rd),yx),Go(_o(ji),yx)]},l4,()=>B.some(cR));const i2=(e,t,r)=>B.from(e[t]).bind(c=>B.from(c[r]).map(d=>({rowIndex:t,columnIndex:r,cell:d}))),wx=(e,t,r,c)=>{const v=uh(r,c,0,e[t].length-1);return i2(e,t,v)},Cx=(e,t,r,c)=>{const d=uh(r,c,0,e.length-1),v=cc(t,0,e[d].length-1);return i2(e,d,v)},xx=(e,t,r,c)=>{const v=cc(r+c,0,e[t].length-1);return i2(e,t,v)},bk=(e,t,r,c)=>{const d=cc(r+c,0,e.length-1),v=cc(t,0,e[d].length-1);return i2(e,d,v)},f4=[Wu("selectors",[dt("row"),dt("cell")]),$e("cycles",!0),$e("previousSelector",B.none),$e("execute",E)],mR=(e,t,r)=>{t.previousSelector(e).orThunk(()=>ia(e.element,t.selectors.cell)).each(d=>{t.focusManager.set(e,d)})},l2=(e,t)=>(r,c,d)=>{const f=d.cycles?e:t;return Yu(c,d.selectors.row).bind(v=>{const x=Zc(v,d.selectors.cell);return E0(x,c).bind(k=>{const R=Zc(r,d.selectors.row);return E0(R,v).bind(I=>{const V=((e,t)=>Be(e,r=>Zc(r,t.selectors.cell)))(R,d);return f(V,I,k).map(Z=>Z.cell)})})})},vk=l2((e,t,r)=>wx(e,t,r,-1),(e,t,r)=>xx(e,t,r,-1)),p4=l2((e,t,r)=>wx(e,t,r,1),(e,t,r)=>xx(e,t,r,1)),hR=l2((e,t,r)=>Cx(e,r,t,-1),(e,t,r)=>bk(e,r,t,-1)),Tx=l2((e,t,r)=>Cx(e,r,t,1),(e,t,r)=>bk(e,r,t,1)),yk=re([Go(_o(kf),Dt(vk,p4)),Go(_o(p1),Ie(vk,p4)),Go(_o(Ef),Co(hR)),Go(_o(b1),pr(Tx)),Go(_o(ji.concat(rd)),(e,t,r)=>Dl(e.element).bind(c=>r.execute(e,t,c)))]),wk=re([Go(_o(ji),P)]);var b4=Gi(f4,tu.init,yk,wk,()=>B.some(mR));const Ck=[dt("selector"),$e("execute",E),$e("moveOnTab",!1)],kx=(e,t,r)=>r.focusManager.get(e).bind(c=>r.execute(e,t,c)),Ex=(e,t,r)=>{ia(e.element,t.selector).each(c=>{t.focusManager.set(e,c)})},xk=(e,t,r)=>c2(e,r.selector,t,-1),Sk=(e,t,r)=>c2(e,r.selector,t,1),Ga=re([Go(_o(Ef),wa(xk)),Go(_o(b1),wa(Sk)),Go(iu([_g,_o(sd)]),(e,t,r,c)=>r.moveOnTab?wa(xk)(e,t,r,c):B.none()),Go(iu([Og,_o(sd)]),(e,t,r,c)=>r.moveOnTab?wa(Sk)(e,t,r,c):B.none()),Go(_o(rd),kx),Go(_o(ji),kx)]),v4=re([Go(_o(ji),P)]);var y4=Gi(Ck,tu.init,Ga,v4,()=>B.some(Ex));const w4=[bc("onSpace"),bc("onEnter"),bc("onShiftEnter"),bc("onLeft"),bc("onRight"),bc("onTab"),bc("onShiftTab"),bc("onUp"),bc("onDown"),bc("onEscape"),$e("stopSpaceKeyup",!1),us("focusIn")];var S4=Gi(w4,tu.init,(e,t,r)=>[Go(_o(ji),r.onSpace),Go(iu([Og,_o(rd)]),r.onEnter),Go(iu([_g,_o(rd)]),r.onShiftEnter),Go(iu([_g,_o(sd)]),r.onShiftTab),Go(iu([Og,_o(sd)]),r.onTab),Go(_o(Ef),r.onUp),Go(_o(b1),r.onDown),Go(_o(kf),r.onLeft),Go(_o(p1),r.onRight),Go(_o(ji),r.onSpace)],(e,t,r)=>[...r.stopSpaceKeyup?[Go(_o(ji),P)]:[],Go(_o(k0),r.onEscape)],e=>e.focusIn);const fR=g.schema(),pR=b.schema(),T4=u4.schema(),kk=aR.schema(),bR=b4.schema(),vR=Me.schema(),yR=y4.schema(),k4=S4.schema(),xn=Xw({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:fR,cyclic:pR,flow:T4,flatgrid:kk,matrix:bR,execution:vR,menu:yR,special:k4}),name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,r)=>{t.sendFocusIn(t).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},c=>{c(e,t,r)})},setGridSize:(e,t,r,c,d)=>{(e=>_r(e,"setGridSize"))(r)?r.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:At}),Ek=(e,t)=>{pg(()=>{((e,t,r)=>{const c=e.components();(e=>{lt(e.components(),t=>ir(t.element)),nm(e.element),e.syncComponents()})(e);const d=r(t),f=Ls(c,d);lt(f,v=>{Bl(v),e.getSystem().removeFromWorld(v)}),lt(d,v=>{Ty(v)?DC(e,v):(e.getSystem().addToWorld(v),DC(e,v),ns(e.element)&&wg(v))}),e.syncComponents()})(e,t,()=>Be(t,e.getSystem().build))},e.element)},_4=(e,t)=>{pg(()=>{((e,t,r)=>{const c=e.components(),d=No(t,x=>kw(x).toArray());lt(c,x=>{xo(d,x)||Ey(x)});const f=r(),v=Ls(c,f);lt(v,x=>{Ty(x)&&Ey(x)}),lt(f,x=>{Ty(x)||ky(e,x)}),e.syncComponents()})(e,t,()=>((e,t,r)=>Dw(e,t,(c,d)=>Ev(e,d,c,r)))(e.element,t,e.getSystem().buildOrPatch))},e.element)},CR=(e,t,r,c)=>{Ey(t);const d=Ev(e.element,r,c,e.getSystem().buildOrPatch);ky(e,d),e.syncComponents()},_k=(e,t,r)=>{const c=e.getSystem().build(r);Ld(e,c,t)},_x=(e,t,r,c)=>{Hd(t),_k(e,(d,f)=>((e,t,r)=>{Ia(e,r).fold(()=>{Ac(e,t)},c=>{vu(c,t)})})(d,f,r),c)},u2=(e,t)=>e.components(),A4=(e,t,r,c,d)=>{const f=u2(e);return B.from(f[c]).map(v=>(d.fold(()=>Hd(v),x=>{(t.reuseDom?CR:_x)(e,v,c,x)}),v))};var xR=Object.freeze({__proto__:null,append:(e,t,r,c)=>{_k(e,Ac,c)},prepend:(e,t,r,c)=>{_k(e,Ym,c)},remove:(e,t,r,c)=>{const d=u2(e);fo(d,v=>Jo(c.element,v.element)).each(Hd)},replaceAt:A4,replaceBy:(e,t,r,c,d)=>{const f=u2(e);return mr(f,c).bind(v=>A4(e,t,0,v,d))},set:(e,t,r,c)=>(t.reuseDom?_4:Ek)(e,c),contents:u2});const to=Ua({fields:[Va("reuseDom",!0)],name:"replacing",apis:xR}),Jn=(e,t)=>{const r=((e,t)=>{const r=ss(t);return Ua({fields:[dt("enabled")],name:e,active:{events:re(r)}})})(e,t);return{key:e,value:{config:{},me:r,configAsRaw:re({}),initialConfig:{},state:tu}}},Rf=(e,t)=>{t.ignore||(il(e.element),t.onFocus(e))};var Rx=Object.freeze({__proto__:null,focus:Rf,blur:(e,t)=>{t.ignore||$p(e.element)},isFocused:e=>Bd(e.element)}),Nx=Object.freeze({__proto__:null,exhibit:(e,t)=>Tu(t.ignore?{}:{attributes:{tabindex:"-1"}}),events:e=>ss([ut(Cu(),(t,r)=>{Rf(t,e),r.stop()})].concat(e.stopMousedown?[ut(ds(),(t,r)=>{r.event.prevent()})]:[]))}),D4=[Ko("onFocus"),$e("stopMousedown",!1),$e("ignore",!1)];const Un=Ua({fields:D4,name:"focusing",active:Nx,apis:Rx}),A0=(e,t,r,c)=>{const d=r.get();r.set(c),((e,t,r)=>{t.toggleClass.each(c=>{r.get()?va(e.element,c):Hr(e.element,c)})})(e,t,r),((e,t,r)=>{const c=t.aria;c.update(e,c,r.get())})(e,t,r),d!==c&&t.onToggled(e,c)},Ok=(e,t,r)=>{A0(e,t,r,!r.get())},B4=(e,t,r)=>{A0(e,t,r,t.selected)};var OR=Object.freeze({__proto__:null,onLoad:B4,toggle:Ok,isOn:(e,t,r)=>r.get(),on:(e,t,r)=>{A0(e,t,r,!0)},off:(e,t,r)=>{A0(e,t,r,!1)},set:A0}),Rk=Object.freeze({__proto__:null,exhibit:()=>Tu({}),events:(e,t)=>{const r=((e,t,r)=>eu(c=>{r(c,e,t)}))(e,t,Ok),c=Ab(e,t,B4);return ss(En([e.toggleOnExecute?[r]:[],[c]]))}});const Dk=(e,t,r)=>{Bn(e.element,"aria-expanded",r)};var F4=[$e("selected",!1),us("toggleClass"),$e("toggleOnExecute",!0),Ko("onToggled"),pa("aria",{mode:"none"},Qa("mode",{pressed:[$e("syncWithExpanded",!1),Gs("update",(e,t,r)=>{Bn(e.element,"aria-pressed",r),t.syncWithExpanded&&Dk(e,0,r)})],checked:[Gs("update",(e,t,r)=>{Bn(e.element,"aria-checked",r)})],expanded:[Gs("update",Dk)],selected:[Gs("update",(e,t,r)=>{Bn(e.element,"aria-selected",r)})],none:[Gs("update",ve)]}))];const So=Ua({fields:F4,name:"toggling",active:Rk,apis:OR,state:{init:()=>{const r=_n(!1);return{get:()=>r.get(),set:x=>r.set(x),clear:()=>r.set(!1),readState:()=>r.get()}}}}),$4=()=>{const e=(t,r)=>{r.stop(),Ol(t)};return[ut(um(),e),ut(dm(),e),hm(_a()),hm(ds())]},d2=e=>ss(En([e.map(r=>eu((c,d)=>{r(c),d.stop()})).toArray(),$4()])),Mk="alloy.item-hover",Nk="alloy.item-focus",I4="alloy.item-toggled",Bx=e=>{(Dl(e.element).isNone()||Un.isFocused(e))&&(Un.isFocused(e)||Un.focus(e),wn(e,Mk,{item:e}))},Bk=e=>{wn(e,Nk,{item:e})},Pk=re(Mk),DR=re(Nk),MR=re(I4),H4=e=>e.toggling.map(t=>t.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Fk=[dt("data"),dt("components"),dt("dom"),$e("hasSubmenu",!1),us("toggling"),au_field("itemBehaviours",[So,Un,xn,Wt]),$e("ignoreFocus",!1),$e("domModification",{}),Gs("builder",e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:H4(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:au_augment(e.itemBehaviours,[e.toggling.fold(So.revoke,t=>So.config((e=>({aria:{mode:"checked"},...sr(e,(t,r)=>"exclusive"!==r),onToggled:(t,r)=>{_t(e.onToggled)&&e.onToggled(t,r),((e,t)=>{wn(e,I4,{item:e,state:t})})(t,r)}}))(t))),Un.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:t=>{Bk(t)}}),xn.config({mode:"execution"}),Wt.config({store:{mode:"memory",initialValue:e.data}}),Jn("item-type-events",[...$4(),ut(Ii(),Bx),ut(Jh(),Un.focus)])]),components:e.components,eventOrder:e.eventOrder})),$e("eventOrder",{})],NR=[dt("dom"),dt("components"),Gs("builder",e=>({dom:e.dom,components:e.components,events:ss([vw(Jh())])}))],m2=re("item-widget"),Pm=re([vc({name:"widget",overrides:e=>({behaviours:Et([Wt.config({store:{mode:"manual",getValue:t=>e.data,setValue:ve}})])})})]),$k=[dt("uid"),dt("data"),dt("components"),dt("dom"),$e("autofocus",!1),$e("ignoreFocus",!1),au_field("widgetBehaviours",[Wt,Un,xn]),$e("domModification",{}),cu(Pm()),Gs("builder",e=>{const t=u1(m2(),e,Pm()),r=Wy(m2(),e,t.internals()),c=f=>$s(f,e,"widget").map(v=>(xn.focusIn(v),v)),d=(f,v)=>(od(v.event.target)||e.autofocus&&v.setSource(f.element),B.none());return{dom:e.dom,components:r,domModification:e.domModification,events:ss([eu((f,v)=>{c(f).each(x=>{v.stop()})}),ut(Ii(),Bx),ut(Jh(),(f,v)=>{e.autofocus?c(f):Un.focus(f)})]),behaviours:au_augment(e.widgetBehaviours,[Wt.config({store:{mode:"memory",initialValue:e.data}}),Un.config({ignore:e.ignoreFocus,onFocus:f=>{Bk(f)}}),xn.config({mode:"special",focusIn:e.autofocus?f=>{c(f)}:zv(),onLeft:d,onRight:d,onEscape:(f,v)=>Un.isFocused(f)||e.autofocus?(e.autofocus&&v.setSource(f.element),B.none()):(Un.focus(f),B.some(!0))})])}})],BR=Qa("type",{widget:$k,item:Fk,separator:NR}),Lk=re([$l({factory:{sketch:e=>{const t=oi("menu.spec item",BR,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>Qn(t,"uid")?t:{...t,uid:ch("item")},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),Hk=re([dt("value"),dt("items"),dt("dom"),dt("components"),$e("eventOrder",{}),Wa("menuBehaviours",[rs,Wt,Lo,xn]),pa("movement",{mode:"menu",moveOnTab:!0},Qa("mode",{grid:[Xu(),Gs("config",(e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}))],matrix:[Gs("config",(e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager})),dt("rowSelector"),$e("previousSelector",B.none)],menu:[$e("moveOnTab",!0),Gs("config",(e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}))]})),si("markers",Ww()),$e("fakeFocus",!1),$e("focusManager",s2()),Ko("onHighlight"),Ko("onDehighlight")]),Du=re("alloy.menu-focus"),w1=Wc({name:"Menu",configFields:Hk(),partFields:Lk(),factory:(e,t,r,c)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:ja(e.menuBehaviours,[rs.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Wt.config({store:{mode:"memory",initialValue:e.value}}),Lo.config({find:B.some}),xn.config(e.movement.config(e,e.movement))]),events:ss([ut(DR(),(d,f)=>{const v=f.event;d.getSystem().getByDom(v.target).each(x=>{rs.highlight(d,x),f.stop(),wn(d,Du(),{menu:d,item:x})})}),ut(Pk(),(d,f)=>{rs.highlight(d,f.event.item)}),ut(MR(),(d,f)=>{const{item:v,state:x}=f.event;x&&"menuitemradio"===Bo(v.element,"role")&&((e,t)=>{const r=Zc(e.element,'[role="menuitemradio"][aria-checked="true"]');lt(r,c=>{Jo(c,t.element)||e.getSystem().getByDom(c).each(d=>{So.off(d)})})})(d,v)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),Px=(e,t,r,c)=>rt(r,c).bind(d=>rt(e,d).bind(f=>{const v=Px(e,t,r,f);return B.some([f].concat(v))})).getOr([]),zk=e=>"prepared"===e.type?B.some(e.menu):B.none(),Uk_init=()=>{const e=_n({}),t=_n({}),r=_n({}),c=fr(),d=_n({}),pe=St=>Ge(St).bind(zk),Ge=St=>rt(t.get(),St),Te=St=>rt(e.get(),St);return{setMenuBuilt:(St,pt)=>{t.set({...t.get(),[St]:{type:"prepared",menu:pt}})},setContents:(St,pt,Mt,Gt)=>{c.set(St),e.set(Mt),t.set(pt),d.set(Gt);const Do=((e,t)=>{const r={};Ye(e,(v,x)=>{lt(v,k=>{r[k]=x})});const c=t,d=(e=>Sn(e,(t,r)=>({k:t,v:r})))(t),f=Ke(d,(v,x)=>[x].concat(Px(r,c,d,x)));return Ke(r,v=>rt(f,v).getOr([v]))})(Gt,Mt);r.set(Do)},expand:St=>rt(e.get(),St).map(pt=>{const Mt=rt(r.get(),St).getOr([]);return[pt].concat(Mt)}),refresh:St=>rt(r.get(),St),collapse:St=>rt(r.get(),St).bind(pt=>pt.length>1?B.some(pt.slice(1)):B.none()),lookupMenu:Ge,lookupItem:Te,otherMenus:St=>{const pt=d.get();return Ls(Xo(pt),St)},getPrimary:()=>c.get().bind(pe),getMenus:()=>t.get(),clear:()=>{e.set({}),t.set({}),r.set({}),c.clear()},isClear:()=>c.get().isNone(),getTriggeringPath:(St,pt)=>{const Mt=so(Te(St).toArray(),Gt=>pe(Gt).isSome());return rt(r.get(),St).bind(Gt=>{const Do=Ao(Mt.concat(Gt));return(e=>{const t=[];for(let r=0;r<e.length;r++){const c=e[r];if(!c.isSome())return B.none();t.push(c.getOrDie())}return B.some(t)})(No(Do,(uo,Xn)=>((St,pt,Mt)=>pe(St).bind(Gt=>(St=>Es(e.get(),(pt,Mt)=>pt===St))(St).bind(Do=>pt(Do).map(fn=>({triggeredMenu:Gt,triggeringItem:fn,triggeringPath:Mt})))))(uo,pt,Do.slice(0,Xn+1)).fold(()=>ea(c.get(),uo)?[]:[B.none()],Yo=>[B.some(Yo)])))})}}},Uk_extractPreparedMenu=zk,Zk=un("tiered-menu-item-highlight"),h2=un("tiered-menu-item-dehighlight");var ml;!function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"}(ml||(ml={}));const q4=re("collapse-item"),Cc=yc({name:"TieredMenu",configFields:[tf("onExecute"),tf("onEscape"),nu("onOpenMenu"),nu("onOpenSubmenu"),Ko("onRepositionMenu"),Ko("onCollapseMenu"),$e("highlightOnOpen",ml.HighlightMenuAndItem),Wu("data",[dt("primary"),dt("menus"),dt("expansions")]),$e("fakeFocus",!1),Ko("onHighlightItem"),Ko("onDehighlightItem"),Ko("onHover"),Tb(),dt("dom"),$e("navigateOnHover",!0),$e("stayInDom",!1),Wa("tmenuBehaviours",[xn,rs,Lo,to]),$e("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:(e,t)=>{const r=fr(),d=Uk_init(),v=$t=>Wt.getValue($t).value,k=$t=>Ke(e.data.menus,(mn,Gn)=>No(mn.items,Fo=>"separator"===Fo.type?[]:[Fo.data.value])),R=rs.highlight,I=($t,mn)=>{R($t,mn),rs.getHighlighted(mn).orThunk(()=>rs.getFirst(mn)).each(Gn=>{e.fakeFocus?rs.highlight(mn,Gn):Ad($t,Gn.element,Jh())})},V=($t,mn)=>Vr(Be(mn,Gn=>$t.lookupMenu(Gn).bind(Fo=>"prepared"===Fo.type?B.some(Fo.menu):B.none()))),Z=($t,mn,Gn)=>{const Fo=V(mn,mn.otherMenus(Gn));lt(Fo,On=>{ri(On.element,[e.markers.backgroundMenu]),e.stayInDom||to.remove($t,On)})},oe=($t,mn)=>{const Gn=($t=>r.get().getOrThunk(()=>{const mn={},Gn=Zc($t.element,`.${e.markers.item}`),Fo=so(Gn,On=>"true"===Bo(On,"aria-haspopup"));return lt(Fo,On=>{$t.getSystem().getByDom(On).each(no=>{const qs=v(no);mn[qs]=no})}),r.set(mn),mn}))($t);Ye(Gn,(Fo,On)=>{const no=xo(mn,On);Bn(Fo.element,"aria-expanded",no)})},pe=($t,mn,Gn)=>B.from(Gn[0]).bind(Fo=>mn.lookupMenu(Fo).bind(On=>{if("notbuilt"===On.type)return B.none();{const no=On.menu,qs=V(mn,Gn.slice(1));return lt(qs,fs=>{va(fs.element,e.markers.backgroundMenu)}),ns(no.element)||to.append($t,fi(no)),ri(no.element,[e.markers.backgroundMenu]),I($t,no),Z($t,mn,Gn),B.some(no)}}));let Ge;var $t;($t=Ge||(Ge={}))[$t.HighlightSubmenu=0]="HighlightSubmenu",$t[$t.HighlightParent=1]="HighlightParent";const xe=($t,mn,Gn=Ge.HighlightSubmenu)=>{if(mn.hasConfigured(Nn)&&Nn.isDisabled(mn))return B.some(mn);{const Fo=v(mn);return d.expand(Fo).bind(On=>(oe($t,On),B.from(On[0]).bind(no=>d.lookupMenu(no).bind(qs=>{const fs=(($t,mn,Gn)=>{if("notbuilt"===Gn.type){const Fo=$t.getSystem().build(Gn.nbMenu());return d.setMenuBuilt(mn,Fo),Fo}return Gn.menu})($t,no,qs);return ns(fs.element)||to.append($t,fi(fs)),e.onOpenSubmenu($t,mn,fs,Ao(On)),Gn===Ge.HighlightSubmenu?(rs.highlightFirst(fs),pe($t,d,On)):(rs.dehighlightAll(fs),B.some(mn))}))))}},Qe=($t,mn)=>{const Gn=v(mn);return d.collapse(Gn).bind(Fo=>(oe($t,Fo),pe($t,d,Fo).map(On=>(e.onCollapseMenu($t,mn,On),On))))},Gt=$t=>(mn,Gn)=>Yu(Gn.getSource(),`.${e.markers.item}`).bind(Fo=>mn.getSystem().getByDom(Fo).toOptional().bind(On=>$t(mn,On).map(Ot))),Do=ss([ut(Du(),($t,mn)=>{d.lookupItem(v(mn.event.item)).each(()=>{rs.highlight($t,mn.event.menu);const On=v(mn.event.item);d.refresh(On).each(no=>Z($t,d,no))})}),eu(($t,mn)=>{const Gn=mn.event.target;$t.getSystem().getByDom(Gn).each(Fo=>{0===v(Fo).indexOf("collapse-item")&&Qe($t,Fo),xe($t,Fo,Ge.HighlightSubmenu).fold(()=>{e.onExecute($t,Fo)},ve)})}),lr(($t,mn)=>{($t=>{const mn=(($t,mn,Gn)=>Ke(Gn,(Fo,On)=>{const no=()=>w1.sketch({...Fo,value:On,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(qs,fs)=>{wn(qs,Zk,{menuComp:qs,itemComp:fs})},onDehighlight:(qs,fs)=>{wn(qs,h2,{menuComp:qs,itemComp:fs})},focusManager:e.fakeFocus?mk():s2()});return On===mn?{type:"prepared",menu:$t.getSystem().build(no())}:{type:"notbuilt",nbMenu:no}}))($t,e.data.primary,e.data.menus),Gn=k();return d.setContents(e.data.primary,mn,e.data.expansions,Gn),d.getPrimary()})($t).each(Gn=>{to.append($t,fi(Gn)),e.onOpenMenu($t,Gn),e.highlightOnOpen===ml.HighlightMenuAndItem?I($t,Gn):e.highlightOnOpen===ml.HighlightJustMenu&&R($t,Gn)})}),ut(Zk,($t,mn)=>{e.onHighlightItem($t,mn.event.menuComp,mn.event.itemComp)}),ut(h2,($t,mn)=>{e.onDehighlightItem($t,mn.event.menuComp,mn.event.itemComp)}),...e.navigateOnHover?[ut(Pk(),($t,mn)=>{const Gn=mn.event.item;(($t,mn)=>{const Gn=v(mn);d.refresh(Gn).bind(Fo=>(oe($t,Fo),pe($t,d,Fo)))})($t,Gn),xe($t,Gn,Ge.HighlightParent),e.onHover($t,Gn)})]:[]]),fn=$t=>rs.getHighlighted($t).bind(rs.getHighlighted),Zo={collapseMenu:$t=>{fn($t).each(mn=>{Qe($t,mn)})},highlightPrimary:$t=>{d.getPrimary().each(mn=>{I($t,mn)})},repositionMenus:$t=>{d.getPrimary().bind(Gn=>fn($t).bind(Fo=>{const On=v(Fo),no=Uo(d.getMenus()),qs=Vr(Be(no,Uk_extractPreparedMenu));return d.getTriggeringPath(On,fs=>(($t,mn,Gn)=>$o(mn,Fo=>{if(!Fo.getSystem().isConnected())return B.none();const On=rs.getCandidates(Fo);return fo(On,no=>v(no)===Gn)}))(0,qs,fs))}).map(Fo=>({primary:Gn,triggeringPath:Fo}))).fold(()=>{($t=>B.from($t.components()[0]).filter(mn=>"menu"===Bo(mn.element,"role")))($t).each(Gn=>{e.onRepositionMenu($t,Gn,[])})},({primary:Gn,triggeringPath:Fo})=>{e.onRepositionMenu($t,Gn,Fo)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:ja(e.tmenuBehaviours,[xn.config({mode:"special",onRight:Gt(($t,mn)=>od(mn.element)?B.none():xe($t,mn,Ge.HighlightSubmenu)),onLeft:Gt(($t,mn)=>od(mn.element)?B.none():Qe($t,mn)),onEscape:Gt(($t,mn)=>Qe($t,mn).orThunk(()=>e.onEscape($t,mn).map(()=>$t))),focusIn:($t,mn)=>{d.getPrimary().each(Gn=>{Ad($t,Gn.element,Jh())})}}),rs.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Lo.config({find:$t=>rs.getHighlighted($t)}),to.config({})]),eventOrder:e.eventOrder,apis:Zo,events:Do}},extraApis:{tieredData:(e,t,r)=>({primary:e,menus:t,expansions:r}),singleData:(e,t)=>({primary:e,menus:Zt(e,t),expansions:{}}),collapseItem:e=>({value:un(q4()),meta:{text:e}})}}),Zr=yc({name:"InlineView",configFields:[dt("lazySink"),Ko("onShow"),Ko("onHide"),Bi("onEscape"),Wa("inlineBehaviours",[Io,Wt,ai]),Rc("fireDismissalEventInstead",[$e("event",Su())]),Rc("fireRepositionEventInstead",[$e("event",fw())]),$e("getRelated",B.none),$e("isExtraPart",De),$e("eventOrder",B.none)],factory:(e,t)=>{const f=(Z,Y,oe,pe)=>{const Ge=e.lazySink(Z).getOrDie();Io.openWhileCloaked(Z,Y,()=>Nc.positionWithinBounds(Ge,Z,oe,pe())),Wt.setValue(Z,B.some({mode:"position",config:oe,getBounds:pe}))},x=(Z,Y,oe,pe)=>{const Ge=((e,t,r,c,d)=>{const f=()=>e.lazySink(t),v="horizontal"===c.type?{layouts:{onLtr:()=>Ob(),onRtl:()=>fg()}}:{},k=R=>(R=>2===R.length)(R)?v:{};return Cc.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(Io.close(t),e.onEscape.map(R=>R(t)),B.some(!0)),onExecute:()=>B.some(!0),onOpenMenu:(R,I)=>{Nc.positionWithinBounds(f().getOrDie(),I,r,d())},onOpenSubmenu:(R,I,V,Z)=>{const Y=f().getOrDie();Nc.position(Y,V,{anchor:{type:"submenu",item:I,...k(Z)}})},onRepositionMenu:(R,I,V)=>{const Z=f().getOrDie();Nc.positionWithinBounds(Z,I,r,d()),lt(V,Y=>{const oe=k(Y.triggeringPath);Nc.position(Z,Y.triggeredMenu,{anchor:{type:"submenu",item:Y.triggeringItem,...oe}})})}})})(e,Z,Y,oe,pe);Io.open(Z,Ge),Wt.setValue(Z,B.some({mode:"menu",menu:Ge}))},I=Z=>{Io.isOpen(Z)&&Wt.getValue(Z).each(Y=>{switch(Y.mode){case"menu":Io.getState(Z).each(Cc.repositionMenus);break;case"position":const oe=e.lazySink(Z).getOrDie();Nc.positionWithinBounds(oe,Z,Y.config,Y.getBounds())}})},V={setContent:(Z,Y)=>{Io.setContent(Z,Y)},showAt:(Z,Y,oe)=>{f(Z,Y,oe,B.none)},showWithinBounds:f,showMenuAt:(Z,Y,oe)=>{x(Z,Y,oe,B.none)},showMenuWithinBounds:x,hide:Z=>{Io.isOpen(Z)&&(Wt.setValue(Z,B.none()),Io.close(Z))},getContent:Z=>Io.getState(Z),reposition:I,isOpen:Io.isOpen};return{uid:e.uid,dom:e.dom,behaviours:ja(e.inlineBehaviours,[Io.config({isPartOf:(Z,Y,oe)=>lg(Y,oe)||((Z,Y)=>e.getRelated(Z).exists(pe=>lg(pe,Y)))(Z,oe),getAttachPoint:Z=>e.lazySink(Z).getOrDie(),onOpen:Z=>{e.onShow(Z)},onClose:Z=>{e.onHide(Z)}}),Wt.config({store:{mode:"memory",initialValue:B.none()}}),ai.config({channels:{...t0({isExtraPart:t.isExtraPart,...e.fireDismissalEventInstead.map(Z=>({fireEventInstead:{event:Z.event}})).getOr({})}),...hf({...e.fireRepositionEventInstead.map(Z=>({fireEventInstead:{event:Z.event}})).getOr({}),doReposition:I})}})]),eventOrder:e.eventOrder,apis:V}},apis:{showAt:(e,t,r,c)=>{e.showAt(t,r,c)},showWithinBounds:(e,t,r,c,d)=>{e.showWithinBounds(t,r,c,d)},showMenuAt:(e,t,r,c)=>{e.showMenuAt(t,r,c)},showMenuWithinBounds:(e,t,r,c,d)=>{e.showMenuWithinBounds(t,r,c,d)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,r)=>{e.setContent(t,r)},reposition:(e,t)=>{e.reposition(t)}}});var f2=tinymce.util.Tools.resolve("tinymce.util.Delay");const jc=yc({name:"Button",factory:e=>{const t=d2(e.action),r=e.dom.tag,c=f=>rt(e.dom,"attributes").bind(v=>rt(v,f));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:au_augment(e.buttonBehaviours,[Un.config({}),xn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===r?{type:c("type").getOr("button"),...c("role").map(x=>({role:x})).getOr({})}:{role:e.role.getOr(c("role").getOr("button"))}},eventOrder:e.eventOrder}},configFields:[$e("uid",void 0),dt("dom"),$e("components",[]),au_field("buttonBehaviours",[Un,xn]),us("action"),us("role"),$e("eventOrder",{})]}),ks=e=>{const t=(e=>void 0!==e.uid)(e)&&_r(e,"uid")?e.uid:ch("memento");return{get:f=>f.getSystem().getByUid(t).getOrDie(),getOpt:f=>f.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}};var uu=tinymce.util.Tools.resolve("tinymce.util.I18n");const Rg={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},Fx="temporary-placeholder",$x=e=>()=>rt(e,Fx).getOr("!not found!"),M0=(e,t)=>{const r=e.toLowerCase();if(uu.isRtl()){const c=((e,t)=>cs(e,t)?e:((e,t)=>e+"-rtl")(e))(r,"-rtl");return Qn(t,c)?c:r}return r},Ix=(e,t)=>rt(t,M0(e,t)),J4=(e,t)=>{const r=t();return Ix(e,r).getOrThunk($x(r))},Lx=()=>Jn("add-focusable",[lr(e=>{Rv(e.element,"svg").each(t=>Bn(t,"focusable","false"))})]),Fm=(e,t,r,c)=>{var d,f;const v=(e=>!!uu.isRtl()&&Qn(Rg,e))(t)?["tox-icon--flip"]:[],x=rt(r,M0(t,r)).or(c).getOrThunk($x(r));return{dom:{tag:e.tag,attributes:null!==(d=e.attributes)&&void 0!==d?d:{},classes:e.classes.concat(v),innerHtml:x},behaviours:Et([...null!==(f=e.behaviours)&&void 0!==f?f:[],Lx()])}},du=(e,t,r,c=B.none())=>Fm(t,e,r(),c),VR={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Hx=yc({name:"Notification",factory:e=>{const t=ks({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Et([to.config({})])}),r=Y=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Y}%`}}}),c=Y=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Y}%`}}),d=ks({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(0)]},c(0)],behaviours:Et([to.config({})])}),x={updateProgress:(Y,oe)=>{Y.getSystem().isConnected()&&d.getOpt(Y).each(pe=>{to.set(pe,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(oe)]},c(oe)])})},updateText:(Y,oe)=>{if(Y.getSystem().isConnected()){const pe=t.get(Y);to.set(pe,[Yr(oe)])}}},k=En([e.icon.toArray(),e.level.toArray(),e.level.bind(Y=>B.from(VR[Y])).toArray()]),R=ks(jc.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[du("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:Y=>{e.onAction(Y)}})),I=((e,t,r)=>{const c=r(),d=fo(e,f=>Qn(c,M0(f,c)));return Fm({tag:"div",classes:["tox-notification__icon"]},d.getOr(Fx),c,B.none())})(k,0,e.iconProvider),Z=[I,{dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:Et([to.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(Y=>["tox-notification","tox-notification--in",`tox-notification--${Y}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Et([Un.config({}),Jn("notification-events",[ut(Pa(),Y=>{R.getOpt(Y).each(Un.focus)})])]),components:Z.concat(e.progress?[d.asSpec()]:[]).concat(e.closeButton?[R.asSpec()]:[]),apis:x}},configFields:[us("level"),dt("progress"),us("icon"),dt("onAction"),dt("text"),dt("iconProvider"),dt("translationProvider"),Va("closeButton",!0)],apis:{updateProgress:(e,t,r)=>{e.updateProgress(t,r)},updateText:(e,t,r)=>{e.updateText(t,r)}}});var Mu,N0,Df=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),p2=tinymce.util.Tools.resolve("tinymce.EditorManager"),Dg=tinymce.util.Tools.resolve("tinymce.Env");!function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"}(Mu||(Mu={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(N0||(N0={}));const nr=e=>t=>t.options.get(e),B0=e=>t=>B.from(e(t)),Q4=e=>{const t=Dg.deviceType.isPhone(),r=Dg.deviceType.isTablet()||t,c=e.options.register,d=v=>bn(v)||!1===v,f=v=>bn(v)||Ln(v);c("skin",{processor:v=>bn(v)||!1===v,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:f,default:Math.max(e.getElement().offsetHeight,400)}),c("width",{processor:f,default:Df.DOM.getStyle(e.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:v=>bn(v)||zt(v),default:!t}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:v=>zt(v)||bn(v)||Oo(v)?{value:v,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),bt(9,v=>{c("toolbar"+(v+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:r?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:N0.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:e.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:v=>"both"===v||zt(v),default:!Dg.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")})},e3=nr("readonly"),Gk=nr("height"),Vx=nr("width"),zx=B0(nr("min_width")),Ux=B0(nr("min_height")),Zx=B0(nr("max_width")),Wx=B0(nr("max_height")),P0=B0(nr("style_formats")),qk=nr("style_formats_merge"),t3=nr("style_formats_autohide"),n3=nr("content_langs"),Kk=nr("removed_menuitems"),C1=nr("toolbar_mode"),jx=nr("toolbar_groups"),$m=nr("toolbar_location"),Yk=nr("fixed_toolbar_container"),o3=nr("fixed_toolbar_container_target"),Xk=nr("toolbar_persist"),Gx=nr("toolbar_sticky_offset"),Jk=nr("menubar"),x1=nr("toolbar"),Qk=nr("file_picker_callback"),eE=nr("file_picker_validator_handler"),s3=nr("font_size_input_default_unit"),tE=nr("file_picker_types"),nE=nr("typeahead_urls"),r3=nr("anchor_top"),a3=nr("anchor_bottom"),c3=nr("draggable_modal"),b2=nr("statusbar"),oE=nr("elementpath"),qx=nr("branding"),Kx=nr("resize"),sE=nr("paste_as_text"),i3=nr("sidebar_show"),rE=nr("promotion"),aE=nr("help_accessibility"),cE=e=>!1===e.options.get("skin"),v2=e=>!1!==e.options.get("menubar"),iE=e=>{const t=e.options.get("skin_url");if(cE(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const r=e.options.get("skin");return p2.baseURL+"/skins/ui/"+r}},l3=e=>e.options.get("line_height_formats").split(" "),F0=e=>{const t=x1(e),r=bn(t),c=Oo(t)&&t.length>0;return!Oh(e)&&(c||r||!0===t)},lE=e=>{const t=bt(9,c=>e.options.get("toolbar"+(c+1))),r=so(t,bn);return rr(r.length>0,r)},Oh=e=>lE(e).fold(()=>{const t=x1(e);return en(t,bn)&&t.length>0},Ot),y2=e=>$m(e)===N0.bottom,Yx=e=>{var t;if(!e.inline)return B.none();const r=null!==(t=Yk(e))&&void 0!==t?t:"";if(r.length>0)return ia(ls(),r);const c=o3(e);return Wn(c)?B.some(be_fromDom(c)):B.none()},Mf=e=>e.inline&&Yx(e).isSome(),Xx=e=>Yx(e).getOrThunk(()=>vt(Ve(be_fromDom(e.getElement())))),Jx=e=>e.inline&&!v2(e)&&!F0(e)&&!Oh(e),$0=e=>(e.options.get("toolbar_sticky")||e.inline)&&!Mf(e)&&!Jx(e),Ah=e=>!Mf(e)&&"split"===e.options.get("ui_mode"),uE=e=>{const t=e.options.get("menu");return Ke(t,r=>({...r,items:r.items}))};var u3=Object.freeze({__proto__:null,get ToolbarMode(){return Mu},get ToolbarLocation(){return N0},register:Q4,getSkinUrl:iE,isReadOnly:e3,isSkinDisabled:cE,getHeightOption:Gk,getWidthOption:Vx,getMinWidthOption:zx,getMinHeightOption:Ux,getMaxWidthOption:Zx,getMaxHeightOption:Wx,getUserStyleFormats:P0,shouldMergeStyleFormats:qk,shouldAutoHideStyleFormats:t3,getLineHeightFormats:l3,getContentLanguages:n3,getRemovedMenuItems:Kk,isMenubarEnabled:v2,isMultipleToolbars:Oh,isToolbarEnabled:F0,isToolbarPersist:Xk,getMultipleToolbarsOption:lE,getUiContainer:Xx,useFixedContainer:Mf,isSplitUiMode:Ah,getToolbarMode:C1,isDraggableModal:c3,isDistractionFree:Jx,isStickyToolbar:$0,getStickyToolbarOffset:Gx,getToolbarLocation:$m,isToolbarLocationBottom:y2,getToolbarGroups:jx,getMenus:uE,getMenubar:Jk,getToolbar:x1,getFilePickerCallback:Qk,getFilePickerTypes:tE,useTypeaheadUrls:nE,getAnchorTop:r3,getAnchorBottom:a3,getFilePickerValidatorHandler:eE,getFontSizeInputDefaultUnit:s3,useStatusBar:b2,useElementPath:oE,promotionEnabled:rE,useBranding:qx,getResize:Kx,getPasteAsText:sE,getSidebarShow:i3,useHelpAccessibility:aE});const dE="[data-mce-autocompleter]",mE=e=>Yu(e,dE);var hE;!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(hE||(hE={}));var Im=hE;const Qx="tox-menu-nav__js",eS="tox-collection__item",tS="tox-swatch",d3={normal:Qx,color:tS},m3="tox-collection__item--enabled",h3="tox-collection__item-icon",nS="tox-collection__item-label",fE="tox-collection__item-caret",I0="tox-collection__item--active",w2="tox-collection__item-container",pE="tox-collection__item-container--row",bE=e=>rt(d3,e).getOr(Qx),w3=e=>"color"===e?"tox-swatches":"tox-menu",oS=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:w3(e),tieredMenu:"tox-tiered-menu"}),Nf=e=>{const t=oS(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:bE(e)}},C3=(e,t,r)=>{const c=oS(r);return{tag:"div",classes:En([[c.menu,`tox-menu-${t}-column`],e?[c.hasIcons]:[]])}},x2=[w1.parts.items({})],S2=(e,t,r)=>{const c=oS(r);return{dom:{tag:"div",classes:En([[c.tieredMenu]])},markers:Nf(r)}},vE=re([us("data"),$e("inputAttributes",{}),$e("inputStyles",{}),$e("tag","input"),$e("inputClasses",[]),Ko("onSetValue"),$e("styles",{}),$e("eventOrder",{}),Wa("inputBehaviours",[Wt,Un]),$e("selectOnFocus",!0)]),sS=e=>Et([Un.config({onFocus:e.selectOnFocus?t=>{const r=t.element,c=Al(r);r.dom.setSelectionRange(0,c.length)}:ve})]),x3=e=>({...sS(e),...ja(e.inputBehaviours,[Wt.config({store:{mode:"manual",...e.data.map(t=>({initialValue:t})).getOr({}),getValue:t=>Al(t.element),setValue:(t,r)=>{Al(t.element)!==r&&ya(t.element,r)}},onSetValue:e.onSetValue})])}),yE=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),S1=yc({name:"Input",configFields:vE(),factory:(e,t)=>({uid:e.uid,dom:yE(e),components:[],behaviours:x3(e),eventOrder:e.eventOrder})}),wE=un("refetch-trigger-event"),S3=un("redirect-menu-item-interaction"),T3="tox-menu__searcher",rS=e=>ia(e.element,`.${T3}`).bind(t=>e.getSystem().getByDom(t).toOptional()),CE=rS,xE=e=>({fetchPattern:Wt.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),SE=e=>{const t=(d,f)=>(f.cut(),B.none()),r=(d,f)=>(wn(d,S3,{interactionEvent:f.event,eventType:f.event.raw.type}),B.some(!0)),c="searcher-events";return{dom:{tag:"div",classes:[eS]},components:[S1.sketch({inputClasses:[T3,"tox-textfield"],inputAttributes:{...e.placeholder.map(d=>({placeholder:e.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Et([Jn(c,[ut(sg(),d=>{es(d,wE)}),ut(Li(),(d,f)=>{"Escape"===f.event.raw.key&&f.stop()})]),xn.config({mode:"special",onLeft:t,onRight:t,onSpace:t,onEnter:r,onEscape:r,onUp:r,onDown:r})]),eventOrder:{keydown:[c,xn.name()]}})]}},T2="tox-collection--results__js",TE=e=>{var t;return e.dom?{...e,dom:{...e.dom,attributes:{...null!==(t=e.dom.attributes)&&void 0!==t?t:{},id:un("aria-item-search-result-id"),"aria-selected":"false"}}}:e},kE=(e,t)=>r=>{const c=vn(r,t);return Be(c,d=>({dom:e,components:d}))},k2=(e,t)=>{const r=[];let c=[];return lt(e,(d,f)=>{t(d,f)?(c.length>0&&r.push(c),c=[],(Qn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&r.push(c),Be(r,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},L0=(e,t,r)=>w1.parts.items({preprocess:c=>{const d=Be(c,r);return"auto"!==e&&e>1?kE({tag:"div",classes:["tox-collection__group"]},e)(d):k2(d,(f,v)=>"separator"===t[v].type)}}),aS=(e,t,r=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[L0(e,t,gt)]}),E2=e=>Ys(e,t=>"icon"in t&&void 0!==t.icon),Mg=e=>(console.error(Zu(e)),console.log(e),B.none()),OE=(e,t,r,c,d)=>{const f=((e,t=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[w1.parts.items({preprocess:r=>k2(r,(c,d)=>"separator"===e[d].type)})]}))(r);return{value:e,dom:f.dom,components:f.components,items:r}},cS=(e,t,r,c,d)=>{if("color"===d.menuType){const v=(e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[w1.parts.items({preprocess:"auto"!==e?kE({tag:"div",classes:["tox-swatches__row"]},e):gt})]}]}))(c);return{value:e,dom:v.dom,components:v.components,items:r}}if("normal"===d.menuType&&"auto"===c){const v=aS(c,r);return{value:e,dom:v.dom,components:v.components,items:r}}if("normal"===d.menuType||"searchable"===d.menuType){const v="searchable"!==d.menuType?aS(c,r):"search-with-field"===d.searchMode.searchMode?((e,t,r)=>{const c=un("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[SE({i18n:uu.translate,placeholder:r.placeholder}),{dom:{tag:"div",classes:[...1===e?["tox-collection--list"]:["tox-collection--grid"],T2],attributes:{id:c}},components:[L0(e,t,TE)]}]}})(c,r,d.searchMode):((e,t,r=!0)=>{const c=un("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",T2].concat(1===e?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[L0(e,t,TE)]}})(c,r);return{value:e,dom:v.dom,components:v.components,items:r}}if("listpreview"===d.menuType&&"auto"!==c){const v=(e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[w1.parts.items({preprocess:kE({tag:"div",classes:["tox-collection__group"]},e)})]}))(c);return{value:e,dom:v.dom,components:v.components,items:r}}return{value:e,dom:C3(t,c,d.menuType),components:x2,items:r}},xa=ra("type"),iS=ra("name"),lS=ra("label"),qi=ra("text"),uS=ra("title"),T1=ra("icon"),Rh=ra("value"),qR=Sl("fetch"),AE=Sl("getSubmenuItems"),Dh=Sl("onAction"),KR=Sl("onItemAction"),Bf=ba("onSetup",()=>ve),RE=ec("name"),Mh=ec("text"),cd=ec("icon"),_2=ec("tooltip"),O2=ec("label"),YR=ec("shortcut"),O3=Bi("select"),dS=Va("active",!1),DE=Va("borderless",!1),id=Va("enabled",!0),mS=Va("primary",!1),ME=e=>$e("columns",e),NE=$e("meta",{}),H0=ba("onAction",ve),k1=e=>Pi("type",e),V0=e=>Ha("name","name",yl(()=>un(`${e}-name`)),os),gS=Tn([xa,Mh]),A3=Tn([k1("autocompleteitem"),dS,id,NE,Rh,Mh,cd]),z0=[id,_2,cd,Mh,Bf],BE=Tn([xa,Dh].concat(z0)),R2=e=>Ar("toolbarbutton",BE,e),Pf=[dS].concat(z0),M3=Tn(Pf.concat([xa,Dh])),PE=e=>Ar("ToggleButton",M3,e),hS=[ba("predicate",De),rl("scope","node",["node","editor"]),rl("position","selection",["node","selection","line"])],FE=z0.concat([k1("contextformbutton"),mS,Dh,pc("original",gt)]),JR=Pf.concat([k1("contextformbutton"),mS,Dh,pc("original",gt)]),QR=z0.concat([k1("contextformbutton")]),$E=Pf.concat([k1("contextformtogglebutton")]),eD=Qa("type",{contextformbutton:FE,contextformtogglebutton:JR}),tD=Tn([k1("contextform"),ba("initValue",re("")),O2,Ni("commands",eD),Tl("launch",Qa("type",{contextformbutton:QR,contextformtogglebutton:$E}))].concat(hS)),oD=Tn([k1("contexttoolbar"),ra("items")].concat(hS)),rD=[xa,ra("src"),ec("alt"),Fi("classes",[],os)],aD=Tn(rD),N3=[xa,qi,RE,Fi("classes",["tox-collection__item-label"],os)],D2=Tn(N3),B3=gi(()=>cm("type",{cardimage:aD,cardtext:D2,cardcontainer:P3})),P3=Tn([xa,Pi("direction","horizontal"),Pi("align","left"),Pi("valign","middle"),Ni("items",B3)]),Ff=[id,Mh,YR,Ha("value","value",yl(()=>un("menuitem-value")),hi()),NE],F3=Tn([xa,O2,Ni("items",B3),Bf,H0].concat(Ff)),iD=Tn([xa,dS,cd].concat(Ff)),$3=[xa,ra("fancytype"),H0],uD=[$e("initData",{})].concat($3),dD=[Bi("select"),dp("initData",{},[Va("allowCustomColors",!0),Pi("storageKey","default"),tc("colors",hi())])].concat($3),mD=Qa("fancytype",{inserttable:uD,colorswatch:dD}),hD=Tn([xa,Bf,H0,cd].concat(Ff)),L3=Tn([xa,AE,Bf,cd].concat(Ff)),H3=Tn([xa,cd,dS,Bf,Dh].concat(Ff)),pS=(e,t,r)=>{const c=Zc(e.element,"."+r);if(c.length>0){const d=mr(c,f=>{const v=f.dom.getBoundingClientRect().top,x=c[0].dom.getBoundingClientRect().top;return Math.abs(v-x)>t}).getOr(c.length);return B.some({numColumns:d,numRows:Math.ceil(c.length/d)})}return B.none()},Hm_unnamedEvents=e=>((e,t)=>Et([Jn(e,t)]))(un("unnamed-events"),e),LE=un("tooltip.exclusive"),Nh=un("tooltip.show"),$f=un("tooltip.hide"),HE=(e,t,r)=>{e.getSystem().broadcastOn([LE],{})};var z3=Object.freeze({__proto__:null,hideAllExclusive:HE,setComponents:(e,t,r,c)=>{r.getTooltip().each(d=>{d.getSystem().isConnected()&&to.set(d,c)})}}),U0=Object.freeze({__proto__:null,events:(e,t)=>{const r=d=>{t.getTooltip().each(f=>{Hd(f),e.onHide(d,f),t.clearTooltip()}),t.clearTimer()};return ss(En([[ut(Nh,d=>{t.resetTimer(()=>{(d=>{if(!t.isShowing()){HE(d);const f=e.lazySink(d).getOrDie(),v=d.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:ss("normal"===e.mode?[ut(Ii(),x=>{es(d,Nh)}),ut(oc(),x=>{es(d,$f)})]:[]),behaviours:Et([to.config({})])});t.setTooltip(v),nd(f,v),e.onShow(d,v),Nc.position(f,v,{anchor:e.anchor(d)})}})(d)},e.delay)}),ut($f,d=>{t.resetTimer(()=>{r(d)},e.delay)}),ut(Ql(),(d,f)=>{f.universal||xo(f.channels,LE)&&r(d)}),Ku(d=>{r(d)})],"normal"===e.mode?[ut(Pa(),d=>{es(d,Nh)}),ut(El(),d=>{es(d,$f)}),ut(Ii(),d=>{es(d,Nh)}),ut(oc(),d=>{es(d,$f)})]:[ut(Q1(),(d,f)=>{es(d,Nh)}),ut(eb(),d=>{es(d,$f)})]]))}}),M2=[dt("lazySink"),dt("tooltipDom"),$e("exclusive",!0),$e("tooltipComponents",[]),$e("delay",300),rl("mode","normal",["normal","follow-highlight"]),$e("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:re([tr,er,ur,pi,Aa,Qs]),onRtl:re([tr,er,ur,pi,Aa,Qs])}})),Ko("onHide"),Ko("onShow")],VE=Object.freeze({__proto__:null,init:()=>{const e=fr(),t=fr(),r=()=>{e.on(clearTimeout)},d=re("not-implemented");return cl({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:r,resetTimer:(f,v)=>{r(),e.set(setTimeout(f,v))},readState:d})}});const Z0=Ua({fields:M2,name:"tooltipping",active:U0,state:VE,apis:z3}),zE="silver.readonly",W3=Tn([si("readonly",Td)]),E1=(e,t)=>{const c=e.mainUi.outerContainer.element,d=[e.mainUi.mothership,...e.uiMotherships];t&&lt(d,f=>{f.broadcastOn([Rm()],{target:c})}),lt(d,f=>{f.broadcastOn([zE],{readonly:t})})},N2=(e,t)=>{e.on("init",()=>{e.mode.isReadOnly()&&E1(t,!0)}),e.on("SwitchMode",()=>E1(t,e.mode.isReadOnly())),e3(e)&&e.mode.set("readonly")},uc=()=>ai.config({channels:{[zE]:{schema:W3,onReceive:(e,t)=>{Nn.set(e,t.readonly)}}}}),ld_item=e=>Nn.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),ld_button=e=>Nn.config({disabled:e}),ld_splitButton=e=>Nn.config({disabled:e,disableClass:"tox-tbtn--disabled"}),ld_toolbarButton=e=>Nn.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),bS=(e,t)=>{const r=e.getApi(t);return c=>{c(r)}},If=(e,t)=>lr(r=>{bS(e,r)(d=>{const f=e.onSetup(d);_t(f)&&t.set(f)})}),Lf=(e,t)=>Ku(r=>bS(e,r)(t.get())),K3=(e,t)=>eu((r,c)=>{bS(e,r)(e.onAction),!e.triggersSubmenu&&t===Im.CLOSE_ON_EXECUTE&&(r.getSystem().isConnected()&&es(r,gp()),c.stop())}),bD={[Hi()]:["disabling","alloy.base.behaviour","toggling","item-events"]},W0=Vr,_1=(e,t,r,c)=>{const d=_n(ve);return{type:"item",dom:t.dom,components:W0(t.optComponents),data:e.data,eventOrder:bD,hasSubmenu:e.triggersSubmenu,itemBehaviours:Et([Jn("item-events",[K3(e,r),If(e,d),Lf(e,d)]),ld_item(()=>!e.enabled||c.isDisabled()),uc(),to.config({})].concat(e.itemBehaviours))}},O1=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),mu=e=>{const t=Dg.os.isMacOS()||Dg.os.isiOS(),d=t?{alt:"\u2325",ctrl:"\u2303",shift:"\u21e7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},f=e.split("+");return Be(f,x=>{const k=x.toLowerCase().trim();return Qn(d,k)?d[k]:x}).join(t?"":"+")},UE=(e,t,r=[h3])=>du(e,{tag:"div",classes:r},t),ZE=e=>({dom:{tag:"div",classes:[nS]},components:[Yr(uu.translate(e))]}),WE=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),vD=(e,t)=>({dom:{tag:"div",classes:[nS]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Yr(uu.translate(t))]}]}),B2=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[Yr(mu(e))]}),P2=e=>UE("checkmark",e,["tox-collection__item-checkmark"]),F2=e=>{const t=e.map(r=>({attributes:{title:uu.translate(r),id:un("menu-item")}})).getOr({});return{tag:"div",classes:[Qx,eS],...t}},j0=(e,t,r,c=B.none())=>"color"===e.presets?((e,t,r)=>{const f=e.ariaLabel,v=e.value,x=e.iconContent.map(R=>((e,t,r)=>{const c=t();return Ix(e,c).or(r).getOrThunk($x(c))})(R,t.icons,r));return{dom:(()=>{const I=x.getOr(""),Z={tag:"div",attributes:f.map(Y=>({title:t.translate(Y)})).getOr({}),classes:["tox-swatch"]};return"custom"===v?{...Z,tag:"button",classes:[...Z.classes,"tox-swatches__picker-btn"],innerHtml:I}:"remove"===v?{...Z,classes:[...Z.classes,"tox-swatch--remove"],innerHtml:I}:Wn(v)?{...Z,attributes:{...Z.attributes,"data-mce-color":v},styles:{"background-color":v},innerHtml:I}:Z})(),optComponents:[]}})(e,t,c):((e,t,r,c)=>{const d={tag:"div",classes:[h3]},x=r?e.iconContent.map(Z=>du(Z,d,t.icons,c)).orThunk(()=>B.some({dom:d})):B.none(),k=e.checkMark,R=B.from(e.meta).fold(()=>ZE,Z=>Qn(Z,"style")?ko(vD,Z.style):ZE),I=e.htmlContent.fold(()=>e.textContent.map(R),Z=>B.some(WE(Z,[nS])));return{dom:F2(e.ariaLabel),optComponents:[x,I,e.shortcutContent.map(B2),k,e.caret]}})(e,t,r,c),X3=(e,t)=>rt(e,"tooltipWorker").map(r=>[Z0.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:c=>({type:"submenu",item:c,overrides:{maxHeightFunction:km}}),mode:"follow-highlight",onShow:(c,d)=>{r(f=>{Z0.setComponents(c,[_v({element:be_fromDom(f)})])})}})]).getOr([]),Q3=(e,t)=>{const c=(e=>Df.DOM.encode(e))(uu.translate(e));if(t.length>0){const d=new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t),"gi");return c.replace(d,f=>`<span class="tox-autocompleter-highlight">${f}</span>`)}return c},jE=(e,t)=>Be(e,r=>{switch(r.type){case"cardcontainer":return((e,t)=>({dom:{tag:"div",classes:[w2,"vertical"===e.direction?"tox-collection__item-container--column":pE,"left"===e.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",(()=>{switch(e.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:t}))(r,jE(r.items,t));case"cardimage":return((e,t,r)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:r.getOr("")}}}))(r.src,r.classes,r.alt);case"cardtext":const d=r.name.exists(f=>xo(t.cardText.highlightOn,f))?B.from(t.cardText.matchText).getOr(""):"";return WE(Q3(r.text,d),r.classes)}}),GE=Zy(m2(),Pm()),qE=e=>({value:rO(e)}),KE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,oO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,sO=e=>KE.test(e)||oO.test(e),rO=e=>Ma(e,"#").toUpperCase(),$2=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Hf=e=>{const t=$2(e.red)+$2(e.green)+$2(e.blue);return qE(t)},YE=Math.min,cO=Math.max,yS=Math.round,TD=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,XE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Vm=(e,t,r,c)=>({red:e,green:t,blue:r,alpha:c}),wS=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},JE=e=>{let t,r,c;const d=(e.hue||0)%360;let f=e.saturation/100,v=e.value/100;if(f=cO(0,YE(f,1)),v=cO(0,YE(v,1)),0===f)return t=r=c=yS(255*v),Vm(t,r,c,1);const x=d/60,k=v*f,R=k*(1-Math.abs(x%2-1)),I=v-k;switch(Math.floor(x)){case 0:t=k,r=R,c=0;break;case 1:t=R,r=k,c=0;break;case 2:t=0,r=k,c=R;break;case 3:t=0,r=R,c=k;break;case 4:t=R,r=0,c=k;break;case 5:t=k,r=0,c=R;break;default:t=r=c=0}return t=yS(255*(t+I)),r=yS(255*(r+I)),c=yS(255*(c+I)),Vm(t,r,c,1)},A1=e=>{const t=(e=>{const t=(e=>({value:e.value.replace(KE,(r,c,d,f)=>c+c+d+d+f+f)}))(e),r=oO.exec(t.value);return null===r?["FFFFFF","FF","FF","FF"]:r})(e),r=parseInt(t[1],16),c=parseInt(t[2],16),d=parseInt(t[3],16);return Vm(r,c,d,1)},iO=(e,t,r,c)=>{const d=parseInt(e,10),f=parseInt(t,10),v=parseInt(r,10),x=parseFloat(c);return Vm(d,f,v,x)},CS=e=>{if("transparent"===e)return B.some(Vm(0,0,0,0));const t=TD.exec(e);if(null!==t)return B.some(iO(t[1],t[2],t[3],"1"));const r=XE.exec(e);return null!==r?B.some(iO(r[1],r[2],r[3],r[4])):B.none()},R1=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,QE=Vm(255,0,0,1),xS=(e,t)=>{e.dispatch("ResizeContent",t)},I2=(e,t)=>{e.dispatch("TextColorChange",t)},_D=(e,t)=>e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),SS=(e,t)=>()=>{e(),t()},li=e=>Vf(e,"NodeChange",t=>{t.setEnabled(e.selection.isEditable())}),L2=(e,t)=>r=>{const c=li(e)(r),d=((e,t)=>r=>{const c=Qu(),d=()=>{r.setActive(e.formatter.match(t));const f=e.formatter.formatChanged(t,r.setActive);c.set(f)};return e.initialized?d():e.once("init",d),()=>{e.off("init",d),c.clear()}})(e,t)(r);return()=>{c(),d()}},Vf=(e,t,r)=>c=>{const d=()=>r(c),f=()=>{r(c),e.on(t,d)};return e.initialized?f():e.once("init",f),()=>{e.off("init",f),e.off(t,d)}},n_=e=>t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})},Il=(e,t)=>()=>e.execCommand(t);var Bh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const TS={},dO=e=>rt(TS,e).getOrThunk(()=>{const t=`tinymce-custom-colors-${e}`,r=Bh.getItem(t);if(Ro(r)){const d=Bh.getItem("tinymce-custom-colors");Bh.setItem(t,Wn(d)?d:"[]")}const c=((e,t=10)=>{const r=Bh.getItem(e),c=bn(r)?JSON.parse(r):[],f=t-(R=c).length<0?R.slice(0,t):R,x=R=>{f.splice(R,1)};var R;return{add:R=>{U(f,R).each(x),f.unshift(R),f.length>t&&f.pop(),Bh.setItem(e,JSON.stringify(f))},state:()=>f.slice(0)}})(t,10);return TS[e]=c,c}),mO=(e,t)=>{dO(e).add(t)},G0=(e,t,r)=>({hue:e,saturation:t,value:r}),q0=e=>{let t=0,r=0,c=0;const d=e.red/255,f=e.green/255,v=e.blue/255,x=Math.min(d,Math.min(f,v)),k=Math.max(d,Math.max(f,v));return x===k?(c=x,G0(0,0,100*c)):(t=d===x?3:v===x?1:5,t=60*(t-(d===x?f-v:v===x?d-f:v-d)/(k-x)),r=(k-x)/k,c=k,G0(Math.round(t),Math.round(100*r),Math.round(100*c)))},s_=e=>Hf(JE(e)),zf=e=>(e=>sO(e)?B.some({value:rO(e)}):B.none())(e).orThunk(()=>CS(e).map(Hf)).getOrThunk(()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.fillStyle="#FFFFFF",r.fillStyle=e,r.fillRect(0,0,1,1);const c=r.getImageData(0,0,1,1).data;return Hf(Vm(c[0],c[1],c[2],c[3]))}),kS="forecolor",ES="hilitecolor",DD=e=>{const t=[];for(let r=0;r<e.length;r+=2)t.push({text:e[r+1],value:"#"+zf(e[r]).value,icon:"checkmark",type:"choiceitem"});return t},zm=e=>t=>t.options.get(e),_S="#000000",OS=(e,t)=>t===kS&&e.options.isSet("color_map_foreground")?zm("color_map_foreground")(e):t===ES&&e.options.isSet("color_map_background")?zm("color_map_background")(e):zm("color_map")(e),AS=(e,t="default")=>Math.max(5,Math.ceil(Math.sqrt(OS(e,t).length))),a_=(e,t)=>{const r=zm("color_cols")(e),c=AS(e,t);return r===AS(e)?c:r},hO=(e,t="default")=>Math.round(t===kS?zm("color_cols_foreground")(e):t===ES?zm("color_cols_background")(e):zm("color_cols")(e)),c_=zm("custom_colors"),MD=zm("color_default_foreground"),ND=zm("color_default_background"),i_=(e,t)=>{const r=be_fromDom(e.selection.getStart()),c="hilitecolor"===t?(e=>$i(e,t=>{if(co(t)){const r=Ns(t,"background-color");return rr((e=>CS(e).exists(t=>0!==t.alpha))(r),r)}return B.none()}).getOr("rgba(0, 0, 0, 0)"))(r):Ns(r,"color");return CS(c).map(d=>"#"+Hf(d).value)},D1=e=>{const t="choiceitem",r={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[r,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[r]},l_=(e,t,r,c)=>{"custom"===r?g_(e)(f=>{f.each(v=>{mO(t,v),e.execCommand("mceApplyTextcolor",t,v),c(v)})},i_(e,t).getOr(_S)):"remove"===r?(c(""),e.execCommand("mceRemoveTextcolor",t)):(c(r),e.execCommand("mceApplyTextcolor",t,r))},vO=(e,t,r)=>e.concat((e=>Be(dO(e).state(),t=>({type:"choiceitem",text:t,icon:"checkmark",value:t})))(t).concat(D1(r))),yO=(e,t,r)=>c=>{c(vO(e,t,r))},u_=(e,t,r)=>{e.setIconFill("forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r)},RS=(e,t)=>r=>{const c=i_(e,t);return ea(c,r.toUpperCase())},d_=(e,t,r,c,d)=>{e.ui.registry.addSplitButton(t,{tooltip:c,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:RS(e,r),columns:hO(e,r),fetch:yO(OS(e,r),r,c_(e)),onAction:f=>{l_(e,r,d.get(),ve)},onItemAction:(f,v)=>{l_(e,r,v,x=>{d.set(x),I2(e,{name:t,color:x})})},onSetup:f=>{u_(f,t,d.get());const v=x=>{x.name===t&&u_(f,x.name,x.color)};return e.on("TextColorChange",v),SS(li(e)(f),()=>{e.off("TextColorChange",v)})}})},m_=(e,t,r,c,d)=>{e.ui.registry.addNestedMenuItem(t,{text:c,icon:"forecolor"===t?"text-color":"highlight-bg-color",onSetup:f=>(u_(f,t,d.get()),li(e)(f)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:RS(e,r),initData:{storageKey:r},onAction:f=>{l_(e,r,f.value,v=>{d.set(v),I2(e,{name:t,color:v})})}}]})},g_=e=>(t,r)=>{let c=!1;e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:r},onAction:(x,k)=>{"hex-valid"===k.name&&(c=k.value)},onSubmit:x=>{const R=x.getData().colorpicker;c?(t(B.from(R)),x.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",R]))},onClose:ve,onCancel:()=>{t(B.none())}})},DS=(e,t,r,c,d,f,v,x)=>{const k=E2(t),I=ID(t,r,c,"color"!==d?"normal":"color",f,v,x);return cS(e,k,I,c,{menuType:d})},ID=(e,t,r,c,d,f,v)=>Vr(Be(e,x=>"choiceitem"===x.type?(e=>Ar("choicemenuitem",iD,e))(x).fold(Mg,k=>B.some(((e,t,r,c,d,f,v,x=!0)=>{const R=j0({presets:r,textContent:t?e.text:B.none(),htmlContent:B.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:B.none(),checkMark:t?B.some(P2(v.icons)):B.none(),caret:B.none(),value:e.value},v,x);return Js(_1({data:O1(e),enabled:e.enabled,getApi:I=>({setActive:V=>{So.set(I,V)},isActive:()=>So.isOn(I),isEnabled:()=>!Nn.isDisabled(I),setEnabled:V=>Nn.set(I,!V)}),onAction:I=>c(e.value),onSetup:I=>(I.setActive(d),ve),triggersSubmenu:!1,itemBehaviours:[]},R,f,v),{toggling:{toggleClass:m3,toggleOnExecute:!1,selected:e.active,exclusive:!0}})})(k,1===r,c,t,f(k.value),d,v,E2(e)))):B.none())),MS=(e,t)=>{const r=Nf(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+r.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>"color"===t?ia(d.element,"[aria-checked=true]"):B.none()}},NS=(e,t)=>1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===t?".tox-swatches__row":".tox-collection__group",cell:"color"===t?`.${tS}`:`.${eS}`}},h_=un("cell-over"),f_=un("cell-execute"),H2=(e,t,r)=>{const d=v=>wn(v,f_,{row:e,col:t}),f=(v,x)=>{x.stop(),d(v)};return Dc({dom:{tag:"div",attributes:{role:"button","aria-label":r}},behaviours:Et([Jn("insert-table-picker-cell",[ut(Ii(),Un.focus),ut(Hi(),d),ut(um(),f),ut(dm(),f)]),So.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Un.config({onFocus:v=>wn(v,h_,{row:e,col:t})})])})},TO=e=>No(e,t=>Be(t,fi)),kO=(e,t)=>Yr(`${t}x${e}`),EO={inserttable:(e,t)=>{const d=(e=>(t,r)=>e.shared.providers.translate(`${r} columns, ${t} rows`))(t),f=((e,t,r)=>{const c=[];for(let d=0;d<10;d++){const f=[];for(let v=0;v<10;v++){const x=e(d+1,v+1);f.push(H2(d,v,x))}c.push(f)}return c})(d),v=kO(0,0),x=ks({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[v],behaviours:Et([to.config({})])});return{type:"widget",data:{value:un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[GE.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:TO(f).concat(x.asSpec()),behaviours:Et([Jn("insert-table-picker",[lr(k=>{to.set(x.get(k),[v])}),sb(h_,(k,R,I)=>{const{row:V,col:Z}=I.event;((e,t,r,c,d)=>{for(let f=0;f<10;f++)for(let v=0;v<10;v++)So.set(e[f][v],f<=t&&v<=r)})(f,V,Z),to.set(x.get(k),[kO(V+1,Z+1)])}),sb(f_,(k,R,I)=>{const{row:V,col:Z}=I.event;e.onAction({numRows:V+1,numColumns:Z+1}),es(k,gp())})]),xn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,t)=>{const r=((e,t)=>{const r=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold(()=>vO(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,r),c=>c.concat(D1(r)))})(e,t),c=t.colorinput.getColorCols(e.initData.storageKey),d="color",v={...DS(un("menu-value"),r,x=>{e.onAction({value:x})},c,d,Im.CLOSE_ON_EXECUTE,e.select.getOr(De),t.shared.providers),markers:Nf(d),movement:MS(c,d)};return{type:"widget",data:{value:un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[GE.widget(w1.sketch(v))]}}},M1=e=>({type:"separator",dom:{tag:"div",classes:[eS,"tox-collection__group-heading"]},components:e.text.map(Yr).toArray()});var NO=Object.freeze({__proto__:null,getCoupled:(e,t,r,c)=>r.getOrCreate(e,t,c),getExistingCoupled:(e,t,r,c)=>r.getExisting(e,t,c)}),BO=[si("others",Yh(Rt.value,hi()))],FO=Object.freeze({__proto__:null,init:()=>{const e={},t=(f,v)=>{if(0===Xo(f.others).length)throw new Error("Cannot find any known coupled components");return rt(e,v)},d=re({});return cl({readState:d,getExisting:(f,v,x)=>t(v,x).orThunk(()=>(rt(v.others,x).getOrDie("No information found for coupled component: "+x),B.none())),getOrCreate:(f,v,x)=>t(v,x).getOrThunk(()=>{const R=rt(v.others,x).getOrDie("No information found for coupled component: "+x)(f),I=f.getSystem().build(R);return e[x]=I,I})})}});const la=Ua({fields:BO,name:"coupling",apis:NO,state:FO}),K0=e=>{let t=B.none(),r=[];const d=R=>{v()?k(R):r.push(R)},v=()=>t.isSome(),k=R=>{t.each(I=>{setTimeout(()=>{R(I)},0)})};return e(R=>{v()||(t=B.some(R),(R=>{lt(R,k)})(r),r=[])}),{get:d,map:R=>K0(I=>{d(V=>{I(R(V))})}),isReady:v}},$O={nu:K0,pure:e=>K0(t=>{t(e)})},IO=e=>{setTimeout(()=>{throw e},0)},Y0=e=>{const t=k=>{e().then(k,IO)};return{map:k=>Y0(()=>e().then(k)),bind:k=>Y0(()=>e().then(R=>k(R).toPromise())),anonBind:k=>Y0(()=>e().then(()=>k.toPromise())),toLazy:()=>$O.nu(t),toCached:()=>{let k=null;return Y0(()=>(null===k&&(k=e()),k))},toPromise:e,get:t}},Pc_nu=e=>Y0(()=>new Promise(e)),Pc_pure=e=>Y0(()=>Promise.resolve(e)),LO=re("sink"),FS=re(Fl({name:LO(),overrides:re({dom:{tag:"div"},behaviours:Et([Nc.config({useFixed:Ot})]),events:ss([hm(Li()),hm(ds()),hm(um())])})})),y_=(e,t)=>{const r=e.getHotspot(t).getOr(t),c="hotspot",d=e.getAnchorOverrides();return e.layouts.fold(()=>({type:c,hotspot:r,overrides:d}),f=>({type:c,hotspot:r,overrides:d,layouts:f}))},V2=(e,t,r,c,d,f,v)=>((e,t,r,c,d,f,v)=>{const x=((e,t,r)=>(0,e.fetch)(r).map(t))(e,t,c),k=IS(c,e);return x.map(R=>R.bind(I=>B.from(Cc.sketch({...f.menu(),uid:ch(""),data:I,highlightOnOpen:v,onOpenMenu:(V,Z)=>{const Y=k().getOrDie();Nc.position(Y,Z,{anchor:r}),Io.decloak(d)},onOpenSubmenu:(V,Z,Y)=>{const oe=k().getOrDie();Nc.position(oe,Y,{anchor:{type:"submenu",item:Z}}),Io.decloak(d)},onRepositionMenu:(V,Z,Y)=>{const oe=k().getOrDie();Nc.position(oe,Z,{anchor:r}),lt(Y,pe=>{Nc.position(oe,pe.triggeredMenu,{anchor:{type:"submenu",item:pe.triggeringItem}})})},onEscape:()=>(Un.focus(c),Io.close(d),B.some(!0))}))))})(e,t,y_(e,r),r,c,d,v).map(R=>(R.fold(()=>{Io.isOpen(c)&&Io.close(c)},I=>{Io.cloak(c),Io.open(c,I),f(c)}),c)),w_=(e,t,r,c,d,f,v)=>(Io.close(c),Pc_pure(c)),$S=(e,t,r,c,d,f)=>{const v=la.getCoupled(r,"sandbox");return(Io.isOpen(v)?w_:V2)(e,t,r,v,c,d,f)},IS=(e,t)=>e.getSystem().getByUid(t.uid+"-"+LO()).map(r=>()=>Rt.value(r)).getOrThunk(()=>t.lazySink.fold(()=>()=>Rt.error(new Error("No internal sink is specified, nor could an external sink be found")),r=>()=>r(e))),C_=e=>{Io.getState(e).each(t=>{Cc.repositionMenus(t)})},LS=(e,t,r)=>{const c=Dv(),v=IS(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:c.id,role:"listbox"}},behaviours:au_augment(e.sandboxBehaviours,[Wt.config({store:{mode:"memory",initialValue:t}}),Io.config({onOpen:(x,k)=>{const R=y_(e,t);c.link(t.element),e.matchWidth&&((e,t,r)=>{const c=Lo.getCurrent(t).getOr(t),d=Fs(e.element);r?Xt(c.element,"min-width",d+"px"):((e,t)=>{Hc.set(e,t)})(c.element,d)})(R.hotspot,k,e.useMinWidth),e.onOpen(R,x,k),void 0!==r&&void 0!==r.onOpen&&r.onOpen(x,k)},onClose:(x,k)=>{c.unlink(t.element),void 0!==r&&void 0!==r.onClose&&r.onClose(x,k)},isPartOf:(x,k,R)=>lg(k,R)||lg(t,R),getAttachPoint:()=>v().getOrDie()}),Lo.config({find:x=>Io.getState(x).bind(k=>Lo.getCurrent(k))}),ai.config({channels:{...t0({isExtraPart:De}),...hf({doReposition:C_})}})])}},x_=e=>{const t=la.getCoupled(e,"sandbox");C_(t)},S_=()=>[$e("sandboxClasses",[]),au_field("sandboxBehaviours",[Lo,ai,Io,Wt])],N1=re([dt("dom"),dt("fetch"),Ko("onOpen"),bc("onExecute"),$e("getHotspot",B.some),$e("getAnchorOverrides",re({})),ul(),Wa("dropdownBehaviours",[So,la,xn,Un]),dt("toggleClass"),$e("eventOrder",{}),us("lazySink"),$e("matchWidth",!1),$e("useMinWidth",!1),us("role")].concat(S_())),zO=re([Pl({schema:[Tb(),$e("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),FS()]),dd=Wc({name:"Dropdown",configFields:N1(),partFields:zO(),factory:(e,t,r,c)=>{const f=I=>{Io.getState(I).each(V=>{Cc.highlightPrimary(V)})},v=(I,V,Z)=>$S(e,gt,I,c,V,Z),k={expand:I=>{So.isOn(I)||v(I,ve,ml.HighlightNone).get(ve)},open:I=>{So.isOn(I)||v(I,ve,ml.HighlightMenuAndItem).get(ve)},refetch:I=>la.getExistingCoupled(I,"sandbox").fold(()=>v(I,ve,ml.HighlightMenuAndItem).map(ve),Z=>V2(e,gt,I,Z,c,ve,ml.HighlightMenuAndItem).map(ve)),isOpen:So.isOn,close:I=>{So.isOn(I)&&v(I,ve,ml.HighlightMenuAndItem).get(ve)},repositionMenus:I=>{So.isOn(I)&&x_(I)}},R=(I,V)=>(Ol(I),B.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:ja(e.dropdownBehaviours,[So.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),la.config({others:{sandbox:I=>LS(e,I,{onOpen:()=>So.on(I),onClose:()=>So.off(I)})}}),xn.config({mode:"special",onSpace:R,onEnter:R,onDown:(I,V)=>{if(dd.isOpen(I)){const Z=la.getCoupled(I,"sandbox");f(Z)}else dd.open(I);return B.some(!0)},onEscape:(I,V)=>dd.isOpen(I)?(dd.close(I),B.some(!0)):B.none()}),Un.config({})]),events:d2(B.some(I=>{v(I,f,ml.HighlightMenuAndItem).get(ve)})),eventOrder:{...e.eventOrder,[Hi()]:["disabling","toggling","alloy.base.behaviour"]},apis:k,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold(()=>({}),I=>({role:I})),..."button"===e.dom.tag?{type:("type",rt(e.dom,"attributes").bind(V=>rt(V,"type"))).getOr("button")}:{}}}}},apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),HS=(e,t,r)=>{CE(e).each(c=>{((e,t)=>{z(t.element,"id").each(r=>Bn(e.element,"aria-activedescendant",r))})(c,r),(e=>Ui(e.element,T2)?B.some(e.element):ia(e.element,"."+T2))(t).each(f=>{z(f,"id").each(v=>Bn(c.element,"aria-controls",v))})}),Bn(r.element,"aria-selected","true")},qD=(e,t,r)=>{Bn(r.element,"aria-selected","false")},YD=e=>la.getExistingCoupled(e,"sandbox").bind(rS).map(xE).map(r=>r.fetchPattern).getOr("");var VS;!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(VS||(VS={}));const XD=(e,t,r,c,d)=>{const f=r.shared.providers,v=x=>d?{...x,shortcut:B.none(),icon:x.text.isSome()?B.none():x.icon}:x;switch(e.type){case"menuitem":return(e=>Ar("menuitem",hD,e))(e).fold(Mg,x=>B.some(((e,t,r,c=!0)=>{const f=j0({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:B.none(),ariaLabel:e.text,caret:B.none(),checkMark:B.none(),shortcutContent:e.shortcut},r,c);return _1({data:O1(e),getApi:v=>({isEnabled:()=>!Nn.isDisabled(v),setEnabled:x=>Nn.set(v,!x)}),enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,t,r)})(v(x),t,f,c)));case"nestedmenuitem":return(e=>Ar("nestedmenuitem",L3,e))(e).fold(Mg,x=>B.some(((e,t,r,c=!0,d=!1)=>{const f=d?(e=>UE("chevron-down",e,[fE]))(r.icons):(e=>UE("chevron-right",e,[fE]))(r.icons),x=j0({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:B.none(),ariaLabel:e.text,caret:B.some(f),checkMark:B.none(),shortcutContent:e.shortcut},r,c);return _1({data:O1(e),getApi:k=>({isEnabled:()=>!Nn.isDisabled(k),setEnabled:R=>Nn.set(k,!R),setIconFill:(R,I)=>{ia(k.element,`svg path[class="${R}"], rect[class="${R}"]`).each(V=>{Bn(V,"fill",I)})}}),enabled:e.enabled,onAction:ve,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},x,t,r)})(v(x),t,f,c,d)));case"togglemenuitem":return(e=>Ar("togglemenuitem",H3,e))(e).fold(Mg,x=>B.some(((e,t,r,c=!0)=>{const f=j0({iconContent:e.icon,textContent:e.text,htmlContent:B.none(),ariaLabel:e.text,checkMark:B.some(P2(r.icons)),caret:B.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},r,c);return Js(_1({data:O1(e),enabled:e.enabled,getApi:v=>({setActive:x=>{So.set(v,x)},isActive:()=>So.isOn(v),isEnabled:()=>!Nn.isDisabled(v),setEnabled:x=>Nn.set(v,!x)}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,t,r),{toggling:{toggleClass:m3,toggleOnExecute:!1,selected:e.active}})})(v(x),t,f,c)));case"separator":return(e=>Ar("separatormenuitem",gS,e))(e).fold(Mg,x=>B.some(M1(x)));case"fancymenuitem":return(e=>Ar("fancymenuitem",mD,e))(e).fold(Mg,x=>((e,t)=>rt(EO,e.fancytype).map(r=>r(e,t)))(x,r));default:return console.error("Unknown item in general menu",e),B.none()}},zS=(e,t,r,c,d,f,v)=>{const x=1===c,k=!x||E2(e);return Vr(Be(e,R=>{switch(R.type){case"separator":return(e=>Ar("Autocompleter.Separator",gS,e))(R).fold(Mg,I=>B.some(M1(I)));case"cardmenuitem":return(e=>Ar("cardmenuitem",F3,e))(R).fold(Mg,I=>B.some(((e,t,r,c)=>{const f={dom:F2(e.label),optComponents:[B.some({dom:{tag:"div",classes:[w2,pE]},components:jE(e.items,c)})]};return _1({data:O1({text:B.none(),...e}),enabled:e.enabled,getApi:v=>({isEnabled:()=>!Nn.isDisabled(v),setEnabled:x=>{Nn.set(v,!x),lt(Zc(v.element,"*"),k=>{v.getSystem().getByDom(k).each(R=>{R.hasConfigured(Nn)&&Nn.set(R,!x)})})}}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:B.from(c.itemBehaviours).getOr([])},f,t,r.providers)})({...I,onAction:V=>{I.onAction(V),r(I.value,I.meta)}},d,f,{itemBehaviours:X3(I.meta,f),cardText:{matchText:t,highlightOn:v}})));default:return(e=>Ar("Autocompleter.Item",A3,e))(R).fold(Mg,I=>B.some(((e,t,r,c,d,f,v,x=!0)=>{const k=j0({presets:c,textContent:B.none(),htmlContent:r?e.text.map(R=>Q3(R,t)):B.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:B.none(),checkMark:B.none(),caret:B.none(),value:e.value},v.providers,x,e.icon);return _1({data:O1(e),enabled:e.enabled,getApi:re({}),onAction:R=>d(e.value,e.meta),onSetup:re(ve),triggersSubmenu:!1,itemBehaviours:X3(e.meta,v)},k,f,v.providers)})(I,t,x,"normal",r,d,f,k)))}}))},jO=(e,t,r,c,d,f)=>{const v=E2(t),x=Vr(Be(t,I=>{const Z=Y=>XD(Y,r,c,(Y=>d?!Qn(Y,"text"):v)(Y),d);return"nestedmenuitem"===I.type&&I.getSubmenuItems().length<=0?Z({...I,enabled:!1}):Z(I)})),k=(e=>"no-search"===e.searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:e})(f);return(d?OE:cS)(e,v,x,1,k)},T_=e=>Cc.singleData(e.value,e),QD_register=(e,t)=>{const r=_n(!1),c=_n(!1),d=Dc(Zr.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Et([Jn("dismissAutocompleter",[ut(Su(),()=>R())])]),lazySink:t.getSink})),f=()=>Zr.isOpen(d),v=c.get,x=()=>{f()&&Zr.hide(d)},k=()=>Zr.getContent(d).bind(oe=>Hs(oe.components(),0)),R=()=>e.execCommand("mceAutocompleterClose"),Z=oe=>{const pe=(oe=>{const pe=$o(oe,Ge=>B.from(Ge.columns)).getOr(1);return No(oe,Ge=>zS(Ge.items,Ge.matchText,(xe,Qe)=>{const He=e.selection.getRng();((e,t)=>mE(be_fromDom(t.startContainer)).map(r=>{const c=e.createRng();return c.selectNode(r.dom),c}))(e.dom,He).each(St=>{const pt={hide:()=>R(),reload:Mt=>{x(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:Mt})}};r.set(!0),Ge.onAction(pt,St,xe,Qe),r.set(!1)})},pe,Im.BUBBLE_TO_SANDBOX,t,Ge.highlightOn))})(oe);pe.length>0?((oe,pe)=>{(e=>ia(e,dE))(be_fromDom(e.getBody())).each(Ge=>{const Te=$o(oe,xe=>B.from(xe.columns)).getOr(1);Zr.showMenuAt(d,{anchor:{type:"node",root:be_fromDom(e.getBody()),node:B.from(Ge)}},((e,t,r,c)=>{const d=MS(t,c),f=Nf(c);return{data:T_({...e,movement:d,menuBehaviours:Hm_unnamedEvents("auto"!==t?[]:[lr((v,x)=>{pS(v,4,f.item).each(({numColumns:k,numRows:R})=>{xn.setGridSize(v,R,k)})})])}),menu:{markers:Nf(c),fakeFocus:r===VS.ContentFocus}}})(cS("autocompleter-value",!0,pe,Te,{menuType:"normal"}),Te,VS.ContentFocus,"normal"))}),k().each(rs.highlightFirst)})(oe,pe):x()};e.on("AutocompleterStart",({lookupData:oe})=>{c.set(!0),r.set(!1),Z(oe)}),e.on("AutocompleterUpdate",({lookupData:oe})=>Z(oe)),e.on("AutocompleterEnd",()=>{x(),c.set(!1),r.set(!1)}),((e,t)=>{const r=(d,f)=>{wn(d,Li(),{raw:f})},c=()=>e.getMenu().bind(rs.getHighlighted);t.on("keydown",d=>{const f=d.which;!e.isActive()||(e.isMenuOpen()?13===f?(c().each(Ol),d.preventDefault()):40===f?(c().fold(()=>{e.getMenu().each(rs.highlightFirst)},v=>{r(v,d)}),d.preventDefault(),d.stopImmediatePropagation()):(37===f||38===f||39===f)&&c().each(v=>{r(v,d),d.preventDefault(),d.stopImmediatePropagation()}):(13===f||38===f||40===f)&&e.cancelIfNecessary())}),t.on("NodeChange",d=>{e.isActive()&&!e.isProcessingAction()&&mE(be_fromDom(d.element)).isNone()&&e.cancelIfNecessary()})})({cancelIfNecessary:R,isMenuOpen:f,isActive:v,isProcessingAction:r.get,getMenu:k},e)},k_=["visible","hidden","clip"],E_=e=>Ss(e).length>0&&!xo(k_,e),qO=e=>{if(Ka(e)){const t=Ns(e,"overflow-x"),r=Ns(e,"overflow-y");return E_(t)||E_(r)}return!1},B1=(e,t)=>Ah(e)?(e=>{const t=xC(e,qO),r=0===t.length?Eo(e).map(xr).map(c=>xC(c,qO)).getOr([]):t;return Ps(r).map(c=>({element:c,others:r.slice(1)}))})(t):B.none(),X0=e=>{const t=[...Be(e.others,oa),H()];return((e,t)=>Ht(t,(r,c)=>Tr(r,c),e))(oa(e.element),t)},J0=(e,t,r)=>Yu(e,t,r).isSome(),__=(e,t)=>{let r=null;return{cancel:()=>{null!==r&&(clearTimeout(r),r=null)},schedule:(...f)=>{r=setTimeout(()=>{e.apply(null,f),r=null},t)}}},U2=e=>{const t=e.raw;return void 0===t.touches||1!==t.touches.length?B.none():B.some(t.touches[0])},tM=(e,t)=>{const r={stopBackspace:!0,...t},d=(e=>{const t=fr(),r=_n(!1),c=__(R=>{e.triggerEvent(mp(),R),r.set(!0)},400),x=Fn([{key:_a(),value:R=>(U2(R).each(I=>{c.cancel();const V={x:I.clientX,y:I.clientY,target:R.target};c.schedule(R),r.set(!1),t.set(V)}),B.none())},{key:za(),value:R=>(c.cancel(),U2(R).each(I=>{t.on(V=>{((e,t)=>{const r=Math.abs(e.clientX-t.x),c=Math.abs(e.clientY-t.y);return r>5||c>5})(I,V)&&t.clear()})}),B.none())},{key:lm(),value:R=>(c.cancel(),t.get().filter(V=>Jo(V.target,R.target)).map(V=>r.get()?(R.prevent(),!1):e.triggerEvent(dm(),R)))}]);return{fireIfReady:(R,I)=>rt(x,I).bind(V=>V(R))}})(r),f=Be(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),Y=>bi(e,Y,oe=>{d.fireIfReady(oe,Y).each(Ge=>{Ge&&oe.kill()}),r.triggerEvent(Y,oe)&&oe.kill()})),v=fr(),x=bi(e,"paste",Y=>{d.fireIfReady(Y,"paste").each(pe=>{pe&&Y.kill()}),r.triggerEvent("paste",Y)&&Y.kill(),v.set(setTimeout(()=>{r.triggerEvent(xu(),Y)},0))}),k=bi(e,"keydown",Y=>{r.triggerEvent("keydown",Y)?Y.kill():r.stopBackspace&&(e=>e.raw.which===T0[0]&&!xo(["input","textarea"],ws(e.target))&&!J0(e.target,'[contenteditable="true"]'))(Y)&&Y.prevent()}),R=bi(e,"focusin",Y=>{r.triggerEvent("focusin",Y)&&Y.kill()}),I=fr(),V=bi(e,"focusout",Y=>{r.triggerEvent("focusout",Y)&&Y.kill(),I.set(setTimeout(()=>{r.triggerEvent(El(),Y)},0))});return{unbind:()=>{lt(f,Y=>{Y.unbind()}),k.unbind(),R.unbind(),V.unbind(),x.unbind(),v.on(clearTimeout),I.on(clearTimeout)}}},XO=(e,t)=>{const r=rt(e,"target").getOr(t);return _n(r)},F1=O_generate([{stopped:[]},{resume:["element"]},{complete:[]}]),W2=(e,t,r,c,d,f)=>{const v=e(t,c),x=((e,t)=>{const r=_n(!1),c=_n(!1);return{stop:()=>{r.set(!0)},cut:()=>{c.set(!0)},isStopped:r.get,isCut:c.get,event:e,setSource:t.set,getSource:t.get}})(r,d);return v.fold(()=>(f.logEventNoHandlers(t,c),F1.complete()),k=>{const R=k.descHandler;return Sp(R)(x),x.isStopped()?(f.logEventStopped(t,k.element,R.purpose),F1.stopped()):x.isCut()?(f.logEventCut(t,k.element,R.purpose),F1.complete()):Kr(k.element).fold(()=>(f.logNoParent(t,k.element,R.purpose),F1.complete()),V=>(f.logEventResponse(t,k.element,R.purpose),F1.resume(V)))})},Zf=(e,t,r,c,d,f)=>W2(e,t,r,c,d,f).fold(Ot,v=>Zf(e,t,r,v,d,f),De),R_=(e,t,r,c,d)=>{const f=XO(r,c);return Zf(e,t,r,c,f,d)},D_=()=>{const e=(()=>{const e={};return{registerId:(v,x,k)=>{Ye(k,(R,I)=>{const V=void 0!==e[I]?e[I]:{};V[x]=((e,t)=>((e,t)=>({cHandler:e,purpose:t}))(ko.apply(void 0,[e.handler].concat(t)),e.purpose))(R,v),e[I]=V})},unregisterId:v=>{Ye(e,(x,k)=>{Qn(x,v)&&delete x[v]})},filterByType:v=>rt(e,v).map(x=>jr(x,(k,R)=>((e,t)=>({id:e,descHandler:t}))(R,k))).getOr([]),find:(v,x,k)=>rt(e,x).bind(R=>$i(k,I=>((v,x)=>ig(x).bind(k=>rt(v,k)).map(k=>((e,t)=>({element:e,descHandler:t}))(x,k)))(R,I),v))}})(),t={},f=R=>{ig(R.element).each(I=>{delete t[I],e.unregisterId(I)})};return{find:(R,I,V)=>e.find(R,I,V),filter:R=>e.filterByType(R),register:R=>{const I=(R=>ig(R.element).getOrThunk(()=>((e,t)=>{const r=un(nn+"uid-");return pm(t,r),r})(0,R.element)))(R);_r(t,I)&&((R,I)=>{const V=t[I];if(V!==R)throw new Error('The tagId "'+I+'" is already used by: '+fm(V.element)+"\nCannot use it for: "+fm(R.element)+"\nThe conflicting element is"+(ns(V.element)?" ":" not ")+"already in the DOM");f(R)})(R,I),e.registerId([R],I,R.events),t[I]=R},unregister:f,getById:R=>rt(t,R)}},Gd=yc({name:"Container",factory:e=>{const{attributes:t,...r}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...t},...r},components:e.components,behaviours:Sg(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[$e("components",[]),Wa("containerBehaviours",[]),$e("events",{}),$e("domModification",{}),$e("eventOrder",{})]}),j2=e=>{const t=Te=>Kr(e.element).fold(Ot,xe=>Jo(Te,xe)),r=D_(),c=(Te,xe)=>r.find(t,Te,xe),d=tM(e.element,{triggerEvent:(Te,xe)=>ug(Te,xe.target,Qe=>((e,t,r,c)=>R_(e,t,r,r.target,c))(c,Te,xe,Qe))}),f={debugInfo:re("real"),triggerEvent:(Te,xe,Qe)=>{ug(Te,xe,He=>R_(c,Te,Qe,xe,He))},triggerFocus:(Te,xe)=>{ig(Te).fold(()=>{il(Te)},Qe=>{ug(Cu(),Te,He=>(((e,t,r,c,d)=>{const f=XO(r,c);W2(e,t,r,c,f,d)})(c,Cu(),{originator:xe,kill:ve,prevent:ve,target:Te},Te,He),!1))})},triggerEscape:(Te,xe)=>{f.triggerEvent("keydown",Te.element,xe.event)},getByUid:Te=>pe(Te),getByDom:Te=>Ge(Te),build:Dc,buildOrPatch:Av,addToGui:Te=>{k(Te)},removeFromGui:Te=>{R(Te)},addToWorld:Te=>{v(Te)},removeFromWorld:Te=>{x(Te)},broadcast:Te=>{Z(Te)},broadcastOn:(Te,xe)=>{Y(Te,xe)},broadcastEvent:(Te,xe)=>{oe(Te,xe)},isConnected:Ot},v=Te=>{Te.connect(f),Wo(Te.element)||(r.register(Te),lt(Te.components(),v),f.triggerEvent(al(),Te.element,{target:Te.element}))},x=Te=>{Wo(Te.element)||(lt(Te.components(),x),r.unregister(Te)),Te.disconnect()},k=Te=>{nd(e,Te)},R=Te=>{Hd(Te)},V=Te=>{const xe=r.filter(Ql());lt(xe,Qe=>{Sp(Qe.descHandler)(Te)})},Z=Te=>{V({universal:!0,data:Te})},Y=(Te,xe)=>{V({universal:!1,channels:Te,data:xe})},oe=(Te,xe)=>((e,t,r)=>{const c=(e=>{const t=_n(!1);return{stop:()=>{t.set(!0)},cut:ve,isStopped:t.get,isCut:De,event:e,setSource:Se("Cannot set source of a broadcasted event"),getSource:Se("Cannot get source of a broadcasted event")}})(t);return lt(e,d=>{Sp(d.descHandler)(c)}),c.isStopped()})(r.filter(Te),xe),pe=Te=>r.getById(Te).fold(()=>Rt.error(new Error('Could not find component with uid: "'+Te+'" in system.')),Rt.value),Ge=Te=>{const xe=ig(Te).getOr("not found");return pe(xe)};return v(e),{root:e,element:e.element,destroy:()=>{d.unbind(),ir(e.element)},add:k,remove:R,getByUid:pe,getByDom:Ge,addToWorld:v,removeFromWorld:x,broadcast:Z,broadcastOn:Y,broadcastEvent:oe}},oM=re([$e("prefix","form-field"),Wa("fieldBehaviours",[Lo,Wt])]),nA=re([Fl({schema:[dt("dom")],name:"label"}),Fl({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[dt("text")],name:"aria-descriptor"}),vc({factory:{sketch:e=>{const t=((e,t)=>((e,t)=>{const r={};return Ye(e,(c,d)=>{xo(t,d)||(r[d]=c)}),r})(e,t))(e,["factory"]);return e.factory.sketch(t)}},schema:[dt("factory")],name:"field"})]),Cs=Wc({name:"FormField",configFields:oM(),partFields:nA(),factory:(e,t,r,c)=>{const d=ja(e.fieldBehaviours,[Lo.config({find:x=>$s(x,e,"field")}),Wt.config({store:{mode:"manual",getValue:x=>Lo.getCurrent(x).bind(Wt.getValue),setValue:(x,k)=>{Lo.getCurrent(x).each(R=>{Wt.setValue(R,k)})}}})]),f=ss([lr((x,k)=>{const R=h0(x,e,["label","field","aria-descriptor"]);R.field().each(I=>{const V=un(e.prefix);R.label().each(Z=>{Bn(Z.element,"for",V),Bn(I.element,"id",V)}),R["aria-descriptor"]().each(Z=>{const Y=un(e.prefix);Bn(Z.element,"id",Y),Bn(I.element,"aria-describedby",Y)})})})]);return{uid:e.uid,dom:e.dom,components:t,behaviours:d,events:f,apis:{getField:x=>$s(x,e,"field"),getLabel:x=>$s(x,e,"label")}}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var $1=Object.freeze({__proto__:null,exhibit:(e,t)=>Tu({attributes:Fn([{key:t.tabAttr,value:"true"}])})}),oA=[$e("tabAttr","data-alloy-tabstop")];const Xr=Ua({fields:oA,name:"tabstopping",active:$1});var ZS=tinymce.util.Tools.resolve("tinymce.html.Entities");const Ng=(e,t,r,c)=>{const d=jS(e,t,r,c);return Cs.sketch(d)},jS=(e,t,r,c)=>({dom:gl(r),components:e.toArray().concat([t]),fieldBehaviours:Et(c)}),gl=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),Um=(e,t)=>Cs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yr(t.translate(e))]}),Ll=un("form-component-change"),Q0=un("form-close"),Wf=un("form-cancel"),hl=un("form-action"),G2=un("form-submit"),GS=un("form-block"),jf=un("form-unblock"),q2=un("form-tabchange"),N_=un("form-resize"),rM=["input","textarea"],rA=e=>{const t=ws(e);return xo(rM,t)},tv=(e,t)=>{const r=t.getRoot(e).getOr(e.element);Hr(r,t.invalidClass),t.notify.each(c=>{rA(e.element)&&Bn(e.element,"aria-invalid",!1),c.getContainer(e).each(d=>{cg(d,c.validHtml)}),c.onValid(e)})},aA=(e,t,r,c)=>{const d=t.getRoot(e).getOr(e.element);va(d,t.invalidClass),t.notify.each(f=>{rA(e.element)&&Bn(e.element,"aria-invalid",!0),f.getContainer(e).each(v=>{cg(v,c)}),f.onInvalid(e,c)})},B_=(e,t,r)=>t.validator.fold(()=>Pc_pure(Rt.value(!0)),c=>c.validate(e)),n=(e,t,r)=>(t.notify.each(c=>{c.onValidate(e)}),B_(e,t).map(c=>e.getSystem().isConnected()?c.fold(d=>(aA(e,t,0,d),Rt.error(d)),d=>(tv(e,t),Rt.value(d))):Rt.error("No longer in system")));var s=Object.freeze({__proto__:null,markValid:tv,markInvalid:aA,query:B_,run:n,isInvalid:(e,t)=>{const r=t.getRoot(e).getOr(e.element);return Ui(r,t.invalidClass)}}),i=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map(r=>ss([ut(r.onEvent,c=>{n(c,e).get(gt)})].concat(r.validateOnLoad?[lr(c=>{n(c,e).get(ve)})]:[]))).getOr({})}),u=[dt("invalidClass"),$e("getRoot",B.none),Rc("notify",[$e("aria","alert"),$e("getContainer",B.none),$e("validHtml",""),Ko("onValid"),Ko("onInvalid"),Ko("onValidate")]),Rc("validator",[dt("validate"),$e("onEvent","input"),$e("validateOnLoad",!0)])];const m=Ua({fields:u,name:"invalidating",active:i,apis:s,extra:{validation:e=>t=>{const r=Wt.getValue(t);return Pc_pure(e(r))}}}),w=Ua({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>ss([pv(fv(),Ot)]),exhibit:()=>Tu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),_=un("color-input-change"),N=un("color-swatch-change"),A=un("color-picker-cancel"),D=Fl({schema:[dt("dom")],name:"label"}),L=e=>Fl({name:e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold(()=>({}),c=>({events:ss([ob(_a(),(d,f,v)=>c(d,v),[t]),ob(ds(),(d,f,v)=>c(d,v),[t]),ob(Oa(),(d,f,v)=>{v.mouseIsDown.get()&&c(d,v)},[t])])}))}),j=L("top-left"),q=L("top"),ee=L("top-right"),Q=L("right"),de=L("bottom-right"),Oe=L("bottom"),Re=L("bottom-left"),Ne=L("left"),We=vc({name:"thumb",defaults:re({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:ss([gm(_a(),e,"spectrum"),gm(za(),e,"spectrum"),gm(lm(),e,"spectrum"),gm(ds(),e,"spectrum"),gm(Oa(),e,"spectrum"),gm(qu(),e,"spectrum")])})}),we=vc({schema:[pc("mouseIsDown",()=>_n(!1))],name:"spectrum",overrides:e=>{const r=e.model.manager,c=(d,f)=>r.getValueFromEvent(f).map(v=>r.setValueFrom(d,e,v));return{behaviours:Et([xn.config({mode:"special",onLeft:d=>r.onLeft(d,e),onRight:d=>r.onRight(d,e),onUp:d=>r.onUp(d,e),onDown:d=>r.onDown(d,e)}),Un.config({})]),events:ss([ut(_a(),c),ut(za(),c),ut(ds(),c),ut(Oa(),(d,f)=>{e.mouseIsDown.get()&&c(d,f)})])}}});var Ee=[D,Ne,Q,q,Oe,j,ee,Re,de,We,we];const ct=re("slider.change.value"),kt=e=>{const t=e.event.raw;if((e=>-1!==e.type.indexOf("touch"))(t)){const r=t;return void 0!==r.touches&&1===r.touches.length?B.some(r.touches[0]).map(c=>po(c.clientX,c.clientY)):B.none()}{const r=t;return void 0!==r.clientX?B.some(r).map(c=>po(c.clientX,c.clientY)):B.none()}},Jt=e=>e.model.minX,$n=e=>e.model.minY,lo=e=>e.model.minX-1,ke=e=>e.model.minY-1,_e=e=>e.model.maxX,nt=e=>e.model.maxY,mt=e=>e.model.maxX+1,Fe=e=>e.model.maxY+1,xt=(e,t,r)=>t(e)-r(e),Nt=e=>xt(e,_e,Jt),Bt=e=>xt(e,nt,$n),Vt=e=>Nt(e)/2,Pt=e=>Bt(e)/2,Zn=e=>e.stepSize,xs=e=>e.snapToGrid,Ki=e=>e.snapStart,dc=e=>e.rounded,ua=(e,t)=>void 0!==e[t+"-edge"],Yi=e=>ua(e,"left"),Nu=e=>ua(e,"right"),Gc=e=>ua(e,"top"),Bg=e=>ua(e,"bottom"),Jr=e=>e.model.value.get(),Xi=(e,t)=>({x:e,y:t}),qc=(e,t)=>{wn(e,ct(),{value:t})},P_=(e,t,r,c)=>e<t?e:e>r?r:e===t?t-1:Math.max(t,e-c),KS=(e,t,r,c)=>e>r?e:e<t?t:e===r?r+1:Math.min(r,e+c),YS=(e,t,r)=>Math.max(t,Math.min(r,e)),lA=e=>{const{min:t,max:r,range:c,value:d,step:f,snap:v,snapStart:x,rounded:k,hasMinEdge:R,hasMaxEdge:I,minBound:V,maxBound:Z,screenRange:Y}=e,oe=R?t-1:t,pe=I?r+1:r;if(d<V)return oe;if(d>Z)return pe;{const Ge=((e,t,r)=>Math.min(r,Math.max(e,t))-t)(d,V,Z),Te=YS(Ge/Y*c+t,oe,pe);return v&&Te>=t&&Te<=r?((e,t,r,c,d)=>d.fold(()=>{const v=Math.round((e-t)/c)*c;return YS(t+v,t-1,r+1)},f=>{const x=Math.round((e-f)%c/c),k=Math.floor((e-f)/c),R=Math.floor((r-f)/c),I=Math.min(R,k+x);return Math.max(f,f+I*c)}))(Te,t,r,f,x):k?Math.round(Te):Te}},Y2=e=>{const{min:t,max:r,range:c,value:d,hasMinEdge:f,hasMaxEdge:v,maxBound:x,maxOffset:k,centerMinEdge:R,centerMaxEdge:I}=e;return d<t?f?0:R:d>r?v?x:I:(d-t)/c*k},XS="left",Ji=e=>e.element.dom.getBoundingClientRect(),gd=(e,t)=>e[t],ew=e=>{const t=Ji(e);return gd(t,XS)},F_=e=>{const t=Ji(e);return gd(t,"right")},tw=e=>{const t=Ji(e);return gd(t,"top")},dA=e=>{const t=Ji(e);return gd(t,"bottom")},Ue=e=>{const t=Ji(e);return gd(t,"width")},vo=e=>{const t=Ji(e);return gd(t,"height")},In=(e,t,r)=>(e+t)/2-r,Rr=(e,t)=>{const r=Ji(e),c=Ji(t),d=gd(r,XS),f=gd(r,"right"),v=gd(c,XS);return In(d,f,v)},mc=(e,t)=>{const r=Ji(e),c=Ji(t),d=gd(r,"top"),f=gd(r,"bottom"),v=gd(c,"top");return In(d,f,v)},Kc=(e,t)=>{wn(e,ct(),{value:t})},xc=(e,t,r)=>{const c={min:Jt(t),max:_e(t),range:Nt(t),value:r,step:Zn(t),snap:xs(t),snapStart:Ki(t),rounded:dc(t),hasMinEdge:Yi(t),hasMaxEdge:Nu(t),minBound:ew(e),maxBound:F_(e),screenRange:Ue(e)};return lA(c)},mA=e=>(t,r)=>((e,t,r)=>{const d=(e>0?KS:P_)(Jr(r),Jt(r),_e(r),Zn(r));return Kc(t,d),B.some(d)})(e,t,r).map(Ot),cM=(e,t,r,c,d,f)=>{const v=((e,t,r,c,d)=>{const v=Ue(e),x=c.bind(I=>B.some(Rr(I,e))).getOr(0),k=d.bind(I=>B.some(Rr(I,e))).getOr(v),R={min:Jt(t),max:_e(t),range:Nt(t),value:r,hasMinEdge:Yi(t),hasMaxEdge:Nu(t),minBound:ew(e),minOffset:0,maxBound:F_(e),maxOffset:v,centerMinEdge:x,centerMaxEdge:k};return Y2(R)})(t,f,r,c,d);return ew(t)-ew(e)+v},O8=mA(-1),A8=mA(1),R8=B.none,D8=B.none,M8={"top-left":B.none(),top:B.none(),"top-right":B.none(),right:B.some((e,t)=>{qc(e,mt(t))}),"bottom-right":B.none(),bottom:B.none(),"bottom-left":B.none(),left:B.some((e,t)=>{qc(e,lo(t))})};var N8=Object.freeze({__proto__:null,setValueFrom:(e,t,r)=>{const c=xc(e,t,r);return Kc(e,c),c},setToMin:(e,t)=>{const r=Jt(t);Kc(e,r)},setToMax:(e,t)=>{const r=_e(t);Kc(e,r)},findValueOfOffset:xc,getValueFromEvent:e=>kt(e).map(r=>r.left),findPositionOfValue:cM,setPositionFromValue:(e,t,r,c)=>{const d=Jr(r),f=cM(e,c.getSpectrum(e),d,c.getLeftEdge(e),c.getRightEdge(e),r),v=Fs(t.element)/2;Xt(t.element,"left",f-v+"px")},onLeft:O8,onRight:A8,onUp:R8,onDown:D8,edgeActions:M8});const gA=(e,t)=>{wn(e,ct(),{value:t})},iM=(e,t,r)=>{const c={min:$n(t),max:nt(t),range:Bt(t),value:r,step:Zn(t),snap:xs(t),snapStart:Ki(t),rounded:dc(t),hasMinEdge:Gc(t),hasMaxEdge:Bg(t),minBound:tw(e),maxBound:dA(e),screenRange:vo(e)};return lA(c)},s5=e=>(t,r)=>((e,t,r)=>{const d=(e>0?KS:P_)(Jr(r),$n(r),nt(r),Zn(r));return gA(t,d),B.some(d)})(e,t,r).map(Ot),lM=(e,t,r,c,d,f)=>{const v=((e,t,r,c,d)=>{const v=vo(e),x=c.bind(I=>B.some(mc(I,e))).getOr(0),k=d.bind(I=>B.some(mc(I,e))).getOr(v),R={min:$n(t),max:nt(t),range:Bt(t),value:r,hasMinEdge:Gc(t),hasMaxEdge:Bg(t),minBound:tw(e),minOffset:0,maxBound:dA(e),maxOffset:v,centerMinEdge:x,centerMaxEdge:k};return Y2(R)})(t,f,r,c,d);return tw(t)-tw(e)+v},V8=B.none,z8=B.none,U8=s5(-1),Z8=s5(1),W8={"top-left":B.none(),top:B.some((e,t)=>{qc(e,ke(t))}),"top-right":B.none(),right:B.none(),"bottom-right":B.none(),bottom:B.some((e,t)=>{qc(e,Fe(t))}),"bottom-left":B.none(),left:B.none()};var j8=Object.freeze({__proto__:null,setValueFrom:(e,t,r)=>{const c=iM(e,t,r);return gA(e,c),c},setToMin:(e,t)=>{const r=$n(t);gA(e,r)},setToMax:(e,t)=>{const r=nt(t);gA(e,r)},findValueOfOffset:iM,getValueFromEvent:e=>kt(e).map(r=>r.top),findPositionOfValue:lM,setPositionFromValue:(e,t,r,c)=>{const d=Jr(r),f=lM(e,c.getSpectrum(e),d,c.getTopEdge(e),c.getBottomEdge(e),r),v=Ut(t.element)/2;Xt(t.element,"top",f-v+"px")},onLeft:V8,onRight:z8,onUp:U8,onDown:Z8,edgeActions:W8});const hA=(e,t)=>{wn(e,ct(),{value:t})},fA=(e,t)=>({x:e,y:t}),pA=(e,t)=>(r,c)=>((e,t,r,c)=>{const d=e>0?KS:P_,f=t?Jr(c).x:d(Jr(c).x,Jt(c),_e(c),Zn(c)),v=t?d(Jr(c).y,$n(c),nt(c),Zn(c)):Jr(c).y;return hA(r,fA(f,v)),B.some(f)})(e,t,r,c).map(Ot),Q8=pA(-1,!1),eF=pA(1,!1),tF=pA(-1,!0),nF=pA(1,!0),oF={"top-left":B.some((e,t)=>{qc(e,Xi(lo(t),ke(t)))}),top:B.some((e,t)=>{qc(e,Xi(Vt(t),ke(t)))}),"top-right":B.some((e,t)=>{qc(e,Xi(mt(t),ke(t)))}),right:B.some((e,t)=>{qc(e,Xi(mt(t),Pt(t)))}),"bottom-right":B.some((e,t)=>{qc(e,Xi(mt(t),Fe(t)))}),bottom:B.some((e,t)=>{qc(e,Xi(Vt(t),Fe(t)))}),"bottom-left":B.some((e,t)=>{qc(e,Xi(lo(t),Fe(t)))}),left:B.some((e,t)=>{qc(e,Xi(lo(t),Pt(t)))})};var sF=Object.freeze({__proto__:null,setValueFrom:(e,t,r)=>{const c=xc(e,t,r.left),d=iM(e,t,r.top),f=fA(c,d);return hA(e,f),f},setToMin:(e,t)=>{const r=Jt(t),c=$n(t);hA(e,fA(r,c))},setToMax:(e,t)=>{const r=_e(t),c=nt(t);hA(e,fA(r,c))},getValueFromEvent:e=>kt(e),setPositionFromValue:(e,t,r,c)=>{const d=Jr(r),f=cM(e,c.getSpectrum(e),d.x,c.getLeftEdge(e),c.getRightEdge(e),r),v=lM(e,c.getSpectrum(e),d.y,c.getTopEdge(e),c.getBottomEdge(e),r),x=Fs(t.element)/2,k=Ut(t.element)/2;Xt(t.element,"left",f-x+"px"),Xt(t.element,"top",v-k+"px")},onLeft:Q8,onRight:eF,onUp:tF,onDown:nF,edgeActions:oF});const rF=[$e("stepSize",1),$e("onChange",ve),$e("onChoose",ve),$e("onInit",ve),$e("onDragStart",ve),$e("onDragEnd",ve),$e("snapToGrid",!1),$e("rounded",!0),us("snapStart"),si("model",Qa("mode",{x:[$e("minX",0),$e("maxX",100),pc("value",e=>_n(e.mode.minX)),dt("getInitialValue"),Gs("manager",N8)],y:[$e("minY",0),$e("maxY",100),pc("value",e=>_n(e.mode.minY)),dt("getInitialValue"),Gs("manager",j8)],xy:[$e("minX",0),$e("maxX",100),$e("minY",0),$e("maxY",100),pc("value",e=>_n({x:e.mode.minX,y:e.mode.minY})),dt("getInitialValue"),Gs("manager",sF)]})),Wa("sliderBehaviours",[xn,Wt]),pc("mouseIsDown",()=>_n(!1))],$g=Wc({name:"Slider",configFields:rF,partFields:Ee,factory:(e,t,r,c)=>{const d=He=>Zd(He,e,"thumb"),f=He=>Zd(He,e,"spectrum"),v=He=>$s(He,e,"left-edge"),x=He=>$s(He,e,"right-edge"),k=He=>$s(He,e,"top-edge"),R=He=>$s(He,e,"bottom-edge"),I=e.model,V=I.manager,Z=(He,St)=>{V.setPositionFromValue(He,St,e,{getLeftEdge:v,getRightEdge:x,getTopEdge:k,getBottomEdge:R,getSpectrum:f})},Y=(He,St)=>{I.value.set(St);const pt=d(He);Z(He,pt)},Te=He=>{const pt=e.mouseIsDown.get();e.mouseIsDown.set(!1),pt&&$s(He,e,"thumb").each(Mt=>{const Gt=I.value.get();e.onChoose(He,Mt,Gt)})},xe=(He,St)=>{St.stop(),e.mouseIsDown.set(!0),e.onDragStart(He,d(He))},Qe=(He,St)=>{St.stop(),e.onDragEnd(He,d(He)),Te(He)};return{uid:e.uid,dom:e.dom,components:t,behaviours:ja(e.sliderBehaviours,[xn.config({mode:"special",focusIn:He=>$s(He,e,"spectrum").map(xn.focusIn).map(Ot)}),Wt.config({store:{mode:"manual",getValue:He=>I.value.get(),setValue:Y}}),ai.config({channels:{[e0()]:{onReceive:Te}}})]),events:ss([ut(ct(),(He,St)=>{((He,St)=>{Y(He,St);const pt=d(He);e.onChange(He,pt,St),B.some(!0)})(He,St.event.value)}),lr((He,St)=>{const pt=I.getInitialValue();I.value.set(pt);const Mt=d(He);Z(He,Mt);const Gt=f(He);e.onInit(He,Mt,Gt,I.value.get())}),ut(_a(),xe),ut(lm(),Qe),ut(ds(),xe),ut(qu(),Qe)]),apis:{resetToMin:He=>{V.setToMin(He,e)},resetToMax:He=>{V.setToMax(He,e)},setValue:Y,refresh:Z},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,r)=>{e.setValue(t,r)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),uM=un("rgb-hex-update"),r5=un("slider-update"),a5=un("palette-update"),cF=[Wa("formBehaviours",[Wt])],i5=e=>"<alloy.field."+e+">",uF=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:ja(e.formBehaviours,[Wt.config({store:{mode:"manual",getValue:r=>{const c=jy(r,e);return Ke(c,(d,f)=>d().bind(v=>((e,t)=>e.fold(()=>Rt.error(t),Rt.value))(Lo.getCurrent(v),new Error(`Cannot find a current component to extract the value from for form part '${f}': `+fm(v.element)))).map(Wt.getValue))},setValue:(r,c)=>{Ye(c,(d,f)=>{$s(r,e,f).each(v=>{Lo.getCurrent(v).each(x=>{Wt.setValue(x,d)})})})}}})]),apis:{getField:(r,c)=>$s(r,e,c).bind(Lo.getCurrent)}}),JS={getField:bm((e,t,r)=>e.getField(t,r)),sketch:e=>{const t=(()=>{const f=[];return{field:(x,k)=>(f.push(x),g0("form",i5(x),k)),record:re(f)}})(),r=e(t),c=t.record(),d=Be(c,f=>vc({name:f,pname:i5(f)}));return d1("form",cF,d,uF,r)}},l5=un("valid-input"),u5=un("invalid-input"),d5=un("validating-input"),dM="colorcustom.rgb.",dF=(e,t,r,c)=>{const d=(Z,Y)=>m.config({invalidClass:t("invalid"),notify:{onValidate:oe=>{wn(oe,d5,{type:Z})},onValid:oe=>{wn(oe,l5,{type:Z,value:Wt.getValue(oe)})},onInvalid:oe=>{wn(oe,u5,{type:Z,value:Wt.getValue(oe)})}},validator:{validate:oe=>{const pe=Wt.getValue(oe),Ge=Y(pe)?Rt.value(!0):Rt.error(e("aria.input.invalid"));return Pc_pure(Ge)},validateOnLoad:!1}}),f=(Z,Y,oe,pe,Ge)=>{const Te=e(dM+"range"),He=[Cs.parts.label({dom:{tag:"label",attributes:{"aria-label":pe}},components:[Yr(oe)]}),Cs.parts.field({data:Ge,factory:S1,inputAttributes:{type:"text",..."hex"===Y?{"aria-live":"polite"}:{}},inputClasses:[t("textfield")],inputBehaviours:Et([d(Y,Z),Xr.config({})]),onSetValue:Mt=>{m.isInvalid(Mt)&&m.run(Mt).get(ve)}})],St="hex"!==Y?[Cs.parts["aria-descriptor"]({text:Te})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:He.concat(St)}},x=(Z,Y)=>{Wt.setValue(Z,{red:Y.red,green:Y.green,blue:Y.blue})},k=ks({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),R=(Z,Y)=>{k.getOpt(Z).each(oe=>{Xt(oe.element,"background-color","#"+Y.value)})};return yc({factory:()=>{const Z={red:_n(B.some(255)),green:_n(B.some(255)),blue:_n(B.some(255)),hex:_n(B.some("ffffff"))},oe=Xn=>Z[Xn].get(),pe=(Xn,Yo)=>{Z[Xn].set(Yo)},Te=Xn=>{const kn=Xn.green,Zo=Xn.blue;pe("red",B.some(Xn.red)),pe("green",B.some(kn)),pe("blue",B.some(Zo))},xe=(Xn,Yo)=>{const kn=Yo.event;"hex"!==kn.type?pe(kn.type,B.none()):c(Xn)},pt=(Xn,Yo)=>{const kn=Yo.event;(Xn=>"hex"===Xn.type)(kn)?((Xn,Yo)=>{r(Xn);const kn=qE(Yo);pe("hex",B.some(kn.value));const Zo=A1(kn);x(Xn,Zo),Te(Zo),wn(Xn,uM,{hex:kn}),R(Xn,kn)})(Xn,kn.value):((Xn,Yo,kn)=>{const Zo=parseInt(kn,10);pe(Yo,B.some(Zo)),oe("red").bind(Xn=>oe("green").bind(Yo=>oe("blue").map(kn=>Vm(Xn,Yo,kn,1)))).each($t=>{const mn=((Z,Y)=>{const oe=Hf(Y);return JS.getField(Z,"hex").each(pe=>{Un.isFocused(pe)||Wt.setValue(Z,{hex:oe.value})}),oe})(Xn,$t);wn(Xn,uM,{hex:mn}),R(Xn,mn)})})(Xn,kn.type,kn.value)},Mt=Xn=>({label:e(dM+Xn+".label"),description:e(dM+Xn+".description")}),Gt=Mt("red"),Do=Mt("green"),fn=Mt("blue"),uo=Mt("hex");return Js(JS.sketch(Xn=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[Xn.field("red",Cs.sketch(f(wS,"red",Gt.label,Gt.description,255))),Xn.field("green",Cs.sketch(f(wS,"green",Do.label,Do.description,255))),Xn.field("blue",Cs.sketch(f(wS,"blue",fn.label,fn.description,255))),Xn.field("hex",Cs.sketch(f(sO,"hex",uo.label,uo.description,"ffffff"))),k.asSpec()],formBehaviours:Et([m.config({invalidClass:t("form-invalid")}),Jn("rgb-form-events",[ut(l5,pt),ut(u5,xe),ut(d5,xe)])])})),{apis:{updateHex:(Xn,Yo)=>{Wt.setValue(Xn,{hex:Yo.value}),((Xn,Yo)=>{const kn=A1(Yo);x(Xn,kn),Te(kn)})(Xn,Yo),R(Xn,Yo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Z,Y,oe)=>{Z.updateHex(Y,oe)}},extraApis:{}})},gF=(e,t)=>yc({name:"ColourPicker",configFields:[dt("dom"),$e("onValidHex",ve),$e("onInvalidHex",ve)],factory:d=>{const f=dF(e,t,d.onValidHex,d.onInvalidHex),v=((e,t)=>{const r=$g.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),c=$g.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(R,I)=>{const{width:V,height:Z}=R,Y=R.getContext("2d");if(null===Y)return;Y.fillStyle=I,Y.fillRect(0,0,V,Z);const oe=Y.createLinearGradient(0,0,V,0);oe.addColorStop(0,"rgba(255,255,255,1)"),oe.addColorStop(1,"rgba(255,255,255,0)"),Y.fillStyle=oe,Y.fillRect(0,0,V,Z);const pe=Y.createLinearGradient(0,0,0,Z);pe.addColorStop(0,"rgba(0,0,0,0)"),pe.addColorStop(1,"rgba(0,0,0,1)"),Y.fillStyle=pe,Y.fillRect(0,0,V,Z)};return yc({factory:R=>{const I=re({x:0,y:0}),Y=Et([Lo.config({find:B.some}),Un.config({})]);return $g.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:I},rounded:!1,components:[r,c],onChange:(oe,pe,Ge)=>{wn(oe,a5,{value:Ge})},onInit:(oe,pe,Ge,Te)=>{d(Ge.element.dom,R1(QE))},sliderBehaviours:Y})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(R,I,V)=>{((R,I)=>{const V=R.components()[0].element.dom,Z=G0(I,100,100),Y=JE(Z);d(V,R1(Y))})(I,V)},setThumb:(R,I,V)=>{((R,I)=>{const V=q0(A1(I));$g.setValue(R,{x:V.saturation,y:100-V.value})})(I,V)}},extraApis:{}})})(0,t),R={paletteRgba:_n(QE),paletteHue:_n(0)},I=ks(((e,t)=>{const r=$g.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=$g.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return $g.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:re(0)},components:[r,c],sliderBehaviours:Et([Un.config({})]),onChange:(d,f,v)=>{wn(d,r5,{value:v})}})})(0,t)),V=ks(v.sketch({})),Z=ks(f.sketch({})),Y=(pt,Mt,Gt)=>{V.getOpt(pt).each(Do=>{v.setHue(Do,Gt)})},oe=(pt,Mt)=>{Z.getOpt(pt).each(Gt=>{f.updateHex(Gt,Mt)})},pe=(pt,Mt,Gt)=>{I.getOpt(pt).each(Do=>{$g.setValue(Do,(pt=>100-pt/360*100)(Gt))})},Ge=(pt,Mt)=>{V.getOpt(pt).each(Gt=>{v.setThumb(Gt,Mt)})},xe=(pt,Mt,Gt,Do)=>{((pt,Mt)=>{const Gt=A1(pt);R.paletteRgba.set(Gt),R.paletteHue.set(Mt)})(Mt,Gt),lt(Do,fn=>{fn(pt,Mt,Gt)})};return{uid:d.uid,dom:d.dom,components:[V.asSpec(),I.asSpec(),Z.asSpec()],behaviours:Et([Jn("colour-picker-events",[ut(uM,(()=>{const pt=[Y,pe,Ge];return(Mt,Gt)=>{const Do=Gt.event.hex,fn=(e=>q0(A1(e)))(Do);xe(Mt,Do,fn.hue,pt)}})()),ut(a5,(()=>{const pt=[oe];return(Mt,Gt)=>{const Do=Gt.event.value,fn=R.paletteHue.get(),uo=G0(fn,Do.x,100-Do.y),Xn=s_(uo);xe(Mt,Xn,fn,pt)}})()),ut(r5,(()=>{const pt=[Y,oe];return(Mt,Gt)=>{const Do=(pt=>(100-pt)/100*360)(Gt.event.value),fn=R.paletteRgba.get(),uo=q0(fn),Xn=G0(Do,uo.saturation,uo.value),Yo=s_(Xn);xe(Mt,Yo,Do,pt)}})())]),Lo.config({find:pt=>Z.getOpt(pt)}),xn.config({mode:"acyclic"})])}}}),Ig_self=()=>Lo.config({find:B.some}),Ig_memento=e=>Lo.config({find:e.getOpt}),Ig_childAt=e=>Lo.config({find:t=>Ia(t.element,e).bind(r=>t.getSystem().getByDom(r).toOptional())}),hF=Tn([$e("preprocess",gt),$e("postprocess",gt)]),fF=(e,t)=>{const r=oi("RepresentingConfigs.memento processors",hF,t);return Wt.config({store:{mode:"manual",getValue:c=>{const d=e.get(c),f=Wt.getValue(d);return r.postprocess(f)},setValue:(c,d)=>{const f=r.preprocess(d),v=e.get(c);Wt.setValue(v,f)}}})},nw=(e,t,r)=>Wt.config({store:{mode:"manual",...e.map(c=>({initialValue:c})).getOr({}),getValue:t,setValue:r}}),m5=(e,t,r)=>nw(e,c=>t(c.element),(c,d)=>r(c.element,d)),pF=e=>m5(e,ab,cg),bA=e=>Wt.config({store:{mode:"memory",initialValue:e}}),bF={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var wF=tinymce.util.Tools.resolve("tinymce.Resource"),L1=tinymce.util.Tools.resolve("tinymce.util.Tools");const mM=(e,t)=>{let r=null;const c=()=>{ys(r)||(clearTimeout(r),r=null)};return{cancel:c,throttle:(...f)=>{c(),r=setTimeout(()=>{r=null,e.apply(null,f)},t)}}},gM=un("alloy-fake-before-tabstop"),hM=un("alloy-fake-after-tabstop"),g5=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Et([Un.config({ignore:!0}),Xr.config({})])}),h5=(e,t)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[g5([gM]),t,g5([hM])],behaviours:Et([Ig_childAt(1)])}),f5=(e,t)=>{wn(e,Li(),{raw:{which:9,shiftKey:t}})},OF=(e,t)=>{const r=t.element;Ui(r,gM)?f5(e,!0):Ui(r,hM)&&f5(e,!1)},$_=e=>J0(e,["."+gM,"."+hM].join(","),De),fM=un("update-dialog"),p5=un("update-title"),b5=un("update-body"),v5=un("update-footer"),y5=un("body-send-message"),vA=un("dialog-focus-shifted"),pM=_i().browser,I_=pM.isSafari(),AF=pM.isFirefox(),w5=I_||AF,RF=pM.isChromium(),DF=({scrollTop:e,scrollHeight:t,clientHeight:r})=>Math.ceil(e)+r>=t,C5=(e,t)=>e.scrollTo(0,"bottom"===t?99999999:t),x5=(e,t,r)=>{const c=e.dom;B.from(c.contentDocument).fold(r,d=>{let f=0;const v=((e,t)=>{const r=e.body;return B.from(!/^<!DOCTYPE (html|HTML)/.test(t)&&(!RF&&!I_||Wn(r)&&(0!==r.scrollTop||Math.abs(r.scrollHeight-r.clientHeight)>1))?r:e.documentElement)})(d,t).map(k=>(f=k.scrollTop,k)).forall(DF),x=()=>{const k=c.contentWindow;Wn(k)&&(v?C5(k,"bottom"):!v&&w5&&0!==f&&C5(k,f))};I_&&c.addEventListener("load",x,{once:!0}),d.open(),d.write(t),d.close(),I_||x()})},NF=rr(w5,I_?500:200).map(e=>((e,t)=>{let r=null,c=null;return{cancel:()=>{ys(r)||(clearTimeout(r),r=null,c=null)},throttle:(...v)=>{c=v,ys(r)&&(r=setTimeout(()=>{const x=c;r=null,c=null,e.apply(null,x)},t))}}})(x5,e)),S5=un("toolbar.button.execute"),VF=e=>eu((t,r)=>{bS(e,t)(c=>{wn(t,S5,{buttonApi:c}),e.onAction(c)})}),ow=un("common-button-display-events"),T5={[Hi()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[_l()]:["toolbar-button-events",ow],[ds()]:["focusing","alloy.base.behaviour",ow]},bM=e=>Xt(e.element,"width",Ns(e.element,"width")),k5=(e,t,r)=>du(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:r},t),vM=(e,t)=>k5(e,t,[]),rv=(e,t)=>k5(e,t,[to.config({})]),E5=(e,t,r)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[Yr(r.translate(e))],behaviours:Et([to.config({})])}),Wm=un("update-menu-text"),sw=un("update-menu-icon"),yM=(e,t,r)=>{const c=_n(ve),d=e.text.map(Z=>ks(E5(Z,t,r.providers))),f=e.icon.map(Z=>ks(rv(Z,r.providers.icons))),v=(Z,Y)=>{const oe=Wt.getValue(Z);return Un.focus(oe),wn(oe,"keydown",{raw:Y.event.raw}),dd.close(oe),B.some(!0)},x=e.role.fold(()=>({}),Z=>({role:Z})),k=e.tooltip.fold(()=>({}),Z=>{const Y=r.providers.translate(Z);return{title:Y,"aria-label":Y}}),R=du("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},r.providers.icons),I=un("common-button-display-events");return ks(dd.sketch({...e.uid?{uid:e.uid}:{},...x,dom:{tag:"button",classes:[t,`${t}--select`].concat(Be(e.classes,Z=>`${t}--${Z}`)),attributes:{...k}},components:W0([f.map(Z=>Z.asSpec()),d.map(Z=>Z.asSpec()),B.some(R)]),matchWidth:!0,useMinWidth:!0,onOpen:(Z,Y,oe)=>{e.searchable&&(e=>{CE(e).each(t=>Un.focus(t))})(oe)},dropdownBehaviours:Et([...e.dropdownBehaviours,ld_button(()=>e.disabled||r.providers.isDisabled()),uc(),w.config({}),to.config({}),Jn("dropdown-events",[If(e,c),Lf(e,c)]),Jn(I,[lr((Z,Y)=>bM(Z))]),Jn("menubutton-update-display-text",[ut(Wm,(Z,Y)=>{d.bind(oe=>oe.getOpt(Z)).each(oe=>{to.set(oe,[Yr(r.providers.translate(Y.event.text))])})}),ut(sw,(Z,Y)=>{f.bind(oe=>oe.getOpt(Z)).each(oe=>{to.set(oe,[rv(Y.event.icon,r.providers.icons)])})})])]),eventOrder:Js(T5,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[_l()]:["toolbar-button-events","dropdown-events",I]}),sandboxBehaviours:Et([xn.config({mode:"special",onLeft:v,onRight:v}),Jn("dropdown-sandbox-events",[ut(wE,(Z,Y)=>{(e=>{const t=Wt.getValue(e),r=rS(e).map(xE);dd.refetch(t).get(()=>{const c=la.getCoupled(t,"sandbox");r.each(d=>rS(c).each(f=>((e,t)=>{Wt.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd})(f,d)))})})(Z),Y.stop()}),ut(S3,(Z,Y)=>{((e,t)=>{(e=>Io.getState(e).bind(rs.getHighlighted).bind(rs.getHighlighted))(e).each(r=>{((e,t,r,c)=>{const d={...c,target:t};e.getSystem().triggerEvent(r,t,d)})(e,r.element,t.event.eventType,t.event.interactionEvent)})})(Z,Y),Y.stop()})])]),lazySink:r.getSink,toggleClass:`${t}--active`,parts:{menu:{...S2(0,0,e.presets),fakeFocus:e.searchable,onHighlightItem:HS,onCollapseMenu:(Z,Y,oe)=>{rs.getHighlighted(oe).each(pe=>{HS(Z,oe,pe)})},onDehighlightItem:qD}},getAnchorOverrides:()=>({maxHeightFunction:(Z,Y)=>{Pb()(Z,Y-10)}}),fetch:Z=>Pc_nu(ko(e.fetch,Z))})).asSpec()},_5=e=>"separator"===e.type,ZF={type:"separator"},O5=(e,t)=>{const r=((e,t)=>{const r=Ht(e,(c,d)=>(e=>bn(e))(d)?""===d?c:"|"===d?c.length>0&&!_5(c[c.length-1])?c.concat([ZF]):c:Qn(t,d.toLowerCase())?c.concat([t[d.toLowerCase()]]):c:c.concat([d]),[]);return r.length>0&&_5(r[r.length-1])&&r.pop(),r})(bn(e)?e.split(" "):e,t);return jn(r,(c,d)=>{if((e=>Qn(e,"getSubmenuItems"))(d)){const f=(e=>{const t=rt(e,"value").getOrThunk(()=>un("generated-menu-item"));return Js({value:t},e)})(d),v=((e,t)=>{const r=e.getSubmenuItems(),c=O5(r,t);return{item:e,menus:Js(c.menus,{[e.value]:c.items}),expansions:Js(c.expansions,{[e.value]:e.value})}})(f,t);return{menus:Js(c.menus,v.menus),items:[v.item,...c.items],expansions:Js(c.expansions,v.expansions)}}return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},QS=(e,t,r,c)=>{const d=un("primary-menu"),f=O5(e,r.shared.providers.menuItems());if(0===f.items.length)return B.none();const v=(e=>e.search.fold(()=>({searchMode:"no-search"}),t=>({searchMode:"search-with-field",placeholder:t.placeholder})))(c),x=jO(d,f.items,t,r,c.isHorizontalMenu,v),k=(e=>e.search.fold(()=>({searchMode:"no-search"}),t=>({searchMode:"search-with-results"})))(c),R=Ke(f.menus,(V,Z)=>jO(Z,V,t,r,!1,k)),I=Js(R,Zt(d,x));return B.from(Cc.tieredData(d,I,f.expansions))},wM=e=>!Qn(e,"items"),A5="data-value",R5=(e,t,r,c)=>Be(r,d=>wM(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===c,onAction:()=>{Wt.setValue(e,d.value),wn(e,Ll,{name:t}),Un.focus(e)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>R5(e,t,d.items,c)}),CM=(e,t)=>$o(e,r=>wM(r)?rr(r.value===t,r):CM(r.items,t)),QF=yc({name:"HtmlSelect",configFields:[dt("options"),Wa("selectBehaviours",[Un,Wt]),$e("selectClasses",[]),$e("selectAttributes",{}),us("data")],factory:(e,t)=>{const r=Be(e.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=e.data.map(d=>Zt("initialValue",d)).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:r,behaviours:ja(e.selectBehaviours,[Un.config({}),Wt.config({store:{mode:"manual",getValue:d=>Al(d.element),setValue:(d,f)=>{const v=Ps(e.options);fo(e.options,k=>k.value===f).isSome()?ya(d.element,f):-1===d.element.dom.selectedIndex&&""===f&&v.each(k=>ya(d.element,k.value))},...c}})])}}}),t7=re([$e("field1Name","field1"),$e("field2Name","field2"),nu("onLockedChange"),Eu(["lockClass"]),$e("locked",!1),au_field("coupledFieldBehaviours",[Lo,Wt])]),D5=(e,t)=>vc({factory:Cs,name:e,overrides:r=>({fieldBehaviours:Et([Jn("coupled-input-behaviour",[ut(sg(),c=>{((e,t,r)=>$s(e,t,r).bind(Lo.getCurrent))(c,r,t).each(d=>{$s(c,r,"lock").each(f=>{So.isOn(f)&&r.onLockedChange(c,d,f)})})})])])})}),o7=re([D5("field1","field2"),D5("field2","field1"),vc({factory:jc,schema:[dt("dom")],name:"lock",overrides:e=>({buttonBehaviours:Et([So.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),qd=Wc({name:"FormCoupledInputs",configFields:t7(),partFields:o7(),factory:(e,t,r,c)=>({uid:e.uid,dom:e.dom,components:t,behaviours:au_augment(e.coupledFieldBehaviours,[Lo.config({find:B.some}),Wt.config({store:{mode:"manual",getValue:d=>{const f=wf(d,e,["field1","field2"]);return{[e.field1Name]:Wt.getValue(f.field1()),[e.field2Name]:Wt.getValue(f.field2())}},setValue:(d,f)=>{const v=wf(d,e,["field1","field2"]);_r(f,e.field1Name)&&Wt.setValue(v.field1(),f[e.field1Name]),_r(f,e.field2Name)&&Wt.setValue(v.field2(),f[e.field2Name])}}})]),apis:{getField1:d=>$s(d,e,"field1"),getField2:d=>$s(d,e,"field2"),getLock:d=>$s(d,e,"lock")}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),xM=e=>{const r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==r){const c=parseFloat(r[1]);return Rt.value({value:c,unit:r[2]})}return Rt.error(e)},M5=(e,t)=>{const r={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>Qn(r,d);return e.unit===t?B.some(e.value):c(e.unit)&&c(t)?B.some(r[e.unit]===r[t]?e.value:e.value/r[e.unit]*r[t]):B.none()},SM=e=>B.none(),N5=(e,t)=>{const r=e.label.map(Y=>Um(Y,t)),c=[Nn.config({disabled:()=>e.disabled||t.isDisabled()}),uc(),xn.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:Y=>(es(Y,G2),B.some(!0))}),Jn("textfield-change",[ut(sg(),(Y,oe)=>{wn(Y,Ll,{name:e.name})}),ut(xu(),(Y,oe)=>{wn(Y,Ll,{name:e.name})})]),Xr.config({})],d=e.validation.map(Y=>m.config({getRoot:oe=>Tc(oe.element),invalidClass:"tox-invalid",validator:{validate:oe=>{const pe=Wt.getValue(oe),Ge=Y.validator(pe);return Pc_pure(!0===Ge?Rt.value(pe):Rt.error(Ge))},validateOnLoad:Y.validateOnLoad}})).toArray(),x={...e.placeholder.fold(re({}),Y=>({placeholder:t.translate(Y)})),...e.inputMode.fold(re({}),Y=>({inputmode:Y}))},k=Cs.parts.field({tag:!0===e.multiline?"textarea":"input",...e.data.map(Y=>({data:Y})).getOr({}),inputAttributes:x,inputClasses:[e.classname],inputBehaviours:Et(En([c,d])),selectOnFocus:!1,factory:S1}),R=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[k]}:k,V=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),Z=[Nn.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:Y=>{Cs.getField(Y).each(Nn.disable)},onEnabled:Y=>{Cs.getField(Y).each(Nn.enable)}}),uc()];return Ng(r,R,V,Z)},L_=(e,t)=>t.getAnimationRoot.fold(()=>e.element,r=>r(e)),H1=e=>e.dimension.property,rw=(e,t)=>e.dimension.getDimension(t),yA=(e,t)=>{const r=L_(e,t);ri(r,[t.shrinkingClass,t.growingClass])},TM=(e,t)=>{Hr(e.element,t.openClass),va(e.element,t.closedClass),Xt(e.element,H1(t),"0px"),ue(e.element)},kM=(e,t)=>{Hr(e.element,t.closedClass),va(e.element,t.openClass),F(e.element,H1(t))},B5=(e,t,r,c)=>{r.setCollapsed(),Xt(e.element,H1(t),rw(t,e.element)),yA(e,t),TM(e,t),t.onStartShrink(e),t.onShrunk(e)},g7=(e,t,r,c)=>{const d=c.getOrThunk(()=>rw(t,e.element));r.setCollapsed(),Xt(e.element,H1(t),d),ue(e.element);const f=L_(e,t);Hr(f,t.growingClass),va(f,t.shrinkingClass),TM(e,t),t.onStartShrink(e)},P5=(e,t,r)=>{const c=rw(t,e.element);("0px"===c?B5:g7)(e,t,r,B.some(c))},F5=(e,t,r)=>{const c=L_(e,t),d=Ui(c,t.shrinkingClass),f=rw(t,e.element);kM(e,t);const v=rw(t,e.element);(d?()=>{Xt(e.element,H1(t),f),ue(e.element)}:()=>{TM(e,t)})(),Hr(c,t.shrinkingClass),va(c,t.growingClass),kM(e,t),Xt(e.element,H1(t),v),r.setExpanded(),t.onStartGrow(e)},$5=(e,t,r)=>{const c=L_(e,t);return!0===Ui(c,t.growingClass)},I5=(e,t,r)=>{const c=L_(e,t);return!0===Ui(c,t.shrinkingClass)};var w7=Object.freeze({__proto__:null,refresh:(e,t,r)=>{if(r.isExpanded()){F(e.element,H1(t));const c=rw(t,e.element);Xt(e.element,H1(t),c)}},grow:(e,t,r)=>{r.isExpanded()||F5(e,t,r)},shrink:(e,t,r)=>{r.isExpanded()&&P5(e,t,r)},immediateShrink:(e,t,r)=>{r.isExpanded()&&B5(e,t,r)},hasGrown:(e,t,r)=>r.isExpanded(),hasShrunk:(e,t,r)=>r.isCollapsed(),isGrowing:$5,isShrinking:I5,isTransitioning:(e,t,r)=>$5(e,t)||I5(e,t),toggleGrow:(e,t,r)=>{(r.isExpanded()?P5:F5)(e,t,r)},disableTransitions:yA,immediateGrow:(e,t,r)=>{r.isExpanded()||(kM(e,t),Xt(e.element,H1(t),rw(t,e.element)),yA(e,t),r.setExpanded(),t.onStartGrow(e),t.onGrown(e))}}),C7=Object.freeze({__proto__:null,exhibit:(e,t,r)=>Tu(t.expanded?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Zt(t.dimension.property,"0px")}),events:(e,t)=>ss([ag(oh(),(r,c)=>{c.event.raw.propertyName===e.dimension.property&&(yA(r,e),t.isExpanded()&&F(r.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(r))})])}),x7=[dt("closedClass"),dt("openClass"),dt("shrinkingClass"),dt("growingClass"),us("getAnimationRoot"),Ko("onShrunk"),Ko("onStartShrink"),Ko("onGrown"),Ko("onStartGrow"),$e("expanded",!1),si("dimension",Qa("property",{width:[Gs("property","width"),Gs("getDimension",e=>Fs(e)+"px")],height:[Gs("property","height"),Gs("getDimension",e=>Ut(e)+"px")]}))],S7=Object.freeze({__proto__:null,init:e=>{const t=_n(e.expanded);return cl({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:ko(t.set,!1),setExpanded:ko(t.set,!0),readState:()=>"expanded: "+t.get()})}});const hd=Ua({fields:x7,name:"sliding",active:C7,apis:w7,state:S7}),L5=e=>({isEnabled:()=>!Nn.isDisabled(e),setEnabled:t=>Nn.set(e,!t),setActive:t=>{const r=e.element;t?(va(r,"tox-tbtn--enabled"),Bn(r,"aria-pressed",!0)):(Hr(r,"tox-tbtn--enabled"),ae(r,"aria-pressed"))},isActive:()=>Ui(e.element,"tox-tbtn--enabled"),setText:t=>{wn(e,Wm,{text:t})},setIcon:t=>wn(e,sw,{icon:t})}),H_=(e,t,r,c,d=!0)=>yM({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:c,fetch:(f,v)=>{const x={pattern:e.search.isSome()?YD(f):""};e.fetch(k=>{v(QS(k,Im.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:e.search}))},x,L5(f))},onSetup:e.onSetup,getApi:L5,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Xr.config({})]:[]]},t,r.shared),T7=(e,t,r)=>{const c=f=>v=>{const x=!v.isActive();v.setActive(x),f.storage.set(x),r.shared.getSink().each(k=>{t().getOpt(k).each(R=>{il(R.element),wn(R,hl,{name:f.name,value:f.storage.get()})})})},d=f=>v=>{v.setActive(f.storage.get())};return f=>{f(Be(e,v=>{const x=v.text.fold(()=>({}),k=>({text:k}));return{type:v.type,active:!1,...x,onAction:c(v),onSetup:d(v)}}))}},H5=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[Yr(e)]}),V5=un("leaf-label-event-id"),EM=({leaf:e,onLeafAction:t,visible:r,treeId:c,selectedId:d,backstage:f})=>{const v=e.menu.map(k=>H_(k,"tox-mbtn",f,B.none(),r)),x=[H5(e.title)];return v.each(k=>x.push(k)),jc.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(r?["tox-tree--leaf__label--visible"]:[])},components:x,role:"treeitem",action:k=>{t(e.id),k.getSystem().broadcastOn([`update-active-item-${c}`],{value:e.id})},eventOrder:{[Li()]:[V5,"keying"]},buttonBehaviours:Et([...r?[Xr.config({})]:[],So.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ai.config({channels:{[`update-active-item-${c}`]:{onReceive:(k,R)=>{(R.value===e.id?So.on:So.off)(k)}}}}),Jn(V5,[lr((k,R)=>{d.each(I=>{(I===e.id?So.on:So.off)(k)})}),ut(Li(),(k,R)=>{const V="ArrowRight"===R.event.raw.code;"ArrowLeft"===R.event.raw.code?(wm(k.element,".tox-tree--directory").each(Z=>{k.getSystem().getByDom(Z).each(Y=>{Rv(Z,".tox-tree--directory__label").each(oe=>{Y.getSystem().getByDom(oe).each(Un.focus)})})}),R.stop()):V&&R.stop()})])])})},E7=(e,t)=>((e,t,r)=>du(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:[]},t))(e,t),z5=un("directory-label-event-id"),_7=({directory:e,visible:t,noChildren:r,backstage:c})=>{const d=e.menu.map(x=>H_(x,"tox-mbtn",c,B.none())),f=[{dom:{tag:"div",classes:["tox-chevron"]},components:[E7("chevron-right",c.shared.providers.icons)]},H5(e.title)];d.each(x=>{f.push(x)});const v=x=>{wm(x.element,".tox-tree--directory").each(k=>{x.getSystem().getByDom(k).each(R=>{const I=!So.isOn(R);So.toggle(R),wn(x,"expand-tree-node",{expanded:I,node:e.id})})})};return jc.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(t?["tox-tree--directory__label--visible"]:[])},components:f,action:v,eventOrder:{[Li()]:[z5,"keying"]},buttonBehaviours:Et([...t?[Xr.config({})]:[],Jn(z5,[ut(Li(),(x,k)=>{const R="ArrowRight"===k.event.raw.code,I="ArrowLeft"===k.event.raw.code;R&&r&&k.stop(),(R||I)&&wm(x.element,".tox-tree--directory").each(V=>{x.getSystem().getByDom(V).each(Z=>{!So.isOn(Z)&&R||So.isOn(Z)&&I?(v(x),k.stop()):I&&!So.isOn(Z)&&(wm(Z.element,".tox-tree--directory").each(Y=>{Rv(Y,".tox-tree--directory__label").each(oe=>{Z.getSystem().getByDom(oe).each(Un.focus)})}),k.stop())})})})])])})},O7=({children:e,onLeafAction:t,visible:r,treeId:c,expandedIds:d,selectedId:f,backstage:v})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(x=>"leaf"===x.type?EM({leaf:x,selectedId:f,onLeafAction:t,visible:r,treeId:c,backstage:v}):_M({directory:x,expandedIds:d,selectedId:f,onLeafAction:t,labelTabstopping:r,treeId:c,backstage:v})),behaviours:Et([hd.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:r}),to.config({})])}),A7=un("directory-event-id"),_M=({directory:e,onLeafAction:t,labelTabstopping:r,treeId:c,backstage:d,expandedIds:f,selectedId:v})=>{const{children:x}=e,k=_n(f),I=f.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[_7({directory:e,visible:r,noChildren:0===e.children.length,backstage:d}),O7({children:x,expandedIds:f,selectedId:v,onLeafAction:t,visible:I,treeId:c,backstage:d})],behaviours:Et([Jn(A7,[lr((V,Z)=>{So.set(V,I)}),ut("expand-tree-node",(V,Z)=>{const{expanded:Y,node:oe}=Z.event;k.set(Y?[...k.get(),oe]:k.get().filter(pe=>pe!==oe))})]),So.config({...e.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(V,Z)=>{const Y=V.components()[1],oe=(V=>x.map(Z=>"leaf"===Z.type?EM({leaf:Z,selectedId:v,onLeafAction:t,visible:V,treeId:c,backstage:d}):_M({directory:Z,expandedIds:k.get(),selectedId:v,onLeafAction:t,labelTabstopping:V,treeId:c,backstage:d})))(Z);Z?hd.grow(Y):hd.shrink(Y),to.set(Y,oe)}})])}},R7=un("tree-event-id");var M7=Object.freeze({__proto__:null,events:(e,t)=>{const c=e.stream.streams.setup(e,t);return ss([ut(e.event,c),Ku(()=>t.cancel())].concat(e.cancelEvent.map(d=>[ut(d,()=>t.cancel())]).getOr([])))}});const U5=e=>{const t=_n(null);return cl({readState:()=>({timer:null!==t.get()?"set":"unset"}),setTimer:f=>{t.set(f)},cancel:()=>{const f=t.get();null!==f&&f.cancel()}})};var N7=Object.freeze({__proto__:null,throttle:U5,init:e=>e.stream.streams.state(e)}),P7=[si("stream",Qa("mode",{throttle:[dt("delay"),$e("stopEvent",!0),Gs("streams",{setup:(e,t)=>{const r=e.stream,c=mM(e.onStream,r.delay);return t.setTimer(c),(d,f)=>{c.throttle(d,f),r.stopEvent&&f.stop()}},state:U5})]})),$e("event","input"),us("cancelEvent"),nu("onStream")];const OM=Ua({fields:P7,name:"streaming",active:M7,state:N7}),wA=(e,t,r)=>{const c=Wt.getValue(r);Wt.setValue(t,c),W5(t)},Z5=(e,t)=>{const r=e.element,c=Al(r),d=r.dom;"number"!==Bo(r,"type")&&t(d,c)},W5=e=>{Z5(e,(t,r)=>t.setSelectionRange(r.length,r.length))},AM=re("alloy.typeahead.itemexecute"),L7=re([us("lazySink"),dt("fetch"),$e("minChars",5),$e("responseTime",1e3),Ko("onOpen"),$e("getHotspot",B.some),$e("getAnchorOverrides",re({})),$e("layouts",B.none()),$e("eventOrder",{}),dp("model",{},[$e("getDisplayText",e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value),$e("selectsOver",!0),$e("populateFromBrowse",!0)]),Ko("onSetValue"),bc("onExecute"),Ko("onItemExecute"),$e("inputClasses",[]),$e("inputAttributes",{}),$e("inputStyles",{}),$e("matchWidth",!0),$e("useMinWidth",!1),$e("dismissOnBlur",!0),Eu(["openClass"]),us("initialData"),Wa("typeaheadBehaviours",[Un,Wt,OM,xn,So,la]),pc("lazyTypeaheadComp",()=>_n(B.none)),pc("previewing",()=>_n(!0))].concat(vE()).concat(S_())),H7=re([Pl({schema:[Tb()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(t,r,c)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(d=>{((e,t,r)=>{if(e.selectsOver){const c=Wt.getValue(t),d=e.getDisplayText(c),f=Wt.getValue(r);return 0===e.getDisplayText(f).indexOf(d)?B.some(()=>{wA(0,t,r),((e,t)=>{Z5(e,(r,c)=>r.setSelectionRange(t,c.length))})(t,d.length)}):B.none()}return B.none()})(e.model,d,c).fold(()=>{e.model.selectsOver?(rs.dehighlight(r,c),e.previewing.set(!0)):e.previewing.set(!1)},f=>{f(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(d=>{e.model.populateFromBrowse&&wA(0,d,c),z(c.element,"id").each(f=>Bn(d.element,"aria-activedescendant",f))})},onExecute:(t,r)=>e.lazyTypeaheadComp.get().map(c=>(wn(c,AM(),{item:r}),!0)),onHover:(t,r)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(c=>{e.model.populateFromBrowse&&wA(0,c,r)})}})})]),V7=Wc({name:"Typeahead",configFields:L7(),partFields:H7(),factory:(e,t,r,c)=>{const d=(V,Z,Y)=>{e.previewing.set(!1);const oe=la.getCoupled(V,"sandbox");if(Io.isOpen(oe))Lo.getCurrent(oe).each(pe=>{rs.getHighlighted(pe).fold(()=>{Y(pe)},()=>{nb(oe,pe.element,"keydown",Z)})});else{const pe=Ge=>{Lo.getCurrent(Ge).each(Y)};V2(e,v(V),V,oe,c,pe,ml.HighlightMenuAndItem).get(ve)}},f=sS(e),v=V=>Z=>Z.map(Y=>{const oe=Uo(Y.menus),pe=No(oe,Te=>so(Te.items,xe=>"item"===xe.type));return Wt.getState(V).update(Be(pe,Te=>Te.data)),Y}),x=V=>Lo.getCurrent(V),k="typeaheadevents",R=[Un.config({}),Wt.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:V=>Al(V.element),getFallbackEntry:V=>({value:V,meta:{}}),setValue:(V,Z)=>{ya(V.element,e.model.getDisplayText(Z))},...e.initialData.map(V=>Zt("initialValue",V)).getOr({})}}),OM.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(V,Z)=>{const Y=la.getCoupled(V,"sandbox");if(Un.isFocused(V)&&Al(V.element).length>=e.minChars){const pe=x(Y).bind(Te=>rs.getHighlighted(Te).map(Wt.getValue));e.previewing.set(!0);const Ge=Te=>{x(Y).each(xe=>{pe.fold(()=>{e.model.selectsOver&&rs.highlightFirst(xe)},Qe=>{rs.highlightBy(xe,He=>Wt.getValue(He).value===Qe.value),rs.getHighlighted(xe).orThunk(()=>(rs.highlightFirst(xe),B.none()))})})};V2(e,v(V),V,Y,c,Ge,ml.HighlightJustMenu).get(ve)}},cancelEvent:rh()}),xn.config({mode:"special",onDown:(V,Z)=>(d(V,Z,rs.highlightFirst),B.some(!0)),onEscape:V=>{const Z=la.getCoupled(V,"sandbox");return Io.isOpen(Z)?(Io.close(Z),B.some(!0)):B.none()},onUp:(V,Z)=>(d(V,Z,rs.highlightLast),B.some(!0)),onEnter:V=>{const Z=la.getCoupled(V,"sandbox"),Y=Io.isOpen(Z);if(Y&&!e.previewing.get())return x(Z).bind(oe=>rs.getHighlighted(oe)).map(oe=>(wn(V,AM(),{item:oe}),!0));{const oe=Wt.getValue(V);return es(V,rh()),e.onExecute(Z,V,oe),Y&&Io.close(Z),B.some(!0)}}}),So.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),la.config({others:{sandbox:V=>LS(e,V,{onOpen:()=>So.on(V),onClose:()=>{e.lazyTypeaheadComp.get().each(Z=>ae(Z.element,"aria-activedescendant")),So.off(V)}})}}),Jn(k,[lr(V=>{e.lazyTypeaheadComp.set(B.some(V))}),Ku(V=>{e.lazyTypeaheadComp.set(B.none())}),eu(V=>{const Z=ve;$S(e,v(V),V,c,Z,ml.HighlightMenuAndItem).get(ve)}),ut(AM(),(V,Z)=>{const Y=la.getCoupled(V,"sandbox");wA(0,V,Z.event.item),es(V,rh()),e.onItemExecute(V,Y,Z.event.item,Wt.getValue(V)),Io.close(Y),W5(V)})].concat(e.dismissOnBlur?[ut(El(),V=>{const Z=la.getCoupled(V,"sandbox");Dl(Z.element).isNone()&&Io.close(Z)})]:[]))],I={[ah()]:[Wt.name(),OM.name(),k],...e.eventOrder};return{uid:e.uid,dom:yE(Js(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...f,...ja(e.typeaheadBehaviours,R)},eventOrder:I}}}),Lg=e=>({...e,toCached:()=>Lg(e.toCached()),bindFuture:k=>Lg(e.bind(R=>R.fold(I=>Pc_pure(Rt.error(I)),I=>k(I)))),bindResult:k=>Lg(e.map(R=>R.bind(k))),mapResult:k=>Lg(e.map(R=>R.map(k))),mapError:k=>Lg(e.map(R=>R.mapError(k))),foldResult:(k,R)=>e.map(I=>I.fold(k,R)),withTimeout:(k,R)=>Lg(Pc_nu(I=>{let V=!1;const Z=setTimeout(()=>{V=!0,I(Rt.error(R()))},k);e.get(Y=>{V||(clearTimeout(Z),I(Y))})}))}),z7_nu=e=>Lg(Pc_nu(e)),CA=(e,t,r=[],c,d,f)=>{const v=t.fold(()=>({}),R=>({action:R})),x={buttonBehaviours:Et([ld_button(()=>!e.enabled||f.isDisabled()),uc(),Xr.config({}),Jn("button press",[bv("click"),bv("mousedown")])].concat(r)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...v},k=Js(x,{dom:c});return Js(k,{components:d})},U7=(e,t,r,c=[])=>{const f={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(k=>({"aria-label":r.translate(k),title:r.translate(k)})).getOr({})},v=e.icon.map(k=>vM(k,r.icons)),x=W0([v]);return CA(e,t,c,f,x,r)},RM=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},q5=(e,t,r,c=[],d=[])=>{const f=r.translate(e.text),v=e.icon.map(Z=>vM(Z,r.icons)),x=[v.getOrThunk(()=>Yr(f))],k=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),I=[...RM(k),...v.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...d];return CA(e,t,c,{tag:"button",classes:I,attributes:{title:f}},x,r)},K5=(e,t,r,c=[],d=[])=>{const f=q5(e,B.some(t),r,c,d);return jc.sketch(f)},Y5=(e,t)=>r=>{"custom"===t?wn(r,hl,{name:e,value:{}}):"submit"===t?es(r,G2):"cancel"===t?es(r,Wf):console.error("Unknown button type: ",t)},xA=(e,t,r)=>{if(((e,t)=>"menu"===t)(0,t)){const c=()=>v,d=e,f={...e,type:"menubutton",search:B.none(),onSetup:x=>(x.setEnabled(e.enabled),ve),fetch:T7(d.items,c,r)},v=ks(H_(f,"tox-tbtn",r,B.none()));return v.asSpec()}if(((e,t)=>"custom"===t||"cancel"===t||"submit"===t)(0,t)){const c=Y5(e.name,t),d={...e,borderless:!1};return K5(d,c,r.shared.providers,[])}if(((e,t)=>"togglebutton"===t)(0,t))return((e,t)=>{var r,c;const d=e.icon.map(xe=>rv(xe,t.icons)).map(ks),v=e.buttonType.getOr(e.primary?"primary":"secondary"),x={...e,name:null!==(r=e.name)&&void 0!==r?r:"",primary:"primary"===v,tooltip:B.from(e.tooltip),enabled:null!==(c=e.enabled)&&void 0!==c&&c,borderless:!1},k=x.tooltip.map(xe=>({"aria-label":t.translate(xe),title:t.translate(xe)})).getOr({}),R=RM(v??"secondary"),I=e.icon.isSome()&&e.text.isSome(),V={tag:"button",classes:[...R.concat(e.icon.isSome()?["tox-button--icon"]:[]),...e.active?["tox-button--enabled"]:[],...I?["tox-button--icon-and-text"]:[]],attributes:k},Y=t.translate(e.text.getOr("")),oe=Yr(Y),Ge=[...W0([d.map(xe=>xe.asSpec())]),...e.text.isSome()?[oe]:[]],Te=CA(x,B.some(xe=>{wn(xe,hl,{name:e.name,value:{setIcon:Qe=>{d.map(He=>He.getOpt(xe).each(St=>{to.set(St,[rv(Qe,t.icons)])}))}}})}),[],V,Ge,t);return jc.sketch(Te)})(e,r.shared.providers);throw console.error("Unknown footer button type: ",t),new Error("Unknown footer button type")},K7={type:"separator"},Y7=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:ve}),DM=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:ve}),X5=(e,t)=>(e=>Be(e,Y7))(((e,t)=>so(t,r=>r.type===e))(e,t)),Q7=e=>X5("header",e.targets),e$=e=>X5("anchor",e.targets),t$=e=>B.from(e.anchorTop).map(t=>DM("<top>",t)).toArray(),n$=e=>B.from(e.anchorBottom).map(t=>DM("<bottom>",t)).toArray(),MM=(e,t)=>{const r=e.toLowerCase();return so(t,c=>{var d;const v=null!==(d=c.value)&&void 0!==d?d:"";return ts((void 0!==c.meta&&void 0!==c.meta.text?c.meta.text:c.text).toLowerCase(),r)||ts(v.toLowerCase(),r)})},J5=un("aria-invalid"),i$=(e,t)=>{e.dom.checked=t},l$=e=>e.dom.checked,Fc=e=>(t,r,c,d)=>rt(r,"name").fold(()=>e(r,d,B.none()),f=>t.field(f,e(r,d,rt(c,f)))),g$={bar:Fc((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Be(e.items,t.interpreter)}))(e,t.shared)),collection:Fc((e,t,r)=>((e,t,r)=>{const c=e.label.map(V=>Um(V,t)),d=V=>(Z,Y)=>{Yu(Y.event.target,"[data-collection-item-value]").each(oe=>{V(Z,Y,oe,Bo(oe,"data-collection-item-value"))})},v=d((V,Z,Y,oe)=>{Z.stop(),t.isDisabled()||wn(V,hl,{name:e.name,value:oe})}),x=[ut(Ii(),d((V,Z,Y)=>{il(Y)})),ut(um(),v),ut(dm(),v),ut(Pa(),d((V,Z,Y)=>{ia(V.element,"."+I0).each(oe=>{Hr(oe,I0)}),va(Y,I0)})),ut(wu(),d(V=>{ia(V.element,"."+I0).each(Z=>{Hr(Z,I0)})})),eu(d((V,Z,Y,oe)=>{wn(V,hl,{name:e.name,value:oe})}))],k=(V,Z)=>Be(Zc(V.element,".tox-collection__item"),Z),R=Cs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:gt},behaviours:Et([Nn.config({disabled:t.isDisabled,onDisabled:V=>{k(V,Z=>{va(Z,"tox-collection__item--state-disabled"),Bn(Z,"aria-disabled",!0)})},onEnabled:V=>{k(V,Z=>{Hr(Z,"tox-collection__item--state-disabled"),ae(Z,"aria-disabled")})}}),uc(),to.config({}),Wt.config({store:{mode:"memory",initialValue:r.getOr([])},onSetValue:(V,Z)=>{((V,Z)=>{const Y=Be(Z,Ge=>{const Te=uu.translate(Ge.text),xe=1===e.columns?`<div class="tox-collection__item-label">${Te}</div>`:"",Qe=`<div class="tox-collection__item-icon">${Ge.icon}</div>`,He={_:" "," - ":" ","-":" "},St=Te.replace(/\_| \- |\-/g,Mt=>He[Mt]);return`<div class="tox-collection__item${t.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${ZS.encodeAllRaw(Ge.value)}" title="${St}" aria-label="${St}">${Qe}${xe}</div>`}),oe="auto"!==e.columns&&e.columns>1?vn(Y,e.columns):[Y],pe=Be(oe,Ge=>`<div class="tox-collection__group">${Ge.join("")}</div>`);cg(V.element,pe.join(""))})(V,Z),"auto"===e.columns&&pS(V,5,"tox-collection__item").each(({numRows:Y,numColumns:oe})=>{xn.setGridSize(V,Y,oe)}),es(V,N_)}}),Xr.config({}),xn.config(NS(e.columns,"normal")),Jn("collection-events",x)]),eventOrder:{[Hi()]:["disabling","alloy.base.behaviour","collection-events"]}});return Ng(c,R,["tox-form__group--collection"],[])})(e,t.shared.providers,r)),alertbanner:Fc((e,t)=>((e,t)=>{const r=J4(e.icon,t.icons);return Gd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:e.url?void 0:r},components:e.url?[jc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:r,attributes:{title:t.translate(e.iconTooltip)}},action:c=>wn(c,hl,{name:"alert-banner",value:e.url}),buttonBehaviours:Et([Lx()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})})(e,t.shared.providers)),input:Fc((e,t,r)=>((e,t,r)=>N5({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:B.none(),maximized:e.maximized,data:r},t))(e,t.shared.providers,r)),textarea:Fc((e,t,r)=>((e,t,r)=>N5({name:e.name,multiline:!0,label:e.label,inputMode:B.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:B.none(),maximized:e.maximized,data:r},t))(e,t.shared.providers,r)),label:Fc((e,t)=>((e,t)=>{const r="tox-label";return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:[r,..."center"===e.align?[`${r}--center`]:[],..."end"===e.align?[`${r}--end`]:[]]},components:[Yr(t.providers.translate(e.label))]},...Be(e.items,t.interpreter)],behaviours:Et([Ig_self(),to.config({}),pF(B.none()),xn.config({mode:"acyclic"})])}})(e,t.shared)),iframe:(e=>(t,r,c,d)=>{const f=Js(r,{source:"dynamic"});return Fc(e)(t,f,c,d)})((e,t,r)=>((e,t,r)=>{const c="tox-dialog__iframe",d=e.transparent?[]:[`${c}--opaque`],f=e.border?["tox-navobj-bordered"]:[],v={...e.label.map(V=>({title:V})).getOr({}),...r.map(V=>({srcdoc:V})).getOr({}),...e.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},x=((e,t)=>{const r=_n(e.getOr(""));return{getValue:c=>r.get(),setValue:(c,d)=>{if(r.get()!==d){const f=c.element,v=()=>Bn(f,"srcdoc",d);t?NF.fold(re(x5),x=>x.throttle)(f,d,v):v()}r.set(d)}}})(r,e.streamContent),k=e.label.map(V=>Um(V,t)),I=Cs.parts.field({factory:{sketch:V=>h5(B.from(f),{uid:V.uid,dom:{tag:"iframe",attributes:v,classes:[c,...d]},behaviours:Et([Xr.config({}),Un.config({}),nw(r,x.getValue,x.setValue),ai.config({channels:{[vA]:{onReceive:(Z,Y)=>{Y.newFocus.each(oe=>{Tc(Z.element).each(pe=>{(Jo(Z.element,oe)?va:Hr)(pe,"tox-navobj-bordered-focus")})})}}}})])})}});return Ng(k,I,["tox-form__group--stretched"],[])})(e,t.shared.providers,r)),button:Fc((e,t)=>((e,t)=>{const r=Y5(e.name,"custom");return((e,t)=>Ng(e,t,[],[]))(B.none(),Cs.parts.field({factory:jc,...q5(e,B.some(r),t,[bA(""),Ig_self()])}))})(e,t.shared.providers)),checkbox:Fc((e,t,r)=>((e,t,r)=>{const c=k=>(k.element.dom.click(),B.some(!0)),d=Cs.parts.field({factory:{sketch:gt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Et([Ig_self(),Nn.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:k=>{Tc(k.element).each(R=>va(R,"tox-checkbox--disabled"))},onEnabled:k=>{Tc(k.element).each(R=>Hr(R,"tox-checkbox--disabled"))}}),Xr.config({}),Un.config({}),m5(r,l$,i$),xn.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),Jn("checkbox-events",[ut(nh(),(k,R)=>{wn(k,Ll,{name:e.name})})])])}),f=Cs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Yr(t.translate(e.label))],behaviours:Et([w.config({})])}),v=k=>du("checked"===k?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+k]},t.icons),x=ks({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[v("checked"),v("unchecked")]});return Cs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,x.asSpec(),f],fieldBehaviours:Et([Nn.config({disabled:()=>!e.enabled||t.isDisabled()}),uc()])})})(e,t.shared.providers,r)),colorinput:Fc((e,t,r)=>((e,t,r,c)=>{const d=Cs.parts.field({factory:S1,inputClasses:["tox-textfield"],data:c,onSetValue:R=>m.run(R).get(ve),inputBehaviours:Et([Nn.config({disabled:t.providers.isDisabled}),uc(),Xr.config({}),m.config({invalidClass:"tox-textbox-field-invalid",getRoot:R=>Tc(R.element),notify:{onValid:R=>{const I=Wt.getValue(R);wn(R,_,{color:I})}},validator:{validateOnLoad:!1,validate:R=>{const I=Wt.getValue(R);if(0===I.length)return Pc_pure(Rt.value(!0));{const V=be_fromTag("span");Xt(V,"background-color",I);const Z=Ws(V,"background-color").fold(()=>Rt.error("blah"),Y=>Rt.value(I));return Pc_pure(Z)}}}})]),selectOnFocus:!1}),f=e.label.map(R=>Um(R,t.providers)),v=(R,I)=>{wn(R,N,{value:I})},k=ks(((e,t)=>dd.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Et([ld_button(t.providers.isDisabled),uc(),w.config({}),Xr.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:r=>Pc_nu(c=>e.fetch(c)).map(c=>B.from(T_(Js(DS(un("menu-value"),c,d=>{e.onItemAction(r,d)},e.columns,e.presets,Im.CLOSE_ON_EXECUTE,De,t.providers),{movement:MS(e.columns,e.presets)})))),parts:{menu:S2(0,0,e.presets)}}))({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Aa,ur,tr],onLtr:()=>[ur,Aa,tr]},components:[],fetch:yO(r.getColors(e.storageKey),e.storageKey,r.hasCustomColors()),columns:r.getColorCols(e.storageKey),presets:"color",onItemAction:(R,I)=>{k.getOpt(R).each(V=>{"custom"===I?r.colorPicker(Z=>{Z.fold(()=>es(V,A),Y=>{v(V,Y),mO(e.storageKey,Y)})},"#ffffff"):v(V,"remove"===I?"":I)})}},t));return Cs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:f.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,k.asSpec()]}]),fieldBehaviours:Et([Jn("form-field-events",[ut(_,(R,I)=>{k.getOpt(R).each(V=>{Xt(V.element,"background-color",I.event.color)}),wn(R,Ll,{name:e.name})}),ut(N,(R,I)=>{Cs.getField(R).each(V=>{Wt.setValue(V,I.event.value),Lo.getCurrent(R).each(Un.focus)})}),ut(A,(R,I)=>{Cs.getField(R).each(V=>{Lo.getCurrent(R).each(Un.focus)})})])])})})(e,t.shared,t.colorinput,r)),colorpicker:Fc((e,t,r)=>((e,t,r)=>{const c=k=>"tox-"+k,d=gF((e=>t=>e.translate(bF[t]))(t),c),x=ks(d.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:k=>{wn(k,hl,{name:"hex-valid",value:!0})},onInvalidHex:k=>{wn(k,hl,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[x.asSpec()],behaviours:Et([nw(r,k=>{const R=x.get(k);return Lo.getCurrent(R).bind(Z=>Wt.getValue(Z).hex).map(Z=>"#"+Ma(Z,"#")).getOr("")},(k,R)=>{const V=B.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(R)).bind(oe=>Hs(oe,1)),Z=x.get(k);Lo.getCurrent(Z).fold(()=>{console.log("Can not find form")},oe=>{Wt.setValue(oe,{hex:V.getOr("")}),JS.getField(oe,"hex").each(pe=>{es(pe,sg())})})}),Ig_self()])}})(0,t.shared.providers,r)),dropzone:Fc((e,t,r)=>((e,t,r)=>{const c=(Z,Y)=>{Y.stop()},d=Z=>(Y,oe)=>{lt(Z,pe=>{pe(Y,oe)})},f=(Z,Y)=>{var oe;Nn.isDisabled(Z)||x(Z,null===(oe=Y.event.raw.dataTransfer)||void 0===oe?void 0:oe.files)},v=(Z,Y)=>{x(Z,Y.event.raw.target.files)},x=(Z,Y)=>{Y&&(Wt.setValue(Z,((e,t)=>{const r=L1.explode(t.getOption("images_file_types"));return so(wr(e),d=>Ys(r,f=>cs(d.name.toLowerCase(),`.${f.toLowerCase()}`)))})(Y,t)),wn(Z,Ll,{name:e.name}))},k=ks({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Et([Jn("input-file-events",[hm(um()),hm(dm())])])}),I=e.label.map(Z=>Um(Z,t)),V=Cs.parts.field({factory:{sketch:Z=>({uid:Z.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Et([bA(r.getOr([])),Ig_self(),Nn.config({}),So.config({toggleClass:"dragenter",toggleOnExecute:!1}),Jn("dropzone-events",[ut("dragenter",d([c,So.toggle])),ut("dragleave",d([c,So.toggle])),ut("dragover",c),ut("drop",d([c,f])),ut(nh(),v)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Yr(t.translate("Drop an image here"))]},jc.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Yr(t.translate("Browse for an image")),k.asSpec()],action:Y=>{k.get(Y).element.dom.click()},buttonBehaviours:Et([Xr.config({}),ld_button(t.isDisabled),uc()])})]}]})}});return Ng(I,V,["tox-form__group--stretched"],[])})(e,t.shared.providers,r)),grid:Fc((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:Be(e.items,t.interpreter)}))(e,t.shared)),listbox:Fc((e,t,r)=>((e,t,r)=>{const c=t.shared.providers,d=r.bind(k=>CM(e.items,k)).orThunk(()=>Ps(e.items).filter(wM)),f=e.label.map(k=>Um(k,c)),x={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Cs.parts.field({dom:{},factory:{sketch:k=>yM({uid:k.uid,text:d.map(R=>R.text),icon:B.none(),tooltip:e.label,role:B.none(),fetch:(R,I)=>{const V=R5(R,e.name,e.items,Wt.getValue(R));I(QS(V,Im.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:B.none()}))},onSetup:re(ve),getApi:re({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Xr.config({}),nw(d.map(R=>R.value),R=>Bo(R.element,A5),(R,I)=>{CM(e.items,I).each(V=>{Bn(R.element,A5,V.value),wn(R,Wm,{text:V.text})})})]},"tox-listbox",t.shared)}})]};return Cs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:En([f.toArray(),[x]]),fieldBehaviours:Et([Nn.config({disabled:re(!e.enabled),onDisabled:k=>{Cs.getField(k).each(Nn.disable)},onEnabled:k=>{Cs.getField(k).each(Nn.enable)}})])})})(e,t,r)),selectbox:Fc((e,t,r)=>((e,t,r)=>{const c=Be(e.items,k=>({text:t.translate(k.text),value:k.value})),d=e.label.map(k=>Um(k,t)),f=Cs.parts.field({dom:{},...r.map(k=>({data:k})).getOr({}),selectAttributes:{size:e.size},options:c,factory:QF,selectBehaviours:Et([Nn.config({disabled:()=>!e.enabled||t.isDisabled()}),Xr.config({}),Jn("selectbox-change",[ut(nh(),(k,R)=>{wn(k,Ll,{name:e.name})})])])}),v=e.size>1?B.none():B.some(du("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),x={dom:{tag:"div",classes:["tox-selectfield"]},components:En([[f],v.toArray()])};return Cs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:En([d.toArray(),[x]]),fieldBehaviours:Et([Nn.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:k=>{Cs.getField(k).each(Nn.disable)},onEnabled:k=>{Cs.getField(k).each(Nn.enable)}}),uc()])})})(e,t.shared.providers,r)),sizeinput:Fc((e,t)=>((e,t)=>{let r=SM;const c=un("ratio-event"),d=V=>du(V,{tag:"span",classes:["tox-icon","tox-lock-icon__"+V]},t.icons),f=qd.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:Et([Nn.config({disabled:()=>!e.enabled||t.isDisabled()}),uc(),Xr.config({})])}),v=V=>({dom:{tag:"div",classes:["tox-form__group"]},components:V}),x=V=>Cs.parts.field({factory:S1,inputClasses:["tox-textfield"],inputBehaviours:Et([Nn.config({disabled:()=>!e.enabled||t.isDisabled()}),uc(),Xr.config({}),Jn("size-input-events",[ut(Pa(),(Z,Y)=>{wn(Z,c,{isField1:V})}),ut(nh(),(Z,Y)=>{wn(Z,Ll,{name:e.name})})])]),selectOnFocus:!1}),k=V=>({dom:{tag:"label",classes:["tox-label"]},components:[Yr(t.translate(V))]}),R=qd.parts.field1(v([Cs.parts.label(k("Width")),x(!0)])),I=qd.parts.field2(v([Cs.parts.label(k("Height")),x(!1)]));return qd.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[R,I,v([k("\xa0"),f])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(V,Z,Y)=>{xM(Wt.getValue(V)).each(oe=>{r(oe).each(pe=>{Wt.setValue(Z,(e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let c=e.value.toFixed((d=e.unit)in t?t[d]:1);var d;return-1!==c.indexOf(".")&&(c=c.replace(/\.?0*$/,"")),c+e.unit})(pe))})})},coupledFieldBehaviours:Et([Nn.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:V=>{qd.getField1(V).bind(Cs.getField).each(Nn.disable),qd.getField2(V).bind(Cs.getField).each(Nn.disable),qd.getLock(V).each(Nn.disable)},onEnabled:V=>{qd.getField1(V).bind(Cs.getField).each(Nn.enable),qd.getField2(V).bind(Cs.getField).each(Nn.enable),qd.getLock(V).each(Nn.enable)}}),uc(),Jn("size-input-events2",[ut(c,(V,Z)=>{const Y=Z.event.isField1,oe=Y?qd.getField1(V):qd.getField2(V),pe=Y?qd.getField2(V):qd.getField1(V),Ge=oe.map(Wt.getValue).getOr(""),Te=pe.map(Wt.getValue).getOr("");r=((e,t)=>{const r=xM(e).toOptional(),c=xM(t).toOptional();return Sa(r,c,(d,f)=>M5(d,f.unit).map(v=>f.value/v).map(v=>((e,t)=>r=>M5(r,t).map(c=>({value:c*e,unit:t})))(v,f.unit)).getOr(SM)).getOr(SM)})(Ge,Te)})])])})})(e,t.shared.providers)),slider:Fc((e,t,r)=>((e,t,r)=>{const c=$g.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yr(t.translate(e.label))]}),d=$g.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),f=$g.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return $g.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:re(r.getOrThunk(()=>(Math.abs(e.max)-Math.abs(e.min))/2))},components:[c,d,f],sliderBehaviours:Et([Ig_self(),Un.config({})]),onChoose:(v,x,k)=>{wn(v,Ll,{name:e.name,value:k})}})})(e,t.shared.providers,r)),urlinput:Fc((e,t,r)=>((e,t,r,c)=>{const d=t.shared.providers,f=xe=>{const Qe=Wt.getValue(xe);r.addToHistory(Qe.value,e.filetype)},v={...c.map(xe=>({initialData:xe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":J5,type:"url"},minChars:0,responseTime:0,fetch:xe=>{const Qe=((e,t,r)=>{var c,d;const f=Wt.getValue(t),v=null!==(d=null===(c=f?.meta)||void 0===c?void 0:c.text)&&void 0!==d?d:f.value;return r.getLinkInformation().fold(()=>[],k=>{const R=MM(v,(e=>Be(e,t=>DM(t,t)))(r.getHistory(e)));return"file"===e?(e=>Ht(e,(t,r)=>0===t.length||0===r.length?t.concat(r):t.concat(K7,r),[]))([R,MM(v,Q7(k)),MM(v,En([t$(k),e$(k),n$(k)]))]):R})})(e.filetype,xe,r),He=QS(Qe,Im.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:B.none()});return Pc_pure(He)},getHotspot:xe=>oe.getOpt(xe),onSetValue:(xe,Qe)=>{xe.hasConfigured(m)&&m.run(xe).get(ve)},typeaheadBehaviours:Et([...r.getValidationHandler().map(xe=>m.config({getRoot:Qe=>Tc(Qe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Qe,He)=>{I.getOpt(Qe).each(St=>{Bn(St.element,"title",d.translate(He))})}},validator:{validate:Qe=>{const He=Wt.getValue(Qe);return z7_nu(St=>{xe({type:e.filetype,url:He.value},pt=>{if("invalid"===pt.status){const Mt=Rt.error(pt.message);St(Mt)}else{const Mt=Rt.value(pt.message);St(Mt)}})})},validateOnLoad:!1}})).toArray(),Nn.config({disabled:()=>!e.enabled||d.isDisabled()}),Xr.config({}),Jn("urlinput-events",[ut(sg(),xe=>{const Qe=Al(xe.element),He=Qe.trim();He!==Qe&&ya(xe.element,He),"file"===e.filetype&&wn(xe,Ll,{name:e.name})}),ut(nh(),xe=>{wn(xe,Ll,{name:e.name}),f(xe)}),ut(xu(),xe=>{wn(xe,Ll,{name:e.name}),f(xe)})])]),eventOrder:{[sg()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:xe=>xe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:S2(0,0,"normal")},onExecute:(xe,Qe,He)=>{wn(Qe,G2,{})},onItemExecute:(xe,Qe,He,St)=>{f(xe),wn(xe,Ll,{name:e.name})}},x=Cs.parts.field({...v,factory:V7}),k=e.label.map(xe=>Um(xe,d)),I=ks(((xe,Qe,He=xe,St=xe)=>du(He,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+xe],attributes:{title:d.translate(St),"aria-live":"polite",...Qe.fold(()=>({}),pt=>({id:pt}))}},d.icons))("invalid",B.some(J5),"warning")),V=ks({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[I.asSpec()]}),Z=r.getUrlPicker(e.filetype),Y=un("browser.url.event"),oe=ks({dom:{tag:"div",classes:["tox-control-wrap"]},components:[x,V.asSpec()],behaviours:Et([Nn.config({disabled:()=>!e.enabled||d.isDisabled()})])}),pe=ks(K5({name:e.name,icon:B.some("browse"),text:e.label.getOr(""),enabled:e.enabled,primary:!1,buttonType:B.none(),borderless:!0},xe=>es(xe,Y),d,[],["tox-browse-url"]));return Cs.sketch({dom:gl([]),components:k.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:En([[oe.asSpec()],Z.map(()=>pe.asSpec()).toArray()])}]),fieldBehaviours:Et([Nn.config({disabled:()=>!e.enabled||d.isDisabled(),onDisabled:xe=>{Cs.getField(xe).each(Nn.disable),pe.getOpt(xe).each(Nn.disable)},onEnabled:xe=>{Cs.getField(xe).each(Nn.enable),pe.getOpt(xe).each(Nn.enable)}}),uc(),Jn("url-input-events",[ut(Y,xe=>{Lo.getCurrent(xe).each(Qe=>{const He=Wt.getValue(Qe),St={fieldname:e.name,...He};Z.each(pt=>{pt(St).get(Mt=>{Wt.setValue(Qe,Mt),wn(xe,Ll,{name:e.name})})})})})])])})})(e,t,t.urlinput,r)),customeditor:Fc(e=>{const t=fr(),r=ks({dom:{tag:e.tag}}),c=fr();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Et([Jn("custom-editor-events",[lr(d=>{r.getOpt(d).each(f=>{((e=>Qn(e,"init"))(e)?e.init(f.element.dom):wF.load(e.scriptId,e.scriptUrl).then(v=>v(f.element.dom,e.settings))).then(v=>{c.on(x=>{v.setValue(x)}),c.clear(),t.set(v)})})})]),nw(B.none(),()=>t.get().fold(()=>c.get().getOr(""),d=>d.getValue()),(d,f)=>{t.get().fold(()=>c.set(f),v=>v.setValue(f))}),Ig_self()]),components:[r.asSpec()]}}),htmlpanel:Fc(e=>Gd.sketch("presentation"===e.presets?{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}:{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Et([Xr.config({}),Un.config({})])})),imagepreview:Fc((e,t,r)=>((e,t)=>{const r=_n(t.getOr({url:""})),c=ks({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map(k=>({src:k.url})).getOr({})}}),d=ks({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),v={};e.height.each(k=>v.height=k);const x=t.map(k=>({url:k.url,zoom:B.from(k.zoom),cachedWidth:B.from(k.cachedWidth),cachedHeight:B.from(k.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:v,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Et([Ig_self(),nw(x,()=>r.get(),(k,R)=>{const I={url:R.url};R.zoom.each(Z=>I.zoom=Z),R.cachedWidth.each(Z=>I.cachedWidth=Z),R.cachedHeight.each(Z=>I.cachedHeight=Z),r.set(I);const V=()=>{const{cachedWidth:Z,cachedHeight:Y,zoom:oe}=I;if(!Mo(Z)&&!Mo(Y)){if(Mo(oe)){const Ge=((e,t,r)=>{const c=Fs(e),d=Ut(e);return Math.min(c/t,d/r,1)})(k.element,Z,Y);I.zoom=Ge}const pe=((e,t,r,c,d)=>{const f=r*d,v=c*d,x=Math.max(0,e/2-f/2),k=Math.max(0,t/2-v/2);return{left:x.toString()+"px",top:k.toString()+"px",width:f.toString()+"px",height:v.toString()+"px"}})(Fs(k.element),Ut(k.element),Z,Y,I.zoom);d.getOpt(k).each(Ge=>{Ms(Ge.element,pe)})}};c.getOpt(k).each(Z=>{const Y=Z.element;R.url!==Bo(Y,"src")&&(Bn(Y,"src",R.url),Hr(k.element,"tox-imagepreview__loaded")),V(),(e=>new Promise((t,r)=>{const c=()=>{f(),t(e)},d=[bi(e,"load",c),bi(e,"error",()=>{f(),r("Unable to load data from image: "+e.dom.src)})],f=()=>lt(d,v=>v.unbind());e.dom.complete&&c()}))(Y).then(oe=>{k.getSystem().isConnected()&&(va(k.element,"tox-imagepreview__loaded"),I.cachedWidth=oe.dom.naturalWidth,I.cachedHeight=oe.dom.naturalHeight,V())})})})])}})(e,r)),table:Fc((e,t)=>((e,t)=>{const d=x=>({dom:{tag:"td",innerHtml:t.translate(x)}}),f=x=>({dom:{tag:"tr"},components:Be(x,d)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(x=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Be(x,x=>({dom:{tag:"th",innerHtml:t.translate(x)}}))}]}),(x=>({dom:{tag:"tbody"},components:Be(x,f)}))(e.cells)],behaviours:Et([Xr.config({}),Un.config({})])};var x})(e,t.shared.providers)),tree:Fc((e,t)=>((e,t)=>{const r=e.onLeafAction.getOr(ve),c=e.onToggleExpand.getOr(ve),f=_n(e.defaultExpandedIds),v=_n(e.defaultSelectedId),x=un("tree-id"),k=(R,I)=>e.items.map(V=>"leaf"===V.type?EM({leaf:V,selectedId:R,onLeafAction:r,visible:!0,treeId:x,backstage:t}):_M({directory:V,selectedId:R,onLeafAction:r,expandedIds:I,labelTabstopping:!0,treeId:x,backstage:t}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:k(v.get(),f.get()),behaviours:Et([xn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Jn(R7,[ut("expand-tree-node",(R,I)=>{const{expanded:V,node:Z}=I.event;f.set(V?[...f.get(),Z]:f.get().filter(Y=>Y!==Z)),c(f.get(),{expanded:V,node:Z})})]),ai.config({channels:{[`update-active-item-${x}`]:{onReceive:(R,I)=>{v.set(B.some(I.value)),to.set(R,k(B.some(I.value),f.get()))}}}}),to.config({})])}})(e,t)),panel:Fc((e,t)=>((e,t)=>({dom:{tag:"div",classes:e.classes},components:Be(e.items,t.shared.interpreter)}))(e,t))},h$={field:(e,t)=>t,record:re([])},Q5=(e,t,r,c)=>{const d=Js(c,{shared:{interpreter:f=>NM(e,f,r,d)}});return NM(e,t,r,d)},NM=(e,t,r,c)=>rt(g$,t.type).fold(()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t),d=>d(e,t,r,c)),eB=(e,t,r)=>NM(h$,e,t,r),av="layout-inset",BM=e=>e.x,tB=(e,t)=>e.x+e.width/2-t.width/2,PM=(e,t)=>e.x+e.width-t.width,FM=e=>e.y,$M=(e,t)=>e.y+e.height-t.height,nB=(e,t)=>e.y+e.height/2-t.height/2,SA=(e,t,r)=>rc(PM(e,t),$M(e,t),r.insetSouthwest(),gg(),"southwest",ic(e,{right:0,bottom:3}),av),TA=(e,t,r)=>rc(BM(e),$M(e,t),r.insetSoutheast(),Rp(),"southeast",ic(e,{left:1,bottom:3}),av),V_=(e,t,r)=>rc(PM(e,t),FM(e),r.insetNorthwest(),Nd(),"northwest",ic(e,{right:0,top:2}),av),z_=(e,t,r)=>rc(BM(e),FM(e),r.insetNortheast(),mg(),"northeast",ic(e,{left:1,top:2}),av),Hg=(e,t,r)=>rc(tB(e,t),FM(e),r.insetNorth(),nf(),"north",ic(e,{top:2}),av),U_=(e,t,r)=>rc(tB(e,t),$M(e,t),r.insetSouth(),Eb(),"south",ic(e,{bottom:3}),av),oB=(e,t,r)=>rc(PM(e,t),nB(e,t),r.insetEast(),ac(),"east",ic(e,{right:0}),av),sB=(e,t,r)=>rc(BM(e),nB(e,t),r.insetWest(),Dp(),"west",ic(e,{left:1}),av),f$=e=>{switch(e){case"north":return Hg;case"northeast":return z_;case"northwest":return V_;case"south":return U_;case"southeast":return TA;case"southwest":return SA;case"east":return oB;case"west":return sB}},rB=(e,t,r,c,d)=>Mb(c).map(f$).getOr(Hg)(e,t,r,c,d),p$=e=>{switch(e){case"north":return U_;case"northeast":return TA;case"northwest":return SA;case"south":return Hg;case"southeast":return z_;case"southwest":return V_;case"east":return sB;case"west":return oB}},b$=(e,t,r,c,d)=>Mb(c).map(p$).getOr(Hg)(e,t,r,c,d),Z_={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},v$=(e,t,r)=>{const d={maxHeightFunction:km()};return()=>r()?{type:"node",root:vt(Ve(e())),node:B.from(e()),bubble:qt(12,12,Z_),layouts:{onRtl:()=>[z_],onLtr:()=>[V_]},overrides:d}:{type:"hotspot",hotspot:t(),bubble:qt(-12,12,Z_),layouts:{onRtl:()=>[ur,Aa,tr],onLtr:()=>[Aa,ur,tr]},overrides:d}},y$=(e,t,r,c)=>{const f={maxHeightFunction:km()};return()=>c()?{type:"node",root:vt(Ve(t())),node:B.from(t()),bubble:qt(12,12,Z_),layouts:{onRtl:()=>[Hg],onLtr:()=>[Hg]},overrides:f}:e?{type:"node",root:vt(Ve(t())),node:B.from(t()),bubble:qt(0,-cn(t()),Z_),layouts:{onRtl:()=>[er],onLtr:()=>[er]},overrides:f}:{type:"hotspot",hotspot:r(),bubble:qt(0,0,Z_),layouts:{onRtl:()=>[er],onLtr:()=>[er]},overrides:f}},w$=(e,t,r)=>()=>r()?{type:"node",root:vt(Ve(e())),node:B.from(e()),layouts:{onRtl:()=>[Hg],onLtr:()=>[Hg]}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[tr],onLtr:()=>[tr]}},C$=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const r=e.selection.getRng(),c=e.model.table.getSelectedCells();if(c.length>1){const f=c[c.length-1],v={firstCell:be_fromDom(c[0]),lastCell:be_fromDom(f)};return B.some(v)}return B.some(lf.range(be_fromDom(r.startContainer),r.startOffset,be_fromDom(r.endContainer),r.endOffset))}}),x$=e=>t=>({type:"node",root:e(),node:t}),S$=(e,t,r,c)=>{const d=Mf(e),f=()=>be_fromDom(e.getBody()),v=()=>be_fromDom(e.getContentAreaContainer()),x=()=>d||!c();return{inlineDialog:v$(v,t,x),inlineBottomDialog:y$(e.inline,v,r,x),banner:w$(v,t,x),cursor:C$(e,f),node:x$(f)}},T$=e=>(t,r)=>{g_(e)(t,r)},k$=e=>()=>c_(e),E$=e=>t=>OS(e,t),_$=e=>t=>hO(e,t),A$=e=>()=>c3(e),aB=e=>_r(e,"items"),cB=e=>_r(e,"format"),iB=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],lB=e=>Ht(e,(t,r)=>{if((e=>Qn(e,"items"))(r)){const c=lB(r.items);return{customFormats:t.customFormats.concat(c.customFormats),formats:t.formats.concat([{title:r.title,items:c.formats}])}}if((e=>Qn(e,"inline"))(r)||(e=>Qn(e,"block"))(r)||(e=>Qn(e,"selector"))(r)){const d=`custom-${bn(r.name)?r.name:r.title.toLowerCase()}`;return{customFormats:t.customFormats.concat([{name:d,format:r}]),formats:t.formats.concat([{title:r.title,format:d,icon:r.icon}])}}return{...t,formats:t.formats.concat(r)}},{customFormats:[],formats:[]}),uB=e=>P0(e).map(t=>{const r=((e,t)=>{const r=lB(t),c=d=>{lt(d,f=>{e.formatter.has(f.name)||e.formatter.register(f.name,f.format)})};return e.formatter?c(r.customFormats):e.on("init",()=>{c(r.customFormats)}),r.formats})(e,t);return qk(e)?iB.concat(r):r}).getOr(iB),dB=(e,t,r)=>({...e,type:"formatter",isSelected:t(e.format),getStylePreview:r(e.format)}),mB=(e,t,r,c)=>{const x=k=>Be(k,R=>aB(R)?(k=>{const R=x(k.items);return{...k,type:"submenu",getStyleItems:re(R)}})(R):cB(R)?(k=>dB(k,r,c))(R):(e=>{const t=Xo(e);return 1===t.length&&xo(t,"title")})(R)?{...R,type:"separator"}:(k=>{const R=bn(k.name)?k.name:un(k.title),I=`custom-${R}`,V={...k,type:"formatter",format:I,isSelected:r(I),getStylePreview:c(I)};return e.formatter.register(R,V),V})(R));return x(t)},H$=L1.trim,gB=e=>t=>!(!(e=>Wn(e)&&1===e.nodeType)(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),V$=gB("true"),z$=gB("false"),hB=(e,t,r,c,d)=>({type:e,title:t,url:r,level:c,attach:d}),fB=e=>e.innerText||e.textContent,G$=e=>(e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name))(e)&&bB(e),pB=e=>e&&/^(H[1-6])$/.test(e.nodeName),bB=e=>(e=>{let t=e;for(;t=t.parentNode;){const r=t.contentEditable;if(r&&"inherit"!==r)return V$(t)}return!1})(e)&&!z$(e),q$=e=>pB(e)&&bB(e),Y$=e=>{var t;const r=(e=>e.id?e.id:un("h"))(e);return hB("header",null!==(t=fB(e))&&void 0!==t?t:"","#"+r,(e=>pB(e)?parseInt(e.nodeName.substr(1),10):0)(e),()=>{e.id=r})},X$=e=>{const t=e.id||e.name,r=fB(e);return hB("anchor",r||"#"+t,"#"+t,0,ve)},tI=e=>H$(e.title).length>0,nI_find=e=>{const t=(e=>Be(Zc(be_fromDom(e),"h1,h2,h3,h4,h5,h6,a:not([href])"),r=>r.dom))(e);return so((e=>Be(so(e,q$),Y$))(t).concat((e=>Be(so(e,G$),X$))(t)),tI)},kA="tinymce-url-history",yB=e=>bn(e)&&/^https?/.test(e),wB=e=>qn(e)&&Es(e,t=>!(e=>Oo(e)&&e.length<=5&&yr(e,yB))(t)).isNone(),CB=()=>{const e=Bh.getItem(kA);if(null===e)return{};let t;try{t=JSON.parse(e)}catch(r){if(r instanceof SyntaxError)return console.log("Local storage "+kA+" was not valid JSON",r),{};throw r}return wB(t)?t:(console.log("Local storage "+kA+" was not valid format",t),{})},rI=e=>{const t=CB();return rt(t,e).getOr([])},aI=(e,t)=>{if(!yB(e))return;const r=CB(),c=rt(r,t).getOr([]),d=so(c,f=>f!==e);r[t]=[e].concat(d).slice(0,5),(e=>{if(!wB(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));Bh.setItem(kA,JSON.stringify(e))})(r)},xB=e=>!!e,cI=e=>Ke(L1.makeMap(e,/[, ]/),xB),IM=e=>B.from(Qk(e)),SB=e=>B.from(e).filter(bn).getOrUndefined(),gI=e=>({getHistory:rI,addToHistory:aI,getLinkInformation:()=>(e=>nE(e)?B.some({targets:nI_find(e.getBody()),anchorTop:SB(r3(e)),anchorBottom:SB(a3(e))}):B.none())(e),getValidationHandler:()=>(e=>B.from(eE(e)))(e),getUrlPicker:t=>((e,t)=>((e,t)=>{const r=(e=>{const t=B.from(tE(e)).filter(xB).map(cI);return IM(e).fold(De,r=>t.fold(Ot,c=>Xo(c).length>0&&c))})(e);return zt(r)?r?IM(e):B.none():r[t]?IM(e):B.none()})(e,t).map(r=>c=>Pc_nu(d=>{const v={filetype:t,fieldname:c.fieldname,...B.from(c.meta).getOr({})};r.call(e,(x,k)=>{if(!bn(x))throw new Error("Expected value to be string");if(void 0!==k&&!qn(k))throw new Error("Expected meta to be a object");d({value:x,meta:k})},c.value,v)})))(e,t)}),Jc=qy,qf=ok,pI=re([$e("shell",!1),dt("makeItem"),$e("setupItem",ve),au_field("listBehaviours",[to])]),bI=Fl({name:"items",overrides:()=>({behaviours:Et([to.config({})])})}),vI=re([bI]),TB=Wc({name:re("CustomList")(),configFields:pI(),partFields:vI(),factory:(e,t,r,c)=>{const f=e.shell?{behaviours:[to.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:f.components,behaviours:ja(e.listBehaviours,f.behaviours),apis:{setItems:(x,k)=>{(x=>e.shell?B.some(x):$s(x,e,"items"))(x).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},R=>{const I=to.contents(R),V=k.length,Z=V-I.length,Y=Z>0?bt(Z,()=>e.makeItem()):[],oe=I.slice(V);lt(oe,Ge=>to.remove(R,Ge)),lt(Y,Ge=>to.append(R,Ge));const pe=to.contents(R);lt(pe,(Ge,Te)=>{e.setupItem(x,Ge,k[Te],Te)})})}}}},apis:{setItems:(e,t,r)=>{e.setItems(t,r)}}}),eT=re([dt("dom"),$e("shell",!0),Wa("toolbarBehaviours",[to])]),CI=re([Fl({name:"groups",overrides:()=>({behaviours:Et([to.config({})])})})]),$h=Wc({name:"Toolbar",configFields:eT(),partFields:CI(),factory:(e,t,r,c)=>{const v=e.shell?{behaviours:[to.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:v.components,behaviours:ja(e.toolbarBehaviours,v.behaviours),apis:{setGroups:(x,k)=>{(x=>e.shell?B.some(x):$s(x,e,"groups"))(x).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},R=>{to.set(R,k)})},refresh:ve},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)}}}),SI=ve,TI=De,kB=re([]);var kI=Object.freeze({__proto__:null,setup:SI,isDocked:TI,getBehaviours:kB});const LM=e=>(ea(Ws(e,"position"),"fixed")?B.none():kc(e)).orThunk(()=>{const c=be_fromTag("span");return Kr(e).bind(d=>{Ac(d,c);const f=kc(c);return ir(c),f})}),EB=e=>LM(e).map($r).getOrThunk(()=>po(0,0)),EI=(e,t)=>{const r=e.element;va(r,t.transitionClass),Hr(r,t.fadeOutClass),va(r,t.fadeInClass),t.onShow(e)},_I=(e,t)=>{const r=e.element;va(r,t.transitionClass),Hr(r,t.fadeInClass),va(r,t.fadeOutClass),t.onHide(e)},_B=(e,t)=>e.y>=t.y,OB=(e,t)=>e.bottom<=t.bottom,HM=(e,t,r)=>({location:"top",leftX:t,topY:r.bounds.y-e.y}),VM=(e,t,r)=>({location:"bottom",leftX:t,bottomY:e.bottom-r.bounds.bottom}),zM=e=>e.box.x-e.win.x,UM=(e,t,r)=>r.getInitialPos().map(c=>{const d=((e,t)=>{const r=t.optScrollEnv.fold(re(e.bounds.y),c=>c.scrollElmTop+(e.bounds.y-c.currentScrollTop));return po(e.bounds.x,r)})(c,t);return{box:_s(d.left,d.top,Fs(e),Ut(e)),location:c.location}}),AB=(e,t,r,c,d)=>{const f=((e,t)=>{const r=t.optScrollEnv.fold(re(e.y),c=>e.y+c.currentScrollTop-c.scrollElmTop);return po(e.x,r)})(t,r),v=_s(f.left,f.top,t.width,t.height);c.setInitialPos({style:Nr(e),position:Ns(e,"position")||"static",bounds:v,location:d.location})},RB=(e,t,r)=>r.getInitialPos().bind(c=>{var d;switch(r.clearInitialPos(),c.position){case"static":return B.some({morph:"static"});case"absolute":const f=LM(e).getOr(ls()),v=oa(f),x=null!==(d=f.dom.scrollTop)&&void 0!==d?d:0;return B.some({morph:"absolute",positionCss:Ml("absolute",rt(c.style,"left").map(k=>t.x-v.x),rt(c.style,"top").map(k=>t.y-v.y+x),rt(c.style,"right").map(k=>v.right-t.right),rt(c.style,"bottom").map(k=>v.bottom-t.bottom))});default:return B.none()}}),ZM=e=>{switch(e.location){case"top":return B.some({morph:"fixed",positionCss:Ml("fixed",B.some(e.leftX),B.some(e.topY),B.none(),B.none())});case"bottom":return B.some({morph:"fixed",positionCss:Ml("fixed",B.some(e.leftX),B.none(),B.none(),B.some(e.bottomY))});default:return B.none()}},$I=(e,t,r)=>{const c=e.element;return ea(Ws(c,"position"),"fixed")?((e,t,r)=>((e,t,r)=>UM(e,t,r).filter(({box:c})=>((e,t,r)=>yr(e,c=>{switch(c){case"bottom":return OB(t,r.bounds);case"top":return _B(t,r.bounds)}}))(r.getModes(),c,t)).bind(({box:c})=>RB(e,c,r)))(e,t,r).orThunk(()=>t.optScrollEnv.bind(c=>UM(e,t,r)).bind(({box:c,location:d})=>{const f=H(),v=zM({win:f,box:c}),x="top"===d?HM(f,v,t):VM(f,v,t);return ZM(x)})))(c,t,r):((e,t,r)=>{const c=oa(e),d=H(),f=((e,t,r)=>{const c=t.win,d=t.box,f=zM(t);return $o(e,v=>{switch(v){case"bottom":return OB(d,r.bounds)?B.none():B.some(VM(c,f,r));case"top":return _B(d,r.bounds)?B.none():B.some(HM(c,f,r));default:return B.none()}}).getOr({location:"no-dock"})})(r.getModes(),{win:d,box:c},t);return"top"===f.location||"bottom"===f.location?(AB(e,c,t,r,f),ZM(f)):B.none()})(c,t,r)},DB=(e,t,r)=>{r.setDocked(!1),lt(["left","right","top","bottom","position"],c=>F(e.element,c)),t.onUndocked(e)},WM=(e,t,r,c)=>{const d="fixed"===c.position;r.setDocked(d),Ip(e.element,c),(d?t.onDocked:t.onUndocked)(e)},MB=(e,t,r,c,d=!1)=>{t.contextual.each(f=>{f.lazyContext(e).each(v=>{const x=((e,t)=>e.y<t.bottom&&e.bottom>t.y)(v,c.bounds);x!==r.isVisible()&&(r.setVisible(x),d&&!x?(Md(e.element,[f.fadeOutClass]),f.onHide(e)):(x?EI:_I)(e,f))})})},NB=(e,t,r,c,d)=>{MB(e,t,r,c,!0),WM(e,t,r,d.positionCss)},EA=(e,t,r)=>{e.getSystem().isConnected()&&((e,t,r)=>{const c=t.lazyViewport(e);MB(e,t,r,c),$I(e,c,r).each(d=>{((e,t,r,c,d)=>{switch(d.morph){case"static":return DB(e,t,r);case"absolute":return WM(e,t,r,d.positionCss);case"fixed":NB(e,t,r,c,d)}})(e,t,r,c,d)})})(e,t,r)},BB=(e,t,r)=>{r.isDocked()&&((e,t,r)=>{const c=e.element;r.setDocked(!1);const d=t.lazyViewport(e);((e,t,r)=>{const c=e.element;return UM(c,t,r).bind(({box:d})=>RB(c,d,r))})(e,d,r).each(f=>{switch(f.morph){case"static":DB(e,t,r);break;case"absolute":WM(e,t,r,f.positionCss)}}),r.setVisible(!0),t.contextual.each(f=>{ri(c,[f.fadeInClass,f.fadeOutClass,f.transitionClass]),f.onShow(e)}),EA(e,t,r)})(e,t,r)},PB=e=>(t,r,c)=>{const d=r.lazyViewport(t);((e,t,r,c)=>{const d=oa(e),f=H(),x=c(f,zM({win:f,box:d}),t);return"bottom"===x.location||"top"===x.location?(((e,t,r,c,d)=>{c.getInitialPos().fold(()=>AB(e,t,r,c,d),()=>ve)})(e,d,t,r,x),ZM(x)):B.none()})(t.element,d,c,e).each(v=>{NB(t,r,c,d,v)})},UI=PB(HM),ZI=PB(VM);var WI=Object.freeze({__proto__:null,refresh:EA,reset:BB,isDocked:(e,t,r)=>r.isDocked(),getModes:(e,t,r)=>r.getModes(),setModes:(e,t,r,c)=>r.setModes(c),forceDockToTop:UI,forceDockToBottom:ZI}),jI=Object.freeze({__proto__:null,events:(e,t)=>ss([ag(oh(),(r,c)=>{e.contextual.each(d=>{Ui(r.element,d.transitionClass)&&(ri(r.element,[d.transitionClass,d.fadeInClass]),(t.isVisible()?d.onShown:d.onHidden)(r)),c.stop()})}),ut(mm(),(r,c)=>{EA(r,e,t)}),ut(pp(),(r,c)=>{EA(r,e,t)}),ut(Od(),(r,c)=>{BB(r,e,t)})])}),GI=[Rc("contextual",[ra("fadeInClass"),ra("fadeOutClass"),ra("transitionClass"),Sl("lazyContext"),Ko("onShow"),Ko("onShown"),Ko("onHide"),Ko("onHidden")]),ba("lazyViewport",()=>({bounds:H(),optScrollEnv:B.none()})),Fi("modes",["top","bottom"],os),Ko("onDocked"),Ko("onUndocked")],qI=Object.freeze({__proto__:null,init:e=>{const t=_n(!1),r=_n(!0),c=fr(),d=_n(e.modes);return cl({isDocked:t.get,setDocked:t.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:r.get,setVisible:r.set,getModes:d.get,setModes:d.set,readState:()=>`docked:  ${t.get()}, visible: ${r.get()}, modes: ${d.get().join(",")}`})}});const Fa=Ua({fields:GI,name:"docking",active:jI,apis:WI,state:qI}),jM=re(un("toolbar-height-change")),Kf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},FB="tox-tinymce--toolbar-sticky-on",$B="tox-tinymce--toolbar-sticky-off",_A=(e,t)=>xo(Fa.getModes(e),t),GM=e=>{const r=e.element;Tc(r).each(c=>{const d="padding-"+Fa.getModes(e)[0];if(Fa.isDocked(e)){const f=Fs(c);Xt(r,"width",f+"px"),Xt(c,d,(c=>cn(c)+(parseInt(Ns(c,"margin-top"),10)||0)+(parseInt(Ns(c,"margin-bottom"),10)||0))(r)+"px")}else F(r,"width"),F(c,d)})},IB=(e,t)=>{t?(Hr(e,Kf.fadeOutClass),Md(e,[Kf.transitionClass,Kf.fadeInClass])):(Hr(e,Kf.fadeInClass),Md(e,[Kf.fadeOutClass,Kf.transitionClass]))},LB=(e,t)=>{const r=be_fromDom(e.getContainer());t?(va(r,FB),Hr(r,$B)):(va(r,$B),Hr(r,FB))},HB=(e,t)=>{const r=fr(),c=t.getSink,d=x=>{c().each(k=>x(k.element))},f=x=>{e.inline||GM(x),LB(e,Fa.isDocked(x)),x.getSystem().broadcastOn([Sh()],{}),c().each(k=>k.getSystem().broadcastOn([Sh()],{}))},v=e.inline?[]:[ai.config({channels:{[jM()]:{onReceive:GM}}})];return[Un.config({}),Fa.config({contextual:{lazyContext:x=>{const k=cn(x.element),R=e.inline?e.getContentAreaContainer():e.getContainer();return B.from(R).map(I=>{const V=oa(be_fromDom(I));return B1(e,x.element).fold(()=>{const Y=V.height-k,oe=V.y+(_A(x,"top")?0:k);return _s(V.x,oe,V.width,Y)},Y=>{const oe=Tr(V,X0(Y)),pe=_A(x,"top")?oe.y:oe.y+k;return _s(oe.x,pe,oe.width,oe.height-k)})})},onShow:()=>{d(x=>IB(x,!0))},onShown:x=>{d(k=>ri(k,[Kf.transitionClass,Kf.fadeInClass])),r.get().each(k=>{((e,t)=>{const r=cr(t);ll(r).filter(c=>!Jo(t,c)).filter(c=>Jo(c,be_fromDom(r.dom.body))||Cr(e,c)).each(()=>il(t))})(x.element,k),r.clear()})},onHide:x=>{((e,t)=>Dl(e).orThunk(()=>t().toOptional().bind(r=>Dl(r.element))))(x.element,c).fold(r.clear,r.set),d(k=>IB(k,!1))},onHidden:()=>{d(x=>ri(x,[Kf.transitionClass]))},...Kf},lazyViewport:x=>B1(e,x.element).fold(()=>{const R=H(),I=Gx(e),V=R.y+(_A(x,"top")?I:0),Z=R.height-(_A(x,"bottom")?I:0);return{bounds:_s(R.x,V,R.width,Z),optScrollEnv:B.none()}},R=>({bounds:X0(R),optScrollEnv:B.some({currentScrollTop:R.element.dom.scrollTop,scrollElmTop:$r(R.element).top})})),modes:[t.header.getDockingMode()],onDocked:f,onUndocked:f}),...v]};var tL=Object.freeze({__proto__:null,setup:(e,t,r)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{r().each(Fa.reset)}),e.on("ResizeWindow ResizeEditor",()=>{r().each(GM)}),e.on("SkinLoaded",()=>{r().each(c=>{Fa.isDocked(c)?Fa.reset(c):Fa.refresh(c)})}),e.on("FullscreenStateChanged",()=>{r().each(Fa.reset)})),e.on("AfterScrollIntoView",c=>{r().each(d=>{Fa.refresh(d);const f=d.element;ii(f)&&((e,t)=>{const r=cr(t),d=wo(t).dom.innerHeight,f=La(r),v=be_fromDom(e.elm),x=sl(v),k=Ut(v),R=x.y,I=R+k,V=$r(t),Z=Ut(t),Y=V.top,oe=Y+Z,pe=Math.abs(Y-f.top)<2,Ge=Math.abs(oe-(f.top+d))<2;pe&&R<oe?xd(f.left,R-Z,r):Ge&&I>Y&&xd(f.left,R-d+k+Z,r)})(c,f)})}),e.on("PostRender",()=>{LB(e,!1)})},isDocked:e=>e().map(Fa.isDocked).getOr(!1),getBehaviours:HB});const oL=Tn([xa,si("items",Xg([Uu([iS,Ni("items",os)]),os]))].concat(z0)),rL=[ec("text"),ec("tooltip"),ec("icon"),pa("search",!1,Xg([Td,Tn([ec("placeholder")])],e=>zt(e)?e?B.some({placeholder:B.none()}):B.none():B.some(e))),Sl("fetch"),ba("onSetup",()=>ve)],VB=Tn([xa,...rL]),zB=e=>Ar("menubutton",VB,e),aL=Tn([xa,_2,cd,Mh,O3,qR,Bf,rl("presets","normal",["normal","color","listpreview"]),ME(1),Dh,KR]);var qM=yc({factory:(e,t)=>{const c={focus:xn.focusIn,setMenus:(d,f)=>{const v=Be(f,x=>{const R=zB({type:"menubutton",text:x.text,fetch:I=>{I(x.getItems())}}).mapError(I=>Zu(I)).getOrDie();return H_(R,"tox-mbtn",t.backstage,B.some("menuitem"))});to.set(d,v)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Et([to.config({}),Jn("menubar-events",[lr(d=>{e.onSetup(d)}),ut(Ii(),(d,f)=>{ia(d.element,".tox-mbtn--active").each(v=>{Yu(f.event.target,".tox-mbtn").each(x=>{Jo(v,x)||d.getSystem().getByDom(v).each(k=>{d.getSystem().getByDom(x).each(R=>{dd.expand(R),dd.close(k),Un.focus(R)})})})})}),ut(rg(),(d,f)=>{f.event.prevFocus.bind(v=>d.getSystem().getByDom(v).toOptional()).each(v=>{f.event.newFocus.bind(x=>d.getSystem().getByDom(x).toOptional()).each(x=>{dd.isOpen(v)&&(dd.expand(x),dd.close(v))})})})]),xn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(e.onEscape(d),B.some(!0))}),Xr.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[dt("dom"),dt("uid"),dt("onEscape"),dt("backstage"),$e("onSetup",ve)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,r)=>{e.setMenus(t,r)}}});const UB="container",dL=[Wa("slotBehaviours",[])],ZB=e=>"<alloy.field."+e+">",gL=(e,t)=>{const r=pe=>f0(e),d=(pe,Ge)=>(Te,xe)=>$s(Te,e,xe).map(Qe=>pe(Qe,xe)).getOr(Ge),v=(pe,Ge)=>"true"!==Bo(pe.element,"aria-hidden"),R=d(v,!1),I=d((pe,Ge)=>{if(v(pe)){const Te=pe.element;Xt(Te,"display","none"),Bn(Te,"aria-hidden","true"),wn(pe,fp(),{name:Ge,visible:!1})}}),V=(pe=I,(Ge,Te)=>{lt(Te,xe=>pe(Ge,xe))}),Y=d((pe,Ge)=>{if(!v(pe)){const Te=pe.element;F(Te,"display"),ae(Te,"aria-hidden"),wn(pe,fp(),{name:Ge,visible:!0})}}),oe={getSlotNames:r,getSlot:(pe,Ge)=>$s(pe,e,Ge),isShowing:R,hideSlot:I,hideAllSlots:pe=>V(pe,r()),showSlot:Y};var pe;return{uid:e.uid,dom:e.dom,components:t,behaviours:Sg(e.slotBehaviours),apis:oe}},fl={...Ke({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,r)=>e.getSlot(t,r),isShowing:(e,t,r)=>e.isShowing(t,r),hideSlot:(e,t,r)=>e.hideSlot(t,r),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,r)=>e.showSlot(t,r)},e=>bm(e)),sketch:e=>{const t=(()=>{const f=[];return{slot:(x,k)=>(f.push(x),g0(UB,ZB(x),k)),record:re(f)}})(),r=e(t),c=t.record(),d=Be(c,f=>vc({name:f,pname:ZB(f)}));return d1(UB,dL,d,gL,r)}},hL=Tn([cd,_2,ba("onShow",ve),ba("onHide",ve),Bf]),bL=e=>({element:()=>e.element.dom}),vL=(e,t)=>{const r=Be(Xo(t),c=>{const f=Uc((e=>Ar("sidebar",hL,e))(t[c]));return{name:c,getApi:bL,onSetup:f.onSetup,onShow:f.onShow,onHide:f.onHide}});return Be(r,c=>{const d=_n(ve);return e.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Hm_unnamedEvents([If(c,d),Lf(c,d),ut(fp(),(f,v)=>{const x=v.event;fo(r,R=>R.name===x.name).each(R=>{(x.visible?R.onShow:R.onHide)(R.getApi(f))})})])})})},yL=e=>fl.sketch(t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:vL(t,e),slotBehaviours:Hm_unnamedEvents([lr(r=>fl.hideAllSlots(r))])})),OA=(e,t)=>{Bn(e,"role",t)},xL=e=>Lo.getCurrent(e).bind(r=>hd.isGrowing(r)||hd.hasGrown(r)?Lo.getCurrent(r).bind(f=>fo(fl.getSlotNames(f),v=>fl.isShowing(f,v))):B.none()),KM=un("FixSizeEvent"),YM=un("AutoSizeEvent");var TL=Object.freeze({__proto__:null,block:(e,t,r,c)=>{Bn(e.element,"aria-busy",!0);const d=t.getRoot(e).getOr(e),f=Et([xn.config({mode:"special",onTab:()=>B.some(!0),onShiftTab:()=>B.some(!0)}),Un.config({})]),v=c(d,f),x=d.getSystem().build(v);to.append(d,fi(x)),x.hasConfigured(xn)&&t.focus&&xn.focusIn(x),r.isBlocked()||t.onBlock(e),r.blockWith(()=>to.remove(d,x))},unblock:(e,t,r)=>{ae(e.element,"aria-busy"),r.isBlocked()&&t.onUnblock(e),r.clear()},isBlocked:(e,t,r)=>r.isBlocked()}),kL=[ba("getRoot",B.none),Va("focus",!0),Ko("onBlock"),Ko("onUnblock")],EL=Object.freeze({__proto__:null,init:()=>{const e=Ra(e=>e.destroy());return cl({readState:e.isSet,blockWith:r=>{e.set({destroy:r})},clear:e.clear,isBlocked:e.isSet})}});const Ih=Ua({fields:kL,name:"blocking",apis:TL,state:EL}),cv=e=>{const t=be_fromHtml(e),r=Ds(t),c=(e=>Ht(void 0!==e.dom.attributes?e.dom.attributes:[],(r,c)=>"class"===c.name?r:{...r,[c.name]:c.value},{}))(t),d=(e=>Array.prototype.slice.call(e.dom.classList,0))(t),f=0===r.length?{}:{innerHtml:ab(t)};return{tag:ws(t),classes:d,attributes:c,...f}},WB=e=>Lo.getCurrent(e).each(t=>il(t.element)),PL=(e,t,r)=>{const c=_n(!1),d=fr(),f=x=>{c.get()&&!(e=>!!(e=>"focusin"===e.type)(e)&&(e.composed?Ps(e.composedPath()):B.from(e.target)).map(be_fromDom).filter(co).exists(r=>Ui(r,"mce-pastebin")))(x)&&(x.preventDefault(),WB(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",()=>{e.dom.bind(e.getWin(),"focusin",f),e.on("BeforeExecCommand",x=>{"mcefocus"===x.command.toLowerCase()&&!0!==x.value&&f(x)})});const v=x=>{x!==c.get()&&(c.set(x),((e,t,r,c)=>{const d=t.element;if(((e,t)=>{const r="tabindex",c=`data-mce-${r}`;B.from(e.iframeElement).map(be_fromDom).each(d=>{t?(z(d,r).each(f=>Bn(d,c,f)),Bn(d,r,-1)):(ae(d,r),z(d,c).each(f=>{Bn(d,r,f),ae(d,c)}))})})(e,r),r)Ih.block(t,(e=>(t,r)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:cv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(c)),F(d,"display"),ae(d,"aria-hidden"),e.hasFocus()&&WB(t);else{const f=Lo.getCurrent(t).exists(v=>Bd(v.element));Ih.unblock(t),Xt(d,"display","none"),Bn(d,"aria-hidden","true"),f&&e.focus()}})(e,t(),x,r.providers),((e,t)=>{e.dispatch("AfterProgressState",{state:t})})(e,x))};e.on("ProgressState",x=>{if(d.on(clearTimeout),Ln(x.time)){const k=f2.setEditorTimeout(e,()=>v(x.state),x.time);d.set(k)}else v(x.state),d.clear()})},XM=(e,t,r)=>({within:e,extra:t,withinWidth:r}),jB=(e,t,r)=>{const c=((e,t)=>Ht(e,(d,f)=>((x,k)=>{const R=r(x);return B.some({element:x,start:k,finish:k+R,width:R})})(f,d.len).fold(re(d),x=>({len:x.finish,list:d.list.concat([x])})),{len:0,list:[]}).list)(e),d=so(c,x=>x.finish<=t),f=jn(d,(x,k)=>x+k.width,0);return{within:d,extra:c.slice(d.length),withinWidth:f}},AA=e=>Be(e,t=>t.element),GB=(e,t)=>{const r=Be(t,c=>fi(c));$h.setGroups(e,r)},qB=(e,t,r)=>{const c=t.builtGroups.get();if(0===c.length)return;const d=Zd(e,t,"primary"),f=la.getCoupled(e,"overflowGroup");Xt(d.element,"visibility","hidden");const v=c.concat([f]),x=(e=>$o(e,t=>Dl(t.element).bind(r=>t.getSystem().getByDom(r).toOptional())))(v);r([]),GB(d,v);const R=((e,t,r,c)=>{const d=((e,t,r)=>{const c=jB(t,e,r);return 0===c.extra.length?B.some(c):B.none()})(e,t,r).getOrThunk(()=>jB(t,e-r(c),r)),f=d.within,v=d.extra,x=d.withinWidth;return 1===v.length&&v[0].width<=r(c)?((e,t,r)=>{const c=AA(e.concat(t));return XM(c,[],r)})(f,v,x):v.length>=1?((e,t,r,c)=>{const d=AA(e).concat([r]);return XM(d,AA(t),c)})(f,v,c,x):((e,t,r)=>XM(AA(e),[],r))(f,0,x)})(Fs(d.element),t.builtGroups.get(),I=>Fs(I.element),f);0===R.extra.length?(to.remove(d,f),r([])):(GB(d,R.within),r(R.extra)),F(d.element,"visibility"),ue(d.element),x.each(Un.focus)},KB=re([Wa("splitToolbarBehaviours",[la]),pc("builtGroups",()=>_n([]))]),UL=re([Eu(["overflowToggledClass"]),Bi("getOverflowBounds"),dt("lazySink"),pc("overflowGroups",()=>_n([])),Ko("onOpened"),Ko("onClosed")].concat(KB())),ZL=re([vc({factory:$h,schema:eT(),name:"primary"}),Pl({schema:eT(),name:"overflow"}),Pl({name:"overflow-button"}),Pl({name:"overflow-group"})]),JM=re((e,t)=>{((e,t)=>{const c=Hc.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Xt(e,"max-width",c+"px")})(e,Math.floor(t))}),WL=re([Eu(["toggledClass"]),dt("lazySink"),Sl("fetch"),Bi("getBounds"),Rc("fireDismissalEventInstead",[$e("event",Su())]),ul(),Ko("onToggled")]),jL=re([Pl({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Et([So.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),Pl({factory:$h,schema:eT(),name:"toolbar",overrides:e=>({toolbarBehaviours:Et([xn.config({mode:"cyclic",onEscape:t=>($s(t,e,"button").each(Un.focus),B.none())})])})})]),RA=fr(),QM=(e,t)=>{const r=la.getCoupled(e,"toolbarSandbox");Io.isOpen(r)?Io.close(r):Io.open(r,t.toolbar())},eN=(e,t,r,c)=>{const d=r.getBounds.map(v=>v()),f=r.lazySink(e).getOrDie();Nc.positionWithinBounds(f,t,{anchor:{type:"hotspot",hotspot:e,layouts:c,overrides:{maxWidthFunction:JM()}}},d)},YB=(e,t,r,c,d)=>{$h.setGroups(t,d),eN(e,t,r,c),So.on(e)},iv=Wc({name:"FloatingToolbarButton",factory:(e,t,r,c)=>({...jc.sketch({...c.button(),action:d=>{QM(d,c)},buttonBehaviours:au_augment({dump:c.button().buttonBehaviours},[la.config({others:{toolbarSandbox:d=>((e,t,r)=>{const c=Dv();return{dom:{tag:"div",attributes:{id:c.id}},behaviours:Et([xn.config({mode:"special",onEscape:v=>(Io.close(v),B.some(!0))}),Io.config({onOpen:(v,x)=>{const k=RA.get().getOr(!1);r.fetch().get(R=>{YB(e,x,r,t.layouts,R),c.link(e.element),k||xn.focusIn(x)})},onClose:()=>{So.off(e),RA.get().getOr(!1)||Un.focus(e),c.unlink(e.element)},isPartOf:(v,x,k)=>lg(x,k)||lg(e,k),getAttachPoint:()=>r.lazySink(e).getOrDie()}),ai.config({channels:{...t0({isExtraPart:De,...r.fireDismissalEventInstead.map(v=>({fireEventInstead:{event:v.event}})).getOr({})}),...hf({doReposition:()=>{Io.getState(la.getCoupled(e,"toolbarSandbox")).each(v=>{eN(e,v,r,t.layouts)})}})}})])}})(d,r,e)}})])}),apis:{setGroups:(d,f)=>{Io.getState(la.getCoupled(d,"toolbarSandbox")).each(v=>{YB(d,v,e,r.layouts,f)})},reposition:d=>{Io.getState(la.getCoupled(d,"toolbarSandbox")).each(f=>{eN(d,f,e,r.layouts)})},toggle:d=>{QM(d,c)},toggleWithoutFocusing:d=>{((e,t)=>{RA.set(!0),QM(e,t),RA.clear()})(d,c)},getToolbar:d=>Io.getState(la.getCoupled(d,"toolbarSandbox")),isOpen:d=>Io.isOpen(la.getCoupled(d,"toolbarSandbox"))}}),configFields:WL(),partFields:jL(),apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),KL=re([dt("items"),Eu(["itemSelector"]),Wa("tgroupBehaviours",[xn])]),YL=re([$l({name:"items",unit:"item"})]),DA=Wc({name:"ToolbarGroup",configFields:KL(),partFields:YL(),factory:(e,t,r,c)=>({uid:e.uid,dom:e.dom,components:t,behaviours:ja(e.tgroupBehaviours,[xn.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),XB=e=>Be(e,t=>fi(t)),JB=(e,t,r)=>{qB(e,r,c=>{r.overflowGroups.set(c),t.getOpt(e).each(d=>{iv.setGroups(d,XB(c))})})},QB=Wc({name:"SplitFloatingToolbar",configFields:UL(),partFields:ZL(),factory:(e,t,r,c)=>{const d=ks(iv.sketch({fetch:()=>Pc_nu(f=>{f(XB(e.overflowGroups.get()))}),layouts:{onLtr:()=>[Aa,ur],onRtl:()=>[ur,Aa],onBottomLtr:()=>[Qs,pi],onBottomRtl:()=>[pi,Qs]},getBounds:r.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(f,v)=>e[v?"onOpened":"onClosed"](f)}));return{uid:e.uid,dom:e.dom,components:t,behaviours:ja(e.splitToolbarBehaviours,[la.config({others:{overflowGroup:()=>DA.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(f,v)=>{e.builtGroups.set(Be(v,f.getSystem().build)),JB(f,d,e)},refresh:f=>JB(f,d,e),toggle:f=>{d.getOpt(f).each(v=>{iv.toggle(v)})},toggleWithoutFocusing:f=>{d.getOpt(f).each(iv.toggleWithoutFocusing)},isOpen:f=>d.getOpt(f).map(iv.isOpen).getOr(!1),reposition:f=>{d.getOpt(f).each(v=>{iv.reposition(v)})},getOverflow:f=>d.getOpt(f).bind(iv.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),QL=re([Eu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ko("onOpened"),Ko("onClosed")].concat(KB())),eH=re([vc({factory:$h,schema:eT(),name:"primary"}),vc({factory:$h,schema:eT(),name:"overflow",overrides:e=>({toolbarBehaviours:Et([hd.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{$s(t,e,"overflow-button").each(r=>{So.off(r),Un.focus(r)}),e.onClosed(t)},onGrown:t=>{xn.focusIn(t),e.onOpened(t)},onStartGrow:t=>{$s(t,e,"overflow-button").each(So.on)}}),xn.config({mode:"acyclic",onEscape:t=>($s(t,e,"overflow-button").each(Un.focus),B.some(!0))})])})}),Pl({name:"overflow-button",overrides:e=>({buttonBehaviours:Et([So.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Pl({name:"overflow-group"})]),e6=(e,t)=>{$s(e,t,"overflow-button").bind(()=>$s(e,t,"overflow")).each(r=>{tN(e,t),hd.toggleGrow(r)})},tN=(e,t)=>{$s(e,t,"overflow").each(r=>{qB(e,t,c=>{const d=Be(c,f=>fi(f));$h.setGroups(r,d)}),$s(e,t,"overflow-button").each(c=>{hd.hasGrown(r)&&So.on(c)}),hd.refresh(r)})},nN=Wc({name:"SplitSlidingToolbar",configFields:QL(),partFields:eH(),factory:(e,t,r,c)=>{const d="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:ja(e.splitToolbarBehaviours,[la.config({others:{overflowGroup:v=>DA.sketch({...c["overflow-group"](),items:[jc.sketch({...c["overflow-button"](),action:x=>{es(v,d)}})]})}}),Jn("toolbar-toggle-events",[ut(d,v=>{e6(v,e)})])]),apis:{setGroups:(v,x)=>{((v,x)=>{const k=Be(x,v.getSystem().build);e.builtGroups.set(k)})(v,x),tN(v,e)},refresh:v=>tN(v,e),toggle:v=>e6(v,e),isOpen:v=>((e,t)=>$s(e,t,"overflow").map(hd.hasGrown).getOr(!1))(v,e)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,r)=>{e.setGroups(t,r)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),t6=e=>({dom:{tag:"div",classes:["tox-toolbar__group"],...e.title.fold(()=>({}),r=>({attributes:{title:r}}))},components:[DA.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Et([Xr.config({}),Un.config({})])}),MA=e=>DA.sketch(t6(e)),n6=(e,t)=>{const r=lr(c=>{const d=Be(e.initGroups,MA);$h.setGroups(c,d)});return Et([ld_toolbarButton(e.providers.isDisabled),uc(),xn.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),Jn("toolbar-events",[r])])},o6=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":t6({title:B.none(),items:[]}),"overflow-button":U7({name:"more",icon:B.some("more-drawer"),enabled:!0,tooltip:B.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:B.none(),borderless:!1},B.none(),e.providers)},splitToolbarBehaviours:n6(e,t)}},oH=e=>{const t=o6(e),c=QB.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return QB.sketch({...t,lazySink:e.getSink,getOverflowBounds:()=>{const d=e.moreDrawerData.lazyHeader().element,f=sl(d),v=xi(d),x=sl(v),k=Math.max(v.dom.scrollHeight,x.height);return _s(f.x+4,x.y,f.width-8,k)},parts:{...t.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>e.onToggled(d,!0),onClosed:d=>e.onToggled(d,!1)})},sH=e=>{const t=nN.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),r=nN.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=o6(e);return nN.sketch({...c,components:[t,r],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([jM()],{type:"opened"}),e.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([jM()],{type:"closed"}),e.onToggled(d,!1)}})},NA=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return $h.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===Mu.scrolling?["tox-toolbar--scrolling"]:[])},components:[$h.parts.groups({})],toolbarBehaviours:n6(e,t)})},s6=[Mh,cd,ec("tooltip"),rl("buttonType","secondary",["primary","secondary"]),Va("borderless",!1),Sl("onAction")],r6={button:[...s6,qi,xl("type",["button"])],togglebutton:[...s6,Va("active",!1),xl("type",["togglebutton"])]},cH=[xl("type",["group"]),Fi("buttons",[],Qa("type",r6))],iH=Qa("type",{...r6,group:cH}),lH=Tn([Fi("buttons",[],iH),Sl("onShow"),Sl("onHide")]),a6=(e,t)=>((e,t)=>{var r,c;const d="togglebutton"===e.type,f=e.icon.map(Qe=>rv(Qe,t.icons)).map(ks),k={...e,name:d?e.text.getOr(e.icon.getOr("")):null!==(r=e.text)&&void 0!==r?r:e.icon.getOr(""),primary:"primary"===e.buttonType,buttonType:B.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless},R=RM(null!==(c=e.buttonType)&&void 0!==c?c:"secondary"),I=d?e.text.map(t.translate):B.some(t.translate(e.text)),V=I.map(Yr),Z=k.tooltip.or(I).map(Qe=>({"aria-label":t.translate(Qe),title:t.translate(Qe)})).getOr({}),Y=f.map(Qe=>Qe.asSpec()),oe=W0([Y,V]),pe=e.icon.isSome()&&V.isSome(),Ge={tag:"button",classes:R.concat(...e.icon.isSome()&&!pe?["tox-button--icon"]:[]).concat(...pe?["tox-button--icon-and-text"]:[]).concat(...e.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===e.type&&e.active?["tox-button--enabled"]:[]),attributes:Z},xe=CA(k,B.some(Qe=>{const He=Mt=>{f.map(Gt=>Gt.getOpt(Qe).each(Do=>{to.set(Do,[rv(Mt,t.icons)])}))};return d?e.onAction({setIcon:He,setActive:Mt=>{const Gt=Qe.element;Mt?(va(Gt,"tox-button--enabled"),Bn(Gt,"aria-pressed",!0)):(Hr(Gt,"tox-button--enabled"),ae(Gt,"aria-pressed"))},isActive:()=>Ui(Qe.element,"tox-button--enabled")}):"button"===e.type?e.onAction({setIcon:He}):void 0}),[],Ge,oe,t);return jc.sketch(xe)})(e,t),c6=_i().deviceType,gH=c6.isPhone(),hH=c6.isTablet();var tT=Wc({name:"silver.View",configFields:[dt("viewConfig")],partFields:[Fl({factory:{sketch:e=>{let t=!1;const r=Be(e.buttons,c=>"group"===c.type?(t=!0,((e,t)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Be(e.buttons,r=>a6(r,t))}))(c,e.providers)):a6(c,e.providers));return{uid:e.uid,dom:{tag:"div",classes:[t?"tox-view__toolbar":"tox-view__header",...gH||hH?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Et([Un.config({}),xn.config({mode:"flow",selector:"button, .tox-button",focusInside:Bc.OnEnterOrSpaceMode})]),components:t?r:[Gd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Gd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:r})]}}},schema:[dt("buttons"),dt("providers")],name:"header"}),Fl({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(e,t,r,c)=>({uid:e.uid,dom:e.dom,components:t,apis:{getPane:f=>Jc.getPart(f,e,"pane"),getOnShow:f=>e.viewConfig.onShow,getOnHide:f=>e.viewConfig.onHide}}),apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}});const vH=(e,t,r)=>jr(t,(c,d)=>{const f=Uc((e=>Ar("view",lH,e))(c));return e.slot(d,tT.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:f,components:[...f.buttons.length>0?[tT.parts.header({buttons:f.buttons,providers:r})]:[],tT.parts.pane({})]}))}),yH=(e,t)=>fl.sketch(r=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:vH(r,e,t),slotBehaviours:Hm_unnamedEvents([lr(c=>fl.hideAllSlots(c))])})),i6=e=>fo(fl.getSlotNames(e),t=>fl.isShowing(e,t)),l6=(e,t,r)=>{fl.getSlot(e,t).each(c=>{tT.getPane(c).each(d=>{r(c)((e=>({getContainer:re(e)}))(d.element.dom))})})};var BA=yc({factory:(e,t)=>{const f={setViews:(v,x)=>{to.set(v,[yH(x,t.backstage.shared.providers)])},whichView:v=>Lo.getCurrent(v).bind(i6),toggleView:(v,x,k,R)=>Lo.getCurrent(v).exists(I=>{const V=i6(I),Z=V.exists(oe=>R===oe),Y=fl.getSlot(I,R).isSome();return Y&&(fl.hideAllSlots(I),Z?((e=>{const t=e.element;Xt(t,"display","none"),Bn(t,"aria-hidden","true")})(v),x()):(k(),(e=>{const t=e.element;F(t,"display"),ae(t,"aria-hidden")})(v),fl.showSlot(I,R),((e,t)=>{l6(e,t,tT.getOnShow)})(I,R)),V.each(oe=>((e,t)=>l6(e,t,tT.getOnHide))(I,oe))),Y})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Et([to.config({}),Lo.config({find:v=>{const x=to.contents(v);return Ps(x)}})]),apis:f}},name:"silver.ViewWrapper",configFields:[dt("backstage")],apis:{setViews:(e,t,r)=>e.setViews(t,r),toggleView:(e,t,r,c,d)=>e.toggleView(t,r,c,d),whichView:(e,t)=>e.whichView(t)}});const EH=qf.optional({factory:qM,name:"menubar",schema:[dt("backstage")]}),OH=qf.optional({factory:{sketch:e=>TB.sketch({uid:e.uid,dom:e.dom,listBehaviours:Et([xn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>NA({type:e.type,uid:un("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),B.some(!0))}),setupItem:(t,r,c,d)=>{$h.setGroups(r,c)},shell:!0})},name:"multiple-toolbar",schema:[dt("dom"),dt("onEscape")]}),AH=qf.optional({factory:{sketch:e=>{const t=(e=>e.type===Mu.sliding?sH:e.type===Mu.floating?oH:NA)(e);return t({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),B.some(!0)),onToggled:(c,d)=>e.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[dt("dom"),dt("onEscape"),dt("getSink")]}),RH=qf.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:e.components,behaviours:Et((e.sticky?HB:kB)(e.editor,e.sharedBackstage))})},name:"header",schema:[dt("dom")]}),DH=qf.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"\u26a1\ufe0fUpgrade"}}]})},name:"promotion",schema:[dt("dom")]}),MH=qf.optional({name:"socket",schema:[dt("dom")]}),NH=qf.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Et([Xr.config({}),Un.config({}),hd.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:t=>{Lo.getCurrent(t).each(fl.hideAllSlots),es(t,YM)},onGrown:t=>{es(t,YM)},onStartGrow:t=>{wn(t,KM,{width:Ws(t.element,"width").getOr("")})},onStartShrink:t=>{wn(t,KM,{width:Fs(t.element)+"px"})}}),to.config({}),Lo.config({find:t=>{const r=to.contents(t);return Ps(r)}})])}],behaviours:Et([Ig_childAt(0),Jn("sidebar-sliding-events",[ut(KM,(t,r)=>{Xt(t.element,"width",r.event.width)}),ut(YM,(t,r)=>{F(t.element,"width")})])])})},name:"sidebar",schema:[dt("dom")]}),BH=qf.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Et([to.config({}),Ih.config({focus:!1}),Lo.config({find:t=>Ps(t.components())})]),components:[]})},name:"throbber",schema:[dt("dom")]}),PH=qf.optional({factory:BA,name:"viewWrapper",schema:[dt("backstage")]}),$H=qf.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components})},name:"editorContainer",schema:[]});var Er=Wc({name:"OuterContainer",factory:(e,t,r)=>{let c=!1;const d={getSocket:f=>Jc.getPart(f,e,"socket"),setSidebar:(f,v,x)=>{Jc.getPart(f,e,"sidebar").each(k=>((e,t,r)=>{Lo.getCurrent(e).each(d=>{to.set(d,[yL(t)]);const f=r?.toLowerCase();bn(f)&&Qn(t,f)&&Lo.getCurrent(d).each(v=>{fl.showSlot(v,f),hd.immediateGrow(d),F(d.element,"width"),OA(e.element,"region")})})})(k,v,x))},toggleSidebar:(f,v)=>{Jc.getPart(f,e,"sidebar").each(x=>((e,t)=>{Lo.getCurrent(e).each(c=>{Lo.getCurrent(c).each(f=>{hd.hasGrown(c)?fl.isShowing(f,t)?(hd.shrink(c),OA(e.element,"presentation")):(fl.hideAllSlots(f),fl.showSlot(f,t),OA(e.element,"region")):(fl.hideAllSlots(f),fl.showSlot(f,t),hd.grow(c),OA(e.element,"region"))})})})(x,v))},whichSidebar:f=>Jc.getPart(f,e,"sidebar").bind(xL).getOrNull(),getHeader:f=>Jc.getPart(f,e,"header"),getToolbar:f=>Jc.getPart(f,e,"toolbar"),setToolbar:(f,v)=>{Jc.getPart(f,e,"toolbar").each(x=>{const k=Be(v,MA);x.getApis().setGroups(x,k)})},setToolbars:(f,v)=>{Jc.getPart(f,e,"multiple-toolbar").each(x=>{const k=Be(v,R=>Be(R,MA));TB.setItems(x,k)})},refreshToolbar:f=>{Jc.getPart(f,e,"toolbar").each(x=>x.getApis().refresh(x))},toggleToolbarDrawer:f=>{Jc.getPart(f,e,"toolbar").each(v=>{qa(v.getApis().toggle,x=>x(v))})},toggleToolbarDrawerWithoutFocusing:f=>{Jc.getPart(f,e,"toolbar").each(v=>{qa(v.getApis().toggleWithoutFocusing,x=>x(v))})},isToolbarDrawerToggled:f=>Jc.getPart(f,e,"toolbar").bind(v=>B.from(v.getApis().isOpen).map(x=>x(v))).getOr(!1),getThrobber:f=>Jc.getPart(f,e,"throbber"),focusToolbar:f=>{Jc.getPart(f,e,"toolbar").orThunk(()=>Jc.getPart(f,e,"multiple-toolbar")).each(x=>{xn.focusIn(x)})},setMenubar:(f,v)=>{Jc.getPart(f,e,"menubar").each(x=>{qM.setMenus(x,v)})},focusMenubar:f=>{Jc.getPart(f,e,"menubar").each(v=>{qM.focus(v)})},setViews:(f,v)=>{Jc.getPart(f,e,"viewWrapper").each(x=>{BA.setViews(x,v)})},toggleView:(f,v)=>Jc.getPart(f,e,"viewWrapper").exists(x=>BA.toggleView(x,()=>d.showMainView(f),()=>d.hideMainView(f),v)),whichView:f=>Jc.getPart(f,e,"viewWrapper").bind(BA.whichView).getOrNull(),hideMainView:f=>{c=d.isToolbarDrawerToggled(f),c&&d.toggleToolbarDrawer(f),Jc.getPart(f,e,"editorContainer").each(v=>{const x=v.element;Xt(x,"display","none"),Bn(x,"aria-hidden","true")})},showMainView:f=>{c&&d.toggleToolbarDrawer(f),Jc.getPart(f,e,"editorContainer").each(v=>{const x=v.element;F(x,"display"),ae(x,"aria-hidden")})}};return{uid:e.uid,dom:e.dom,components:t,apis:d,behaviours:e.behaviours}},configFields:[dt("dom"),dt("behaviours")],partFields:[RH,EH,AH,OH,MH,NH,DH,BH,PH,$H],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,r,c)=>{e.setSidebar(t,r,c)},toggleSidebar:(e,t,r)=>{e.toggleSidebar(t,r)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,r)=>{e.setToolbar(t,r)},setToolbars:(e,t,r)=>{e.setToolbars(t,r)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,r)=>{e.setMenubar(t,r)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,r)=>{e.setViews(t,r)},toggleView:(e,t,r)=>e.toggleView(t,r),whichView:(e,t)=>e.whichView(t)}});const u6={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},oN=e=>e.split(" "),d6=(e,t)=>{const r={...u6,...t.menus},c=Xo(t.menus).length>0,d=oN(void 0===t.menubar||!0===t.menubar?"file edit view insert format tools table help":!1===t.menubar?"":t.menubar),f=so(d,x=>{const k=Qn(u6,x);return c?k||rt(t.menus,x).exists(R=>Qn(R,"items")):k}),v=Be(f,x=>{const k=r[x];return((e,t,r)=>{const c=Kk(r).split(/[ ,]/);return{text:e.title,getItems:()=>No(e.items,d=>{const f=d.toLowerCase();return 0===f.trim().length||Ys(c,v=>v===f)?[]:"separator"===f||"|"===f?[{type:"separator"}]:t.menuItems[f]?[t.menuItems[f]]:[]})}})({title:k.title,items:oN(k.items)},t,e)});return so(v,x=>x.getItems().length>0&&Ys(x.getItems(),R=>bn(R)||"separator"!==R.type))},m6=e=>{const t=()=>{e._skinLoaded=!0,(e=>{e.dispatch("SkinLoaded")})(e)};return()=>{e.initialized?t():e.on("init",t)}},g6=(e,t,r)=>(e.on("remove",()=>r.unload(t)),r.load(t)),VH=(e,t)=>g6(e,t+"/skin.min.css",e.ui.styleSheetLoader),zH=(e,t)=>(e=>Eo(e).isSome())(be_fromDom(e.getElement()))?g6(e,t+"/skin.shadowdom.min.css",Df.DOM.styleSheetLoader):Promise.resolve(),h6=(e,t)=>{const r=iE(t);return r&&t.contentCSS.push(r+(e?"/content.inline":"/content")+".min.css"),!cE(t)&&bn(r)?Promise.all([VH(t,r),zH(t,r)]).then(m6(t),((e,t)=>()=>((e,t)=>{e.dispatch("SkinLoadError",t)})(e,{message:"Skin could not be loaded"}))(t)):Promise.resolve(m6(t)())},UH=ko(h6,!1),ZH=ko(h6,!0),WH=(e,t,r)=>{const c=(x,k,R,I)=>{const V=t.shared.providers.translate(x.title);if("separator"===x.type)return B.some({type:"separator",text:V});if("submenu"===x.type){const Z=No(x.getStyleItems(),Y=>d(Y,k,I));return 0===k&&Z.length<=0?B.none():B.some({type:"nestedmenuitem",text:V,enabled:Z.length>0,getSubmenuItems:()=>No(x.getStyleItems(),Y=>d(Y,k,I))})}return B.some({type:"togglemenuitem",text:V,icon:x.icon,active:x.isSelected(I),enabled:!R,onAction:r.onAction(x),...x.getStylePreview().fold(()=>({}),Z=>({meta:{style:Z}}))})},d=(x,k,R)=>{const I="formatter"===x.type&&r.isInvalid(x);return 0===k?I?[]:c(x,k,!1,R).toArray():c(x,k,I,R).toArray()},f=x=>{const k=r.getCurrentValue(),R=r.shouldHide?0:1;return No(x,I=>d(I,R,k))};return{validateItems:f,getFetch:(x,k)=>(R,I)=>{const V=k(),Z=f(V);I(QS(Z,Im.CLOSE_ON_EXECUTE,x,{isHorizontalMenu:!1,search:B.none()}))}}},nT=(e,t,r)=>{const c=r.dataset,d="basic"===c.type?()=>Be(c.data,f=>dB(f,r.isSelectedFor,r.getPreviewFor)):c.getData;return{items:WH(0,t,r),getStyleItems:d}},W_=(e,t,r)=>{const{items:c,getStyleItems:d}=nT(0,t,r),v=Vf(e,"NodeChange",x=>{const k=x.getComponent();r.updateText(k),Nn.set(x.getComponent(),!e.selection.isEditable())});return yM({text:r.icon.isSome()?B.none():r.text,icon:r.icon,tooltip:B.from(r.tooltip),role:B.none(),fetch:c.getFetch(t,d),onSetup:v,getApi:x=>({getComponent:re(x)}),columns:1,presets:"normal",classes:r.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};var oT;!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(oT||(oT={}));const sN=(e,t,r)=>{const d=(e=>Be(e,t=>{let r=t,c=t;const d=t.split("=");return d.length>1&&(r=d[0],c=d[1]),{title:r,format:c}}))(((e,t)=>t===oT.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "))(e.options.get(t),r));return{type:"basic",data:d}},rN=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],f6=e=>{const f=(e=>({type:"basic",data:e}))(rN);return{tooltip:"Align",text:B.none(),icon:B.some("align-left"),isSelectedFor:x=>()=>e.formatter.match(x),getCurrentValue:B.none,getPreviewFor:x=>B.none,onAction:x=>()=>fo(rN,k=>k.format===x.format).each(k=>e.execCommand(k.command)),updateText:x=>{const R=fo(rN,x=>e.formatter.match(x.format)).fold(re("left"),I=>I.title.toLowerCase());wn(x,sw,{icon:`align-${R}`})},dataset:f,shouldHide:!1,isInvalid:x=>!e.formatter.canApply(x.format)}},p6=(e,t)=>{const r=t(),c=Be(r,d=>d.format);return B.from(e.formatter.closest(c)).bind(d=>fo(r,f=>f.format===d)).orThunk(()=>rr(e.formatter.match("p"),{title:"Paragraph",format:"p"}))},b6=e=>{const t="Paragraph",f=sN(e,"block_formats",oT.SemiColon);return{tooltip:"Blocks",text:B.some(t),icon:B.none(),isSelectedFor:v=>()=>e.formatter.match(v),getCurrentValue:B.none,getPreviewFor:v=>()=>{const x=e.formatter.get(v);return x?B.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(v))}):B.none()},onAction:n_(e),updateText:v=>{const k=p6(e,()=>f.data).fold(re(t),R=>R.title);wn(v,Wm,{text:k})},dataset:f,shouldHide:!1,isInvalid:v=>!e.formatter.canApply(v.format)}},QH=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],v6=e=>{const t=e.split(/\s*,\s*/);return Be(t,r=>r.replace(/^['"]+|['"]+$/g,""))},y6=e=>{const t="System Font",r=()=>{const R=oe=>oe?v6(oe)[0]:"",I=e.queryCommandValue("FontName"),V=k.data,Z=I?I.toLowerCase():"";return{matchOpt:fo(V,oe=>{const pe=oe.format;return pe.toLowerCase()===Z||R(pe).toLowerCase()===R(Z).toLowerCase()}).orThunk(()=>rr((e=>0===e.indexOf("-apple-system")&&(()=>{const r=v6(e.toLowerCase());return yr(QH,c=>r.indexOf(c.toLowerCase())>-1)})())(Z),{title:t,format:Z})),font:I}},k=sN(e,"font_family_formats",oT.SemiColon);return{tooltip:"Fonts",text:B.some(t),icon:B.none(),isSelectedFor:R=>I=>I.exists(V=>V.format===R),getCurrentValue:()=>{const{matchOpt:R}=r();return R},getPreviewFor:R=>()=>B.some({tag:"div",styles:-1===R.indexOf("dings")?{"font-family":R}:{}}),onAction:R=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontName",!1,R.format)})},updateText:R=>{const{matchOpt:I,font:V}=r(),Z=I.fold(re(V),Y=>Y.title);wn(R,Wm,{text:Z})},dataset:k,shouldHide:!1,isInvalid:De}},o9={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},s9=(()=>{const e="[0-9]+",r="[eE][+-]?[0-9]+",d=x=>`(?:${x})?`,v=`[+-]?(?:${["Infinity",e+"\\."+d(e)+d(r),"\\."+e+d(r),e+d(r)].join("|")})`;return new RegExp(`^(${v})(.*)$`)})(),PA=(e,t)=>B.from(s9.exec(e)).bind(c=>{const d=Number(c[1]),f=c[2];return((e,t)=>Ys(t,r=>Ys(o9[r],c=>e===c)))(f,t)?B.some({value:d,unit:f}):B.none()}),w6={tab:re(9),escape:re(27),enter:re(13),backspace:re(8),delete:re(46),left:re(37),up:re(38),right:re(39),down:re(40),space:re(32),home:re(36),end:re(35),pageUp:re(33),pageDown:re(34)},i9={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},l9={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},d9=(e,t)=>/[0-9.]+px$/.test(e)?((e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r})(72*parseInt(e,10)/96,t||0)+"pt":rt(l9,e).getOr(e),m9=e=>rt(i9,e).getOr(""),C6=e=>{const t=()=>{let k=B.none();const R=x.data,I=e.queryCommandValue("FontSize");if(I)for(let V=3;k.isNone()&&V>=0;V--){const Z=d9(I,V),Y=m9(Z);k=fo(R,oe=>oe.format===I||oe.format===Z||oe.format===Y)}return{matchOpt:k,size:I}},d=re(B.none),x=sN(e,"font_size_formats",oT.Space);return{tooltip:"Font sizes",text:B.some("12pt"),icon:B.none(),isSelectedFor:k=>R=>R.exists(I=>I.format===k),getPreviewFor:d,getCurrentValue:()=>{const{matchOpt:k}=t();return k},onAction:k=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontSize",!1,k.format)})},updateText:k=>{const{matchOpt:R,size:I}=t(),V=R.fold(re(I),Z=>Z.title);wn(k,Wm,{text:V})},dataset:x,shouldHide:!1,isInvalid:De}},x6=(e,t)=>{const r="Paragraph";return{tooltip:"Formats",text:B.some(r),icon:B.none(),isSelectedFor:v=>()=>e.formatter.match(v),getCurrentValue:B.none,getPreviewFor:v=>()=>{const x=e.formatter.get(v);return void 0!==x?B.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(v))}):B.none()},onAction:n_(e),updateText:v=>{const x=V=>aB(V)?No(V.items,x):cB(V)?[{title:V.title,format:V.format}]:[],k=No(uB(e),x),I=p6(e,re(k)).fold(re(r),V=>V.title);wn(v,Wm,{text:I})},shouldHide:t3(e),isInvalid:v=>!e.formatter.canApply(v.format),dataset:t}},x9=re([dt("toggleClass"),dt("fetch"),nu("onExecute"),$e("getHotspot",B.some),$e("getAnchorOverrides",re({})),ul(),nu("onItemExecute"),us("lazySink"),dt("dom"),Ko("onOpen"),Wa("splitDropdownBehaviours",[la,xn,Un]),$e("matchWidth",!1),$e("useMinWidth",!1),$e("eventOrder",{}),us("role")].concat(S_())),S9=vc({factory:jc,schema:[dt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Et([Un.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Ol)},buttonBehaviours:Et([So.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),T9=vc({factory:jc,schema:[dt("dom")],name:"button",defaults:()=>({buttonBehaviours:Et([Un.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(r=>{e.onExecute(r,t)})}})}),k9=re([S9,T9,Fl({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[dt("text")],name:"aria-descriptor"}),Pl({schema:[Tb()],name:"menu",defaults:e=>({onExecute:(t,r)=>{t.getSystem().getByUid(e.uid).each(c=>{e.onItemExecute(c,t,r)})}})}),FS()]),FA=Wc({name:"SplitDropdown",configFields:x9(),partFields:k9(),factory:(e,t,r,c)=>{const d=I=>{Lo.getCurrent(I).each(V=>{rs.highlightFirst(V),xn.focusIn(V)})},f=I=>{$S(e,gt,I,c,d,ml.HighlightMenuAndItem).get(ve)},x=I=>{const V=Zd(I,e,"button");return Ol(V),B.some(!0)},k={...ss([lr((I,V)=>{$s(I,e,"aria-descriptor").each(Y=>{const oe=un("aria");Bn(Y.element,"id",oe),Bn(I.element,"aria-describedby",oe)})})]),...d2(B.some(f))};return{uid:e.uid,dom:e.dom,components:t,apis:{repositionMenus:I=>{So.isOn(I)&&x_(I)}},eventOrder:{...e.eventOrder,[Hi()]:["disabling","toggling","alloy.base.behaviour"]},events:k,behaviours:ja(e.splitDropdownBehaviours,[la.config({others:{sandbox:I=>{const V=Zd(I,e,"arrow");return LS(e,I,{onOpen:()=>{So.on(V),So.on(I)},onClose:()=>{So.off(V),So.off(I)}})}}}),xn.config({mode:"special",onSpace:x,onEnter:x,onDown:I=>(f(I),B.some(!0))}),Un.config({}),So.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),S6=e=>({isEnabled:()=>!Nn.isDisabled(e),setEnabled:t=>Nn.set(e,!t),setText:t=>wn(e,Wm,{text:t}),setIcon:t=>wn(e,sw,{icon:t})}),_9=e=>({setActive:t=>{So.set(e,t)},isActive:()=>So.isOn(e),isEnabled:()=>!Nn.isDisabled(e),setEnabled:t=>Nn.set(e,!t),setText:t=>wn(e,Wm,{text:t}),setIcon:t=>wn(e,sw,{icon:t})}),T6=(e,t)=>e.map(r=>({"aria-label":t.translate(r),title:t.translate(r)})).getOr({}),k6=un("focus-button"),aN=(e,t,r,c,d)=>{const f=t.map(x=>ks(E5(x,"tox-tbtn",d))),v=e.map(x=>ks(rv(x,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:T6(r,d)},components:W0([v.map(x=>x.asSpec()),f.map(x=>x.asSpec())]),eventOrder:{[ds()]:["focusing","alloy.base.behaviour",ow],[_l()]:[ow,"toolbar-group-button-events"]},buttonBehaviours:Et([ld_toolbarButton(d.isDisabled),uc(),Jn(ow,[lr((x,k)=>bM(x)),ut(Wm,(x,k)=>{f.bind(R=>R.getOpt(x)).each(R=>{to.set(R,[Yr(d.translate(k.event.text))])})}),ut(sw,(x,k)=>{v.bind(R=>R.getOpt(x)).each(R=>{to.set(R,[rv(k.event.icon,d.icons)])})}),ut(ds(),(x,k)=>{k.event.prevent(),es(x,k6)})])].concat(c.getOr([])))}},E6=(e,t,r)=>{var c;const d=_n(ve),f=aN(e.icon,e.text,e.tooltip,B.none(),r);return jc.sketch({dom:f.dom,components:f.components,eventOrder:T5,buttonBehaviours:{...Et([Jn("toolbar-button-events",[VF({onAction:e.onAction,getApi:t.getApi}),If(t,d),Lf(t,d)]),ld_toolbarButton(()=>!e.enabled||r.isDisabled()),uc()].concat(t.toolbarButtonBehaviours)),[ow]:null===(c=f.buttonBehaviours)||void 0===c?void 0:c[ow]}})},_6=(e,t,r)=>E6(e,{toolbarButtonBehaviours:r.length>0?[Jn("toolbarButtonWith",r)]:[],getApi:S6,onSetup:e.onSetup},t),O6=(e,t,r)=>E6(e,{toolbarButtonBehaviours:[to.config({}),So.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(r.length>0?[Jn("toolbarToggleButtonWith",r)]:[]),getApi:_9,onSetup:e.onSetup},t),D9=(e,t,r)=>c=>Pc_nu(d=>t.fetch(d)).map(d=>B.from(T_(Js(DS(un("menu-value"),d,f=>{t.onItemAction(e(c),f)},t.columns,t.presets,Im.CLOSE_ON_EXECUTE,t.select.getOr(De),r),{movement:MS(t.columns,t.presets),menuBehaviours:Hm_unnamedEvents("auto"!==t.columns?[]:[lr((f,v)=>{pS(f,4,bE(t.presets)).each(({numRows:x,numColumns:k})=>{xn.setGridSize(f,x,k)})})])})))),N9=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],j_=(e,t)=>(r,c,d)=>{const f=e(r).mapError(v=>Zu(v)).getOrDie();return t(f,c,d)},B9={button:j_(R2,(e,t)=>((e,t)=>_6(e,t,[]))(e,t.shared.providers)),togglebutton:j_(PE,(e,t)=>((e,t)=>O6(e,t,[]))(e,t.shared.providers)),menubutton:j_(zB,(e,t)=>H_(e,"tox-tbtn",t,B.none(),!1)),splitbutton:j_(e=>Ar("SplitButton",aL,e),(e,t)=>((e,t)=>{const r=f=>({isEnabled:()=>!Nn.isDisabled(f),setEnabled:v=>Nn.set(f,!v),setIconFill:(v,x)=>{ia(f.element,`svg path[class="${v}"], rect[class="${v}"]`).each(k=>{Bn(k,"fill",x)})},setActive:v=>{Bn(f.element,"aria-pressed",v),ia(f.element,"span").each(x=>{f.getSystem().getByDom(x).each(k=>So.set(k,v))})},isActive:()=>ia(f.element,"span").exists(v=>f.getSystem().getByDom(v).exists(So.isOn)),setText:v=>ia(f.element,"span").each(x=>f.getSystem().getByDom(x).each(k=>wn(k,Wm,{text:v}))),setIcon:v=>ia(f.element,"span").each(x=>f.getSystem().getByDom(x).each(k=>wn(k,sw,{icon:v})))}),c=_n(ve),d={getApi:r,onSetup:e.onSetup};return FA.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...T6(e.tooltip,t.providers)}},onExecute:f=>{const v=r(f);v.isEnabled()&&e.onAction(v)},onItemExecute:(f,v,x)=>{},splitDropdownBehaviours:Et([ld_splitButton(t.providers.isDisabled),uc(),Jn("split-dropdown-events",[lr((f,v)=>bM(f)),ut(k6,Un.focus),If(d,c),Lf(d,c)]),w.config({})]),eventOrder:{[_l()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:D9(r,e,t.providers),parts:{menu:S2(0,0,e.presets)},components:[FA.parts.button(aN(e.icon,e.text,B.none(),B.some([So.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),FA.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:J4("chevron-down",t.providers.icons)},buttonBehaviours:Et([ld_splitButton(t.providers.isDisabled),uc(),Lx()])}),FA.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})})(e,t.shared)),grouptoolbarbutton:j_(e=>Ar("GroupToolbarButton",oL,e),(e,t,r)=>{const c=r.ui.registry.getAll().buttons,f={[Zp]:t.shared.header.isPositionedAtTop()?ed.TopToBottom:ed.BottomToTop};if(C1(r)===Mu.floating)return((e,t,r,c)=>{const d=t.shared,f=_n(ve),v={toolbarButtonBehaviours:[],getApi:S6,onSetup:e.onSetup},x=[Jn("toolbar-group-button-events",[If(v,f),Lf(v,f)])];return iv.sketch({lazySink:d.getSink,fetch:()=>Pc_nu(k=>{k(Be(r(e.items),MA))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:aN(e.icon,e.text,e.tooltip,B.some(x),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})})(e,t,v=>$A(r,{buttons:c,toolbar:v,allowToolbarGroups:!1},t,B.none()),f);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},A6={styles:(e,t)=>{const r={type:"advanced",...t.styles};return W_(e,t,x6(e,r))},fontsize:(e,t)=>W_(e,t,C6(e)),fontsizeinput:(e,t)=>((e,t,r)=>{let c=B.none();const f=Vf(e,"NodeChange SwitchMode",xe=>{const Qe=xe.getComponent();c=B.some(Qe),r.updateInputValue(Qe),Nn.set(Qe,!e.selection.isEditable())}),v=xe=>({getComponent:re(xe)}),x=_n(ve),k=un("custom-number-input-events"),R=(xe,Qe,He)=>{const St=(xe=>xe.map(Qe=>Wt.getValue(Qe)).getOr(""))(c),pt=r.getNewValue(St,xe),Mt=St.length-`${pt}`.length,Gt=c.map(fn=>fn.element.dom.selectionStart-Mt),Do=c.map(fn=>fn.element.dom.selectionEnd-Mt);r.onAction(pt,He),c.each(fn=>{Wt.setValue(fn,pt),Qe&&(Gt.each(uo=>fn.element.dom.selectionStart=uo),Do.each(uo=>fn.element.dom.selectionEnd=uo))})},I=(xe,Qe)=>R((He,St)=>He-St,xe,Qe),V=(xe,Qe)=>R((He,St)=>He+St,xe,Qe),Z=xe=>Tc(xe.element).fold(B.none,Qe=>(il(Qe),B.some(!0))),Y=xe=>Bd(xe.element)?(Si(xe.element).each(Qe=>il(Qe)),B.some(!0)):B.none(),oe=(xe,Qe,He,St)=>{const pt=t.shared.providers.translate(He),Mt=un("altExecuting"),Gt=Vf(e,"NodeChange SwitchMode",fn=>{Nn.set(fn.getComponent(),!e.selection.isEditable())}),Do=fn=>{Nn.isDisabled(fn)||xe(!0)};return jc.sketch({dom:{tag:"button",attributes:{title:pt,"aria-label":pt},classes:St.concat(Qe)},components:[vM(Qe,t.shared.providers.icons)],buttonBehaviours:Et([Nn.config({}),Jn(Mt,[If({onSetup:Gt,getApi:v},x),Lf({getApi:v},x),ut(Li(),(fn,uo)=>{(uo.event.raw.keyCode===w6.space()||uo.event.raw.keyCode===w6.enter())&&(Nn.isDisabled(fn)||xe(!1))}),ut(um(),Do),ut(lm(),Do)])]),eventOrder:{[Li()]:[Mt,"keying"],[um()]:[Mt,"alloy.base.behaviour"],[lm()]:[Mt,"alloy.base.behaviour"]}})},pe=ks(oe(xe=>I(!1,xe),"minus","Decrease font size",["highlight-on-focus"])),Ge=ks(oe(xe=>V(!1,xe),"plus","Increase font size",["highlight-on-focus"])),Te=ks({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[S1.sketch({inputBehaviours:Et([Nn.config({}),Jn(k,[If({onSetup:f,getApi:v},x),Lf({getApi:v},x)]),Jn("input-update-display-text",[ut(Wm,(xe,Qe)=>{Wt.setValue(xe,Qe.event.text)}),ut(wu(),xe=>{r.onAction(Wt.getValue(xe))}),ut(nh(),xe=>{r.onAction(Wt.getValue(xe))})]),xn.config({mode:"special",onEnter:xe=>(R(gt,!0,!0),B.some(!0)),onEscape:Z,onUp:xe=>(V(!0,!1),B.some(!0)),onDown:xe=>(I(!0,!1),B.some(!0)),onLeft:(xe,Qe)=>(Qe.cut(),B.none()),onRight:(xe,Qe)=>(Qe.cut(),B.none())})])})],behaviours:Et([Un.config({}),xn.config({mode:"special",onEnter:Y,onSpace:Y,onEscape:Z}),Jn("input-wrapper-events",[ut(Ii(),xe=>{lt([pe,Ge],Qe=>{const He=be_fromDom(Qe.get(xe).element.dom);Bd(He)&&$p(He)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[pe.asSpec(),Te.asSpec(),Ge.asSpec()],behaviours:Et([Un.config({}),xn.config({mode:"flow",focusInside:Bc.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:xe=>Bd(xe.element)?B.none():(il(xe.element),B.some(!0))})])}})(e,t,(e=>{const t=()=>e.queryCommandValue("FontSize");return{updateInputValue:c=>wn(c,Wm,{text:t()}),onAction:(c,d)=>e.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{PA(c,["unsupportedLength","empty"]);const f=PA(c,["unsupportedLength","empty"]).or(PA(t(),["unsupportedLength","empty"])),v=f.map(I=>I.value).getOr(16),x=s3(e),k=f.map(I=>I.unit).filter(I=>""!==I).getOr(x),R=d(v,(e=>{var t;return null!==(t={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[e])&&void 0!==t?t:{step:1}})(k).step);return`${(e=>e>=0)(R)?R:v}${k}`}}})(e)),fontfamily:(e,t)=>W_(e,t,y6(e)),blocks:(e,t)=>W_(e,t,b6(e)),align:(e,t)=>W_(e,t,f6(e))},$A=(e,t,r,c)=>{const d=(e=>{const t=e.toolbar;return!1===t?[]:void 0===t||!0===t?(e=>{const t=Be(N9,r=>{const c=so(r.items,d=>Qn(e,d)||Qn(A6,d));return{name:r.name,items:c}});return so(t,r=>r.items.length>0)})(e.buttons):bn(t)?(e=>{const t=e.split("|");return Be(t,r=>({items:r.trim().split(" ")}))})(t):(e=>en(e,t=>Qn(t,"name")&&Qn(t,"items")))(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(t),f=Be(d,v=>{const x=No(v.items,k=>0===k.trim().length?[]:((e,t,r,c,d,f)=>rt(t,r.toLowerCase()).orThunk(()=>f.bind(v=>$o(v,x=>rt(t,x+r.toLowerCase())))).fold(()=>rt(A6,r.toLowerCase()).map(v=>v(e,d)),v=>"grouptoolbarbutton"!==v.type||c?((e,t,r)=>rt(B9,e.type).fold(()=>(console.error("skipping button defined by",e),B.none()),c=>B.some(c(e,t,r))))(v,d,e):(console.warn(`Ignoring the '${r}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),B.none())))(e,t.buttons,k,t.allowToolbarGroups,r,c).toArray());return{title:B.from(e.translate(v.name)),items:x}});return so(f,v=>v.items.length>0)},R6=(e,t,r,c)=>{const d=t.mainUi.outerContainer,f=r.toolbar,v=r.buttons;if(en(f,bn)){const x=f.map(k=>$A(e,{toolbar:k,buttons:v,allowToolbarGroups:r.allowToolbarGroups},c,B.none()));Er.setToolbars(d,x)}else Er.setToolbar(d,$A(e,r,c,B.none()))},D6=_i(),V9=D6.os.isiOS()&&D6.os.version.major<=12;var Z9=Object.freeze({__proto__:null,render:async(e,t,r,c,d)=>{const{mainUi:f,uiMotherships:v}=t,x=_n(0),k=f.outerContainer;await UH(e);const R=be_fromDom(d.targetNode),I=vt(Ve(R));df(R,f.mothership),((e,t,r)=>{Ah(e)&&df(r.mainUi.mothership.element,r.popupUi.mothership),Cg(t,r.dialogUi.mothership)})(e,I,t),e.on("PostRender",()=>{Er.setSidebar(k,r.sidebar,i3(e)),R6(e,t,r,c),x.set(e.getWin().innerWidth),Er.setMenubar(k,d6(e,r)),Er.setViews(k,r.views),((e,t)=>{const{uiMotherships:r}=t,c=e.dom;let d=e.getWin();const f=e.getDoc().documentElement,v=_n(po(d.innerWidth,d.innerHeight)),x=_n(po(f.offsetWidth,f.offsetHeight)),k=()=>{const Z=v.get();(Z.left!==d.innerWidth||Z.top!==d.innerHeight)&&(v.set(po(d.innerWidth,d.innerHeight)),xS(e))},R=()=>{const Z=e.getDoc().documentElement,Y=x.get();(Y.left!==Z.offsetWidth||Y.top!==Z.offsetHeight)&&(x.set(po(Z.offsetWidth,Z.offsetHeight)),xS(e))},I=Z=>{((e,t)=>{e.dispatch("ScrollContent",t)})(e,Z)};c.bind(d,"resize",k),c.bind(d,"scroll",I);const V=gh(be_fromDom(e.getBody()),"load",R);e.on("hide",()=>{lt(r,Z=>{Xt(Z.element,"display","none")})}),e.on("show",()=>{lt(r,Z=>{F(Z.element,"display")})}),e.on("NodeChange",R),e.on("remove",()=>{V.unbind(),c.unbind(d,"resize",k),c.unbind(d,"scroll",I),d=null})})(e,t)});const V=Er.getSocket(k).getOrDie("Could not find expected socket element");if(V9){Ms(V.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const pe=((e,t)=>{let r=null;return{cancel:()=>{ys(r)||(clearTimeout(r),r=null)},throttle:(...f)=>{ys(r)&&(r=setTimeout(()=>{r=null,e.apply(null,f)},20))}}})(()=>{e.dispatch("ScrollContent")}),Ge=bi(V.element,"scroll",pe.throttle);e.on("remove",Ge.unbind)}N2(e,t),e.addCommand("ToggleSidebar",(pe,Ge)=>{Er.toggleSidebar(k,Ge),e.dispatch("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",()=>{var pe;return null!==(pe=Er.whichSidebar(k))&&void 0!==pe?pe:""}),e.addCommand("ToggleView",(pe,Ge)=>{if(Er.toggleView(k,Ge)){const Te=k.element;f.mothership.broadcastOn([Rm()],{target:Te}),lt(v,xe=>{xe.broadcastOn([Rm()],{target:Te})}),ys(Er.whichView(k))&&(e.focus(),e.nodeChanged(),Er.refreshToolbar(k))}}),e.addQueryValueHandler("ToggleView",()=>{var pe;return null!==(pe=Er.whichView(k))&&void 0!==pe?pe:""});const Z=C1(e);return(Z===Mu.sliding||Z===Mu.floating)&&e.on("ResizeWindow ResizeEditor ResizeContent",()=>{const pe=e.getWin().innerWidth;pe!==x.get()&&(Er.refreshToolbar(t.mainUi.outerContainer),x.set(pe))}),{iframeContainer:V.element.dom,editorContainer:k.element.dom,api:{setEnabled:pe=>{E1(t,!pe)},isEnabled:()=>!Nn.isDisabled(k)}}}});const cN=e=>/^[0-9\.]+(|px)$/i.test(""+e)?B.some(parseInt(""+e,10)):B.none(),iN=e=>Ln(e)?e+"px":e,IA=(e,t,r)=>{const c=t.filter(f=>e<f),d=r.filter(f=>e>f);return c.or(d).getOr(e)},M6=e=>{const t=Vx(e),r=zx(e),c=Zx(e);return cN(t).map(d=>IA(d,r,c))},{ToolbarLocation:lN,ToolbarMode:N6}=u3,K9=(e,t,r,c,d)=>{const{mainUi:f,uiMotherships:v}=r,x=Df.DOM,k=Mf(e),R=$0(e),I=Zx(e).or(M6(e)),V=c.shared.header,Z=V.isPositionedAtTop,Y=C1(e),oe=Y===N6.sliding||Y===N6.floating,pe=_n(!1),Ge=()=>pe.get()&&!e.removed,Te=kn=>oe?kn.fold(re(0),Zo=>Zo.components().length>1?Ut(Zo.components()[1].element):0):0,Mt=()=>{lt(v,kn=>{kn.broadcastOn([Sh()],{})})},Do=kn=>{if(!Ge())return;k||d.on(kn=>{const Zo=I.getOrThunk(()=>{const $t=cN(Ns(ls(),"margin-left")).getOr(0);return Fs(ls())-$r(t).left+$t});Xt(kn.element,"max-width",Zo+"px")});const Zo=k?B.none():(()=>{if(k)return B.none();if($r(f.outerContainer.element).left+fa(f.outerContainer.element)>=window.innerWidth-40||Ws(f.outerContainer.element,"width").isSome()){Xt(f.outerContainer.element,"position","absolute"),Xt(f.outerContainer.element,"left","0px"),F(f.outerContainer.element,"width");const Zo=fa(f.outerContainer.element);return B.some(Zo)}return B.none()})();oe&&Er.refreshToolbar(f.outerContainer),k||(kn=>{d.on(Zo=>{const $t=Er.getToolbar(f.outerContainer),mn=Te($t),Gn=oa(t),{top:Fo,left:On}=((kn,Zo)=>Ah(kn)?LM(Zo):B.none())(e,f.outerContainer.element).fold(()=>({top:Z()?Math.max(Gn.y-Ut(Zo.element)+mn,0):Gn.bottom,left:Gn.x}),fs=>{var Ci;const Pr=oa(fs),Hl=null!==(Ci=fs.dom.scrollTop)&&void 0!==Ci?Ci:0,Yd=Jo(fs,ls()),Xf=Yd?Math.max(Gn.y-Ut(Zo.element)+mn,0):Gn.y-Pr.y+Hl-Ut(Zo.element)+mn;return{top:Z()?Xf:Gn.bottom,left:Yd?Gn.x:Gn.x-Pr.x}}),no={position:"absolute",left:Math.round(On)+"px",top:Math.round(Fo)+"px"},qs=kn.map(fs=>{const Ci=La(),Hl=window.innerWidth-(On-Ci.left);return{width:Math.max(Math.min(fs,Hl),150)+"px"}}).getOr({});Ms(f.outerContainer.element,{...no,...qs})})})(Zo),R&&d.on(kn),Mt()},fn=()=>!(k||!R||!Ge())&&d.get().exists(kn=>{const Zo=V.getDockingMode(),$t=(kn=>{switch($m(e)){case lN.auto:const Zo=Er.getToolbar(f.outerContainer),$t=Te(Zo),mn=Ut(kn.element)-$t,Gn=oa(t);if(Gn.y>mn)return"top";{const On=xi(t),no=Math.max(On.dom.scrollHeight,Ut(On));return Gn.bottom<no-mn||H().bottom<Gn.bottom-mn?"bottom":"top"}case lN.bottom:return"bottom";default:return"top"}})(kn);return $t!==Zo&&((kn=>{d.on(Zo=>{Fa.setModes(Zo,[kn]),V.setDockingMode(kn);const $t=Z()?ed.TopToBottom:ed.BottomToTop;Bn(Zo.element,Zp,$t)})})($t),!0)});return{isVisible:Ge,isPositionedAtTop:Z,show:()=>{pe.set(!0),Xt(f.outerContainer.element,"display","flex"),x.addClass(e.getBody(),"mce-edit-focus"),lt(v,kn=>{F(kn.element,"display")}),fn(),Ah(e)?Do(kn=>Fa.isDocked(kn)?Fa.reset(kn):Fa.refresh(kn)):Do(Fa.refresh)},hide:()=>{pe.set(!1),Xt(f.outerContainer.element,"display","none"),x.removeClass(e.getBody(),"mce-edit-focus"),lt(v,kn=>{Xt(kn.element,"display","none")})},update:Do,updateMode:()=>{fn()&&Do(Fa.reset)},repositionPopups:Mt}},B6=(e,t)=>{const r=oa(e);return{pos:t?r.y:r.bottom,bounds:r}};var X9=Object.freeze({__proto__:null,render:async(e,t,r,c,d)=>{const{mainUi:f}=t,v=fr(),x=be_fromDom(d.targetNode),k=K9(e,x,t,c,v),R=Xk(e);await ZH(e);const I=()=>{if(v.isSet())return void k.show();v.set(Er.getHeader(f.outerContainer).getOrDie());const Z=Xx(e);Ah(e)?(df(x,f.mothership),df(x,t.popupUi.mothership)):Cg(Z,f.mothership),Cg(Z,t.dialogUi.mothership),R6(e,t,r,c),Er.setMenubar(f.outerContainer,d6(e,r)),k.show(),((e,t,r,c)=>{const d=_n(B6(t,r.isPositionedAtTop())),f=R=>{const{pos:I,bounds:V}=B6(t,r.isPositionedAtTop()),{pos:Z,bounds:Y}=d.get(),oe=V.height!==Y.height||V.width!==Y.width;d.set({pos:I,bounds:V}),oe&&xS(e,R),r.isVisible()&&(Z!==I?r.update(Fa.reset):oe&&(r.updateMode(),r.repositionPopups()))};c||(e.on("activate",r.show),e.on("deactivate",r.hide)),e.on("SkinLoaded ResizeWindow",()=>r.update(Fa.reset)),e.on("NodeChange keydown",R=>{requestAnimationFrame(()=>f(R))});let v=0;const x=mM(()=>r.update(Fa.refresh),33);e.on("ScrollWindow",()=>{const R=La().left;R!==v&&(v=R,x.throttle()),r.updateMode()}),Ah(e)&&e.on("ElementScroll",R=>{r.update(Fa.refresh)});const k=Qu();k.set(gh(be_fromDom(e.getBody()),"load",R=>f(R.raw))),e.on("remove",()=>{k.clear()})})(e,x,k,R),e.nodeChanged()};return e.on("show",I),e.on("hide",k.hide),R||(e.on("focus",I),e.on("blur",k.hide)),e.on("init",()=>{(e.hasFocus()||R)&&I()}),N2(e,t),{editorContainer:f.outerContainer.element.dom,api:{show:I,hide:k.hide,setEnabled:Z=>{E1(t,!Z)},isEnabled:()=>!Nn.isDisabled(f.outerContainer)}}}});const P6="contexttoolbar-hide",F6=(e,t)=>ut(S5,(r,c)=>{const f=(e=>({hide:()=>es(e,gp()),getValue:()=>Wt.getValue(e)}))(e.get(r));t.onAction(f,c.event.buttonApi)}),aV_buildInitGroups=(e,t)=>{const r=e.label.fold(()=>({}),f=>({"aria-label":f})),c=ks(S1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:r,selectOnFocus:!0,inputBehaviours:Et([xn.config({mode:"special",onEnter:f=>d.findPrimary(f).map(v=>(Ol(v),!0)),onLeft:(f,v)=>(v.cut(),B.none()),onRight:(f,v)=>(v.cut(),B.none())})])})),d=((e,t,r)=>{const c=Be(t,v=>ks(((e,t,r)=>(e=>"contextformtogglebutton"===e.type)(t)?((e,t,r)=>{const{primary:c,...d}=t.original,f=Uc(PE({...d,type:"togglebutton",onAction:ve}));return O6(f,r,[F6(e,t)])})(e,t,r):((e,t,r)=>{const{primary:c,...d}=t.original,f=Uc(R2({...d,type:"button",onAction:ve}));return _6(f,r,[F6(e,t)])})(e,t,r))(e,v,r)));return{asSpecs:()=>Be(c,v=>v.asSpec()),findPrimary:v=>$o(t,(x,k)=>x.primary?B.from(c[k]).bind(R=>R.getOpt(v)).filter(qe(Nn.isDisabled)):B.none())}})(c,e.commands,t);return[{title:B.none(),items:[c.asSpec()]},{title:B.none(),items:d.asSpecs()}]},I6=(e,t,r)=>t.bottom-e.y>=r&&e.bottom-t.y>=r,uN=e=>{const r=(e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const r=Vl(be_fromDom(e.startContainer),e.startOffset).element;return(Wo(r)?Kr(r):B.some(r)).filter(co).map(d=>d.dom.getBoundingClientRect()).getOr(t)}return t})(e.selection.getRng());if(e.inline){const c=La();return _s(c.left+r.left,c.top+r.top,r.width,r.height)}{const c=sl(be_fromDom(e.getBody()));return _s(c.x+r.left,c.y+r.top,r.width,r.height)}},L6=(e,t,r,c=0)=>{const d=di(window),f=oa(be_fromDom(e.getContentAreaContainer())),v=v2(e)||F0(e)||Oh(e),{x,width:k}=((e,t,r)=>{const c=Math.max(e.x+r,t.x);return{x:c,width:Math.min(e.right-r,t.right)-c}})(f,d,c);if(e.inline&&!v)return _s(x,d.y,k,d.height);{const R=t.header.isPositionedAtTop(),{y:I,bottom:V}=((e,t,r,c,d,f)=>{const v=be_fromDom(e.getContainer()),x=ia(v,".tox-editor-header").getOr(v),k=oa(x),I=c&&!(k.y>=t.bottom);if(e.inline&&I)return{y:Math.max(k.bottom+f,r.y),bottom:r.bottom};if(e.inline&&!I)return{y:r.y,bottom:Math.min(k.y-f,r.bottom)};const V="line"===d?oa(v):t;return I?{y:Math.max(k.bottom+f,r.y),bottom:Math.min(V.bottom-f,r.bottom)}:{y:Math.max(V.y+f,r.y),bottom:Math.min(k.y-f,r.bottom)}})(e,f,d,R,r,c);return _s(x,I,k,V-I)}},H6={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},V6={maxHeightFunction:km(),maxWidthFunction:JM()},z6=e=>"node"===e,gV=(e,t,r,c,d)=>{const f=uN(e),v=c.lastElement().exists(x=>Jo(r,x));return((e,t)=>{const r=e.selection.getRng(),c=Vl(be_fromDom(r.startContainer),r.startOffset);return r.startContainer===r.endContainer&&r.startOffset===r.endOffset-1&&Jo(c.element,t)})(e,r)?v?rB:Hg:v?((e,t,r)=>{const c=Ws(e,"position");Xt(e,"position",t);const d=r();return c.each(f=>Xt(e,"position",f)),d})(t,c.getMode(),()=>I6(f,oa(t),-20)&&!c.isReposition()?b$:rB):("fixed"===c.getMode()?d.y+La().top:d.y)+(Ut(t)+12)<=f.y?Hg:U_},hV=(e,t,r,c)=>{const d=k=>(R,I,V,Z,Y)=>({...gV(e,Z,k,r,Y)({...R,y:Y.y,height:Y.height},I,V,Z,Y),alwaysFit:!0}),f=k=>z6(c)?[d(k)]:[];return t?{onLtr:k=>[tr,ur,Aa,pi,Qs,er].concat(f(k)),onRtl:k=>[tr,Aa,ur,Qs,pi,er].concat(f(k))}:{onLtr:k=>[er,tr,pi,ur,Qs,Aa].concat(f(k)),onRtl:k=>[er,tr,Qs,Aa,pi,ur].concat(f(k))}},dN=(e,t)=>{const r=so(t,f=>f.predicate(e.dom)),{pass:c,fail:d}=Je(r,f=>"contexttoolbar"===f.type);return{contextToolbars:c,contextForms:d}},CV=(e,t)=>{const r={},c=[],d=[],f={},v={},R=Xo(e);return lt(R,I=>{const V=e[I];"contextform"===V.type?((I,V)=>{const Z=Uc((e=>Ar("ContextForm",tD,e))(V));r[I]=Z,Z.launch.map(Y=>{f["form:"+I]={...V.launch,type:"contextformtogglebutton"===Y.type?"togglebutton":"button",onAction:()=>{t(Z)}}}),"editor"===Z.scope?d.push(Z):c.push(Z),v[I]=Z})(I,V):"contexttoolbar"===V.type&&((I,V)=>{(e=>Ar("ContextToolbar",oD,e))(V).each(Z=>{"editor"===V.scope?d.push(Z):c.push(Z),v[I]=Z})})(I,V)}),{forms:r,inNodeScope:c,inEditorScope:d,lookupTable:v,formNavigators:f}},U6=un("forward-slide"),Z6=un("backward-slide"),mN=un("change-slide-event"),gN="tox-pop--resizing",hN="tox-pop--transition",SV=(e,t,r,c)=>{const d=c.backstage,f=d.shared,v=_i().deviceType.isTouch,x=fr(),k=fr(),R=fr(),I=Dc((e=>{const t=_n([]);return Zr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:r=>{t.set([]),Zr.getContent(r).each(c=>{F(c.element,"visibility")}),Hr(r.element,gN),F(r.element,"width")},inlineBehaviours:Et([Jn("context-toolbar-events",[ag(oh(),(r,c)=>{"width"===c.event.raw.propertyName&&(Hr(r.element,gN),F(r.element,"width"))}),ut(mN,(r,c)=>{const d=r.element;F(d,"width");const f=Fs(d);Zr.setContent(r,c.event.contents),va(d,gN);const v=Fs(d);Xt(d,"width",f+"px"),Zr.getContent(r).each(x=>{c.event.focus.bind(k=>(il(k),Dl(d))).orThunk(()=>(xn.focusIn(x),ll(Ve(d))))}),setTimeout(()=>{Xt(r.element,"width",v+"px")},0)}),ut(U6,(r,c)=>{Zr.getContent(r).each(d=>{t.set(t.get().concat([{bar:d,focus:ll(Ve(r.element))}]))}),wn(r,mN,{contents:c.event.forwardContents,focus:B.none()})}),ut(Z6,(r,c)=>{or(t.get()).each(d=>{t.set(t.get().slice(0,t.get().length-1)),wn(r,mN,{contents:fi(d.bar),focus:d.focus})})})]),xn.config({mode:"special",onEscape:r=>or(t.get()).fold(()=>e.onEscape(),c=>(es(r,Z6),B.some(!0)))})]),lazySink:()=>Rt.value(e.sink)})})({sink:r,onEscape:()=>(e.focus(),B.some(!0))})),V=()=>{const fn=R.get().getOr("node"),uo=z6(fn)?1:0;return L6(e,f,fn,uo)},Z=()=>!(e.removed||v()&&d.isContextMenuOpen()),oe=()=>{if(Z()){const fn=V(),uo=ea(R.get(),"node")?((e,t)=>t.filter(r=>ns(r)&&Ka(r)).map(sl).getOrThunk(()=>uN(e)))(e,x.get()):uN(e);return fn.height<=0||!I6(uo,fn,.01)}return!0},pe=()=>{x.clear(),k.clear(),R.clear(),Zr.hide(I)},Ge=()=>{if(Zr.isOpen(I)){const fn=I.element;F(fn,"display"),oe()?Xt(fn,"display","none"):(k.set(0),Zr.reposition(I))}},Te=fn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[fn],behaviours:Et([xn.config({mode:"acyclic"}),Jn("pop-dialog-wrap-events",[lr(uo=>{e.shortcuts.add("ctrl+F9","focus statusbar",()=>xn.focusIn(uo))}),Ku(uo=>{e.shortcuts.remove("ctrl+F9")})])])}),xe=js(()=>CV(t,fn=>{const uo=St([fn]);wn(I,U6,{forwardContents:Te(uo)})})),St=fn=>{const{buttons:uo}=e.ui.registry.getAll(),Yo={...uo,...xe().formNavigators},kn=C1(e)===Mu.scrolling?Mu.scrolling:Mu.default,Zo=En(Be(fn,$t=>"contexttoolbar"===$t.type?((fn,uo)=>$A(e,{buttons:fn,toolbar:uo.items,allowToolbarGroups:!1},c.backstage,B.some(["form:"])))(Yo,$t):((fn,uo)=>aV_buildInitGroups(fn,uo))($t,f.providers)));return NA({type:kn,uid:un("context-toolbar"),initGroups:Zo,onEscape:B.none,cyclicKeying:!0,providers:f.providers})},Mt=(fn,uo)=>{if(Do.cancel(),!Z())return;const Xn=St(fn),Yo=fn[0].position,kn=((fn,uo)=>{const Xn="node"===fn?f.anchors.node(uo):f.anchors.cursor(),Yo=((e,t,r,c)=>"line"===t?{bubble:qt(12,0,H6),layouts:{onLtr:()=>[Mc],onRtl:()=>[Rl]},overrides:V6}:{bubble:qt(0,12,H6,1/12),layouts:hV(e,r,c,t),overrides:V6})(e,fn,v(),{lastElement:x.get,isReposition:()=>ea(k.get(),0),getMode:()=>Nc.getMode(r)});return Js(Xn,Yo)})(Yo,uo);R.set(Yo),k.set(1);const Zo=I.element;F(Zo,"display"),(fn=>ea(Sa(fn,x.get(),Jo),!0))(uo)||(Hr(Zo,hN),Nc.reset(r,I)),Zr.showWithinBounds(I,Te(Xn),{anchor:kn,transition:{classes:[hN],mode:"placement"}},()=>B.some(V())),uo.fold(x.clear,x.set),oe()&&Xt(Zo,"display","none")};let Gt=!1;const Do=mM(()=>{!e.hasFocus()||e.removed||Gt||(Ui(I.element,hN)?Do.throttle():((e,t)=>{const r=be_fromDom(t.getBody()),c=v=>Jo(v,r),f=be_fromDom(t.selection.getNode());return c(v=f)||Cr(r,v)?((e,t,r)=>{const c=dN(e,t);if(c.contextForms.length>0)return B.some({elem:e,toolbars:[c.contextForms[0]]});{const d=dN(e,r);if(d.contextForms.length>0)return B.some({elem:e,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const f=(e=>{if(e.length<=1)return e;{const t=f=>Ys(e,v=>v.position===f),r=f=>so(e,v=>v.position===f),c=t("selection"),d=t("node");if(c||d){if(d&&c){const f=r("node"),v=Be(r("selection"),x=>({...x,position:"node"}));return f.concat(v)}return r(c?"selection":"node")}return r("line")}})(c.contextToolbars.concat(d.contextToolbars));return B.some({elem:e,toolbars:f})}return B.none()}})(f,e.inNodeScope,e.inEditorScope).orThunk(()=>((e,t,r)=>e(t)?B.none():nc(t,c=>{if(co(c)){const{contextToolbars:d,contextForms:f}=dN(c,r.inNodeScope),v=f.length>0?f:(e=>{if(e.length<=1)return e;{const t=c=>fo(e,d=>d.position===c);return t("selection").orThunk(()=>t("node")).orThunk(()=>t("line")).map(c=>c.position).fold(()=>[],c=>so(e,d=>d.position===c))}})(d);return v.length>0?B.some({elem:c,toolbars:v}):B.none()}return B.none()},e))(c,f,e)):B.none();var v})(xe(),e).fold(pe,uo=>{Mt(uo.toolbars,B.some(uo.elem))}))},17);e.on("init",()=>{e.on("remove",pe),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ge),e.on("click keyup focus SetContent",Do.throttle),e.on(P6,pe),e.on("contexttoolbar-show",fn=>{const uo=xe();rt(uo.lookupTable,fn.toolbarKey).each(Xn=>{Mt([Xn],rr(fn.target!==e,fn.target)),Zr.getContent(I).each(xn.focusIn)})}),e.on("focusout",fn=>{f2.setEditorTimeout(e,()=>{Dl(r.element).isNone()&&Dl(I.element).isNone()&&pe()},0)}),e.on("SwitchMode",()=>{e.mode.isReadOnly()&&pe()}),e.on("AfterProgressState",fn=>{fn.state?pe():e.hasFocus()&&Do.throttle()}),e.on("dragstart",()=>{Gt=!0}),e.on("dragend drop",()=>{Gt=!1}),e.on("NodeChange",fn=>{Dl(I.element).fold(Do.throttle,ve)})})},W6=(e,t)=>{const r=()=>{const c=t.getOptions(e),d=t.getCurrent(e).map(t.hash),f=fr();return Be(c,v=>({type:"togglemenuitem",text:t.display(v),onSetup:x=>{const k=I=>{I&&(f.on(V=>V.setActive(!1)),f.set(x)),x.setActive(I)};k(ea(d,t.hash(v)));const R=t.watcher(e,v,k);return()=>{f.clear(),R()}},onAction:()=>t.setCurrent(e,v)}))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:c=>c(r()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:r,onSetup:t.onMenuSetup})},_V=e=>{W6(e,(e=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:l3,hash:t=>((e,t)=>PA(e,["fixed","relative","empty"]).map(({value:r,unit:c})=>r+c))(t).getOr(t),display:gt,watcher:(t,r,c)=>t.formatter.formatChanged("lineheight",c,!1,{value:r}).unbind,getCurrent:t=>B.from(t.queryCommandValue("LineHeight")),setCurrent:(t,r)=>t.execCommand("LineHeight",!1,r),onToolbarSetup:li(e),onMenuSetup:li(e)}))(e)),(e=>B.from(n3(e)).map(r=>({name:"language",text:"Language",icon:"language",getOptions:re(r),hash:c=>Mo(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,f)=>{var v;return c.formatter.formatChanged("lang",f,!1,{value:d.code,customValue:null!==(v=d.customCode)&&void 0!==v?v:null}).unbind},getCurrent:c=>{const d=be_fromDom(c.selection.getNode());return $i(d,f=>B.some(f).filter(co).bind(v=>z(v,"lang").map(k=>({code:k,customCode:z(v,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=Qu();return c.setActive(e.formatter.match("lang",{},void 0,!0)),d.set(e.formatter.formatChanged("lang",c.setActive,!0)),SS(d.clear,li(e)(c))},onMenuSetup:li(e)})))(e).each(t=>W6(e,t))},AV=e=>Vf(e,"NodeChange",t=>{t.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}),j6=(e,t)=>r=>{r.setActive(t.get());const c=d=>{t.set(d.state),r.setActive(d.state)};return e.on("PastePlainTextToggle",c),SS(()=>e.off("PastePlainTextToggle",c),li(e)(r))},fN=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},IV=e=>{(e=>{(e=>{L1.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(t,r)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:L2(e,t.name),onAction:fN(e,t.name)})});for(let t=1;t<=6;t++){const r="h"+t;e.ui.registry.addToggleButton(r,{text:r.toUpperCase(),tooltip:"Heading "+t,onSetup:L2(e,r),onAction:fN(e,r)})}})(e),(e=>{L1.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Il(e,t.action)})}),L1.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:li(e),onAction:Il(e,t.action)})})})(e),(e=>{L1.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Il(e,t.action),onSetup:L2(e,t.name)})})})(e)})(e),(e=>{L1.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:Il(e,t.action)})}),L1.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onSetup:li(e),onAction:Il(e,t.action)})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:li(e),onAction:fN(e,"code")})})(e)},HA=(e,t)=>Vf(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r=>{r.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())}),zV=e=>Vf(e,"VisualAid",t=>{t.setActive(e.hasVisual)}),jV=(e,t)=>{(e=>{lt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],r=>{e.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:Il(e,r.cmd),onSetup:L2(e,r.name)})}),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:li(e),onAction:Il(e,"JustifyNone")})})(e),IV(e),((e,t)=>{((e,t)=>{const r=nT(0,t,f6(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),onSetup:li(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t),((e,t)=>{const r=nT(0,t,y6(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),onSetup:li(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t),((e,t)=>{const r={type:"advanced",...t.styles},c=nT(0,t,x6(e,r));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:li(e),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})})(e,t),((e,t)=>{const r=nT(0,t,b6(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:li(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t),((e,t)=>{const r=nT(0,t,C6(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:li(e),getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t)})(e,t),(e=>{(e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:HA(e,"hasUndo"),onAction:Il(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:HA(e,"hasRedo"),onAction:Il(e,"redo")})})(e),(e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:HA(e,"hasUndo"),onAction:Il(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:HA(e,"hasRedo"),onAction:Il(e,"redo")})})(e)})(e),(e=>{(e=>{e.addCommand("mceApplyTextcolor",(t,r)=>{((e,t,r)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.apply(t,{value:r}),e.nodeChanged()})})(e,t,r)}),e.addCommand("mceRemoveTextcolor",t=>{((e,t)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()})})(e,t)})})(e);const t=MD(e),r=ND(e),c=_n(t),d=_n(r);d_(e,"forecolor","forecolor","Text color",c),d_(e,"backcolor","hilitecolor","Background color",d),m_(e,"forecolor","forecolor","Text color",c),m_(e,"backcolor","hilitecolor","Background color",d)})(e),(e=>{(e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Il(e,"mceToggleVisualAid")})})(e),(e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:zV(e),onAction:Il(e,"mceToggleVisualAid")})})(e)})(e),(e=>{(e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:AV(e),onAction:Il(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:li(e),onAction:Il(e,"indent")})})(e)})(e),_V(e),(e=>{const t=_n(sE(e)),r=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:r,onSetup:j6(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:r,onSetup:j6(e,t)})})(e)},GV=e=>bn(e)?e.split(/[ ,]/):e,G6=e=>t=>t.options.get(e),q6=G6("contextmenu_never_use_native"),KV=G6("contextmenu_avoid_overlap"),K6=e=>{const t=e.ui.registry.getAll().contextMenus,r=e.options.get("contextmenu");return e.options.isSet("contextmenu")?r:so(r,c=>Qn(t,c))},G_=(e,t)=>({type:"makeshift",x:e,y:t}),Y6=e=>"longpress"===e.type||0===e.type.indexOf("touch"),tz=(e,t)=>"contextmenu"===t.type||"longpress"===t.type?e.inline?(e=>{if(Y6(e)){const t=e.touches[0];return G_(t.pageX,t.pageY)}return G_(e.pageX,e.pageY)})(t):((e,t)=>{const r=Df.DOM.getPos(e);return((e,t,r)=>G_(e.x+t,e.y+r))(t,r.x,r.y)})(e.getContentAreaContainer(),(e=>{if(Y6(e)){const t=e.touches[0];return G_(t.clientX,t.clientY)}return G_(e.clientX,e.clientY)})(t)):X6(e),X6=e=>({type:"selection",root:be_fromDom(e.selection.getNode())}),J6=(e,t,r)=>{switch(r){case"node":return(e=>({type:"node",node:B.some(be_fromDom(e.selection.getNode())),root:be_fromDom(e.getBody())}))(e);case"point":return tz(e,t);case"selection":return X6(e)}},oz=(e,t,r,c,d,f)=>{const v=r(),x=J6(e,t,f);QS(v,Im.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:B.none()}).map(k=>{t.preventDefault(),Zr.showMenuAt(d,{anchor:x},{menu:{markers:Nf("normal")},data:k})})},sz={onLtr:()=>[tr,ur,Aa,pi,Qs,er,Hg,U_,z_,TA,V_,SA],onRtl:()=>[tr,Aa,ur,Qs,pi,er,Hg,U_,V_,SA,z_,TA]},az={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},dz=(e,t,r,c,d,f)=>{const v=_i(),x=v.os.isiOS(),k=v.os.isMacOS(),R=v.os.isAndroid(),I=v.deviceType.isTouch(),Z=()=>{const Y=r();((e,t,r,c,d,f,v)=>{const x=((e,t,r)=>{const c=J6(e,t,r);return{bubble:qt(0,"point"===r?12:0,az),layouts:sz,overrides:{maxWidthFunction:JM(),maxHeightFunction:km()},...c}})(e,t,f);QS(r,Im.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:B.none()}).map(k=>{t.preventDefault();const R=v?ml.HighlightMenuAndItem:ml.HighlightNone;Zr.showMenuWithinBounds(d,{anchor:x},{menu:{markers:Nf("normal"),highlightOnOpen:R},data:k,type:"horizontal"},()=>B.some(L6(e,c.shared,"node"===f?"node":"selection"))),e.dispatch(P6)})})(e,t,Y,c,d,f,!(R||x||k&&I))};if((k||x)&&"node"!==f){const Y=()=>{(e=>{const t=e.selection.getRng(),r=()=>{f2.setEditorTimeout(e,()=>{e.selection.setRng(t)},10),f()};e.once("touchend",r);const c=v=>{v.preventDefault(),v.stopImmediatePropagation()};e.on("mousedown",c,!0);const d=()=>f();e.once("longpresscancel",d);const f=()=>{e.off("touchend",r),e.off("longpresscancel",d),e.off("mousedown",c)}})(e),Z()};((e,t)=>{const r=e.selection;if(r.isCollapsed()||t.touches.length<1)return!1;{const c=t.touches[0],d=r.getRng();return Zb(e.getWin(),lf.domRange(d)).exists(v=>v.left<=c.clientX&&v.right>=c.clientX&&v.top<=c.clientY&&v.bottom>=c.clientY)}})(e,t)?Y():(e.once("selectionchange",Y),e.once("touchend",()=>e.off("selectionchange",Y)))}else Z()},Q6=e=>bn(e)?"|"===e:"separator"===e.type,pN={type:"separator"},eP=e=>{const t=r=>({text:r.text,icon:r.icon,enabled:r.enabled,shortcut:r.shortcut});if(bn(e))return e;switch(e.type){case"separator":return pN;case"submenu":return{type:"nestedmenuitem",...t(e),getSubmenuItems:()=>{const c=e.getSubmenuItems();return bn(c)?c:Be(c,eP)}};default:const r=e;return{type:"menuitem",...t(r),onAction:Le(r.onAction)}}},tP=(e,t)=>{if(0===t.length)return e;const c=or(e).filter(d=>!Q6(d)).fold(()=>[],d=>[pN]);return e.concat(c).concat(t).concat([pN])},nP=(e,t)=>!(e=>"longpress"===e.type||Qn(e,"touches"))(t)&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType),oP=(e,t)=>nP(e,t)?e.selection.getStart(!0):t.target,pz=(e,t,r)=>{const d=_i().deviceType.isTouch,f=Dc(Zr.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>r.setContextMenuState(!0),onHide:()=>r.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Et([Jn("dismissContextMenu",[ut(Su(),(k,R)=>{Io.close(k),e.focus()})])])})),v=()=>Zr.hide(f),x=k=>{if(q6(e)&&k.preventDefault(),((e,t)=>t.ctrlKey&&!q6(e))(e,k)||(e=>0===K6(e).length)(e))return;const R=((e,t)=>{const r=KV(e),c=nP(e,t)?"selection":"point";if(le(r)){const d=oP(e,t);return J0(be_fromDom(d),r)?"node":c}return c})(e,k);(d()?dz:oz)(e,k,()=>{const Z=oP(e,k),Y=e.ui.registry.getAll(),oe=K6(e);return((e,t,r)=>{const c=Ht(t,(d,f)=>rt(e,f.toLowerCase()).map(v=>{const x=v.update(r);if(bn(x)&&le(Ss(x)))return tP(d,x.split(" "));if(Oo(x)&&x.length>0){const k=Be(x,eP);return tP(d,k)}return d}).getOrThunk(()=>d.concat([f])),[]);return c.length>0&&Q6(c[c.length-1])&&c.pop(),c})(Y.contextMenus,oe,Z)},r,f,R)};e.on("init",()=>{const k="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");e.on(k,v),e.on("longpress contextmenu",x)})},bN=O_generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),VA=e=>t=>t.translate(-e.left,-e.top),zA=e=>t=>t.translate(e.left,e.top),V1=e=>(t,r)=>Ht(e,(c,d)=>d(c),po(t,r)),UA=(e,t,r)=>e.fold(V1([zA(r),VA(t)]),V1([VA(t)]),V1([])),sT=(e,t,r)=>e.fold(V1([zA(r)]),V1([]),V1([zA(t)])),sP=(e,t,r)=>e.fold(V1([]),V1([VA(r)]),V1([zA(t),VA(r)])),rP=(e,t,r)=>{const c=e.fold((d,f)=>({position:B.some("absolute"),left:B.some(d+"px"),top:B.some(f+"px")}),(d,f)=>({position:B.some("absolute"),left:B.some(d-r.left+"px"),top:B.some(f-r.top+"px")}),(d,f)=>({position:B.some("fixed"),left:B.some(d+"px"),top:B.some(f+"px")}));return{right:B.none(),bottom:B.none(),...c}},vN=(e,t,r,c)=>{const d=(f,v)=>(x,k)=>{const R=f(t,r,c);return v(x.getOr(R.left),k.getOr(R.top))};return e.fold(d(sP,ZA),d(sT,lv),d(UA,aw))},ZA=bN.offset,lv=bN.absolute,aw=bN.fixed,aP=(e,t)=>{const r=Bo(e,t);return Mo(r)?NaN:parseInt(r,10)},Tz=(e,t,r,c,d,f)=>{const v=((e,t,r,c)=>((e,t)=>{const r=e.element,c=aP(r,t.leftAttr),d=aP(r,t.topAttr);return isNaN(c)||isNaN(d)?B.none():B.some(po(c,d))})(e,t).fold(()=>r,d=>aw(d.left+c.left,d.top+c.top)))(e,t,r,c),x=t.mustSnap?Ez(e,t,v,d,f):_z(e,t,v,d,f),k=UA(v,d,f);return((e,t,r)=>{const c=e.element;Bn(c,t.leftAttr,r.left+"px"),Bn(c,t.topAttr,r.top+"px")})(e,t,k),x.fold(()=>({coord:aw(k.left,k.top),extra:B.none()}),R=>({coord:R.output,extra:R.extra}))},cP=(e,t,r,c)=>$o(e,d=>((e,t,r,c,d,f)=>{const v=sT(e,d,f),x=sT(t,d,f);return Math.abs(v.left-x.left)<=r&&Math.abs(v.top-x.top)<=c})(t,d.sensor,d.range.left,d.range.top,r,c)?B.some({output:vN(d.output,t,r,c),extra:d.extra}):B.none()),Ez=(e,t,r,c,d)=>{const f=t.getSnapPoints(e);return cP(f,r,c,d).orThunk(()=>Ht(f,(k,R)=>{const V=((e,t,r,c,d,f)=>{const v=sT(e,d,f),x=sT(t,d,f),k=Math.abs(v.left-x.left),R=Math.abs(v.top-x.top);return po(k,R)})(r,R.sensor,0,0,c,d);return k.deltas.fold(()=>({deltas:B.some(V),snap:B.some(R)}),Z=>(V.left+V.top)/2<=(Z.left+Z.top)/2?{deltas:B.some(V),snap:B.some(R)}:k)},{deltas:B.none(),snap:B.none()}).snap.map(k=>({output:vN(k.output,r,c,d),extra:k.extra})))},_z=(e,t,r,c,d)=>{const f=t.getSnapPoints(e);return cP(f,r,c,d)};var Az=Object.freeze({__proto__:null,snapTo:(e,t,r,c)=>{const d=t.getTarget(e.element);if(t.repositionTarget){const f=cr(e.element),v=La(f),x=EB(d),k=((e,t,r)=>({coord:vN(e.output,e.output,t,r),extra:e.extra}))(c,v,x),R=rP(k.coord,0,x);ka(d,R)}}});const yN="data-initial-z-index",iP=(e,t)=>{e.getSystem().addToGui(t),(e=>{Kr(e.element).filter(co).each(t=>{Ws(t,"z-index").each(r=>{Bn(t,yN,r)}),Xt(t,"z-index",Ns(e.element,"z-index"))})})(t)},Mz=e=>{(e=>{Kr(e.element).filter(co).each(t=>{z(t,yN).fold(()=>F(t,"z-index"),r=>Xt(t,"z-index",r)),ae(t,yN)})})(e),e.getSystem().removeFromGui(e)},lP=(e,t,r)=>e.getSystem().build(Gd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:r}));var Nz=Rc("snaps",[dt("getSnapPoints"),Ko("onSensor"),dt("leftAttr"),dt("topAttr"),$e("lazyViewport",H),$e("mustSnap",!1)]);const wN=[$e("useFixed",De),dt("blockerClass"),$e("getTarget",gt),$e("onDrag",ve),$e("repositionTarget",!0),$e("onDrop",ve),ba("getBounds",H),Nz],Bz=e=>((e,t,r,c)=>e.isSome()&&t.isSome()&&r.isSome()?B.some(((t,r,c)=>("fixed"===c?aw:ZA)(parseInt(t,10),parseInt(r,10)))(e.getOrDie(),t.getOrDie(),r.getOrDie())):B.none())(Ws(e,"left"),Ws(e,"top"),Ws(e,"position")).getOrThunk(()=>{const t=$r(e);return lv(t.left,t.top)}),uP=(e,t)=>({bounds:e.getBounds(),height:cn(t.element),width:fa(t.element)}),CN=(e,t,r,c,d)=>{const f=r.update(c,d),v=r.getStartData().getOrThunk(()=>uP(t,e));f.each(x=>{((e,t,r,c)=>{const d=t.getTarget(e.element);if(t.repositionTarget){const f=cr(e.element),v=La(f),x=EB(d),k=Bz(d),R=((e,t,r,c,d,f,v)=>{const x=t.fold(()=>{const k=((e,t,r)=>e.fold((c,d)=>ZA(c+t,d+r),(c,d)=>lv(c+t,d+r),(c,d)=>aw(c+t,d+r)))(r,f.left,f.top),R=UA(k,c,d);return aw(R.left,R.top)},k=>{const R=Tz(e,k,r,f,c,d);return R.extra.each(I=>{k.onSensor(e,I)}),R.coord});return((e,t,r,c,d)=>{const f=d.bounds,v=sT(t,r,c),x=cc(v.left,f.x,f.x+f.width-d.width),k=cc(v.top,f.y,f.y+f.height-d.height),R=lv(x,k);return t.fold(()=>{const I=sP(R,r,c);return ZA(I.left,I.top)},re(R),()=>{const I=UA(R,r,c);return aw(I.left,I.top)})})(0,x,c,d,v)})(e,t.snaps,k,v,x,c,r),I=rP(R,0,x);ka(d,I)}t.onDrag(e,d,c)})(e,t,v,x)})},dP=(e,t,r,c)=>{t.each(Mz),r.snaps.each(f=>{((e,t)=>{((e,t)=>{const r=e.element;ae(r,t.leftAttr),ae(r,t.topAttr)})(e,t)})(e,f)});const d=r.getTarget(e.element);c.reset(),r.onDrop(e,d)},xN=e=>(t,r)=>{const c=d=>{r.setStartData(uP(t,d))};return ss([ut(mm(),d=>{r.getStartData().each(()=>c(d))}),...e(t,r,c)])};var Lz=Object.freeze({__proto__:null,getData:e=>B.from(po(e.x,e.y)),getDelta:(e,t)=>po(t.left-e.left,t.top-e.top)});const mP=(e,t,r)=>[ut(ds(),(c,d)=>{if(0!==d.event.raw.button)return;d.stop();const v=()=>dP(c,B.some(R),e,t),x=__(v,200),R=lP(c,e.blockerClass,(e=>ss([ut(ds(),e.forceDrop),ut(qu(),e.drop),ut(Oa(),(t,r)=>{e.move(r.event)}),ut(oc(),e.delayDrop)]))({drop:v,delayDrop:x.schedule,forceDrop:v,move:V=>{x.cancel(),CN(c,e,t,Lz,V)}}));r(c),iP(c,R)})],Hz=[...wN,Gs("dragger",{handlers:xN(mP)})];var gP=Object.freeze({__proto__:null,getData:e=>{const r=e.raw.touches;return 1===r.length?(e=>{const t=e[0];return B.some(po(t.clientX,t.clientY))})(r):B.none()},getDelta:(e,t)=>po(t.left-e.left,t.top-e.top)});const hP=(e,t,r)=>{const c=fr(),d=f=>{dP(f,c.get(),e,t),c.clear()};return[ut(_a(),(f,v)=>{v.stop();const x=()=>d(f),R=lP(f,e.blockerClass,(e=>ss([ut(_a(),e.forceDrop),ut(lm(),e.drop),ut(Po(),e.drop),ut(za(),(t,r)=>{e.move(r.event)})]))({drop:x,delayDrop:ve,forceDrop:x,move:V=>{CN(f,e,t,gP,V)}}));c.set(R),r(f),iP(f,R)}),ut(za(),(f,v)=>{v.stop(),CN(f,e,t,gP,v.event)}),ut(lm(),(f,v)=>{v.stop(),d(f)}),ut(Po(),d)]},Uz=[...wN,Gs("dragger",{handlers:xN(hP)})],Wz=[...wN,Gs("dragger",{handlers:xN((e,t,r)=>[...mP(e,t,r),...hP(e,t,r)])})];var jz=Object.freeze({__proto__:null,mouse:Hz,touch:Uz,mouseOrTouch:Wz}),Gz=Object.freeze({__proto__:null,init:()=>{let e=B.none(),t=B.none();const x=re({});return cl({readState:x,reset:()=>{e=B.none(),t=B.none()},update:(k,R)=>k.getData(R).bind(I=>((k,R)=>{const I=e.map(V=>k.getDelta(V,R));return e=B.some(R),I})(k,I)),getStartData:()=>t,setStartData:k=>{t=B.some(k)}})}});const cw=Xw({branchKey:"mode",branches:jz,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:B.from(e.extra)})},state:Gz,apis:Az}),fP=(e,t,r,c,d,f)=>e.fold(()=>cw.snap({sensor:lv(r-20,c-20),range:po(d,f),output:lv(B.some(r),B.some(c)),extra:{td:t}}),v=>{const x=r-20,k=c-20,V=v.element.dom.getBoundingClientRect();return cw.snap({sensor:lv(x,k),range:po(40,40),output:lv(B.some(r-V.width/2),B.some(c-V.height/2)),extra:{td:t}})}),pP=(e,t,r)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,f)=>{const v=f.td;((d,f)=>d.exists(v=>Jo(v,f)))(t.get(),v)||(t.set(v),r(v))},mustSnap:!0}),bP=e=>ks(jc.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Et([cw.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),w.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}));const Yz=e=>"BR"===e.nodeName||!!e.getAttribute("data-mce-bogus")||"bookmark"===e.getAttribute("data-mce-type"),Xz=(e,t,r)=>{var c;const d=null!==(c=t.delimiter)&&void 0!==c?c:"\u203a";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Et([xn.config({mode:"flow",selector:"div[role=button]"}),Nn.config({disabled:r.isDisabled}),uc(),Xr.config({}),to.config({}),Jn("elementPathEvents",[lr((R,I)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",()=>xn.focusIn(R)),e.on("NodeChange",V=>{const Z=(R=>{const I=[];let V=R.length;for(;V-- >0;){const Z=R[V];if(1===Z.nodeType&&!Yz(Z)){const Y=_D(e,Z);if(Y.isDefaultPrevented()||I.push({name:Y.name,element:Z}),Y.isPropagationStopped())break}}return I})(V.parents),Y=Z.length>0?(R=>Ht(R,(I,V,Z)=>{const Y=((R,I,V)=>jc.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":V,"aria-level":V+1}},components:[Yr(R)],action:Z=>{e.focus(),e.selection.select(I),e.nodeChanged()},buttonBehaviours:Et([ld_button(r.isDisabled),uc()])}))(V.name,V.element,Z);return I.concat(0===Z?[Y]:[{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Yr(` ${d} `)]},Y])},[]))(Z):[];to.set(R,Y)})})])]),components:[]}};var uv;!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(uv||(uv={}));const vP=(e,t,r)=>{const c=be_fromDom(e.getContainer()),d=((e,t,r,c,d)=>{const f={height:IA(c+t.top,Ux(e),Wx(e))};return r===uv.Both&&(f.width=IA(d+t.left,zx(e),Zx(e))),f})(e,t,r,Ut(c),Fs(c));Ye(d,(f,v)=>{Ln(f)&&Xt(c,v,iN(f))}),(e=>{e.dispatch("ResizeEditor")})(e)},jA=(e,t,r,c)=>{const f=po(20*r,20*c);return vP(e,f,t),B.some(!0)},nU=(e,t)=>{const f=()=>{const x=[],k=aE(e),R=oE(e),I=qx(e)||e.hasPlugin("wordcount");return R&&x.push(Xz(e,{},t)),k&&x.push((()=>{const x=mu("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Yr(uu.translate(["Press {0} for help",x]))]}})()),I&&x.push((()=>{const x=[];return e.hasPlugin("wordcount")&&x.push(((e,t)=>{const r=(c,d,f)=>to.set(c,[Yr(t.translate(["{0} "+f,d[f]]))]);return jc.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Et([ld_button(t.isDisabled),uc(),Xr.config({}),to.config({}),Wt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Jn("wordcount-events",[eu(c=>{const d=Wt.getValue(c),f="words"===d.mode?"characters":"words";Wt.setValue(c,{mode:f,count:d.count}),r(c,d.count,f)}),lr(c=>{e.on("wordCountUpdate",d=>{const{mode:f}=Wt.getValue(c);Wt.setValue(c,{mode:f,count:d.wordCount}),r(c,d.wordCount,f)})})])]),eventOrder:{[Hi()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,t)),qx(e)&&x.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":uu.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:Et([Un.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:x}})()),x.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{const Z="tox-statusbar__text-container--flex-start",Y="tox-statusbar__text-container--flex-end";if(k){const pe="tox-statusbar__text-container-3-cols";return I||R?I&&!R?[pe,Y]:[pe,Z]:[pe,"tox-statusbar__text-container--space-around"]}return[I&&!R?Y:Z]})()]},components:x}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const x=f(),k=((e,t)=>{const r=(e=>{const t=Kx(e);return!1===t?uv.None:"both"===t?uv.Both:uv.Vertical})(e);if(r===uv.None)return B.none();const c=r===uv.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return B.some(du("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-label":t.translate(c)},behaviours:[cw.config({mode:"mouse",repositionTarget:!1,onDrag:(d,f,v)=>vP(e,v,r),blockerClass:"tox-blocker"}),xn.config({mode:"special",onLeft:()=>jA(e,r,-1,0),onRight:()=>jA(e,r,1,0),onUp:()=>jA(e,r,0,-1),onDown:()=>jA(e,r,0,1)}),Xr.config({}),Un.config({})]},t.icons))})(e,t);return x.concat(k.toArray())})()}},yP=(e,t)=>t.get().getOrDie(`UI for ${e} has not been rendered`),oU=(e,t)=>{const r=e.inline,c=r?X9:Z9,d=$0(e)?tL:kI,f=(()=>{const e=fr(),t=fr(),r=fr();return{dialogUi:e,popupUi:t,mainUi:r,getUiMotherships:()=>{const f=e.get().map(x=>x.mothership),v=t.get().map(x=>x.mothership);return f.fold(()=>v.toArray(),x=>v.fold(()=>[x],k=>Jo(x.element,k.element)?[x]:[x,k]))},lazyGetInOuterOrDie:(f,v)=>()=>r.get().bind(x=>v(x.outerContainer)).getOrDie(`Could not find ${f} element in OuterContainer`)}})(),v=fr(),x=fr(),k=fr(),Z=_i().deviceType.isTouch()?["tox-platform-touch"]:[],Y=y2(e),oe=C1(e),pe=ks({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ge=ks({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Te=()=>f.mainUi.get().map(On=>On.outerContainer).bind(Er.getHeader),He=f.lazyGetInOuterOrDie("anchor bar",pe.getOpt),St=f.lazyGetInOuterOrDie("bottom anchor bar",Ge.getOpt),pt=f.lazyGetInOuterOrDie("toolbar",Er.getToolbar),Mt=f.lazyGetInOuterOrDie("throbber",Er.getThrobber),Gt=((e,t,r,c)=>{const d=_n(!1),f=(e=>{const t=_n(y2(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}})(t),v={icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:uu.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},x=gI(t),k=(e=>{const t=x=>()=>e.formatter.match(x),r=x=>()=>{const k=e.formatter.get(x);return void 0!==k?B.some({tag:k.length>0&&(k[0].inline||k[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(x))}):B.none()},c=_n([]),d=_n([]),f=_n(!1);return e.on("PreInit",x=>{const k=uB(e),R=mB(e,k,t,r);c.set(R)}),e.on("addStyleModifications",x=>{const k=mB(e,x.items,t,r);d.set(k),f.set(x.replace)}),{getData:()=>{const x=f.get()?[]:c.get(),k=d.get();return x.concat(k)}}})(t),R=(e=>({colorPicker:T$(e),hasCustomColors:k$(e),getColors:E$(e),getColorCols:_$(e)}))(t),I=(e=>({isDraggableModal:A$(e)}))(t),Y={shared:{providers:v,anchors:S$(t,r,c,f.isPositionedAtTop),header:f},urlinput:x,styles:k,colorinput:R,dialog:I,isContextMenuOpen:()=>d.get(),setContextMenuState:Ge=>d.set(Ge)},oe={...Y,shared:{...Y.shared,interpreter:Ge=>eB(Ge,{},oe),getSink:e.popup}},pe={...Y,shared:{...Y.shared,interpreter:Ge=>eB(Ge,{},pe),getSink:e.dialog}};return{popup:oe,dialog:pe}})({popup:()=>Rt.fromOption(f.popupUi.get().map(On=>On.sink),"(popup) UI has not been rendered"),dialog:()=>Rt.fromOption(f.dialogUi.get().map(On=>On.sink),"UI has not been rendered")},e,He,St),kn=()=>{const On=(()=>{const On={attributes:{[Zp]:Y?ed.BottomToTop:ed.TopToBottom}},no=Er.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Gt.popup,onEscape:()=>{e.focus()}}),qs=Er.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Gt.popup.shared.getSink,providers:Gt.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:zh=>{((e,t)=>{e.dispatch("ToggleToolbarDrawer",{state:t})})(e,zh)},type:oe,lazyToolbar:pt,lazyHeader:()=>Te().getOrDie("Could not find header element"),...On}),fs=Er.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Gt.popup.shared.providers,onEscape:()=>{e.focus()},type:oe}),Ci=Oh(e),Pr=F0(e),Hl=v2(e),Yd=rE(e),Xf=Er.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Qf=Yd?[Xf,no]:[no];return Er.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ci||Pr||Hl?[]:["tox-editor-header--empty"]),...On},components:En([Hl?Qf:[],Ci?[fs]:Pr?[qs]:[],Mf(e)?[]:[pe.asSpec()]]),sticky:$0(e),editor:e,sharedBackstage:Gt.popup.shared})})(),no={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Er.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Er.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},qs=Er.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Gt.popup}),fs=Er.parts.viewWrapper({backstage:Gt.popup}),Ci=b2(e)&&!r?B.some(nU(e,Gt.popup.shared.providers)):B.none(),Pr=En([Y?[]:[On],r?[]:[no],Y?[On]:[]]),Hl=Er.parts.editorContainer({components:En([Pr,r?[]:[Ge.asSpec(),...Ci.toArray()]])}),Yd=Jx(e),Xf={role:"application",...uu.isRtl()?{dir:"rtl"}:{},...Yd?{"aria-hidden":"true"}:{}},Jf=Dc(Er.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(r?["tox-tinymce-inline"]:[]).concat(Y?["tox-tinymce--toolbar-bottom"]:[]).concat(Z),styles:{visibility:"hidden",...Yd?{opacity:"0",border:"0"}:{}},attributes:Xf},components:[Hl,...r?[]:[fs],qs],behaviours:Et([uc(),Nn.config({disableClass:"tox-tinymce--disabled"}),xn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),z1=j2(Jf);return v.set(z1),{mothership:z1,outerContainer:Jf}},Zo=On=>{const no=iN((e=>(e=>{const t=Gk(e),r=Ux(e),c=Wx(e);return cN(t).map(d=>IA(d,r,c))})(e).getOr(Gk(e)))(e)),qs=iN((e=>M6(e).getOr(Vx(e)))(e));return e.inline||(fc("div","width",qs)&&Xt(On.element,"width",qs),fc("div","height",no)?Xt(On.element,"height",no):Xt(On.element,"height","400px")),no},mn=On=>{const{mainUi:no,popupUi:qs,uiMotherships:fs}=On;Ke(jx(e),(Y_,mv)=>{e.ui.registry.addGroupToolbarButton(mv,Y_)});const{buttons:Ci,menuItems:Pr,contextToolbars:Hl,sidebars:Yd,views:Xf}=e.ui.registry.getAll(),Jf=lE(e),z1={menuItems:Pr,menus:uE(e),menubar:Jk(e),toolbar:Jf.getOrThunk(()=>x1(e)),allowToolbarGroups:oe===Mu.floating,buttons:Ci,sidebar:Yd,views:Xf};(On=>{e.addShortcut("alt+F9","focus menubar",()=>{Er.focusMenubar(On)}),e.addShortcut("alt+F10","focus toolbar",()=>{Er.focusToolbar(On)}),e.addCommand("ToggleToolbarDrawer",(no,qs)=>{qs?.skipFocus?Er.toggleToolbarDrawerWithoutFocusing(On):Er.toggleToolbarDrawer(On)}),e.addQueryStateHandler("ToggleToolbarDrawer",()=>Er.isToolbarDrawerToggled(On))})(no.outerContainer),((e,t,r)=>{const c=(pt,Mt)=>{lt([t,...r],Gt=>{Gt.broadcastEvent(pt,Mt)})},d=(pt,Mt)=>{lt([t,...r],Gt=>{Gt.broadcastOn([pt],Mt)})},f=pt=>d(Rm(),{target:pt.target}),v=Vu(),x=bi(v,"touchstart",f),k=bi(v,"touchmove",pt=>c(hw(),pt)),R=bi(v,"touchend",pt=>c(hp(),pt)),I=bi(v,"mousedown",f),V=bi(v,"mouseup",pt=>{0===pt.raw.button&&d(e0(),{target:pt.target})}),Z=pt=>d(Rm(),{target:be_fromDom(pt.target)}),Y=pt=>{0===pt.button&&d(e0(),{target:be_fromDom(pt.target)})},oe=()=>{lt(e.editorManager.get(),pt=>{e!==pt&&pt.dispatch("DismissPopups",{relatedTarget:e})})},pe=pt=>c(mm(),Za(pt)),Ge=pt=>{d(Sh(),{}),c(Od(),Za(pt))},Te=Ve(be_fromDom(e.getElement())),xe=gh(Te,"scroll",pt=>{requestAnimationFrame(()=>{if(null!=e.getContainer()){const Do=B1(e,t.element).map(fn=>[fn.element,...fn.others]).getOr([]);Ys(Do,fn=>Jo(fn,pt.target))&&(e.dispatch("ElementScroll",{target:pt.target.dom}),c(pp(),pt))}})}),Qe=()=>d(Sh(),{}),He=pt=>{pt.state&&d(Rm(),{target:be_fromDom(e.getContainer())})},St=pt=>{d(Rm(),{target:be_fromDom(pt.relatedTarget.getContainer())})};e.on("PostRender",()=>{e.on("click",Z),e.on("tap",Z),e.on("mouseup",Y),e.on("mousedown",oe),e.on("ScrollWindow",pe),e.on("ResizeWindow",Ge),e.on("ResizeEditor",Qe),e.on("AfterProgressState",He),e.on("DismissPopups",St)}),e.on("remove",()=>{e.off("click",Z),e.off("tap",Z),e.off("mouseup",Y),e.off("mousedown",oe),e.off("ScrollWindow",pe),e.off("ResizeWindow",Ge),e.off("ResizeEditor",Qe),e.off("AfterProgressState",He),e.off("DismissPopups",St),I.unbind(),x.unbind(),k.unbind(),R.unbind(),V.unbind(),xe.unbind()}),e.on("detach",()=>{lt([t,...r],_y),lt([t,...r],pt=>pt.destroy())})})(e,no.mothership,fs),d.setup(e,Gt.popup.shared,Te),jV(e,Gt.popup),pz(e,Gt.popup.shared.getSink,Gt.popup),(e=>{const{sidebars:t}=e.ui.registry.getAll();lt(Xo(t),r=>{const c=t[r],d=()=>ea(B.from(e.queryCommandValue("ToggleSidebar")),r);e.ui.registry.addToggleButton(r,{icon:c.icon,tooltip:c.tooltip,onAction:f=>{e.execCommand("ToggleSidebar",!1,r),f.setActive(d())},onSetup:f=>{f.setActive(d());const v=()=>f.setActive(d());return e.on("ToggleSidebar",v),()=>{e.off("ToggleSidebar",v)}}})})})(e),PL(e,Mt,Gt.popup.shared),SV(e,Hl,qs.sink,{backstage:Gt.popup}),((e,t)=>{const r=_n([]),c=_n([]),d=_n(!1),f=fr(),v=fr(),x=Mt=>{const Gt=sl(Mt);return fP(Y.getOpt(t),Mt,Gt.x,Gt.y,Gt.width,Gt.height)},R=Mt=>{const Gt=sl(Mt);return fP(oe.getOpt(t),Mt,Gt.right,Gt.bottom,Gt.width,Gt.height)},V=pP(()=>Be(r.get(),Mt=>x(Mt)),f,Mt=>{v.get().each(Gt=>{e.dispatch("TableSelectorChange",{start:Mt,finish:Gt})})}),Z=pP(()=>Be(c.get(),Mt=>R(Mt)),v,Mt=>{f.get().each(Gt=>{e.dispatch("TableSelectorChange",{start:Gt,finish:Mt})})}),Y=bP(V),oe=bP(Z),pe=Dc(Y.asSpec()),Ge=Dc(oe.asSpec()),xe=(Mt,Gt,Do,fn)=>{const uo=Do(Gt);cw.snapTo(Mt,uo),((Mt,Gt,Do,fn)=>{const uo=Gt.dom.getBoundingClientRect();F(Mt.element,"display");const Xn=wo(be_fromDom(e.getBody())).dom.innerHeight,Yo=Do(uo),kn=fn(uo,Xn);(Yo||kn)&&Xt(Mt.element,"display","none")})(Mt,Gt,kn=>kn[fn]<0,(kn,Zo)=>kn[fn]>Zo)},Qe=Mt=>xe(pe,Mt,x,"top"),St=Mt=>xe(Ge,Mt,R,"bottom");_i().deviceType.isTouch()&&(e.on("TableSelectionChange",Mt=>{d.get()||(nd(t,pe),nd(t,Ge),d.set(!0)),f.set(Mt.start),v.set(Mt.finish),Mt.otherCells.each(Gt=>{r.set(Gt.upOrLeftCells),c.set(Gt.downOrRightCells),Qe(Mt.start),St(Mt.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",()=>{f.get().each(Qe),v.get().each(St)}),e.on("TableSelectionClear",()=>{d.get()&&(Hd(pe),Hd(Ge),d.set(!1)),f.clear(),v.clear()}))})(e,qs.sink);const Qf=e.getElement(),zh=Zo(no.outerContainer);return c.render(e,On,z1,Gt.popup,{targetNode:Qf,height:zh})};return{popups:{backstage:Gt.popup,getMothership:()=>yP("popups",k)},dialogs:{backstage:Gt.dialog,getMothership:()=>yP("dialogs",x)},renderUI:()=>{const On=kn(),no=(()=>{const On=Xx(e),no=Jo(ls(),On)&&"grid"===Ns(On,"display"),qs={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(Z),attributes:{...uu.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Nc.config({useFixed:()=>d.isDocked(Te)})])},fs={dom:{styles:{width:document.body.clientWidth+"px"}},events:ss([ut(Od(),Hl=>{Xt(Hl.element,"width",document.body.clientWidth+"px")})])},Ci=Dc(Js(qs,no?fs:{})),Pr=j2(Ci);return x.set(Pr),{sink:Ci,mothership:Pr}})(),qs=Ah(e)?(()=>{const On={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(Z),attributes:{...uu.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Nc.config({useFixed:()=>d.isDocked(Te),getBounds:()=>t.getPopupSinkBounds()})])},no=Dc(On),qs=j2(no);return k.set(qs),{sink:no,mothership:qs}})():(On=>(k.set(On.mothership),On))(no);f.dialogUi.set(no),f.popupUi.set(qs),f.mainUi.set(On);const fs={popupUi:qs,dialogUi:no,mainUi:On,uiMotherships:f.getUiMotherships()};return mn(fs)}}},rU=re([dt("lazySink"),us("dragBlockClass"),ba("getBounds",H),$e("useTabstopAt",Ot),$e("firstTabstop",0),$e("eventOrder",{}),Wa("modalBehaviours",[xn]),bc("onExecute"),tf("onEscape")]),TN={sketch:gt},aU=re([Fl({name:"draghandle",overrides:(e,t)=>({behaviours:Et([cw.config({mode:"mouse",getTarget:r=>wm(r,'[role="dialog"]').getOr(r),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),vc({schema:[dt("dom")],name:"title"}),vc({factory:TN,schema:[dt("dom")],name:"close"}),vc({factory:TN,schema:[dt("dom")],name:"body"}),Fl({factory:TN,schema:[dt("dom")],name:"footer"}),Pl({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[$e("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),$e("components",[])],name:"blocker"})]),$c=Wc({name:"ModalDialog",configFields:rU(),partFields:aU(),factory:(e,t,r,c)=>{const d=fr(),V=un("modal-events"),Z={...e.eventOrder,[_l()]:[V].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:t,apis:{show:Y=>{d.set(Y);const oe=e.lazySink(Y).getOrDie(),pe=c.blocker(),Ge=oe.getSystem().build({...pe,components:pe.components.concat([fi(Y)]),behaviours:Et([Un.config({}),Jn("dialog-blocker-events",[ag(Pa(),()=>{Ih.isBlocked(Y)||xn.focusIn(Y)})])])});nd(oe,Ge),xn.focusIn(Y)},hide:Y=>{d.clear(),Kr(Y.element).each(oe=>{Y.getSystem().getByDom(oe).each(pe=>{Hd(pe)})})},getBody:Y=>Zd(Y,e,"body"),getFooter:Y=>$s(Y,e,"footer"),setIdle:Y=>{Ih.unblock(Y)},setBusy:(Y,oe)=>{Ih.block(Y,oe)}},eventOrder:Z,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ja(e.modalBehaviours,[to.config({}),xn.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),Ih.config({getRoot:d.get}),Jn(V,[lr(Y=>{((e,t)=>{const r=z(e,"id").fold(()=>{const c=un("dialog-label");return Bn(t,"id",c),c},gt);Bn(e,"aria-labelledby",r)})(Y.element,Zd(Y,e,"title").element)})])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,r)=>{e.setBusy(t,r)},setIdle:(e,t)=>{e.setIdle(t)}}}),iU=Tn([xa,iS].concat(Ff)),lU=Td,kN=[V0("button"),cd,rl("align","end",["start","end"]),mS,id,eh("buttonType",["primary","secondary"])],wP=[...kN,qi],EN=[xl("type",["submit","cancel","custom"]),...wP],uU=[xl("type",["menu"]),Mh,_2,cd,Ni("items",iU),...kN],dU=[...kN,xl("type",["togglebutton"]),ra("tooltip"),cd,Mh,Va("active",!1)],mU=Qa("type",{submit:EN,cancel:EN,custom:EN,menu:uU,togglebutton:dU}),gU=[xa,qi,xl("level",["info","warn","error","success"]),T1,$e("url","")],hU=Tn(gU),fU=e=>[xa,e],pU=[xa,qi,id,V0("button"),cd,DE,eh("buttonType",["primary","secondary","toolbar"]),mS],bU=Tn(pU),rT=[xa,iS],Lh=rT.concat([O2]),vU=rT.concat([lS,id]),yU=Tn(vU),wU=Td,CU=Lh.concat([ME("auto")]),xU=Tn(CU),SU=Uu([Rh,qi,T1]),TU=Lh.concat([Pi("storageKey","default")]),kU=Tn(TU),EU=os,_U=Tn(Lh),OU=os,AU=rT.concat([Pi("tag","textarea"),ra("scriptId"),ra("scriptUrl"),pa("settings",void 0,Y1)]),RU=rT.concat([Pi("tag","textarea"),Sl("init")]),DU=kd(e=>Ar("customeditor.old",Di(RU),e).orThunk(()=>Ar("customeditor.new",Di(AU),e))),MU=os,NU=Tn(Lh),BU=Mi(j1),PU=e=>[xa,up("columns"),e],FU=[xa,ra("html"),rl("presets","presentation",["presentation","document"])],$U=Tn(FU),IU=Lh.concat([Va("border",!1),Va("sandboxed",!0),Va("streamContent",!1),Va("transparent",!0)]),LU=Tn(IU),HU=os,VU=Tn(rT.concat([ec("height")])),zU=Tn([ra("url"),_d("zoom"),_d("cachedWidth"),_d("cachedHeight")]),UU=Lh.concat([ec("inputMode"),ec("placeholder"),Va("maximized",!1),id]),ZU=Tn(UU),WU=os,jU=e=>[xa,lS,e,rl("align","start",["start","center","end"])],GU=[qi,Rh],qU=[qi,Ni("items",Xh(0,()=>CP))],CP=Xg([Tn(GU),Tn(qU)]),KU=Lh.concat([Ni("items",CP),id]),YU=Tn(KU),XU=os,JU=Lh.concat([Ed("items",[qi,Rh]),Yl("size",1),id]),QU=Tn(JU),eZ=os,tZ=Lh.concat([Va("constrain",!0),id]),nZ=Tn(tZ),xP=Tn([ra("width"),ra("height")]),oZ=rT.concat([lS,Yl("min",0),Yl("max",0)]),sZ=Tn(oZ),rZ=Gh,aZ=[xa,Ni("header",os),Ni("cells",Mi(os))],cZ=Tn(aZ),iZ=Lh.concat([ec("placeholder"),Va("maximized",!1),id]),lZ=Tn(iZ),uZ=os,SP=[xl("type",["directory","leaf"]),uS,ra("id"),Tl("menu",VB)],TP=Tn(SP),dZ=SP.concat([Ni("children",Xh(0,()=>cm("type",{directory:kP,leaf:TP})))]),kP=Tn(dZ),mZ=cm("type",{directory:kP,leaf:TP}),gZ=[xa,Ni("items",mZ),Bi("onLeafAction"),Bi("onToggleExpand"),Fi("defaultExpandedIds",[],os),ec("defaultSelectedId")],hZ=Tn(gZ),fZ=Lh.concat([rl("filetype","file",["image","media","file"]),id]),pZ=Tn(fZ),bZ=Tn([Rh,NE]),_N=e=>Ha("items","items",{tag:"required",process:{}},Mi(kd(t=>Ar(`Checking item of ${e}`,ON,t).fold(r=>Rt.error(Zu(r)),r=>Rt.value(r))))),ON=gi(()=>cm("type",{alertbanner:hU,bar:Tn(fU(_N("bar"))),button:bU,checkbox:yU,colorinput:kU,colorpicker:_U,dropzone:NU,grid:Tn(PU(_N("grid"))),iframe:LU,input:ZU,listbox:YU,selectbox:QU,sizeinput:nZ,slider:sZ,textarea:lZ,urlinput:pZ,customeditor:DU,htmlpanel:$U,imagepreview:VU,collection:xU,label:Tn(jU(_N("label"))),table:cZ,tree:hZ,panel:EP})),vZ=[xa,$e("classes",[]),Ni("items",ON)],EP=Tn(vZ),yZ=[V0("tab"),uS,Ni("items",ON)],wZ=[xa,Ed("tabs",yZ)],CZ=Tn(wZ),xZ=wP,SZ=mU,TZ=Tn([ra("title"),si("body",cm("type",{panel:EP,tabpanel:CZ})),Pi("size","normal"),Fi("buttons",[],SZ),$e("initialData",{}),ba("onAction",ve),ba("onChange",ve),ba("onSubmit",ve),ba("onClose",ve),ba("onCancel",ve),ba("onTabChange",ve)]),EZ=Tn([xl("type",["cancel","custom"]),...xZ]),_Z=Tn([ra("title"),ra("url"),_d("height"),_d("width"),tc("buttons",EZ),ba("onAction",ve),ba("onCancel",ve),ba("onClose",ve),ba("onMessage",ve)]),AN=e=>qn(e)?[e].concat(No(Uo(e),AN)):Oo(e)?No(e,AN):[],AZ=e=>bn(e.type)&&bn(e.name),RZ={checkbox:wU,colorinput:EU,colorpicker:OU,dropzone:BU,input:WU,iframe:HU,imagepreview:zU,selectbox:eZ,sizeinput:xP,slider:rZ,listbox:XU,size:xP,textarea:uZ,urlinput:bZ,customeditor:MU,collection:SU,togglemenuitem:lU},NZ=e=>{const t=(e=>so(AN(e),AZ))(e),r=No(t,c=>(e=>B.from(RZ[e.type]))(c).fold(()=>[],d=>[si(c.name,d)]));return Tn(r)},_P=e=>{var t;const r=Uc((e=>Ar("dialog",TZ,e))(e));return{internalDialog:r,dataValidator:NZ(e),initialData:null!==(t=e.initialData)&&void 0!==t?t:{}}},iw={open:(e,t)=>{const r=_P(t);return e(r.internalDialog,r.initialData,r.dataValidator)},openUrl:(e,t)=>{const r=Uc((e=>Ar("dialog",_Z,e))(t));return e(r)},redial:e=>_P(e)};var BZ=Object.freeze({__proto__:null,events:(e,t)=>{const r=(c,d)=>{e.updateState.each(f=>{const v=f(c,d);t.set(v)}),e.renderComponents.each(f=>{const v=f(d,t.get());(e.reuseDom?_4:Ek)(c,v)})};return ss([ut(Ql(),(c,d)=>{const f=d;f.universal||xo(f.channels,e.channel)&&r(c,f.data)}),lr((c,d)=>{e.initialData.each(f=>{r(c,f)})})])}}),PZ=Object.freeze({__proto__:null,getState:(e,t,r)=>r}),FZ=[dt("channel"),us("renderComponents"),us("updateState"),us("initialData"),Va("reuseDom",!0)],$Z=Object.freeze({__proto__:null,init:()=>{const e=_n(B.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(B.none())}}});const Kd=Ua({fields:FZ,name:"reflecting",active:BZ,apis:PZ,state:$Z}),OP=e=>{const t=[],r={};return Ye(e,(c,d)=>{c.fold(()=>{t.push(d)},f=>{r[d]=f})}),t.length>0?Rt.error(t):Rt.value(r)},IZ=(e,t,r)=>{const c=ks(JS.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:Be(e.items,f=>Q5(d,f,t,r))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[c.asSpec()]}],behaviours:Et([xn.config({mode:"acyclic",useTabstopAt:qe($_)}),Ig_memento(c),fF(c,{postprocess:d=>OP(d).fold(f=>(console.error(f),{}),gt)}),Jn("dialog-body-panel",[ut(Pa(),(d,f)=>{d.getSystem().broadcastOn([vA],{newFocus:B.some(f.event.target)})})])])}},HZ=yc({name:"TabButton",configFields:[$e("uid",void 0),dt("value"),Ha("dom","dom",Pn(()=>({attributes:{role:"tab",id:un("aria"),"aria-selected":"false"}})),hi()),us("action"),$e("domModification",{}),Wa("tabButtonBehaviours",[Un,xn,Wt]),dt("view")],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:d2(e.action),behaviours:ja(e.tabButtonBehaviours,[Un.config({}),xn.config({mode:"execution",useSpace:!0,useEnter:!0}),Wt.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),VZ=re([dt("tabs"),dt("dom"),$e("clickToDismiss",!1),Wa("tabbarBehaviours",[rs,xn]),Eu(["tabClass","selectedClass"])]),zZ=$l({factory:HZ,name:"tabs",unit:"tab",overrides:e=>{const t=(c,d)=>{rs.dehighlight(c,d),wn(c,J1(),{tabbar:c,button:d})},r=(c,d)=>{rs.highlight(c,d),wn(c,bp(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(e.uid).getOrDie(),f=rs.isHighlighted(d,c);(f&&e.clickToDismiss?t:f?ve:r)(d,c)},domModification:{classes:[e.markers.tabClass]}}}}),UZ=re([zZ]),AP=Wc({name:"Tabbar",configFields:VZ(),partFields:UZ(),factory:(e,t,r,c)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ja(e.tabbarBehaviours,[rs.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(d,f)=>{Bn(f.element,"aria-selected","true")},onDehighlight:(d,f)=>{Bn(f.element,"aria-selected","false")}}),xn.config({mode:"flow",getInitial:d=>rs.getHighlighted(d).map(f=>f.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),jZ=yc({name:"Tabview",configFields:[Wa("tabviewBehaviours",[to])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:ja(e.tabviewBehaviours,[to.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),GZ=re([$e("selectFirst",!0),Ko("onChangeTab"),Ko("onDismissTab"),$e("tabs",[]),Wa("tabSectionBehaviours",[])]),qZ=vc({factory:AP,schema:[dt("dom"),Wu("markers",[dt("tabClass"),dt("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),KZ=vc({factory:jZ,name:"tabview"}),YZ=re([qZ,KZ]),aT=Wc({name:"TabSection",configFields:GZ(),partFields:YZ(),factory:(e,t,r,c)=>{const f=(v,x)=>{$s(v,e,"tabbar").each(k=>{x(k).each(Ol)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:Sg(e.tabSectionBehaviours),events:ss(En([e.selectFirst?[lr((v,x)=>{f(v,rs.getFirst)})]:[],[ut(bp(),(v,x)=>{(v=>{const x=Wt.getValue(v);$s(v,e,"tabview").each(k=>{fo(e.tabs,I=>I.value===x).each(I=>{const V=I.view();z(v.element,"id").each(Z=>{Bn(k.element,"aria-labelledby",Z)}),to.set(k,V),e.onChangeTab(k,v,V)})})})(x.event.button)}),ut(J1(),(v,x)=>{e.onDismissTab(v,x.event.button)})]])),apis:{getViewItems:v=>$s(v,e,"tabview").map(x=>to.contents(x)).getOr([]),showTab:(v,x)=>{f(v,R=>{const I=rs.getCandidates(R);return fo(I,Z=>Wt.getValue(Z)===x).filter(Z=>!rs.isHighlighted(R,Z))})}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,r)=>{e.showTab(t,r)}}}),RP=(e,t)=>{Xt(e,"height",t+"px"),Xt(e,"flex-basis",t+"px")},GA=(e,t,r)=>{wm(e,'[role="dialog"]').each(c=>{ia(c,'[role="tablist"]').each(d=>{r.get().map(f=>(Xt(t,"height","0"),Xt(t,"flex-basis","0"),Math.min(f,((e,t,r)=>{const c=xi(e).dom,d=wm(e,".tox-dialog-wrap").getOr(e);let v;v="fixed"===Ns(d,"position")?Math.max(c.clientHeight,window.innerHeight):Math.max(c.offsetHeight,c.scrollHeight);const x=Ut(t),R=t.dom.offsetLeft>=r.dom.offsetLeft+Fs(r)?Math.max(Ut(r),x):x,I=parseInt(Ns(e,"margin-top"),10)||0,V=parseInt(Ns(e,"margin-bottom"),10)||0;return v-(Ut(e)+I+V-R)})(c,t,d)))).each(f=>{RP(t,f)})})})},RN=e=>ia(e,'[role="tabpanel"]'),DP="send-data-to-section",MP="send-data-to-view",oW=(e,t,r)=>{const c=_n({}),d=R=>{const I=Wt.getValue(R),V=OP(I).getOr({}),Z=c.get(),Y=Js(Z,V);c.set(Y)},f=R=>{const I=c.get();Wt.setValue(R,I)},v=_n(null),x=Be(e.tabs,R=>({value:R.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Yr(r.shared.providers.translate(R.title))],view:()=>[JS.sketch(I=>({dom:{tag:"div",classes:["tox-form"]},components:Be(R.items,V=>Q5(I,V,t,r)),formBehaviours:Et([xn.config({mode:"acyclic",useTabstopAt:qe($_)}),Jn("TabView.form.events",[lr(f),Ku(d)]),ai.config({channels:Fn([{key:DP,value:{onReceive:d}},{key:MP,value:{onReceive:f}}])})])}))]})),k=(e=>{const t=fr();return{extraEvents:[lr(d=>{const f=d.element;RN(f).each(v=>{Xt(v,"visibility","hidden"),d.getSystem().getByDom(v).toOptional().each(x=>{const k=((e,t,r)=>Be(e,(c,d)=>{to.set(r,e[d].view());const f=t.dom.getBoundingClientRect();return to.set(r,[]),f.height}))(e,v,x);(e=>Ps(Mr(e,(t,r)=>t>r?-1:t<r?1:0)))(k).fold(t.clear,t.set)}),GA(f,v,t),F(v,"visibility"),((e,t)=>{Ps(e).each(r=>aT.showTab(t,r.value))})(e,d),requestAnimationFrame(()=>{GA(f,v,t)})})}),ut(Od(),d=>{const f=d.element;RN(f).each(v=>{GA(f,v,t)})}),ut(N_,(d,f)=>{const v=d.element;RN(v).each(x=>{const k=ll(Ve(x));Xt(x,"visibility","hidden");const R=Ws(x,"height").map(Z=>parseInt(Z,10));F(x,"height"),F(x,"flex-basis");const I=x.dom.getBoundingClientRect().height;R.forall(Z=>I>Z)?(t.set(I),GA(v,x,t)):R.each(Z=>{RP(x,Z)}),F(x,"visibility"),k.each(il)})})],selectFirst:!1}})(x);return aT.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(R,I,V)=>{const Z=Wt.getValue(I);wn(R,q2,{name:Z,oldName:v.get()}),v.set(Z)},tabs:x,components:[aT.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[AP.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Et([Xr.config({})])}),aT.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:k.selectFirst,tabSectionBehaviours:Et([Jn("tabpanel",k.extraEvents),xn.config({mode:"acyclic"}),Lo.config({find:R=>Ps(aT.getViewItems(R))}),nw(B.none(),R=>(R.getSystem().broadcastOn([DP],{}),c.get()),(R,I)=>{c.set(I),R.getSystem().broadcastOn([MP],{})})])})},NP=(e,t,r,c,d)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...r.map(k=>({id:k})).getOr({}),...d?{"aria-live":"polite"}:{}}},components:[],behaviours:Et([Ig_childAt(0),Kd.config({channel:`${b5}-${t}`,updateState:(k,R)=>B.some({isTabPanel:()=>"tabpanel"===R.body.type}),renderComponents:k=>{const R=k.body;return"tabpanel"===R.type?[oW(R,k.initialData,c)]:[IZ(R,k.initialData,c)]},initialData:e})])});function lw(e){return(lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function DN(e,t){return(DN=Object.setPrototypeOf||function(c,d){return c.__proto__=d,c})(e,t)}function cW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qA(e,t,r){return(qA=cW()?Reflect.construct:function(d,f,v){var x=[null];x.push.apply(x,f);var R=new(Function.bind.apply(d,x));return v&&DN(R,v.prototype),R}).apply(null,arguments)}function Hh(e){return function iW(e){if(Array.isArray(e))return MN(e)}(e)||function lW(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function uW(e,t){if(e){if("string"==typeof e)return MN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MN(e,t)}}(e)||function dW(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,c=new Array(t);r<t;r++)c[r]=e[r];return c}var mW=Object.hasOwnProperty,BP=Object.setPrototypeOf,gW=Object.isFrozen,hW=Object.getPrototypeOf,fW=Object.getOwnPropertyDescriptor,fd=Object.freeze,Yf=Object.seal,pW=Object.create,PP=typeof Reflect<"u"&&Reflect,KA=PP.apply,NN=PP.construct;KA||(KA=function(t,r,c){return t.apply(r,c)}),fd||(fd=function(t){return t}),Yf||(Yf=function(t){return t}),NN||(NN=function(t,r){return qA(t,Hh(r))});var bW=Vh(Array.prototype.forEach),vW=Vh(Array.prototype.pop),q_=Vh(Array.prototype.push),YA=Vh(String.prototype.toLowerCase),yW=Vh(String.prototype.match),dv=Vh(String.prototype.replace),wW=Vh(String.prototype.indexOf),CW=Vh(String.prototype.trim),pd=Vh(RegExp.prototype.test),BN=function xW(e){return function(){for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return NN(e,r)}}(TypeError);function Vh(e){return function(t){for(var r=arguments.length,c=new Array(r>1?r-1:0),d=1;d<r;d++)c[d-1]=arguments[d];return KA(e,t,c)}}function br(e,t){BP&&BP(e,null);for(var r=t.length;r--;){var c=t[r];if("string"==typeof c){var d=YA(c);d!==c&&(gW(t)||(t[r]=d),c=d)}e[c]=!0}return e}function uw(e){var r,t=pW(null);for(r in e)KA(mW,e,[r])&&(t[r]=e[r]);return t}function XA(e,t){for(;null!==e;){var r=fW(e,t);if(r){if(r.get)return Vh(r.get);if("function"==typeof r.value)return Vh(r.value)}e=hW(e)}return function c(d){return console.warn("fallback value for",d),null}}var FP=fd(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),PN=fd(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),FN=fd(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),SW=fd(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$N=fd(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),TW=fd(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$P=fd(["#text"]),IP=fd(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),IN=fd(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),LP=fd(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),JA=fd(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),kW=Yf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),EW=Yf(/<%[\w\W]*|[\w\W]*%>/gm),_W=Yf(/^data-[\-\w.\u00B7-\uFFFF]/),OW=Yf(/^aria-[\-\w]+$/),AW=Yf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),RW=Yf(/^(?:\w+script|data):/i),DW=Yf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),MW=Yf(/^html$/i),NW=function(){return typeof window>"u"?null:window},BW=function(t,r){if("object"!==lw(t)||"function"!=typeof t.createPolicy)return null;var c=null,d="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(d)&&(c=r.currentScript.getAttribute(d));var f="dompurify"+(c?"#"+c:"");try{return t.createPolicy(f,{createHTML:function(x){return x}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}},PW=function HP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NW(),t=function(tt){return HP(tt)};if(t.version="2.3.8",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var r=e.document,c=e.document,d=e.DocumentFragment,f=e.HTMLTemplateElement,v=e.Node,x=e.Element,k=e.NodeFilter,R=e.NamedNodeMap,I=void 0===R?e.NamedNodeMap||e.MozNamedAttrMap:R,V=e.HTMLFormElement,Z=e.DOMParser,Y=e.trustedTypes,oe=x.prototype,pe=XA(oe,"cloneNode"),Ge=XA(oe,"nextSibling"),Te=XA(oe,"childNodes"),xe=XA(oe,"parentNode");if("function"==typeof f){var Qe=c.createElement("template");Qe.content&&Qe.content.ownerDocument&&(c=Qe.content.ownerDocument)}var He=BW(Y,r),St=He?He.createHTML(""):"",pt=c,Mt=pt.implementation,Gt=pt.createNodeIterator,Do=pt.createDocumentFragment,fn=pt.getElementsByTagName,uo=r.importNode,Xn={};try{Xn=uw(c).documentMode?c.documentMode:{}}catch{}var Yo={};t.isSupported="function"==typeof xe&&Mt&&typeof Mt.createHTMLDocument<"u"&&9!==Xn;var lT,dw,kn=kW,Zo=EW,$t=_W,mn=OW,Gn=RW,Fo=DW,On=AW,no=null,qs=br({},[].concat(Hh(FP),Hh(PN),Hh(FN),Hh($N),Hh($P))),fs=null,Ci=br({},[].concat(Hh(IP),Hh(IN),Hh(LP),Hh(JA))),Pr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Hl=null,Yd=null,Xf=!0,Jf=!0,z1=!1,Qf=!1,zh=!1,K_=!1,Y_=!1,mv=!1,QA=!1,eR=!1,d8=!0,zN=!0,X_=!1,cT={},iT=null,m8=br({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),g8=null,h8=br({},["audio","video","img","source","image","track"]),UN=null,f8=br({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ZN="http://www.w3.org/1998/Math/MathML",WN="http://www.w3.org/2000/svg",gv="http://www.w3.org/1999/xhtml",tR=gv,jN=!1,aj=["application/xhtml+xml","text/html"],cj="text/html",uT=null,ij=c.createElement("form"),p8=function(tt){return tt instanceof RegExp||tt instanceof Function},GN=function(tt){uT&&uT===tt||((!tt||"object"!==lw(tt))&&(tt={}),tt=uw(tt),no="ALLOWED_TAGS"in tt?br({},tt.ALLOWED_TAGS):qs,fs="ALLOWED_ATTR"in tt?br({},tt.ALLOWED_ATTR):Ci,UN="ADD_URI_SAFE_ATTR"in tt?br(uw(f8),tt.ADD_URI_SAFE_ATTR):f8,g8="ADD_DATA_URI_TAGS"in tt?br(uw(h8),tt.ADD_DATA_URI_TAGS):h8,iT="FORBID_CONTENTS"in tt?br({},tt.FORBID_CONTENTS):m8,Hl="FORBID_TAGS"in tt?br({},tt.FORBID_TAGS):{},Yd="FORBID_ATTR"in tt?br({},tt.FORBID_ATTR):{},cT="USE_PROFILES"in tt&&tt.USE_PROFILES,Xf=!1!==tt.ALLOW_ARIA_ATTR,Jf=!1!==tt.ALLOW_DATA_ATTR,z1=tt.ALLOW_UNKNOWN_PROTOCOLS||!1,Qf=tt.SAFE_FOR_TEMPLATES||!1,zh=tt.WHOLE_DOCUMENT||!1,mv=tt.RETURN_DOM||!1,QA=tt.RETURN_DOM_FRAGMENT||!1,eR=tt.RETURN_TRUSTED_TYPE||!1,Y_=tt.FORCE_BODY||!1,d8=!1!==tt.SANITIZE_DOM,zN=!1!==tt.KEEP_CONTENT,X_=tt.IN_PLACE||!1,On=tt.ALLOWED_URI_REGEXP||On,tR=tt.NAMESPACE||gv,tt.CUSTOM_ELEMENT_HANDLING&&p8(tt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pr.tagNameCheck=tt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),tt.CUSTOM_ELEMENT_HANDLING&&p8(tt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pr.attributeNameCheck=tt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),tt.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof tt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Pr.allowCustomizedBuiltInElements=tt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),lT=lT=-1===aj.indexOf(tt.PARSER_MEDIA_TYPE)?cj:tt.PARSER_MEDIA_TYPE,dw="application/xhtml+xml"===lT?function(pn){return pn}:YA,Qf&&(Jf=!1),QA&&(mv=!0),cT&&(no=br({},Hh($P)),fs=[],!0===cT.html&&(br(no,FP),br(fs,IP)),!0===cT.svg&&(br(no,PN),br(fs,IN),br(fs,JA)),!0===cT.svgFilters&&(br(no,FN),br(fs,IN),br(fs,JA)),!0===cT.mathMl&&(br(no,$N),br(fs,LP),br(fs,JA))),tt.ADD_TAGS&&(no===qs&&(no=uw(no)),br(no,tt.ADD_TAGS)),tt.ADD_ATTR&&(fs===Ci&&(fs=uw(fs)),br(fs,tt.ADD_ATTR)),tt.ADD_URI_SAFE_ATTR&&br(UN,tt.ADD_URI_SAFE_ATTR),tt.FORBID_CONTENTS&&(iT===m8&&(iT=uw(iT)),br(iT,tt.FORBID_CONTENTS)),zN&&(no["#text"]=!0),zh&&br(no,["html","head","body"]),no.table&&(br(no,["tbody"]),delete Hl.tbody),fd&&fd(tt),uT=tt)},b8=br({},["mi","mo","mn","ms","mtext"]),v8=br({},["foreignobject","desc","title","annotation-xml"]),lj=br({},["title","style","font","a","script"]),nR=br({},PN);br(nR,FN),br(nR,SW);var qN=br({},$N);br(qN,TW);var uj=function(tt){var pn=xe(tt);(!pn||!pn.tagName)&&(pn={namespaceURI:gv,tagName:"template"});var yo=YA(tt.tagName),$a=YA(pn.tagName);return tt.namespaceURI===WN?pn.namespaceURI===gv?"svg"===yo:pn.namespaceURI===ZN?"svg"===yo&&("annotation-xml"===$a||b8[$a]):Boolean(nR[yo]):tt.namespaceURI===ZN?pn.namespaceURI===gv?"math"===yo:pn.namespaceURI===WN?"math"===yo&&v8[$a]:Boolean(qN[yo]):tt.namespaceURI===gv&&!(pn.namespaceURI===WN&&!v8[$a]||pn.namespaceURI===ZN&&!b8[$a])&&!qN[yo]&&(lj[yo]||!nR[yo])},U1=function(tt){q_(t.removed,{element:tt});try{tt.parentNode.removeChild(tt)}catch{try{tt.outerHTML=St}catch{tt.remove()}}},oR=function(tt,pn){try{q_(t.removed,{attribute:pn.getAttributeNode(tt),from:pn})}catch{q_(t.removed,{attribute:null,from:pn})}if(pn.removeAttribute(tt),"is"===tt&&!fs[tt])if(mv||QA)try{U1(pn)}catch{}else try{pn.setAttribute(tt,"")}catch{}},y8=function(tt){var pn,yo;if(Y_)tt="<remove></remove>"+tt;else{var $a=yW(tt,/^[\r\n\t ]+/);yo=$a&&$a[0]}"application/xhtml+xml"===lT&&(tt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+tt+"</body></html>");var Xd=He?He.createHTML(tt):tt;if(tR===gv)try{pn=(new Z).parseFromString(Xd,lT)}catch{}if(!pn||!pn.documentElement){pn=Mt.createDocument(tR,"template",null);try{pn.documentElement.innerHTML=jN?"":Xd}catch{}}var Pu=pn.body||pn.documentElement;return tt&&yo&&Pu.insertBefore(c.createTextNode(yo),Pu.childNodes[0]||null),tR===gv?fn.call(pn,zh?"html":"body")[0]:zh?pn.documentElement:Pu},w8=function(tt){return Gt.call(tt.ownerDocument||tt,tt,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT,null,!1)},dj=function(tt){return tt instanceof V&&("string"!=typeof tt.nodeName||"string"!=typeof tt.textContent||"function"!=typeof tt.removeChild||!(tt.attributes instanceof I)||"function"!=typeof tt.removeAttribute||"function"!=typeof tt.setAttribute||"string"!=typeof tt.namespaceURI||"function"!=typeof tt.insertBefore)},J_=function(tt){return"object"===lw(v)?tt instanceof v:tt&&"object"===lw(tt)&&"number"==typeof tt.nodeType&&"string"==typeof tt.nodeName},Z1=function(tt,pn,yo){!Yo[tt]||bW(Yo[tt],function($a){$a.call(t,pn,yo,uT)})},C8=function(tt){var pn;if(Z1("beforeSanitizeElements",tt,null),dj(tt)||pd(/[\u0080-\uFFFF]/,tt.nodeName))return U1(tt),!0;var yo=dw(tt.nodeName);if(Z1("uponSanitizeElement",tt,{tagName:yo,allowedTags:no}),tt.hasChildNodes()&&!J_(tt.firstElementChild)&&(!J_(tt.content)||!J_(tt.content.firstElementChild))&&pd(/<[/\w]/g,tt.innerHTML)&&pd(/<[/\w]/g,tt.textContent)||"select"===yo&&pd(/<template/i,tt.innerHTML))return U1(tt),!0;if(!no[yo]||Hl[yo]){if(!Hl[yo]&&S8(yo)&&(Pr.tagNameCheck instanceof RegExp&&pd(Pr.tagNameCheck,yo)||Pr.tagNameCheck instanceof Function&&Pr.tagNameCheck(yo)))return!1;if(zN&&!iT[yo]){var $a=xe(tt)||tt.parentNode,Xd=Te(tt)||tt.childNodes;if(Xd&&$a)for(var gu=Xd.length-1;gu>=0;--gu)$a.insertBefore(pe(Xd[gu],!0),Ge(tt))}return U1(tt),!0}return tt instanceof x&&!uj(tt)||("noscript"===yo||"noembed"===yo)&&pd(/<\/no(script|embed)/i,tt.innerHTML)?(U1(tt),!0):(Qf&&3===tt.nodeType&&(pn=dv(pn=tt.textContent,kn," "),pn=dv(pn,Zo," "),tt.textContent!==pn&&(q_(t.removed,{element:tt.cloneNode()}),tt.textContent=pn)),Z1("afterSanitizeElements",tt,null),!1)},x8=function(tt,pn,yo){if(d8&&("id"===pn||"name"===pn)&&(yo in c||yo in ij))return!1;if((!Jf||Yd[pn]||!pd($t,pn))&&(!Xf||!pd(mn,pn)))if(!fs[pn]||Yd[pn]){if(!(S8(tt)&&(Pr.tagNameCheck instanceof RegExp&&pd(Pr.tagNameCheck,tt)||Pr.tagNameCheck instanceof Function&&Pr.tagNameCheck(tt))&&(Pr.attributeNameCheck instanceof RegExp&&pd(Pr.attributeNameCheck,pn)||Pr.attributeNameCheck instanceof Function&&Pr.attributeNameCheck(pn))||"is"===pn&&Pr.allowCustomizedBuiltInElements&&(Pr.tagNameCheck instanceof RegExp&&pd(Pr.tagNameCheck,yo)||Pr.tagNameCheck instanceof Function&&Pr.tagNameCheck(yo))))return!1}else if(!UN[pn]&&!pd(On,dv(yo,Fo,""))&&("src"!==pn&&"xlink:href"!==pn&&"href"!==pn||"script"===tt||0!==wW(yo,"data:")||!g8[tt])&&(!z1||pd(Gn,dv(yo,Fo,"")))&&yo)return!1;return!0},S8=function(tt){return tt.indexOf("-")>0},T8=function(tt){var pn,yo,$a,Xd;Z1("beforeSanitizeAttributes",tt,null);var Pu=tt.attributes;if(Pu){var gu={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:fs};for(Xd=Pu.length;Xd--;){var hu=(pn=Pu[Xd]).name,k8=pn.namespaceURI;yo="value"===hu?pn.value:CW(pn.value),$a=dw(hu);var gj=yo;if(gu.attrName=$a,gu.attrValue=yo,gu.keepAttr=!0,gu.forceKeepAttr=void 0,Z1("uponSanitizeAttribute",tt,gu),yo=gu.attrValue,!gu.forceKeepAttr){if(!gu.keepAttr){oR(hu,tt);continue}if(pd(/\/>/i,yo)){oR(hu,tt);continue}Qf&&(yo=dv(yo,kn," "),yo=dv(yo,Zo," "));var hj=dw(tt.nodeName);if(!x8(hj,$a,yo)){oR(hu,tt);continue}if(yo!==gj)try{k8?tt.setAttributeNS(k8,hu,yo):tt.setAttribute(hu,yo)}catch{oR(hu,tt)}}}Z1("afterSanitizeAttributes",tt,null)}},mj=function Ho(tt){var pn,yo=w8(tt);for(Z1("beforeSanitizeShadowDOM",tt,null);pn=yo.nextNode();)Z1("uponSanitizeShadowNode",pn,null),!C8(pn)&&(pn.content instanceof d&&Ho(pn.content),T8(pn));Z1("afterSanitizeShadowDOM",tt,null)};return t.sanitize=function(Ho,tt){var pn,yo,$a,Xd,Pu;if((jN=!Ho)&&(Ho="\x3c!--\x3e"),"string"!=typeof Ho&&!J_(Ho)){if("function"!=typeof Ho.toString)throw BN("toString is not a function");if("string"!=typeof(Ho=Ho.toString()))throw BN("dirty is not a string, aborting")}if(!t.isSupported){if("object"===lw(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof Ho)return e.toStaticHTML(Ho);if(J_(Ho))return e.toStaticHTML(Ho.outerHTML)}return Ho}if(K_||GN(tt),t.removed=[],"string"==typeof Ho&&(X_=!1),X_){if(Ho.nodeName){var gu=dw(Ho.nodeName);if(!no[gu]||Hl[gu])throw BN("root node is forbidden and cannot be sanitized in-place")}}else if(Ho instanceof v)1===(yo=(pn=y8("\x3c!----\x3e")).ownerDocument.importNode(Ho,!0)).nodeType&&"BODY"===yo.nodeName||"HTML"===yo.nodeName?pn=yo:pn.appendChild(yo);else{if(!mv&&!Qf&&!zh&&-1===Ho.indexOf("<"))return He&&eR?He.createHTML(Ho):Ho;if(!(pn=y8(Ho)))return mv?null:eR?St:""}pn&&Y_&&U1(pn.firstChild);for(var sR=w8(X_?Ho:pn);$a=sR.nextNode();)3===$a.nodeType&&$a===Xd||C8($a)||($a.content instanceof d&&mj($a.content),T8($a),Xd=$a);if(Xd=null,X_)return Ho;if(mv){if(QA)for(Pu=Do.call(pn.ownerDocument);pn.firstChild;)Pu.appendChild(pn.firstChild);else Pu=pn;return fs.shadowroot&&(Pu=uo.call(r,Pu,!0)),Pu}var hu=zh?pn.outerHTML:pn.innerHTML;return zh&&no["!doctype"]&&pn.ownerDocument&&pn.ownerDocument.doctype&&pn.ownerDocument.doctype.name&&pd(MW,pn.ownerDocument.doctype.name)&&(hu="<!DOCTYPE "+pn.ownerDocument.doctype.name+">\n"+hu),Qf&&(hu=dv(hu,kn," "),hu=dv(hu,Zo," ")),He&&eR?He.createHTML(hu):hu},t.setConfig=function(Ho){GN(Ho),K_=!0},t.clearConfig=function(){uT=null,K_=!1},t.isValidAttribute=function(Ho,tt,pn){uT||GN({});var yo=dw(Ho),$a=dw(tt);return x8(yo,$a,pn)},t.addHook=function(Ho,tt){"function"==typeof tt&&(Yo[Ho]=Yo[Ho]||[],q_(Yo[Ho],tt))},t.removeHook=function(Ho){if(Yo[Ho])return vW(Yo[Ho])},t.removeHooks=function(Ho){Yo[Ho]&&(Yo[Ho]=[])},t.removeAllHooks=function(){Yo={}},t}();const FW=e=>PW().sanitize(e),$W=Dg.deviceType.isTouch(),VP=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),zP=(e,t)=>$c.parts.close(jc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Et([Xr.config({})])})),UP=()=>$c.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),ZP=(e,t)=>$c.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:cv(`<p>${FW(t.translate(e))}</p>`)}]}]}),WP=e=>$c.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),jP=(e,t)=>[Gd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Gd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],LN=e=>{const t="tox-dialog",r=t+"-wrap",c=r+"__backdrop",d=t+"__disable-scroll";return $c.sketch({lazySink:e.lazySink,onEscape:f=>(e.onEscape(f),B.some(!0)),useTabstopAt:f=>!$_(f),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:cv(`<div class="${r}"></div>`),components:[{dom:{tag:"div",classes:$W?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:r,modalBehaviours:Et([Un.config({}),Jn("dialog-events",e.dialogEvents.concat([ag(Pa(),(f,v)=>{Ih.isBlocked(f)||xn.focusIn(f)}),ut(rg(),(f,v)=>{f.getSystem().broadcastOn([vA],{newFocus:v.event.newFocus})})])),Jn("scroll-lock",[lr(()=>{va(ls(),d)}),Ku(()=>{Hr(ls(),d)})]),...e.extraBehaviours]),eventOrder:{[Hi()]:["dialog-events"],[_l()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ah()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},GP=e=>jc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:Et([Xr.config({})]),components:[du("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:t=>{es(t,Wf)}}),qP=(e,t,r,c)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...r.map(f=>({id:f})).getOr({})}},components:[],behaviours:Et([Kd.config({channel:`${p5}-${t}`,initialData:e,renderComponents:f=>[Yr(c.translate(f.title))]})])}),KP=()=>({dom:cv('<div class="tox-dialog__draghandle"></div>')}),YP=(e,t,r)=>((e,t,r)=>{const c=$c.parts.title(qP(e,t,B.none(),r)),d=$c.parts.draghandle(KP()),f=$c.parts.close(GP(r)),v=[c].concat(e.draggable?[d]:[]).concat([f]);return Gd.sketch({dom:cv('<div class="tox-dialog__header"></div>'),components:v})})({title:r.shared.providers.translate(e),draggable:r.dialog.isDraggableModal()},t,r.shared.providers),XP=(e,t,r,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":r.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:t,components:[{dom:cv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),JP=(e,t,r)=>({onClose:()=>r.closeWindow(),onBlock:c=>{const d=ia(e().element,".tox-dialog__header").map(f=>Ut(f));$c.setBusy(e(),(f,v)=>XP(c.message,v,t,d))},onUnblock:()=>{$c.setIdle(e())}}),QP=(e,t,r,c)=>Dc(LN({...e,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[Kd.config({channel:`${fM}-${e.id}`,updateState:(f,v)=>B.some(v),initialData:t}),bA({}),...e.extraBehaviours],onEscape:f=>{es(f,Wf)},dialogEvents:r,eventOrder:{[Ql()]:[Kd.name(),ai.name()],[_l()]:["scroll-lock",Kd.name(),"messages","dialog-events","alloy.base.behaviour"],[ah()]:["alloy.base.behaviour","dialog-events","messages",Kd.name(),"scroll-lock"]}})),HN=(e,t={})=>Be(e,c=>"menu"===c.type?(c=>{const d=Be(c.items,f=>{const v=rt(t,f.name).getOr(_n(!1));return{...f,storage:v}});return{...c,items:d}})(c):c),e8=e=>Ht(e,(t,r)=>"menu"===r.type?Ht(r.items,(d,f)=>(d[f.name]=f.storage,d),t):t,{}),t8=(e,t)=>[sb(Pa(),OF),e(Q0,(r,c,d,f)=>{ll(Ve(f.element)).fold(ve,$p),t.onClose(),c.onClose()}),e(Wf,(r,c,d,f)=>{c.onCancel(r),es(f,Q0)}),ut(jf,(r,c)=>t.onUnblock()),ut(GS,(r,c)=>t.onBlock(c.event))],n8=(e,t,r)=>{const c=(f,v)=>ut(f,(x,k)=>{d(x,(R,I)=>{v(e(),R,k.event,x)})}),d=(f,v)=>{Kd.getState(f).get().each(x=>{v(x.internalDialog,f)})};return[...t8(c,t),c(G2,(f,v)=>v.onSubmit(f)),c(Ll,(f,v,x)=>{v.onChange(f,{name:x.name})}),c(hl,(f,v,x,k)=>{const R=()=>k.getSystem().isConnected()?xn.focusIn(k):void 0,I=Y=>ne(Y,"disabled")||z(Y,"aria-disabled").exists(oe=>"true"===oe),V=Ve(k.element),Z=ll(V);v.onAction(f,{name:x.name,value:x.value}),ll(V).fold(R,Y=>{I(Y)||Z.exists(oe=>Cr(Y,oe)&&I(oe))?R():r().toOptional().filter(oe=>!Cr(oe.element,Y)).each(R)})}),c(q2,(f,v,x)=>{v.onTabChange(f,{newTabName:x.name,oldTabName:x.oldName})}),Ku(f=>{const v=e();Wt.setValue(f,v.getData())})]},UW=(e,t)=>{const r=t.map(x=>x.footerButtons).getOr([]),c=Je(r,x=>"start"===x.align),d=(x,k)=>Gd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${x}`]},components:Be(k,R=>R.memento.asSpec())});return[d("start",c.pass),d("end",c.fail)]},o8=(e,t,r)=>({dom:cv('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Et([Kd.config({channel:`${v5}-${t}`,initialData:e,updateState:(d,f)=>{const v=Be(f.buttons,k=>{const R=ks(((e,t)=>xA(e,e.type,t))(k,r));return{name:k.name,align:k.align,memento:R}});return B.some({lookupByName:k=>((e,t,r)=>fo(t,c=>c.name===r).bind(c=>c.memento.getOpt(e)))(d,v,k),footerButtons:v})},renderComponents:UW})])}),s8=(e,t,r)=>$c.parts.footer(o8(e,t,r)),r8=(e,t)=>{if(e.getRoot().getSystem().isConnected()){const c=Lo.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return JS.getField(c,t).orThunk(()=>e.getFooter().bind(v=>Kd.getState(v).get()).bind(v=>v.lookupByName(t)))}return B.none()},a8=(e,t,r)=>{const c=oe=>{const pe=e.getRoot();pe.getSystem().isConnected()&&oe(pe)},Y={getData:()=>{const oe=e.getRoot(),pe=oe.getSystem().isConnected()?e.getFormWrapper():oe;return{...Wt.getValue(pe),...Ke(r,xe=>xe.get())}},setData:oe=>{c(pe=>{const Ge=Y.getData(),Te=Js(Ge,oe),xe=((e,t)=>{const r=e.getRoot();return Kd.getState(r).get().map(c=>Uc(Ar("data",c.dataValidator,t))).getOr(t)})(e,Te),Qe=e.getFormWrapper();Wt.setValue(Qe,xe),Ye(r,(He,St)=>{Qn(Te,St)&&He.set(Te[St])})})},setEnabled:(oe,pe)=>{r8(e,oe).each(pe?Nn.enable:Nn.disable)},focus:oe=>{r8(e,oe).each(Un.focus)},block:oe=>{if(!bn(oe))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(pe=>{wn(pe,GS,{message:oe})})},unblock:()=>{c(oe=>{es(oe,jf)})},showTab:oe=>{c(pe=>{const Ge=e.getBody();Kd.getState(Ge).get().exists(xe=>xe.isTabPanel())&&Lo.getCurrent(Ge).each(xe=>{aT.showTab(xe,oe)})})},redial:oe=>{c(pe=>{const Ge=e.getId(),Te=t(oe),xe=HN(Te.internalDialog.buttons,r);pe.getSystem().broadcastOn([`${fM}-${Ge}`],Te),pe.getSystem().broadcastOn([`${p5}-${Ge}`],Te.internalDialog),pe.getSystem().broadcastOn([`${b5}-${Ge}`],Te.internalDialog),pe.getSystem().broadcastOn([`${v5}-${Ge}`],{...Te.internalDialog,buttons:xe}),Y.setData(Te.initialData)})},close:()=>{c(oe=>{es(oe,Q0)})},toggleFullscreen:e.toggleFullscreen};return Y},c8=(e,t,r,c=!1)=>{const d=un("dialog"),f=un("dialog-label"),v=un("dialog-content"),x=e.internalDialog,k=(e=>"medium"===e?B.some("tox-dialog--width-md"):B.none())(x.size),I=ks(((e,t,r,c)=>Gd.sketch({dom:cv('<div class="tox-dialog__header"></div>'),components:[qP(e,t,B.some(r),c),KP(),GP(c)],containerBehaviours:Et([cw.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Yu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:x.title,draggable:!0},d,f,r.shared.providers)),V=ks(((e,t,r,c,d)=>NP(e,t,B.some(r),c,d))({body:x.body,initialData:x.initialData},d,v,r,c)),Z=HN(x.buttons),Y=e8(Z),oe=rr(0!==Z.length,ks(((e,t,r)=>o8(e,t,r))({buttons:Z},d,r))),pe=n8(()=>Qe,{onBlock:He=>{Ih.block(Te,(St,pt)=>{const Mt=I.getOpt(Te).map(Gt=>Ut(Gt.element));return XP(He.message,pt,r.shared.providers,Mt)})},onUnblock:()=>{Ih.unblock(Te)},onClose:()=>t.closeWindow()},r.shared.getSink),Ge="tox-dialog-inline",Te=Dc({dom:{tag:"div",classes:["tox-dialog",Ge,...k.toArray()],attributes:{role:"dialog","aria-labelledby":f}},eventOrder:{[Ql()]:[Kd.name(),ai.name()],[Hi()]:["execute-on-form"],[_l()]:["reflecting","execute-on-form"]},behaviours:Et([xn.config({mode:"cyclic",onEscape:He=>(es(He,Q0),B.some(!0)),useTabstopAt:He=>!$_(He)&&("button"!==ws(He)||"disabled"!==Bo(He,"disabled")),firstTabstop:1}),Kd.config({channel:`${fM}-${d}`,updateState:(He,St)=>B.some(St),initialData:e}),Un.config({}),Jn("execute-on-form",pe.concat([ag(Pa(),(He,St)=>{xn.focusIn(He)}),ut(rg(),(He,St)=>{He.getSystem().broadcastOn([vA],{newFocus:St.event.newFocus})})])),Ih.config({getRoot:()=>B.some(Te)}),to.config({}),bA({})]),components:[I.asSpec(),V.asSpec(),...oe.map(He=>He.asSpec()).toArray()]}),Qe=a8({getId:re(d),getRoot:re(Te),getFooter:()=>oe.map(He=>He.get(Te)),getBody:()=>V.get(Te),getFormWrapper:()=>{const He=V.get(Te);return Lo.getCurrent(He).getOr(He)},toggleFullscreen:()=>{const He="tox-dialog--fullscreen",St=be_fromDom(Te.element.dom);kv(St,[He])?(ri(St,[He]),Md(St,[Ge])):(ri(St,[Ge]),Md(St,[He]))}},t.redial,Y);return{dialog:Te,instanceApi:Qe}};var VN=tinymce.util.Tools.resolve("tinymce.util.URI");const YW=["insertContent","setContent","execCommand","close","block","unblock"],i8=e=>qn(e)&&-1!==YW.indexOf(e.mceAction),QW=(e,t,r,c)=>{const d=un("dialog"),f=YP(e.title,d,c),v=(e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[h5(B.none(),{dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Et([Xr.config({}),Un.config({})])})]}],behaviours:Et([xn.config({mode:"acyclic",useTabstopAt:qe($_)})])};return $c.parts.body(t)})(e),x=e.buttons.bind(xe=>0===xe.length?B.none():B.some(s8({buttons:xe},d,c))),k=((e,t)=>{const r=(d,f)=>ut(d,(v,x)=>{c(v,(k,R)=>{f(Te,k,x.event,v)})}),c=(d,f)=>{Kd.getState(d).get().each(v=>{f(v,d)})};return[...t8(r,t),r(hl,(d,f,v)=>{f.onAction(d,{name:v.name})})]})(0,JP(()=>Ge,c.shared.providers,t)),R={...e.height.fold(()=>({}),xe=>({height:xe+"px","max-height":xe+"px"})),...e.width.fold(()=>({}),xe=>({width:xe+"px","max-width":xe+"px"}))},I=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],V=new VN(e.url,{base_uri:new VN(window.location.href)}),Z=`${V.protocol}://${V.host}${V.port?":"+V.port:""}`,Y=Qu(),oe=[Jn("messages",[lr(()=>{const xe=bi(be_fromDom(window),"message",Qe=>{if(V.isSameOrigin(new VN(Qe.raw.origin))){const He=Qe.raw.data;i8(He)?((e,t,r)=>{switch(r.mceAction){case"insertContent":e.insertContent(r.content);break;case"setContent":e.setContent(r.content);break;case"execCommand":const c=!!zt(r.ui)&&r.ui;e.execCommand(r.cmd,c,r.value);break;case"close":t.close();break;case"block":t.block(r.message);break;case"unblock":t.unblock()}})(r,Te,He):(e=>!i8(e)&&qn(e)&&Qn(e,"mceAction"))(He)&&e.onMessage(Te,He)}});Y.set(xe)}),Ku(Y.clear)]),ai.config({channels:{[y5]:{onReceive:(xe,Qe)=>{ia(xe.element,"iframe").each(He=>{const St=He.dom.contentWindow;Wn(St)&&St.postMessage(Qe,Z)})}}}})],Ge=QP({id:d,header:f,body:v,footer:x,extraClasses:I,extraBehaviours:oe,extraStyles:R},e,k,c),Te=(e=>{const t=v=>{e.getSystem().isConnected()&&v(e)};return{block:v=>{if(!bn(v))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(x=>{wn(x,GS,{message:v})})},unblock:()=>{t(v=>{es(v,jf)})},close:()=>{t(v=>{es(v,Q0)})},sendMessage:v=>{t(x=>{x.getSystem().broadcastOn([y5],v)})}}})(Ge);return{dialog:Ge,instanceApi:Te}},l8=(e,t)=>Uc(Ar("data",t,e)),u8=e=>J0(e,".tox-alert-dialog")||J0(e,".tox-confirm-dialog"),nj=(e,t,r)=>t&&r?[]:[Fa.config({contextual:{lazyContext:()=>B.some(oa(be_fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>B1(e,c.element).map(f=>({bounds:X0(f),optScrollEnv:B.some({currentScrollTop:f.element.dom.scrollTop,scrollElmTop:$r(f.element).top})})).getOrThunk(()=>({bounds:H(),optScrollEnv:B.none()}))})],oj=e=>{const t=e.editor,r=$0(t),c=(e=>{const t=e.shared;return{open:(c,d)=>{const f=()=>{$c.hide(R),d()},v=ks(xA({name:"close-alert",text:"OK",primary:!0,buttonType:B.some("primary"),align:"end",enabled:!0,icon:B.none()},"cancel",e)),x=UP(),k=zP(f,t.providers),R=Dc(LN({lazySink:()=>t.getSink(),header:VP(x,k),body:ZP(c,t.providers),footer:B.some(WP(jP([],[v.asSpec()]))),onEscape:f,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ut(Wf,f)],eventOrder:{}}));$c.show(R);const I=v.get(R);Un.focus(I)}}})(e.backstages.dialog),d=(e=>{const t=e.shared;return{open:(c,d)=>{const f=Z=>{$c.hide(I),d(Z)},v=ks(xA({name:"yes",text:"Yes",primary:!0,buttonType:B.some("primary"),align:"end",enabled:!0,icon:B.none()},"submit",e)),x=xA({name:"no",text:"No",primary:!1,buttonType:B.some("secondary"),align:"end",enabled:!0,icon:B.none()},"cancel",e),k=UP(),R=zP(()=>f(!1),t.providers),I=Dc(LN({lazySink:()=>t.getSink(),header:VP(k,R),body:ZP(c,t.providers),footer:B.some(WP(jP([],[x,v.asSpec()]))),onEscape:()=>f(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ut(Wf,()=>f(!1)),ut(G2,()=>f(!0))],eventOrder:{}}));$c.show(I);const V=v.get(I);Un.focus(V)}}})(e.backstages.dialog),k=(oe,pe)=>iw.open((Te,xe,Qe)=>{const He=xe,pt=((e,t,r)=>{const c=un("dialog"),d=e.internalDialog,f=YP(d.title,c,r),v=((e,t,r)=>{const c=NP(e,t,B.none(),r,!1);return $c.parts.body(c)})({body:d.body,initialData:d.initialData},c,r),x=HN(d.buttons),k=e8(x),R=rr(0!==x.length,s8({buttons:x},c,r)),I=n8(()=>pe,JP(()=>Y,r.shared.providers,t),r.shared.getSink),V=(e=>{switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}})(d.size),Y=QP({id:c,header:f,body:v,footer:R,extraClasses:V,extraBehaviours:[],extraStyles:{}},e,I,r),oe={getId:re(c),getRoot:re(Y),getBody:()=>$c.getBody(Y),getFooter:()=>$c.getFooter(Y),getFormWrapper:()=>{const xe=$c.getBody(Y);return Lo.getCurrent(xe).getOr(xe)},toggleFullscreen:()=>{const xe="tox-dialog--fullscreen",Qe=be_fromDom(Y.element.dom);Ui(Qe,xe)?(Hr(Qe,xe),Md(Qe,V)):(ri(Qe,V),va(Qe,xe))}},pe=a8(oe,t.redial,k);return{dialog:Y,instanceApi:pe}})({dataValidator:Qe,initialData:He,internalDialog:Te},{redial:iw.redial,closeWindow:()=>{$c.hide(pt.dialog),pe(pt.instanceApi)}},e.backstages.dialog);return $c.show(pt.dialog),pt.instanceApi.setData(He),pt.instanceApi},oe),R=(oe,pe,Ge,Te)=>iw.open((Qe,He,St)=>{const pt=l8(He,St),Mt=fr(),Gt=e.backstages.popup.shared.header.isPositionedAtTop(),fn=()=>Mt.on(kn=>{Zr.reposition(kn),Fa.refresh(kn)}),uo=c8({dataValidator:St,initialData:pt,internalDialog:Qe},{redial:iw.redial,closeWindow:()=>{Mt.on(Zr.hide),t.off("ResizeEditor",fn),Mt.clear(),Ge(uo.instanceApi)}},e.backstages.popup,Te.ariaAttrs),Xn=Dc(Zr.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Te.persistent?{event:"doNotDismissYet"}:{},...Gt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Jn("window-manager-inline-events",[ut(Su(),(kn,Zo)=>{es(uo.dialog,Wf)})]),...nj(t,r,Gt)]),isExtraPart:(kn,Zo)=>u8(Zo)}));return Mt.set(Xn),Zr.showWithinBounds(Xn,fi(uo.dialog),{anchor:pe},()=>{const kn=t.inline?ls():be_fromDom(t.getContainer()),Zo=oa(kn);return B.some(Zo)}),(!r||!Gt)&&(Fa.refresh(Xn),t.on("ResizeEditor",fn)),uo.instanceApi.setData(pt),xn.focusIn(uo.dialog),uo.instanceApi},oe);return{open:(oe,pe,Ge)=>{if(!Mo(pe)){if("toolbar"===pe.inline)return R(oe,e.backstages.popup.shared.anchors.inlineDialog(),Ge,pe);if("bottom"===pe.inline)return((oe,pe,Ge,Te)=>iw.open((Qe,He,St)=>{const pt=l8(He,St),Mt=fr(),Gt=e.backstages.popup.shared.header.isPositionedAtTop(),fn=()=>Mt.on(kn=>{Zr.reposition(kn),Fa.refresh(kn)}),uo=c8({dataValidator:St,initialData:pt,internalDialog:Qe},{redial:iw.redial,closeWindow:()=>{Mt.on(Zr.hide),t.off("ResizeEditor ScrollWindow ElementScroll",fn),Mt.clear(),Ge(uo.instanceApi)}},e.backstages.popup,Te.ariaAttrs),Xn=Dc(Zr.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Te.persistent?{event:"doNotDismissYet"}:{},...Gt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Jn("window-manager-inline-events",[ut(Su(),(kn,Zo)=>{es(uo.dialog,Wf)})]),Fa.config({contextual:{lazyContext:()=>B.some(oa(be_fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:kn=>B1(t,kn.element).map($t=>({bounds:X0($t),optScrollEnv:B.some({currentScrollTop:$t.element.dom.scrollTop,scrollElmTop:$r($t.element).top})})).getOrThunk(()=>({bounds:H(),optScrollEnv:B.none()}))})]),isExtraPart:(kn,Zo)=>u8(Zo)}));return Mt.set(Xn),Zr.showWithinBounds(Xn,fi(uo.dialog),{anchor:pe},()=>e.backstages.popup.shared.getSink().toOptional().bind(kn=>{const mn=B1(t,kn.element).map(On=>X0(On)).getOr(H()),Gn=oa(be_fromDom(t.getContentAreaContainer())),Fo=Tr(Gn,mn);return B.some(_s(Fo.x,Fo.y,Fo.width,Fo.height-15))})),Fa.refresh(Xn),t.on("ResizeEditor ScrollWindow ElementScroll",fn),uo.instanceApi.setData(pt),xn.focusIn(uo.dialog),uo.instanceApi},oe))(oe,e.backstages.popup.shared.anchors.inlineBottomDialog(),Ge,pe);if("cursor"===pe.inline)return R(oe,e.backstages.popup.shared.anchors.cursor(),Ge,pe)}return k(oe,Ge)},openUrl:(oe,pe)=>((oe,pe)=>iw.openUrl(Te=>{const xe=QW(Te,{closeWindow:()=>{$c.hide(xe.dialog),pe(xe.instanceApi)}},t,e.backstages.dialog);return $c.show(xe.dialog),xe.instanceApi},oe))(oe,pe),alert:(oe,pe)=>{c.open(oe,pe)},close:oe=>{oe.close()},confirm:(oe,pe)=>{d.open(oe,pe)}}};K.add("silver",e=>{(e=>{Q4(e),(e=>{const t=e.options.register,r=d=>en(d,bn)?{value:DD(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=d=>Ln(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};t("color_map",{processor:r,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_map_background",{processor:r}),t("color_map_foreground",{processor:r}),t("color_cols",{processor:c,default:AS(e)}),t("color_cols_foreground",{processor:c,default:a_(e,kS)}),t("color_cols_background",{processor:c,default:a_(e,ES)}),t("custom_colors",{processor:"boolean",default:!0}),t("color_default_foreground",{processor:"string",default:_S}),t("color_default_background",{processor:"string",default:_S})})(e),(e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:r=>!1===r?{value:[],valid:!0}:bn(r)||en(r,bn)?{value:GV(r),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(e)})(e);let t=()=>H();const{dialogs:r,popups:c,renderUI:d}=oU(e,{getPopupSinkBounds:()=>t()});QD_register(e,c.backstage.shared);const v=oj({editor:e,backstages:{popup:c.backstage,dialog:r.backstage}});return{renderUI:async()=>{const k=await d();return B1(e,c.getMothership().element).each(I=>{t=()=>X0(I)}),k},getWindowManagerImpl:re(v),getNotificationManagerImpl:()=>((e,t,r)=>{const c=t.backstage.shared,d=()=>{const k=oa(be_fromDom(e.getContentAreaContainer())),R=H(),I=cc(R.x,k.x,k.right),V=cc(R.y,k.y,k.bottom),Z=Math.max(k.right,R.right),Y=Math.max(k.bottom,R.bottom);return B.some(_s(I,V,Z-I,Y-V))};return{open:(k,R)=>{const I=()=>{R(),Zr.hide(Z)},V=Dc(Hx.sketch({text:k.text,level:xo(["success","error","warning","warn","info"],k.type)?k.type:void 0,progress:!0===k.progressBar,icon:k.icon,closeButton:k.closeButton,onAction:I,iconProvider:c.providers.icons,translationProvider:c.providers.translate})),Z=Dc(Zr.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:c.getSink,fireDismissalEventInstead:{},...c.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));r.add(Z),Ln(k.timeout)&&k.timeout>0&&f2.setEditorTimeout(e,()=>{I()},k.timeout);const oe={close:I,reposition:()=>{const pe=fi(V),Ge={maxHeightFunction:km()},Te=e.notificationManager.getNotifications();if(Te[0]===oe){const xe={...c.anchors.banner(),overrides:Ge};Zr.showWithinBounds(Z,pe,{anchor:xe},d)}else U(Te,oe).each(xe=>{const Qe=Te[xe-1].getEl(),He={type:"node",root:ls(),node:B.some(be_fromDom(Qe)),overrides:Ge,layouts:{onRtl:()=>[tr],onLtr:()=>[tr]}};Zr.showWithinBounds(Z,pe,{anchor:He},d)})},text:pe=>{Hx.updateText(V,pe)},settings:k,getEl:()=>V.element.dom,progressBar:{value:pe=>{Hx.updateProgress(V,pe)}}};return oe},close:k=>{k.close()},getArgs:k=>k.settings}})(e,{backstage:c.backstage},c.getMothership())}})}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ks=M=>H=>(M=>{const H=typeof M;return null===M?"null":"object"===H&&Array.isArray(M)?"array":"object"===H&&((M,H,K)=>{var me;return!!((K,me)=>me.isPrototypeOf(K))(M,H.prototype)||(null===(me=M.constructor)||void 0===me?void 0:me.name)===H.name})(M,String)?"string":H})(H)===M,Os=M=>H=>typeof H===M,vr=Ks("string"),As=Ks("object"),bn=Ks("array"),qn=Os("boolean"),Oo=M=>!(M=>null==M)(M),ys=Os("function"),zt=Os("number"),Mo=()=>{},Wn=(M,H)=>M===H,Ln=M=>H=>!M(H),en=(!1,()=>false);class ve{constructor(H,K){this.tag=H,this.value=K}static some(H){return new ve(!0,H)}static none(){return ve.singletonNone}fold(H,K){return this.tag?K(this.value):H()}isSome(){return this.tag}isNone(){return!this.tag}map(H){return this.tag?ve.some(H(this.value)):ve.none()}bind(H){return this.tag?H(this.value):ve.none()}exists(H){return this.tag&&H(this.value)}forall(H){return!this.tag||H(this.value)}filter(H){return!this.tag||H(this.value)?this:ve.none()}getOr(H){return this.tag?this.value:H}or(H){return this.tag?this:H}getOrThunk(H){return this.tag?this.value:H()}orThunk(H){return this.tag?this:H()}getOrDie(H){if(this.tag)return this.value;throw new Error(H??"Called getOrDie on None")}static from(H){return Oo(H)?ve.some(H):ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(H){this.tag&&H(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ve.singletonNone=new ve(!1);const Le=Array.prototype.slice,mo=Array.prototype.indexOf,Vo=Array.prototype.push,gt=(M,H)=>((M,H)=>mo.call(M,H))(M,H)>-1,Is=(M,H)=>{for(let K=0,me=M.length;K<me;K++)if(H(M[K],K))return!0;return!1},ko=(M,H)=>{const K=M.length,me=new Array(K);for(let Ce=0;Ce<K;Ce++)me[Ce]=H(M[Ce],Ce);return me},qe=(M,H)=>{for(let K=0,me=M.length;K<me;K++)H(M[K],K)},Se=(M,H)=>{const K=[];for(let me=0,Ce=M.length;me<Ce;me++){const Tt=M[me];H(Tt,me)&&K.push(Tt)}return K},De=(M,H,K)=>(qe(M,(me,Ce)=>{K=H(K,me,Ce)}),K),Ot=(M,H,K)=>{for(let me=0,Ce=M.length;me<Ce;me++){const Tt=M[me];if(H(Tt,me))return ve.some(Tt);if(K(Tt,me))break}return ve.none()},B=(M,H)=>Ot(M,H,en),oo=(M,H)=>(M=>{const H=[];for(let K=0,me=M.length;K<me;++K){if(!bn(M[K]))throw new Error("Arr.flatten item "+K+" was not an array, input: "+M);Vo.apply(H,M[K])}return H})(ko(M,H)),yn=M=>{const H=Le.call(M,0);return H.reverse(),H},Lt=(M,H)=>H>=0&&H<M.length?ve.some(M[H]):ve.none(),U=M=>Lt(M,0),xo=M=>Lt(M,M.length-1),Ys=(M,H)=>{const K=[],me=ys(H)?Ce=>Is(K,Tt=>H(Tt,Ce)):Ce=>gt(K,Ce);for(let Ce=0,Tt=M.length;Ce<Tt;Ce++){const Rt=M[Ce];me(Rt)||K.push(Rt)}return K},bt=(M,H,K=Wn)=>M.exists(me=>K(me,H)),Be=(M,H,K)=>M.isSome()&&H.isSome()?ve.some(K(M.getOrDie(),H.getOrDie())):ve.none(),jn=M=>{if(null==M)throw new Error("Node cannot be null or undefined");return{dom:M}},ro_fromTag=(M,H)=>{const me=(H||document).createElement(M);return jn(me)},ro_fromDom=jn,mr=(M,H)=>M.dom===H.dom;typeof window<"u"||Function("return this;")();const Ao=M=>M.dom.nodeName.toLowerCase(),zo=H=>1===(M=>M.dom.nodeType)(H),Mr=M=>H=>zo(H)&&Ao(H)===M,Hs=M=>ve.from(M.dom.parentNode).map(ro_fromDom),wr=M=>ko(M.dom.childNodes,ro_fromDom),$o=(M,H)=>ve.from(M.dom.childNodes[H]).map(ro_fromDom),Xo=M=>$o(M,0),Vs=M=>$o(M,M.dom.childNodes.length-1),Ye=(M,H,K)=>{let me=M.dom;const Ce=ys(K)?K:en;for(;me.parentNode;){me=me.parentNode;const Tt=ro_fromDom(me);if(H(Tt))return ve.some(Tt);if(Ce(Tt))break}return ve.none()},Ke=(M,H,K)=>((M,H,K,me,Ce)=>((Ce,Tt)=>Tt(Ce))(K,me)?ve.some(K):ys(Ce)&&Ce(K)?ve.none():H(K,me,Ce))(0,Ye,M,H,K),Sn=(M,H)=>{Hs(M).each(me=>{me.dom.insertBefore(H.dom,M.dom)})},Kn=(M,H)=>{M.dom.appendChild(H.dom)},sr=(M,H)=>{qe(H,K=>{Kn(M,K)})},jr=M=>{M.dom.textContent="",qe(wr(M),H=>{Es(H)})},Es=M=>{const H=M.dom;null!==H.parentNode&&H.parentNode.removeChild(H)};var Uo=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),rt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Qn=tinymce.util.Tools.resolve("tinymce.util.VK");const _r=M=>ko(M,ro_fromDom),ea=Object.keys,Gr=(M,H)=>{const K=ea(M);for(let me=0,Ce=K.length;me<Ce;me++){const Tt=K[me];H(M[Tt],Tt)}},qa=(M,H)=>{const K=M.dom;Gr(H,(me,Ce)=>{((M,H,K)=>{if(!(vr(K)||qn(K)||zt(K)))throw console.error("Invalid call to Attribute.set. Key ",H,":: Value ",K,":: Element ",M),new Error("Attribute value was not simple");M.setAttribute(H,K+"")})(K,Ce,me)})},rr=M=>De(M.dom.attributes,(H,K)=>(H[K.name]=K.value,H),{}),qr=M=>((M,H)=>ro_fromDom(M.dom.cloneNode(!0)))(M),Ma=(M,H)=>{const K=((M,H)=>{const K=ro_fromTag(H),me=rr(M);return qa(K,me),K})(M,H);((M,H)=>{(M=>ve.from(M.dom.nextSibling).map(ro_fromDom))(M).fold(()=>{Hs(M).each(Ce=>{Kn(Ce,H)})},me=>{Sn(me,H)})})(M,K);const me=wr(M);return sr(K,me),Es(M),K};var ar=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ts=tinymce.util.Tools.resolve("tinymce.util.Tools");const Rs=M=>H=>Oo(H)&&H.nodeName.toLowerCase()===M,cs=M=>H=>Oo(H)&&M.test(H.nodeName),ms=M=>Oo(M)&&3===M.nodeType,Ss=M=>Oo(M)&&1===M.nodeType,le=cs(/^(OL|UL|DL)$/),ie=cs(/^(OL|UL)$/),je=Rs("ol"),et=cs(/^(LI|DT|DD)$/),Kt=cs(/^(DT|DD)$/),hn=cs(/^(TH|TD)$/),Rn=Rs("br"),be=(M,H)=>Oo(H)&&H.nodeName in M.schema.getTextBlockElements(),Vn=(M,H)=>Oo(M)&&M.nodeName in H,ge=(M,H)=>Oo(H)&&H.nodeName in M.schema.getVoidElements(),at=(M,H,K)=>{const me=M.isEmpty(H);return!(K&&M.select("span[data-mce-type=bookmark]",H).length>0)&&me},ht=(M,H)=>M.isChildOf(H,M.getRoot()),Ft=M=>H=>H.options.get(M),sn=Ft("lists_indent_on_tab"),rn=Ft("forced_root_block"),Mn=Ft("forced_root_block_attrs"),ao=(M,H)=>{const K=M.dom,me=M.schema.getBlockElements(),Ce=K.createFragment(),Tt=rn(M),Rt=Mn(M);let Hn,io,Dn=!1;for(io=K.create(Tt,Rt),Vn(H.firstChild,me)||Ce.appendChild(io);Hn=H.firstChild;){const jo=Hn.nodeName;!Dn&&("SPAN"!==jo||"bookmark"!==Hn.getAttribute("data-mce-type"))&&(Dn=!0),Vn(Hn,me)?(Ce.appendChild(Hn),io=null):(io||(io=K.create(Tt,Rt),Ce.appendChild(io)),io.appendChild(Hn))}return!Dn&&io&&io.appendChild(K.create("br",{"data-mce-bogus":"1"})),Ce},To=ar.DOM,gc=Mr("dd"),Ta=Mr("dt"),co=M=>{Ta(M)&&Ma(M,"dd")},gs=(M,H)=>{if(ms(M))return{container:M,offset:H};const K=Uo.getNode(M,H);return ms(K)?{container:K,offset:H>=M.childNodes.length?K.data.length:0}:K.previousSibling&&ms(K.previousSibling)?{container:K.previousSibling,offset:K.previousSibling.data.length}:K.nextSibling&&ms(K.nextSibling)?{container:K.nextSibling,offset:0}:{container:M,offset:H}},ma=M=>{const H=M.cloneRange(),K=gs(M.startContainer,M.startOffset);H.setStart(K.container,K.offset);const me=gs(M.endContainer,M.endOffset);return H.setEnd(me.container,me.offset),H},ga=["OL","UL","DL"],hc=ga.join(","),is=(M,H)=>{const K=H||M.selection.getStart(!0);return M.dom.getParent(K,hc,Kr(M,K))},cr=M=>{const H=M.selection.getSelectedBlocks();return Se(((M,H)=>{const K=ts.map(H,me=>M.dom.getParent(me,"li,dd,dt",Kr(M,me))||me);return Ys(K)})(M,H),et)},xi=(M,H)=>{const K=M.dom.getParents(H,"TD,TH");return K.length>0?K[0]:M.getBody()},Kr=(M,H)=>{const K=M.dom.getParents(H,M.dom.isBlock);return B(K,Ce=>((M,H)=>!le(H)&&!et(H)&&Is(ga,K=>M.isValidChild(H.nodeName,K)))(M.schema,Ce)).getOr(M.getBody())},Ic=(M,H)=>{const K=M.dom.getParents(H,"ol,ul",Kr(M,H));return xo(K)},kc=(M,H)=>{const K=ko(H,me=>Ic(M,me).getOr(me));return Ys(K)},Qc=M=>/\btox\-/.test(M.className),Ds=(M,H)=>Ot(M,le,hn).exists(K=>K.nodeName===H&&!Qc(K)),Ia=(M,H)=>null!==H&&!M.dom.isEditable(H),Ec=(M,H)=>{const K=M.dom.getParent(H,"ol,ul,dl");return Ia(M,K)},Vl=(M,H)=>{const K=M.selection.getNode();return H({parents:M.dom.getParents(K),element:K}),M.on("NodeChange",H),()=>M.off("NodeChange",H)},ce=(M,H,K)=>M.dispatch("ListMutation",{action:H,element:K}),Ve=(M=>H=>H.replace(M,""))(/^\s+|\s+$/g),hs=(M,H,K)=>{((M,H,K)=>{if(!vr(K))throw console.error("Invalid call to CSS.set. Property ",H,":: Value ",K,":: Element ",M),new Error("CSS value must be a string: "+K);(M=>void 0!==M.style&&ys(M.style.getPropertyValue))(M)&&M.style.setProperty(H,K)})(M.dom,H,K)},Zs=(M,H)=>{Kn(M.item,H.list)},Lc=(M,H)=>{const K={list:ro_fromTag(H,M),item:ro_fromTag("li",M)};return Kn(K.list,K.item),K},It=M=>((M,H)=>{const K=M.dom;if(1!==K.nodeType)return!1;{const me=K;if(void 0!==me.matches)return me.matches(H);if(void 0!==me.msMatchesSelector)return me.msMatchesSelector(H);if(void 0!==me.webkitMatchesSelector)return me.webkitMatchesSelector(H);if(void 0!==me.mozMatchesSelector)return me.mozMatchesSelector(H);throw new Error("Browser lacks native selectors")}})(M,"OL,UL"),go=M=>Xo(M).exists(It),Ms=M=>M.depth>0,ka=M=>M.isSelected,Ns=M=>{const H=wr(M),K=(M=>Vs(M).exists(It))(M)?H.slice(0,-1):H;return ko(K,qr)},ue=M=>(qe(M,(H,K)=>{((M,H)=>{const K=M[H].depth,me=Tt=>Tt.depth===K&&!Tt.dirty,Ce=Tt=>Tt.depth<K;return Ot(yn(M.slice(0,H)),me,Ce).orThunk(()=>Ot(M.slice(H+1),me,Ce))})(M,K).fold(()=>{H.dirty&&(M=>{M.listAttributes=((M,H)=>{const K={};return((M,H,K,me)=>{Gr(M,(Ce,Tt)=>{(H(Ce,Tt)?K:me)(Ce,Tt)})})(M,H,(M=>(H,K)=>{M[K]=H})(K),Mo),K})(M.listAttributes,(H,K)=>"start"!==K)})(H)},me=>((M,H)=>{M.listType=H.listType,M.listAttributes={...H.listAttributes}})(H,me))}),M),ot=(M,H,K,me)=>Xo(me).filter(It).fold(()=>{H.each(Rt=>{mr(Rt.start,me)&&K.set(!0)});const Ce=((M,H,K)=>Hs(M).filter(zo).map(me=>({depth:H,dirty:!1,isSelected:K,content:Ns(M),itemAttributes:rr(M),listAttributes:rr(me),listType:Ao(me)})))(me,M,K.get());H.each(Rt=>{mr(Rt.end,me)&&K.set(!1)});const Tt=Vs(me).filter(It).map(Rt=>Ut(M,H,K,Rt)).getOr([]);return Ce.toArray().concat(Tt)},Ce=>Ut(M,H,K,Ce)),Ut=(M,H,K,me)=>oo(wr(me),Ce=>(It(Ce)?Ut:ot)(M+1,H,K,Ce)),ta=(M,H)=>{const K=ue(H);return((M,H)=>{const K=De(H,(me,Ce)=>Ce.depth>me.length?((M,H,K)=>{const me=((M,H,K)=>{const me=[];for(let Ce=0;Ce<K;Ce++)me.push(Lc(M,H.listType));return me})(M,K,K.depth-H.length);return(M=>{for(let H=1;H<M.length;H++)Zs(M[H-1],M[H])})(me),((M,H)=>{for(let K=0;K<M.length-1;K++)hs(M[K].item,"list-style-type","none");xo(M).each(K=>{qa(K.list,H.listAttributes),qa(K.item,H.itemAttributes),sr(K.item,H.content)})})(me,K),((M,H)=>{Be(xo(M),U(H),Zs)})(H,me),H.concat(me)})(M,me,Ce):((M,H,K)=>{const me=H.slice(0,K.depth);return xo(me).each(Ce=>{const Tt=((M,H,K)=>{const me=ro_fromTag("li",M);return qa(me,H),sr(me,K),me})(M,K.itemAttributes,K.content);((M,H)=>{Kn(M.list,H),M.item=H})(Ce,Tt),((M,H)=>{Ao(M.list)!==H.listType&&(M.list=Ma(M.list,H.listType)),qa(M.list,H.listAttributes)})(Ce,K)}),me})(M,me,Ce),[]);return U(K).map(me=>me.list)})(M.contentDocument,K).toArray()},$r=(M,H,K)=>{const me=((M,H)=>{const K=(M=>{let H=!1;return{get:()=>H,set:Ce=>{H=Ce}}})();return ko(M,Ce=>({sourceList:Ce,entries:Ut(0,H,K,Ce)}))})(H,(M=>{const H=ko(cr(M),ro_fromDom);return Be(B(H,Ln(go)),B(yn(H),Ln(go)),(K,me)=>({start:K,end:me}))})(M));qe(me,Ce=>{((M,H)=>{qe(Se(M,ka),K=>((M,H)=>{switch(M){case"Indent":H.depth++;break;case"Outdent":H.depth--;break;case"Flatten":H.depth=0}H.dirty=!0})(H,K))})(Ce.entries,K);const Tt=((M,H)=>oo(((M,H)=>{if(0===M.length)return[];{let K=H(M[0]);const me=[];let Ce=[];for(let Tt=0,Rt=M.length;Tt<Rt;Tt++){const Hn=M[Tt],io=H(Hn);io!==K&&(me.push(Ce),Ce=[]),K=io,Ce.push(Hn)}return 0!==Ce.length&&me.push(Ce),me}})(H,Ms),K=>U(K).exists(Ms)?ta(M,K):((M,H)=>{const K=ue(H);return ko(K,me=>{const Ce=((M,H)=>{const me=document.createDocumentFragment();return qe(M,Ce=>{me.appendChild(Ce.dom)}),ro_fromDom(me)})(me.content);return ro_fromDom(ao(M,Ce.dom))})})(M,K)))(M,Ce.entries);qe(Tt,Rt=>{ce(M,"Indent"===K?"IndentList":"OutdentList",Rt.dom)}),((M,H)=>{qe(H,K=>{Sn(M,K)})})(Ce.sourceList,Tt),Es(Ce.sourceList)})},_c=(M,H)=>{const K=_r((M=>{const H=(M=>{const H=Ic(M,M.selection.getStart()),K=Se(M.selection.getSelectedBlocks(),ie);return H.toArray().concat(K)})(M);return kc(M,H)})(M)),me=_r((M=>Se(cr(M),Kt))(M));let Ce=!1;if(K.length||me.length){const Tt=M.selection.getBookmark();$r(M,K,H),((M,H,K)=>{qe(K,"Indent"===H?co:me=>((M,H)=>{gc(H)?Ma(H,"dt"):Ta(H)&&(M=>ve.from(M.dom.parentElement).map(ro_fromDom))(H).each(K=>((M,H,K)=>{const Ce=To.select('span[data-mce-type="bookmark"]',H),Tt=ao(M,K),Rt=To.createRng();Rt.setStartAfter(K),Rt.setEndAfter(H);const Hn=Rt.extractContents();for(let Dn=Hn.firstChild;Dn;Dn=Dn.firstChild)if("LI"===Dn.nodeName&&M.dom.isEmpty(Dn)){To.remove(Dn);break}M.dom.isEmpty(Hn)||To.insertAfter(Hn,H),To.insertAfter(Tt,H);const io=K.parentElement;io&&at(M.dom,io)&&(Dn=>{const jo=Dn.parentNode;jo&&ts.each(Ce,Xa=>{jo.insertBefore(Xa,K.parentNode)}),To.remove(Dn)})(io),To.remove(K),at(M.dom,H)&&To.remove(H)})(M,K.dom,H.dom))})(M,me))})(M,H,me),M.selection.moveToBookmark(Tt),M.selection.setRng(ma(M.selection.getRng())),M.nodeChanged(),Ce=!0}return Ce},Hc=(M,H)=>!(M=>{const H=is(M);return Ia(M,H)})(M)&&_c(M,H),Ti=M=>Hc(M,"Indent"),Fs=M=>Hc(M,"Outdent"),fa=M=>Hc(M,"Flatten"),js=M=>"\ufeff"===M;var jm=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const bl=ar.DOM,ei=M=>{const H={},K=me=>{let Ce=M[me?"startContainer":"endContainer"],Tt=M[me?"startOffset":"endOffset"];if(Ss(Ce)){const Rt=bl.create("span",{"data-mce-type":"bookmark"});Ce.hasChildNodes()?(Tt=Math.min(Tt,Ce.childNodes.length-1),me?Ce.insertBefore(Rt,Ce.childNodes[Tt]):bl.insertAfter(Rt,Ce.childNodes[Tt])):Ce.appendChild(Rt),Ce=Rt,Tt=0}H[me?"startContainer":"endContainer"]=Ce,H[me?"startOffset":"endOffset"]=Tt};return K(!0),M.collapsed||K(),H},Fu=M=>{const H=me=>{let Tt=M[me?"startContainer":"endContainer"],Rt=M[me?"startOffset":"endOffset"];if(Tt){if(Ss(Tt)&&Tt.parentNode){const Hn=Tt;Rt=(Hn=>{var io;let Dn=null===(io=Hn.parentNode)||void 0===io?void 0:io.firstChild,jo=0;for(;Dn;){if(Dn===Hn)return jo;(!Ss(Dn)||"bookmark"!==Dn.getAttribute("data-mce-type"))&&jo++,Dn=Dn.nextSibling}return-1})(Tt),Tt=Tt.parentNode,bl.remove(Hn),!Tt.hasChildNodes()&&bl.isBlock(Tt)&&Tt.appendChild(bl.create("br"))}M[me?"startContainer":"endContainer"]=Tt,M[me?"startOffset":"endOffset"]=Rt}};H(!0),H();const K=bl.createRng();return K.setStart(M.startContainer,M.startOffset),M.endContainer&&K.setEnd(M.endContainer,M.endOffset),ma(K)},Ir=M=>{switch(M){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Jd=(M,H)=>{ts.each(H,(K,me)=>{M.setAttribute(me,K)})},na=(M,H,K)=>{((M,H,K)=>{M.setStyle(H,"list-style-type",K["list-style-type"]?K["list-style-type"]:null)})(M,H,K),((M,H,K)=>{Jd(H,K["list-attributes"]),ts.each(M.select("li",H),me=>{Jd(me,K["list-item-attributes"])})})(M,H,K)},Oc=(M,H)=>Oo(H)&&!Vn(H,M.schema.getBlockElements()),Vc=(M,H,K,me)=>{let Ce=H[K?"startContainer":"endContainer"];const Tt=H[K?"startOffset":"endOffset"];Ss(Ce)&&(Ce=Ce.childNodes[Math.min(Tt,Ce.childNodes.length-1)]||Ce),!K&&Rn(Ce.nextSibling)&&(Ce=Ce.nextSibling);const Hn=(io,Dn)=>{var jo;const Xa=new rt(io,(io=>{for(;!M.dom.isBlock(io)&&io.parentNode&&me!==io;)io=io.parentNode;return io})(io)),Ur=Dn?"next":"prev";let sa;for(;sa=Xa[Ur]();)if(!ge(M,sa)&&!js(sa.textContent)&&0!==(null===(jo=sa.textContent)||void 0===jo?void 0:jo.length))return ve.some(sa);return ve.none()};if(K&&ms(Ce))if(js(Ce.textContent))Ce=Hn(Ce,!1).getOr(Ce);else for(null!==Ce.parentNode&&Oc(M,Ce.parentNode)&&(Ce=Ce.parentNode);null!==Ce.previousSibling&&(Oc(M,Ce.previousSibling)||ms(Ce.previousSibling));)Ce=Ce.previousSibling;if(!K&&ms(Ce))if(js(Ce.textContent))Ce=Hn(Ce,!0).getOr(Ce);else for(null!==Ce.parentNode&&Oc(M,Ce.parentNode)&&(Ce=Ce.parentNode);null!==Ce.nextSibling&&(Oc(M,Ce.nextSibling)||ms(Ce.nextSibling));)Ce=Ce.nextSibling;for(;Ce.parentNode!==me;){const io=Ce.parentNode;if(be(M,Ce)||/^(TD|TH)$/.test(io.nodeName))return Ce;Ce=io}return Ce},Ba=(M,H,K)=>{const me=M.selection.getRng();let Ce="LI";const Tt=Kr(M,((M,H)=>{const K=M.selection.getStart(!0),me=Vc(M,H,!0,M.getBody());return((M,H)=>((M,H,K)=>Ye(M,H,void 0).isSome())(M,function _t(M,...H){return(...K)=>{const me=H.concat(K);return M.apply(null,me)}}(mr,H)))(ro_fromDom(me),ro_fromDom(H.commonAncestorContainer))?H.commonAncestorContainer:K})(M,me)),Rt=M.dom;if("false"===Rt.getContentEditable(M.selection.getNode()))return;"DL"===(H=H.toUpperCase())&&(Ce="DT");const Hn=ei(me),io=Se(((M,H,K)=>{const me=[],Ce=M.dom,Tt=Vc(M,H,!0,K),Rt=Vc(M,H,!1,K);let Hn;const io=[];for(let Dn=Tt;Dn&&(io.push(Dn),Dn!==Rt);Dn=Dn.nextSibling);return ts.each(io,Dn=>{var jo;if(be(M,Dn))return me.push(Dn),void(Hn=null);if(Ce.isBlock(Dn)||Rn(Dn))return Rn(Dn)&&Ce.remove(Dn),void(Hn=null);const Xa=Dn.nextSibling;jm.isBookmarkNode(Dn)&&(le(Xa)||be(M,Xa)||!Xa&&Dn.parentNode===K)?Hn=null:(Hn||(Hn=Ce.create("p"),null===(jo=Dn.parentNode)||void 0===jo||jo.insertBefore(Hn,Dn),me.push(Hn)),Hn.appendChild(Dn))}),me})(M,me,Tt),M.dom.isEditable);ts.each(io,Dn=>{let jo;const Xa=Dn.previousSibling,Ur=Dn.parentNode;et(Ur)||(Xa&&le(Xa)&&Xa.nodeName===H&&((M,H,K)=>{const me=M.getStyle(H,"list-style-type");let Ce=K?K["list-style-type"]:"";return Ce=null===Ce?"":Ce,me===Ce})(Rt,Xa,K)?(jo=Xa,Dn=Rt.rename(Dn,Ce),Xa.appendChild(Dn)):(jo=Rt.create(H),Ur.insertBefore(jo,Dn),jo.appendChild(Dn),Dn=Rt.rename(Dn,Ce)),((M,H,K)=>{ts.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],me=>M.setStyle(H,me,""))})(Rt,Dn),na(Rt,jo,K),Qd(M.dom,jo))}),M.selection.setRng(Fu(Hn))},$u=(M,H,K)=>((M,H)=>le(M)&&M.nodeName===H?.nodeName)(H,K)&&((M,H,K)=>M.getStyle(H,"list-style-type",!0)===M.getStyle(K,"list-style-type",!0))(M,H,K)&&((M,H)=>M.className===H.className)(H,K),Qd=(M,H)=>{let K,me=H.nextSibling;if($u(M,H,me)){const Ce=me;for(;K=Ce.firstChild;)H.appendChild(K);M.remove(Ce)}if(me=H.previousSibling,$u(M,H,me)){const Ce=me;for(;K=Ce.lastChild;)H.insertBefore(K,H.firstChild);M.remove(Ce)}},Iu=(M,H,K,me)=>{if(H.nodeName!==K){const Ce=M.dom.rename(H,K);na(M.dom,Ce,me),ce(M,Ir(K),Ce)}else na(M.dom,H,me),ce(M,Ir(K),H)},Ei=(M,H,K,me)=>{if(H.classList.forEach((Ce,Tt,Rt)=>{Ce.startsWith("tox-")&&(Rt.remove(Ce),0===Rt.length&&H.removeAttribute("class"))}),H.nodeName!==K){const Ce=M.dom.rename(H,K);na(M.dom,Ce,me),ce(M,Ir(K),Ce)}else na(M.dom,H,me),ce(M,Ir(K),H)},tl=M=>"list-style-type"in M,yd=(M,H,K)=>{const me=is(M);if(Ec(M,me))return;const Ce=(M=>{const H=is(M),K=M.selection.getSelectedBlocks();return((M,H)=>Oo(M)&&1===H.length&&H[0]===M)(H,K)?(M=>Se(M.querySelectorAll(hc),le))(H):Se(K,me=>le(me)&&H!==me)})(M),Tt=As(K)?K:{};Ce.length>0?((M,H,K,me,Ce)=>{const Tt=le(H);if(!Tt||H.nodeName!==me||tl(Ce)||Qc(H)){Ba(M,me,Ce);const Rt=ei(M.selection.getRng()),Hn=Tt?[H,...K]:K,io=Tt&&Qc(H)?Ei:Iu;ts.each(Hn,Dn=>{io(M,Dn,me,Ce)}),M.selection.setRng(Fu(Rt))}else fa(M)})(M,me,Ce,H,Tt):((M,H,K,me)=>{if(H!==M.getBody())if(H)if(H.nodeName!==K||tl(me)||Qc(H)){const Ce=ei(M.selection.getRng());Qc(H)&&H.classList.forEach((Rt,Hn,io)=>{Rt.startsWith("tox-")&&(io.remove(Rt),0===io.length&&H.removeAttribute("class"))}),na(M.dom,H,me);const Tt=M.dom.rename(H,K);Qd(M.dom,Tt),M.selection.setRng(Fu(Ce)),Ba(M,K,me),ce(M,Ir(K),Tt)}else fa(M);else Ba(M,K,me),ce(M,Ir(K),H)})(M,me,H,Tt)},Ya=ar.DOM,em=(M,H)=>{const K=ts.grep(M.select("ol,ul",H));ts.each(K,me=>{((M,H)=>{const K=H.parentElement;if(K&&"LI"===K.nodeName&&K.firstChild===H){const me=K.previousSibling;me&&"LI"===me.nodeName?(me.appendChild(H),at(M,K)&&Ya.remove(K)):Ya.setStyle(K,"listStyleType","none")}if(le(K)){const me=K.previousSibling;me&&"LI"===me.nodeName&&me.appendChild(H)}})(M,me)})},Or=(M,H,K,me)=>{let Ce=H.startContainer;const Tt=H.startOffset;if(ms(Ce)&&(K?Tt<Ce.data.length:Tt>0))return Ce;const Rt=M.schema.getNonEmptyElements();Ss(Ce)&&(Ce=Uo.getNode(Ce,Tt));const Hn=new rt(Ce,me);K&&((M,H)=>!!Rn(H)&&M.isBlock(H.nextSibling)&&!Rn(H.previousSibling))(M.dom,Ce)&&Hn.next();const io=K?Hn.next.bind(Hn):Hn.prev2.bind(Hn);for(;Ce=io();)if("LI"===Ce.nodeName&&!Ce.hasChildNodes()||Rt[Ce.nodeName]||ms(Ce)&&Ce.data.length>0)return Ce;return null},Lu=(M,H)=>{const K=H.childNodes;return 1===K.length&&!le(K[0])&&M.isBlock(K[0])},gr=(M,H,K)=>{let me;const Ce=H.parentNode;if(!ht(M,H)||!ht(M,K))return;le(K.lastChild)&&(me=K.lastChild),Ce===K.lastChild&&Rn(Ce.previousSibling)&&M.remove(Ce.previousSibling);const Tt=K.lastChild;Tt&&Rn(Tt)&&H.hasChildNodes()&&M.remove(Tt),at(M,K,!0)&&jr(ro_fromDom(K)),((M,H,K)=>{let me;const Ce=Lu(M,K)?K.firstChild:K;if(((M,H)=>{Lu(M,H)&&M.remove(H.firstChild,!0)})(M,H),!at(M,H,!0))for(;me=H.firstChild;)Ce.appendChild(me)})(M,H,K),me&&K.appendChild(me);const Hn=((M,H)=>{const K=M.dom,me=H.dom;return K!==me&&K.contains(me)})(ro_fromDom(K),ro_fromDom(H))?M.getParents(H,le,K):[];M.remove(H),qe(Hn,io=>{at(M,io)&&io!==M.getRoot()&&M.remove(io)})},_i=(M,H)=>{const K=M.dom,me=M.selection,Ce=me.getStart(),Tt=xi(M,Ce),Rt=K.getParent(me.getStart(),"LI",Tt);if(Rt){const Hn=Rt.parentElement;if(Hn===M.getBody()&&at(K,Hn))return!0;const io=ma(me.getRng()),Dn=K.getParent(Or(M,io,H,Tt),"LI",Tt);if(Dn&&Dn!==Rt)return M.undoManager.transact(()=>{H?((M,H,K,me)=>{const Ce=M.dom;if(Ce.isEmpty(me))((M,H,K)=>{jr(ro_fromDom(K)),gr(M.dom,H,K),M.selection.setCursorLocation(K,0)})(M,K,me);else{const Tt=ei(H);gr(Ce,K,me),M.selection.setRng(Fu(Tt))}})(M,io,Dn,Rt):(M=>{var H;return(null===(H=M.parentNode)||void 0===H?void 0:H.firstChild)===M})(Rt)?Fs(M):((M,H,K,me)=>{const Ce=ei(H);gr(M.dom,K,me);const Tt=Fu(Ce);M.selection.setRng(Tt)})(M,io,Rt,Dn)}),!0;if(!Dn&&!H&&0===io.startOffset&&0===io.endOffset)return M.undoManager.transact(()=>{fa(M)}),!0}return!1},Wl=M=>{const H=M.selection.getStart(),K=xi(M,H);return M.dom.getParent(H,"LI,DT,DD",K)||cr(M).length>0},Cd=(M,H)=>{const K=M.selection;return!Ec(M,K.getNode())&&(K.isCollapsed()?((M,H)=>_i(M,H)||((M,H)=>{const K=M.dom,me=M.selection.getStart(),Ce=xi(M,me),Tt=K.getParent(me,K.isBlock,Ce);if(Tt&&K.isEmpty(Tt)){const Rt=ma(M.selection.getRng()),Hn=K.getParent(Or(M,Rt,H,Ce),"LI",Ce);if(Hn){const io=Ur=>gt(["td","th","caption"],Ao(Ur)),Dn=Ur=>Ur.dom===Ce;return!!((M,H,K=Wn)=>Be(M,H,K).getOr(M.isNone()&&H.isNone()))(Ke(ro_fromDom(Hn),io,Dn),Ke(ro_fromDom(Rt.startContainer),io,Dn),mr)&&(M.undoManager.transact(()=>{const Ur=Hn.parentNode;((M,H,K)=>{const me=M.getParent(H.parentNode,M.isBlock,K);M.remove(H),me&&M.isEmpty(me)&&M.remove(me)})(K,Tt,Ce),Qd(K,Ur),M.selection.select(Hn,!0),M.selection.collapse(H)}),!0)}}return!1})(M,H))(M,H):(M=>!!Wl(M)&&(M.undoManager.transact(()=>{M.execCommand("Delete"),em(M.dom,M.getBody())}),!0))(M))},Ym=M=>{const H=yn(Ve(M).split("")),K=ko(H,(me,Ce)=>{const Tt=me.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,Ce)*Tt});return De(K,(me,Ce)=>me+Ce,0)},Ac=M=>{if(--M<0)return"";{const H=M%26,K=Math.floor(M/26);return Ac(K)+String.fromCharCode("A".charCodeAt(0)+H)}},xd=M=>{const H=parseInt(M.start,10);return bt(M.listStyleType,"upper-alpha")?Ac(H):bt(M.listStyleType,"lower-alpha")?Ac(H).toLowerCase():M.start},jl=(M,H)=>()=>{const K=is(M);return Oo(K)&&K.nodeName===H},di=M=>{M.addCommand("mceListProps",()=>{(M=>{const H=is(M);!je(H)||Ec(M,H)||M.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:xd({start:M.dom.getAttrib(H,"start","1"),listStyleType:ve.from(M.dom.getStyle(H,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:K=>{(M=>{switch((M=>(M=>/^[0-9]+$/.test(M))(M)?2:(M=>/^[A-Z]+$/.test(M))(M)?0:(M=>/^[a-z]+$/.test(M))(M)?1:(M=>!(M=>M.length>0)(M))(M)?3:4)(M)){case 2:return ve.some({listStyleType:ve.none(),start:M});case 0:return ve.some({listStyleType:ve.some("upper-alpha"),start:Ym(M).toString()});case 1:return ve.some({listStyleType:ve.some("lower-alpha"),start:Ym(M).toString()});case 3:return ve.some({listStyleType:ve.none(),start:""});case 4:return ve.none()}})(K.getData().start).each(Ce=>{M.execCommand("mceListUpdate",!1,{attrs:{start:"1"===Ce.start?"":Ce.start},styles:{"list-style-type":Ce.listStyleType.getOr("")}})}),K.close()}})})(M)})};var Xm=tinymce.util.Tools.resolve("tinymce.html.Node");const zu=M=>3===M.type,Gl=M=>0===M.length,Wg=M=>{const H=(Ce,Tt)=>{const Rt=Xm.create("li");qe(Ce,Hn=>Rt.append(Hn)),Tt?M.insert(Rt,Tt,!0):M.append(Rt)},me=De(M.children(),(Ce,Tt)=>zu(Tt)?[...Ce,Tt]:Gl(Ce)||zu(Tt)?Ce:(H(Ce,Tt),[]),[]);Gl(me)||H(me)},Zh=(M,H)=>K=>(K.setEnabled(M.selection.isEditable()),Vl(M,Ce=>{K.setActive(Ds(Ce.parents,H)),K.setEnabled(!Ec(M,Ce.element)&&M.selection.isEditable())})),oa=(M,H)=>K=>Vl(M,Ce=>K.setEnabled(Ds(Ce.parents,H)&&!Ec(M,Ce.element)));da.add("lists",M=>((M=>{(0,M.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(M),(M=>{M.on("PreInit",()=>{const{parser:H}=M;H.addNodeFilter("ul,ol",K=>qe(K,Wg))})})(M),M.hasPlugin("rtc",!0)?di(M):((M=>{sn(M)&&(M=>{M.on("keydown",H=>{H.keyCode!==Qn.TAB||Qn.metaKeyPressed(H)||M.undoManager.transact(()=>{(H.shiftKey?Fs(M):Ti(M))&&H.preventDefault()})})})(M),(M=>{M.on("ExecCommand",H=>{const K=H.command.toLowerCase();("delete"===K||"forwarddelete"===K)&&Wl(M)&&em(M.dom,M.getBody())}),M.on("keydown",H=>{H.keyCode===Qn.BACKSPACE?Cd(M,!1)&&H.preventDefault():H.keyCode===Qn.DELETE&&Cd(M,!0)&&H.preventDefault()})})(M)})(M),(M=>{M.on("BeforeExecCommand",H=>{const K=H.command.toLowerCase();"indent"===K?Ti(M):"outdent"===K&&Fs(M)}),M.addCommand("InsertUnorderedList",(H,K)=>{yd(M,"UL",K)}),M.addCommand("InsertOrderedList",(H,K)=>{yd(M,"OL",K)}),M.addCommand("InsertDefinitionList",(H,K)=>{yd(M,"DL",K)}),M.addCommand("RemoveList",()=>{fa(M)}),di(M),M.addCommand("mceListUpdate",(H,K)=>{As(K)&&((M,H)=>{const K=is(M);null===K||Ec(M,K)||M.undoManager.transact(()=>{As(H.styles)&&M.dom.setStyles(K,H.styles),As(H.attrs)&&Gr(H.attrs,(me,Ce)=>M.dom.setAttrib(K,Ce,me))})})(M,K)}),M.addQueryStateHandler("InsertUnorderedList",jl(M,"UL")),M.addQueryStateHandler("InsertOrderedList",jl(M,"OL")),M.addQueryStateHandler("InsertDefinitionList",jl(M,"DL"))})(M)),(M=>{const H=K=>()=>M.execCommand(K);M.hasPlugin("advlist")||(M.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:H("InsertOrderedList"),onSetup:Zh(M,"OL")}),M.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:H("InsertUnorderedList"),onSetup:Zh(M,"UL")}))})(M),(M=>{const H={text:"List properties...",icon:"ordered-list",onAction:()=>M.execCommand("mceListProps"),onSetup:oa(M,"OL")};M.ui.registry.addMenuItem("listprops",H),M.ui.registry.addContextMenu("lists",{update:K=>{const me=is(M,K);return je(me)?["listprops"]:[]}})})(M),(M=>({backspaceDelete:H=>{Cd(M,H)}}))(M)))}(),function(){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("code",bn=>((bn=>{bn.addCommand("mceCodeEditor",()=>{(bn=>{const qn=(bn=>bn.getContent({source_view:!0}))(bn);bn.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:qn},onSubmit:qo=>{((bn,qn)=>{bn.focus(),bn.undoManager.transact(()=>{bn.setContent(qn)}),bn.selection.setCursorLocation(),bn.nodeChanged()})(bn,qo.getData().code),qo.close()}})})(bn)})})(bn),(bn=>{const qn=()=>bn.execCommand("mceCodeEditor");bn.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:qn}),bn.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:qn})})(bn),{}))}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Dr=Object.getPrototypeOf,Wr=(z,ne,ae)=>{var Ze;return!!ae(z,ne.prototype)||(null===(Ze=z.constructor)||void 0===Ze?void 0:Ze.name)===ne.name},Os=z=>ne=>(z=>{const ne=typeof z;return null===z?"null":"object"===ne&&Array.isArray(z)?"array":"object"===ne&&Wr(z,String,(ae,Ze)=>Ze.isPrototypeOf(ae))?"string":ne})(ne)===z,vr=z=>ne=>typeof ne===z,qn=Os("string"),qo=Os("object"),Oo=z=>((z,ne)=>qo(z)&&Wr(z,ne,(ae,Ze)=>Dr(ae)===Ze))(z,Object),ys=Os("array"),zt=(null,ne=>null===ne),Mo=vr("boolean"),Wn=z=>!(z=>null==z)(z),_t=vr("function"),Ln=vr("number"),ve=()=>{};class Le{constructor(ne,ae){this.tag=ne,this.value=ae}static some(ne){return new Le(!0,ne)}static none(){return Le.singletonNone}fold(ne,ae){return this.tag?ae(this.value):ne()}isSome(){return this.tag}isNone(){return!this.tag}map(ne){return this.tag?Le.some(ne(this.value)):Le.none()}bind(ne){return this.tag?ne(this.value):Le.none()}exists(ne){return this.tag&&ne(this.value)}forall(ne){return!this.tag||ne(this.value)}filter(ne){return!this.tag||ne(this.value)?this:Le.none()}getOr(ne){return this.tag?this.value:ne}or(ne){return this.tag?this:ne}getOrThunk(ne){return this.tag?this.value:ne()}orThunk(ne){return this.tag?this:ne()}getOrDie(ne){if(this.tag)return this.value;throw new Error(ne??"Called getOrDie on None")}static from(ne){return Wn(ne)?Le.some(ne):Le.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ne){this.tag&&ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Le.singletonNone=new Le(!1);const mo=Object.keys,Vo=Object.hasOwnProperty,qe=(z,ne)=>Vo.call(z,ne),dr=Array.prototype.push,De=z=>{const ne=[];for(let ae=0,Ze=z.length;ae<Ze;++ae){if(!ys(z[ae]))throw new Error("Arr.flatten item "+ae+" was not an array, input: "+z);dr.apply(ne,z[ae])}return ne};typeof window<"u"||Function("return this;")();const yn=(z,ne,ae)=>{((z,ne,ae)=>{if(!(qn(ae)||Mo(ae)||Ln(ae)))throw console.error("Invalid call to Attribute.set. Key ",ne,":: Value ",ae,":: Element ",z),new Error("Attribute value was not simple");z.setAttribute(ne,ae+"")})(z.dom,ne,ae)},bt=z=>{if(null==z)throw new Error("Node cannot be null or undefined");return{dom:z}},Be_fromDom=bt;var lt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ln=tinymce.util.Tools.resolve("tinymce.util.URI");const Je=z=>z.length>0,so=z=>ne=>ne.options.get(z),Ht=so("image_dimensions"),ro=so("image_advtab"),fo=so("image_uploadtab"),mr=so("image_prepend_url"),En=so("image_class_list"),No=so("image_description"),yr=so("image_title"),Ao=so("image_caption"),Ls=so("image_list"),Qr=so("a11y_advanced_options"),zo=so("automatic_uploads"),Ps=(z,ne)=>Math.max(parseInt(z,10),parseInt(ne,10)),wr=z=>(z&&(z=z.replace(/px$/,"")),z),$o=z=>(z.length>0&&/^[0-9]+$/.test(z)&&(z+="px"),z),Sn=z=>"IMG"===z.nodeName&&(z.hasAttribute("data-mce-object")||z.hasAttribute("data-mce-placeholder")),tn=(z,ne)=>{const ae=z.options.get;return ln.isDomSafe(ne,"img",{allow_html_data_urls:ae("allow_html_data_urls"),allow_script_urls:ae("allow_script_urls"),allow_svg_data_urls:ae("allow_svg_data_urls")})},Kn=lt.DOM,Xs=z=>z.style.marginLeft&&z.style.marginRight&&z.style.marginLeft===z.style.marginRight?wr(z.style.marginLeft):"",sr=z=>z.style.marginTop&&z.style.marginBottom&&z.style.marginTop===z.style.marginBottom?wr(z.style.marginTop):"",jr=z=>z.style.borderWidth?wr(z.style.borderWidth):"",Es=(z,ne)=>{var ae;return z.hasAttribute(ne)&&null!==(ae=z.getAttribute(ne))&&void 0!==ae?ae:""},Uo=z=>null!==z.parentNode&&"FIGURE"===z.parentNode.nodeName,rt=(z,ne,ae)=>{""===ae||null===ae?z.removeAttribute(ne):z.setAttribute(ne,ae)},Gr=(z,ne)=>{const ae=z.getAttribute("style"),Ze=ne(null!==ae?ae:"");Ze.length>0?(z.setAttribute("style",Ze),z.setAttribute("data-mce-style",Ze)):z.removeAttribute("style")},Vr=(z,ne)=>(ae,Ze,It)=>{const go=ae.style;go[Ze]?(go[Ze]=$o(It),Gr(ae,ne)):rt(ae,Ze,It)},as=(z,ne)=>z.style[ne]?wr(z.style[ne]):Es(z,ne),Sa=(z,ne)=>{const ae=$o(ne);z.style.marginLeft=ae,z.style.marginRight=ae},Fr=(z,ne)=>{const ae=$o(ne);z.style.marginTop=ae,z.style.marginBottom=ae},qa=(z,ne)=>{const ae=$o(ne);z.style.borderWidth=ae},rr=(z,ne)=>{z.style.borderStyle=ne},zs=z=>{var ne;return null!==(ne=z.style.borderStyle)&&void 0!==ne?ne:""},qr=z=>Wn(z)&&"FIGURE"===z.nodeName,Ma=z=>0===Kn.getAttrib(z,"alt").length&&"presentation"===Kn.getAttrib(z,"role"),ar=z=>Ma(z)?"":Es(z,"alt"),Rs=(z,ne)=>{var ae;const Ze=document.createElement("img");return rt(Ze,"style",ne.style),(Xs(Ze)||""!==ne.hspace)&&Sa(Ze,ne.hspace),(sr(Ze)||""!==ne.vspace)&&Fr(Ze,ne.vspace),(jr(Ze)||""!==ne.border)&&qa(Ze,ne.border),(zs(Ze)||""!==ne.borderStyle)&&rr(Ze,ne.borderStyle),z(null!==(ae=Ze.getAttribute("style"))&&void 0!==ae?ae:"")},ms=(z,ne)=>({src:Es(ne,"src"),alt:ar(ne),title:Es(ne,"title"),width:as(ne,"width"),height:as(ne,"height"),class:Es(ne,"class"),style:z(Es(ne,"style")),caption:Uo(ne),hspace:Xs(ne),vspace:sr(ne),border:jr(ne),borderStyle:zs(ne),isDecorative:Ma(ne)}),Ss=(z,ne,ae,Ze,It)=>{ae[Ze]!==ne[Ze]&&It(z,Ze,String(ae[Ze]))},le=(z,ne,ae)=>{if(ae){Kn.setAttrib(z,"role","presentation");const Ze=Be_fromDom(z);yn(Ze,"alt","")}else{if(zt(ne))((z,ne)=>{z.dom.removeAttribute("alt")})(Be_fromDom(z));else{const Ze=Be_fromDom(z);yn(Ze,"alt",ne)}"presentation"===Kn.getAttrib(z,"role")&&Kn.setAttrib(z,"role","")}},je=(z,ne)=>(ae,Ze,It)=>{z(ae,It),Gr(ae,ne)},et=(z,ne,ae)=>{const Ze=ms(z,ae);Ss(ae,Ze,ne,"caption",(It,go,Xt)=>(z=>{Uo(z)?(z=>{const ne=z.parentNode;Wn(ne)&&(Kn.insertAfter(z,ne),Kn.remove(ne))})(z):(z=>{const ne=Kn.create("figure",{class:"image"});Kn.insertAfter(ne,z),ne.appendChild(z),ne.appendChild(Kn.create("figcaption",{contentEditable:"true"},"Caption")),ne.contentEditable="false"})(z)})(It)),Ss(ae,Ze,ne,"src",rt),Ss(ae,Ze,ne,"title",rt),Ss(ae,Ze,ne,"width",Vr(0,z)),Ss(ae,Ze,ne,"height",Vr(0,z)),Ss(ae,Ze,ne,"class",rt),Ss(ae,Ze,ne,"style",je((It,go)=>rt(It,"style",go),z)),Ss(ae,Ze,ne,"hspace",je(Sa,z)),Ss(ae,Ze,ne,"vspace",je(Fr,z)),Ss(ae,Ze,ne,"border",je(qa,z)),Ss(ae,Ze,ne,"borderStyle",je(rr,z)),((z,ne,ae)=>{(ae.alt!==ne.alt||ae.isDecorative!==ne.isDecorative)&&le(z,ae.alt,ae.isDecorative)})(ae,Ze,ne)},Kt=(z,ne)=>{const Ze=(z=>{if(z.margin){const ne=String(z.margin).split(" ");switch(ne.length){case 1:z["margin-top"]=z["margin-top"]||ne[0],z["margin-right"]=z["margin-right"]||ne[0],z["margin-bottom"]=z["margin-bottom"]||ne[0],z["margin-left"]=z["margin-left"]||ne[0];break;case 2:z["margin-top"]=z["margin-top"]||ne[0],z["margin-right"]=z["margin-right"]||ne[1],z["margin-bottom"]=z["margin-bottom"]||ne[0],z["margin-left"]=z["margin-left"]||ne[1];break;case 3:z["margin-top"]=z["margin-top"]||ne[0],z["margin-right"]=z["margin-right"]||ne[1],z["margin-bottom"]=z["margin-bottom"]||ne[2],z["margin-left"]=z["margin-left"]||ne[1];break;case 4:z["margin-top"]=z["margin-top"]||ne[0],z["margin-right"]=z["margin-right"]||ne[1],z["margin-bottom"]=z["margin-bottom"]||ne[2],z["margin-left"]=z["margin-left"]||ne[3]}delete z.margin}return z})(z.dom.styles.parse(ne)),It=z.dom.styles.parse(z.dom.styles.serialize(Ze));return z.dom.styles.serialize(It)},hn=z=>{const ne=z.selection.getNode(),ae=z.dom.getParent(ne,"figure.image");return ae?z.dom.select("img",ae)[0]:ne&&("IMG"!==ne.nodeName||Sn(ne))?null:ne},Rn=(z,ne)=>{var ae;const Ze=z.dom,It=((z,ne)=>{const ae={};return((z,ne,ae,Ze)=>{((z,ne)=>{const ae=mo(z);for(let Ze=0,It=ae.length;Ze<It;Ze++){const go=ae[Ze];ne(z[go],go)}})(z,(It,go)=>{(ne(It,go)?ae:Ze)(It,go)})})(z,ne,(z=>(ne,ae)=>{z[ae]=ne})(ae),ve),ae})(z.schema.getTextBlockElements(),(Xt,Ms)=>!z.schema.isValidChild(Ms,"figure")),go=Ze.getParent(ne.parentNode,Xt=>((z,ne)=>qe(z,ne)&&null!=z[ne])(It,Xt.nodeName),z.getBody());return go&&null!==(ae=Ze.split(go,ne))&&void 0!==ae?ae:ne},ht=(z,ne)=>{const ae=hn(z);if(ae){const It={...ms(Xt=>Kt(z,Xt),ae),...ne},go=((z,ne)=>{const ae=ne.src;return{...ne,src:tn(z,ae)?ae:""}})(z,It);It.src?((z,ne)=>{const ae=hn(z);ae&&(et(Ze=>Kt(z,Ze),ne,ae),((z,ne)=>{z.dom.setAttrib(ne,"src",ne.getAttribute("src"))})(z,ae),qr(ae.parentNode)?(Rn(z,ae.parentNode),z.selection.select(ae.parentNode)):(z.selection.select(ae),((z,ne,ae)=>{const Ze=()=>{ae.onload=ae.onerror=null,z.selection&&(z.selection.select(ae),z.nodeChanged())};ae.onload=()=>{!ne.width&&!ne.height&&Ht(z)&&z.dom.setAttribs(ae,{width:String(ae.clientWidth),height:String(ae.clientHeight)}),Ze()},ae.onerror=Ze})(z,ne,ae)))})(z,go):((z,ne)=>{if(ne){const ae=z.dom.is(ne.parentNode,"figure.image")?ne.parentNode:ne;z.dom.remove(ae),z.focus(),z.nodeChanged(),z.dom.isEmpty(z.getBody())&&(z.setContent(""),z.selection.setCursorLocation())}})(z,ae)}else ne.src&&((z,ne)=>{const ae=((z,ne)=>{const ae=document.createElement("img");if(et(z,{...ne,caption:!1},ae),le(ae,ne.alt,ne.isDecorative),ne.caption){const Ze=Kn.create("figure",{class:"image"});return Ze.appendChild(ae),Ze.appendChild(Kn.create("figcaption",{contentEditable:"true"},"Caption")),Ze.contentEditable="false",Ze}return ae})(It=>Kt(z,It),ne);z.dom.setAttrib(ae,"data-mce-id","__mcenew"),z.focus(),z.selection.setContent(ae.outerHTML);const Ze=z.dom.select('*[data-mce-id="__mcenew"]')[0];if(z.dom.setAttrib(Ze,"data-mce-id",null),qr(Ze)){const It=Rn(z,Ze);z.selection.select(It)}else z.selection.select(Ze)})(z,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...ne})},sn=(z=>(...ne)=>{if(0===ne.length)throw new Error("Can't merge zero objects");const ae={};for(let Ze=0;Ze<ne.length;Ze++){const It=ne[Ze];for(const go in It)qe(It,go)&&(ae[go]=z(ae[go],It[go]))}return ae})((z,ne)=>Oo(z)&&Oo(ne)?sn(z,ne):ne);var rn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Mn=tinymce.util.Tools.resolve("tinymce.util.Tools");const ao=z=>qn(z.value)?z.value:"",ws=(z,ne)=>{const ae=[];return Mn.each(z,Ze=>{const It=(z=>qn(z.text)?z.text:qn(z.title)?z.title:"")(Ze);if(void 0!==Ze.menu){const go=ws(Ze.menu,ne);ae.push({text:It,items:go})}else{const go=ne(Ze);ae.push({text:It,value:go})}}),ae},gc=(z=ao)=>ne=>ne?Le.from(ne).map(ae=>ws(ae,z)):Le.none(),co=(z,ne)=>((z,ne)=>{for(let ae=0;ae<z.length;ae++){const Ze=ne(z[ae]);if(Ze.isSome())return Ze}return Le.none()})(z,ae=>(z=>qe(z,"items"))(ae)?co(ae.items,ne):ae.value===ne?Le.some(ae):Le.none()),gs_sanitizer=gc,gs_findEntry=(z,ne)=>z.bind(ae=>co(ae,ne)),hc=z=>{const ne=gs_sanitizer(Pe=>z.convertURL(Pe.value||Pe.url||"","src")),ae=new Promise(Pe=>{((z,ne)=>{const ae=Ls(z);qn(ae)?fetch(ae).then(Ze=>{Ze.ok&&Ze.json().then(ne)}):_t(ae)?ae(ne):ne(ae)})(z,ot=>{Pe(ne(ot).map(Ut=>De([[{text:"None",value:""}],Ut])))})}),Ze=(z=>gc(ao)(z))(En(z)),It=ro(z),go=fo(z),Xt=(z=>Je(z.options.get("images_upload_url")))(z),Ms=(z=>Wn(z.options.get("images_upload_handler")))(z),ka=(z=>{const ne=hn(z);return ne?ms(ae=>Kt(z,ae),ne):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(z),Ns=No(z),ha=yr(z),Ws=Ht(z),Nr=Ao(z),fc=Qr(z),F=zo(z),ue=Le.some(mr(z)).filter(Pe=>qn(Pe)&&Pe.length>0);return ae.then(Pe=>({image:ka,imageList:Pe,classList:Ze,hasAdvTab:It,hasUploadTab:go,hasUploadUrl:Xt,hasUploadHandler:Ms,hasDescription:Ns,hasImageTitle:ha,hasDimensions:Ws,hasImageCaption:Nr,prependURL:ue,hasAccessibilityOptions:fc,automaticUploads:F}))},is=z=>{const ae=z.imageList.map(ha=>({name:"images",type:"listbox",label:"Image list",items:ha})),Ze={name:"alt",type:"input",label:"Alternative description",enabled:!(z.hasAccessibilityOptions&&z.image.isDecorative)},Ms=z.classList.map(ha=>({name:"classes",type:"listbox",label:"Class",items:ha}));return De([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],ae.toArray(),z.hasAccessibilityOptions&&z.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],z.hasDescription?[Ze]:[],z.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],z.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(ha=z.classList.isSome()&&z.hasImageCaption,ha?{type:"grid",columns:2}:{type:"panel"}),items:De([Ms.toArray(),z.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var ha},Qi_makeTab=z=>({title:"General",name:"general",items:is(z)}),Qi_makeItems=is,Us=z=>({src:{value:z.src,meta:{}},images:z.src,alt:z.alt,title:z.title,dimensions:{width:z.width,height:z.height},classes:z.class,caption:z.caption,style:z.style,vspace:z.vspace,border:z.border,hspace:z.hspace,borderstyle:z.borderStyle,fileinput:[],isDecorative:z.isDecorative}),xi=(z,ne)=>({src:z.src.value,alt:null!==z.alt&&0!==z.alt.length||!ne?z.alt:null,title:z.title,width:z.dimensions.width,height:z.dimensions.height,class:z.classes,style:z.style,caption:z.caption,hspace:z.hspace,vspace:z.vspace,border:z.border,borderStyle:z.borderstyle,isDecorative:z.isDecorative}),Qc=(z,ne,ae,Ze)=>{((z,ne)=>{const ae=ne.getData();((z,ne)=>/^(?:[a-zA-Z]+:)?\/\//.test(ne)?Le.none():z.prependURL.bind(ae=>ne.substring(0,ae.length)!==ae?Le.some(ae+ne):Le.none()))(z,ae.src.value).each(Ze=>{ne.setData({src:{value:Ze,meta:ae.src.meta}})})})(ne,Ze),((z,ne)=>{const ae=ne.getData(),Ze=ae.src.meta;if(void 0!==Ze){const It=sn({},ae);((z,ne,ae)=>{z.hasDescription&&qn(ae.alt)&&(ne.alt=ae.alt),z.hasAccessibilityOptions&&(ne.isDecorative=ae.isDecorative||ne.isDecorative||!1),z.hasImageTitle&&qn(ae.title)&&(ne.title=ae.title),z.hasDimensions&&(qn(ae.width)&&(ne.dimensions.width=ae.width),qn(ae.height)&&(ne.dimensions.height=ae.height)),qn(ae.class)&&gs_findEntry(z.classList,ae.class).each(Ze=>{ne.classes=Ze.value}),z.hasImageCaption&&Mo(ae.caption)&&(ne.caption=ae.caption),z.hasAdvTab&&(qn(ae.style)&&(ne.style=ae.style),qn(ae.vspace)&&(ne.vspace=ae.vspace),qn(ae.border)&&(ne.border=ae.border),qn(ae.hspace)&&(ne.hspace=ae.hspace),qn(ae.borderstyle)&&(ne.borderstyle=ae.borderstyle))})(z,It,Ze),ne.setData(It)}})(ne,Ze),((z,ne,ae,Ze)=>{const It=Ze.getData(),go=It.src.value,Xt=It.src.meta||{};!Xt.width&&!Xt.height&&ne.hasDimensions&&(Je(go)?z.imageSize(go).then(Ms=>{ae.open&&Ze.setData({dimensions:Ms})}).catch(Ms=>console.error(Ms)):Ze.setData({dimensions:{width:"",height:""}}))})(z,ne,ae,Ze),((z,ne,ae)=>{const Ze=ae.getData(),It=gs_findEntry(z.imageList,Ze.src.value);ne.prevImage=It,ae.setData({images:It.map(go=>go.value).getOr("")})})(ne,ae,Ze)},Ia=(z,ne,ae,Ze)=>{const It=Ze.getData();Ze.block("Uploading image"),(z=>((z,ne)=>0<z.length?Le.some(z[0]):Le.none())(z))(It.fileinput).fold(()=>{Ze.unblock()},go=>{const Xt=URL.createObjectURL(go),Ms=()=>{Ze.unblock(),URL.revokeObjectURL(Xt)},ka=Ns=>{Ze.setData({src:{value:Ns,meta:{}}}),Ze.showTab("general"),Qc(z,ne,ae,Ze)};(z=>new Promise((ne,ae)=>{const Ze=new FileReader;Ze.onload=()=>{ne(Ze.result)},Ze.onerror=()=>{var It;ae(null===(It=Ze.error)||void 0===It?void 0:It.message)},Ze.readAsDataURL(z)}))(go).then(Ns=>{const ha=z.createBlobCache(go,Xt,Ns);ne.automaticUploads?z.uploadImage(ha).then(Ws=>{ka(Ws.url),Ms()}).catch(Ws=>{Ms(),z.alertErr(Ws)}):(z.addToBlobCache(ha),ka(ha.blobUri()),Ze.unblock())})})},Si=(z,ne,ae)=>(Ze,It)=>{"src"===It.name?Qc(z,ne,ae,Ze):"images"===It.name?((z,ne,ae,Ze)=>{const It=Ze.getData(),go=gs_findEntry(ne.imageList,It.images);go.each(Xt=>{""===It.alt||ae.prevImage.map(ka=>ka.text===It.alt).getOr(!1)?Ze.setData(""===Xt.value?{src:Xt,alt:ae.prevAlt}:{src:Xt,alt:Xt.text}):Ze.setData({src:Xt})}),ae.prevImage=go,Qc(z,ne,ae,Ze)})(z,ne,ae,Ze):"alt"===It.name?ae.prevAlt=Ze.getData().alt:"fileinput"===It.name?Ia(z,ne,ae,Ze):"isDecorative"===It.name&&Ze.setEnabled("alt",!Ze.getData().isDecorative)},Ec=z=>()=>{z.open=!1},Vl=z=>z.hasAdvTab||z.hasUploadUrl||z.hasUploadHandler?{type:"tabpanel",tabs:De([[Qi_makeTab(z)],z.hasAdvTab?[{title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}]:[],z.hasUploadTab&&(z.hasUploadUrl||z.hasUploadHandler)?[{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}]:[]])}:{type:"panel",items:Qi_makeItems(z)},J=(z,ne,ae)=>Ze=>{const It=sn(Us(ne.image),Ze.getData()),go={...It,style:Rs(ae.normalizeCss,xi(It,!1))};z.execCommand("mceUpdateImage",!1,xi(go,ne.hasAccessibilityOptions)),z.editorUpload.uploadImagesAuto(),Ze.close()},ce=z=>ne=>tn(z,ne)?(z=>new Promise(ne=>{const ae=document.createElement("img"),Ze=go=>{ae.onload=ae.onerror=null,ae.parentNode&&ae.parentNode.removeChild(ae),ne(go)};ae.onload=()=>{const go=Ps(ae.width,ae.clientWidth),Xt=Ps(ae.height,ae.clientHeight);Ze(Promise.resolve({width:go,height:Xt}))},ae.onerror=()=>{Ze(Promise.reject(`Failed to get image dimensions for: ${z}`))};const It=ae.style;It.visibility="hidden",It.position="fixed",It.bottom=It.left="0px",It.width=It.height="auto",document.body.appendChild(ae),ae.src=z}))(z.documentBaseURI.toAbsolute(ne)).then(ae=>({width:String(ae.width),height:String(ae.height)})):Promise.resolve({width:"",height:""}),Ae=z=>(ne,ae,Ze)=>{var It;return z.editorUpload.blobCache.create({blob:ne,blobUri:ae,name:null===(It=ne.name)||void 0===It?void 0:It.replace(/\.[^\.]+$/,""),filename:ne.name,base64:Ze.split(",")[1]})},Ve=z=>ne=>{z.editorUpload.blobCache.add(ne)},vt=z=>ne=>{z.windowManager.alert(ne)},an=z=>ne=>Kt(z,ne),Eo=z=>ne=>z.dom.parseStyle(ne),xr=z=>(ne,ae)=>z.dom.serializeStyle(ne,ae),hs=z=>ne=>rn(z).upload([ne],!1).then(ae=>{var Ze;return 0===ae.length?Promise.reject("Failed to upload image"):!1===ae[0].status?Promise.reject(null===(Ze=ae[0].error)||void 0===Ze?void 0:Ze.message):ae[0]}),Zs=z=>{const ne={imageSize:ce(z),addToBlobCache:Ve(z),createBlobCache:Ae(z),alertErr:vt(z),normalizeCss:an(z),parseStyle:Eo(z),serializeStyle:xr(z),uploadImage:hs(z)};return{open:()=>{hc(z).then(Ze=>{const It=(z=>({prevImage:gs_findEntry(z.imageList,z.image.src),prevAlt:z.image.alt,open:!0}))(Ze);return{title:"Insert/Edit Image",size:"normal",body:Vl(Ze),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Us(Ze.image),onSubmit:J(z,Ze,ne),onChange:Si(ne,Ze,It),onClose:Ec(It)}}).then(z.windowManager.open)}}},ls=z=>{const ne=z.attr("class");return Wn(ne)&&/\bimage\b/.test(ne)},Lc=z=>ne=>{let ae=ne.length;const Ze=It=>{It.attr("contenteditable",z?"true":null)};for(;ae--;){const It=ne[ae];ls(It)&&(It.attr("contenteditable",z?"false":null),Mn.each(It.getAll("figcaption"),Ze))}},Bn=z=>ne=>{const ae=()=>{ne.setEnabled(z.selection.isEditable())};return z.on("NodeChange",ae),ae(),()=>{z.off("NodeChange",ae)}};da.add("image",z=>{(z=>{const ne=z.options.register;ne("image_dimensions",{processor:"boolean",default:!0}),ne("image_advtab",{processor:"boolean",default:!1}),ne("image_uploadtab",{processor:"boolean",default:!0}),ne("image_prepend_url",{processor:"string",default:""}),ne("image_class_list",{processor:"object[]"}),ne("image_description",{processor:"boolean",default:!0}),ne("image_title",{processor:"boolean",default:!1}),ne("image_caption",{processor:"boolean",default:!1}),ne("image_list",{processor:ae=>{const Ze=!1===ae||qn(ae)||((z,ne)=>{if(ys(z)){for(let ae=0,Ze=z.length;ae<Ze;++ae)if(!ne(z[ae]))return!1;return!0}return!1})(ae,qo)||_t(ae);return Ze?{value:ae,valid:Ze}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})})(z),(z=>{z.on("PreInit",()=>{z.parser.addNodeFilter("figure",Lc(!0)),z.serializer.addNodeFilter("figure",Lc(!1))})})(z),(z=>{z.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Zs(z).open,onSetup:ne=>{ne.setActive(Wn(hn(z)));const ae=z.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",ne.setActive).unbind,Ze=Bn(z)(ne);return()=>{ae(),Ze()}}}),z.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Zs(z).open,onSetup:Bn(z)}),z.ui.registry.addContextMenu("image",{update:ne=>z.selection.isEditable()&&(qr(ne)||(z=>"IMG"===z.nodeName)(ne)&&!Sn(ne))?["image"]:[]})})(z),(z=>{z.addCommand("mceImage",Zs(z).open),z.addCommand("mceUpdateImage",(ne,ae)=>{z.undoManager.transact(()=>ht(z,ae))})})(z)})}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ks=J=>ce=>(J=>{const ce=typeof J;return null===J?"null":"object"===ce&&Array.isArray(J)?"array":"object"===ce&&((J,ce,Ae)=>{var Ve;return!!((Ae,Ve)=>Ve.isPrototypeOf(Ae))(J,ce.prototype)||(null===(Ve=J.constructor)||void 0===Ve?void 0:Ve.name)===ce.name})(J,String)?"string":ce})(ce)===J,Os=J=>ce=>typeof ce===J,As=Ks("string"),bn=Ks("object"),qn=Ks("array"),qo=(null,ce=>null===ce),Oo=Os("boolean"),zt=J=>!(J=>null==J)(J),Mo=Os("function"),Ro=(J,ce)=>{if(qn(J)){for(let Ae=0,Ve=J.length;Ae<Ve;++Ae)if(!ce(J[Ae]))return!1;return!0}return!1},Wn=()=>{},Ln=(J,ce)=>J===ce;class en{constructor(ce,Ae){this.tag=ce,this.value=Ae}static some(ce){return new en(!0,ce)}static none(){return en.singletonNone}fold(ce,Ae){return this.tag?Ae(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?en.some(ce(this.value)):en.none()}bind(ce){return this.tag?ce(this.value):en.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:en.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce??"Called getOrDie on None")}static from(ce){return zt(ce)?en.some(ce):en.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}en.singletonNone=new en(!1);const ve=Array.prototype.indexOf,Le=Array.prototype.push,ko=J=>{const ce=[];for(let Ae=0,Ve=J.length;Ae<Ve;++Ae){if(!qn(J[Ae]))throw new Error("Arr.flatten item "+Ae+" was not an array, input: "+J);Le.apply(ce,J[Ae])}return ce},Se=(J,ce)=>{for(let Ae=0;Ae<J.length;Ae++){const Ve=ce(J[Ae],Ae);if(Ve.isSome())return Ve}return en.none()},dr=(J,ce,Ae=Ln)=>J.exists(Ve=>Ae(Ve,ce)),De=J=>{const ce=[],Ae=Ve=>{ce.push(Ve)};for(let Ve=0;Ve<J.length;Ve++)J[Ve].each(Ae);return ce},Ot=(J,ce)=>J?en.some(ce):en.none(),B=J=>ce=>ce.options.get(J),oo=B("link_assume_external_targets"),yn=B("link_context_toolbar"),Lt=B("link_list"),U=B("link_default_target"),xo=B("link_default_protocol"),Ys=B("link_target_list"),bt=B("link_rel_list"),vn=B("link_class_list"),Be=B("link_title"),lt=B("allow_unsafe_link_target"),ln=B("link_quicklink");var Je=tinymce.util.Tools.resolve("tinymce.util.Tools");const so=J=>As(J.value)?J.value:"",Ht=(J,ce)=>{const Ae=[];return Je.each(J,Ve=>{const vt=(J=>As(J.text)?J.text:As(J.title)?J.title:"")(Ve);if(void 0!==Ve.menu){const an=Ht(Ve.menu,ce);Ae.push({text:vt,items:an})}else{const an=ce(Ve);Ae.push({text:vt,value:an})}}),Ae},ro=(J=so)=>ce=>en.from(ce).map(Ae=>Ht(Ae,J)),En_sanitize=J=>ro(so)(J),En_sanitizeWith=ro,En_createUi=(J,ce)=>Ae=>({name:J,type:"listbox",label:ce,items:Ae}),En_getValue=so,No=Object.keys,yr=Object.hasOwnProperty,Mr=(J,ce)=>yr.call(J,ce);var Ps=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),or=tinymce.util.Tools.resolve("tinymce.util.URI");const wr=J=>zt(J)&&"a"===J.nodeName.toLowerCase(),$o=J=>wr(J)&&!!Ye(J),Xo=(J,ce)=>{if(J.collapsed)return[];{const Ae=J.cloneContents(),Ve=Ae.firstChild,vt=new Ps(Ve,Ae),an=[];let Eo=Ve;do{ce(Eo)&&an.push(Eo)}while(Eo=vt.next());return an}},Vs=J=>/^\w+:/i.test(J),Ye=J=>{var ce,Ae;return null!==(Ae=null!==(ce=J.getAttribute("data-mce-href"))&&void 0!==ce?ce:J.getAttribute("href"))&&void 0!==Ae?Ae:""},Ke=(J,ce)=>{const Ae=["noopener"],Ve=J?J.split(/\s+/):[],Eo=hs=>hs.filter(Zs=>-1===Je.inArray(Ae,Zs)),xr=ce?(hs=Eo(hs=Ve)).length>0?hs.concat(Ae):Ae:Eo(Ve);var hs;return xr.length>0?(hs=>Je.trim(hs.sort().join(" ")))(xr):""},tn=(J,ce)=>(ce=ce||sr(J.selection.getRng())[0]||J.selection.getNode(),Qn(ce)?en.from(J.dom.select("a[href]",ce)[0]):en.from(J.dom.getParent(ce,"a[href]"))),Kn=(J,ce)=>tn(J,ce).isSome(),Xs=(J,ce)=>(J=>J.replace(/\uFEFF/g,""))(ce.fold(()=>J.getContent({format:"text"}),Ve=>Ve.innerText||Ve.textContent||"")),sr=J=>Xo(J,$o),jr=J=>Je.grep(J,$o),Es=J=>jr(J).length>0,rt=J=>{const ce=J.schema.getTextInlineElements();if(tn(J).exists(an=>an.hasAttribute("data-mce-block")))return!1;const vt=J.selection.getRng();return!!vt.collapsed||0===Xo(vt,an=>1===an.nodeType&&!wr(an)&&!Mr(ce,an.nodeName.toLowerCase())).length},Qn=J=>zt(J)&&"FIGURE"===J.nodeName&&/\bimage\b/i.test(J.className),Sa=(J,ce,Ae)=>{const Ve=J.selection.getNode(),vt=tn(J,Ve),an=((J,ce)=>{const Ae={...ce};if(0===bt(J).length&&!lt(J)){const Ve=Ke(Ae.rel,"_blank"===Ae.target);Ae.rel=Ve||null}return en.from(Ae.target).isNone()&&!1===Ys(J)&&(Ae.target=U(J)),Ae.href=((J,ce)=>"http"!==ce&&"https"!==ce||Vs(J)?J:ce+"://"+J)(Ae.href,oo(J)),Ae})(J,(J=>((J,ce,Ae)=>(((J,ce)=>{for(let Ae=0,Ve=J.length;Ae<Ve;Ae++)ce(J[Ae],Ae)})(["title","rel","class","target"],(Ve,vt)=>{Ae=ce(Ae,Ve)}),Ae))(0,(Ae,Ve)=>(J[Ve].each(vt=>{Ae[Ve]=vt.length>0?vt:null}),Ae),{href:J.href}))(Ae));J.undoManager.transact(()=>{Ae.href===ce.href&&ce.attach(),vt.fold(()=>{((J,ce,Ae,Ve)=>{const vt=J.dom;Qn(ce)?ar(vt,ce,Ve):Ae.fold(()=>{J.execCommand("mceInsertLink",!1,Ve)},an=>{J.insertContent(vt.createHTML("a",Ve,vt.encode(an)))})})(J,Ve,Ae.text,an)},Eo=>{J.focus(),((J,ce,Ae,Ve)=>{Ae.each(vt=>{Mr(ce,"innerText")?ce.innerText=vt:ce.textContent=vt}),J.dom.setAttribs(ce,Ve),J.selection.select(ce)})(J,Eo,Ae.text,an)})})},rr=J=>{const{class:ce,href:Ae,rel:Ve,target:vt,text:an,title:Eo}=J;return((J,ce)=>{const Ae={};return((J,ce,Ae,Ve)=>{((J,ce)=>{const Ae=No(J);for(let Ve=0,vt=Ae.length;Ve<vt;Ve++){const an=Ae[Ve];ce(J[an],an)}})(J,(vt,an)=>{(ce(vt,an)?Ae:Ve)(vt,an)})})(J,(xr,hs)=>!1===qo(xr),(J=>(ce,Ae)=>{J[Ae]=ce})(Ae),Wn),Ae})({class:ce.getOrNull(),href:Ae,rel:Ve.getOrNull(),target:vt.getOrNull(),text:an.getOrNull(),title:Eo.getOrNull()})},qr=(J,ce,Ae)=>{const Ve=((J,ce)=>{const Ae=J.options.get,Ve={allow_html_data_urls:Ae("allow_html_data_urls"),allow_script_urls:Ae("allow_script_urls"),allow_svg_data_urls:Ae("allow_svg_data_urls")},vt=ce.href;return{...ce,href:or.isDomSafe(vt,"a",Ve)?vt:""}})(J,Ae);J.hasPlugin("rtc",!0)?J.execCommand("createlink",!1,rr(Ve)):Sa(J,ce,Ve)},Da=J=>{J.hasPlugin("rtc",!0)?J.execCommand("unlink"):(J=>{J.undoManager.transact(()=>{const ce=J.selection.getNode();Qn(ce)?Ma(J,ce):(J=>{const ce=J.dom,Ae=J.selection,Ve=Ae.getBookmark(),vt=Ae.getRng().cloneRange(),an=ce.getParent(vt.startContainer,"a[href]",J.getBody()),Eo=ce.getParent(vt.endContainer,"a[href]",J.getBody());an&&vt.setStartBefore(an),Eo&&vt.setEndAfter(Eo),Ae.setRng(vt),J.execCommand("unlink"),Ae.moveToBookmark(Ve)})(J),J.focus()})})(J)},Ma=(J,ce)=>{var Ae;const Ve=J.dom.select("img",ce)[0];if(Ve){const vt=J.dom.getParents(Ve,"a[href]",ce)[0];vt&&(null===(Ae=vt.parentNode)||void 0===Ae||Ae.insertBefore(Ve,vt),J.dom.remove(vt))}},ar=(J,ce,Ae)=>{var Ve;const vt=J.select("img",ce)[0];if(vt){const an=J.create("a",Ae);null===(Ve=vt.parentNode)||void 0===Ve||Ve.insertBefore(an,vt),an.appendChild(vt)}},Rs=(J,ce)=>Se(ce,Ae=>(J=>((J,ce)=>Mr(J,"items")&&null!=J.items)(J))(Ae)?Rs(J,Ae.items):Ot(Ae.value===J,Ae)),le_init=(J,ce)=>{const Ae={text:J.text,title:J.title},Eo=(hs,Zs)=>{const ns=((J,ce)=>"link"===ce?J.link:"anchor"===ce?J.anchor:en.none())(ce,Zs).getOr([]);return((J,ce,Ae,Ve)=>{const vt=Ve[ce],an=J.length>0;return void 0!==vt?Rs(vt,Ae).map(Eo=>({url:{value:Eo.value,meta:{text:an?J:Eo.text,attach:Wn}},text:an?J:Eo.text})):en.none()})(Ae.text,Zs,ns,hs)};return{onChange:(hs,Zs)=>{const ns=Zs.name;return"url"===ns?(hs=>{const Zs=(hs=>{var Zs;return Ot(Ae.text.length<=0,en.from(null===(Zs=hs.meta)||void 0===Zs?void 0:Zs.text).getOr(hs.value))})(hs.url),ns=(hs=>{var Zs;return Ot(Ae.title.length<=0,en.from(null===(Zs=hs.meta)||void 0===Zs?void 0:Zs.title).getOr(""))})(hs.url);return Zs.isSome()||ns.isSome()?en.some({...Zs.map(ls=>({text:ls})).getOr({}),...ns.map(ls=>({title:ls})).getOr({})}):en.none()})(hs()):((J,ce)=>((J,ce)=>ve.call(J,ce))(J,ce)>-1)(["anchor","link"],ns)?Eo(hs(),ns):(("text"===ns||"title"===ns)&&(Ae[ns]=hs()[ns]),en.none())}}};var ie=tinymce.util.Tools.resolve("tinymce.util.Delay");const et=J=>{const ce=J.href;return ce.indexOf("@")>0&&-1===ce.indexOf("/")&&-1===ce.indexOf("mailto:")?en.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ve=>({...Ve,href:"mailto:"+ce})}):en.none()},Kt=(J,ce)=>Ae=>{const Ve=Ae.href;return 1===J&&!Vs(Ve)||0===J&&/^\s*www(\.|\d\.)/i.test(Ve)?en.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ce}:// prefix?`,preprocess:an=>({...an,href:ce+"://"+Ve})}):en.none()},be_getAnchors=J=>{const Ae=((J,ce)=>ko(((J,ce)=>{const Ae=J.length,Ve=new Array(Ae);for(let vt=0;vt<Ae;vt++)Ve[vt]=ce(J[vt],vt);return Ve})(J,ce)))(J.dom.select("a:not([href])"),Ve=>{const vt=Ve.name||Ve.id;return vt?[{text:vt,value:"#"+vt}]:[]});return Ae.length>0?en.some([{text:"None",value:""}].concat(Ae)):en.none()},ge_getClasses=J=>{const ce=vn(J);return ce.length>0?En_sanitize(ce):en.none()},he=J=>{try{return en.some(JSON.parse(J))}catch{return en.none()}},gn_getRels=(J,ce)=>{const Ae=bt(J);if(Ae.length>0){const Ve=dr(ce,"_blank"),an=xr=>Ke(En_getValue(xr),Ve);return(!1===lt(J)?En_sanitizeWith(an):En_sanitize)(Ae)}return en.none()},sn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Mn_getTargets=J=>{const ce=Ys(J);return qn(ce)?En_sanitize(ce).orThunk(()=>en.some(sn)):!1===ce?en.none():en.some(sn)},ao=(J,ce,Ae)=>{const Ve=J.getAttrib(ce,Ae);return null!==Ve&&Ve.length>0?en.some(Ve):en.none()},gc_collect=(J,ce)=>(J=>{const ce=Ve=>J.convertURL(Ve.value||Ve.url||"","href"),Ae=Lt(J);return new Promise(Ve=>{As(Ae)?fetch(Ae).then(vt=>vt.ok?vt.text().then(he):Promise.reject()).then(Ve,()=>Ve(en.none())):Mo(Ae)?Ae(vt=>Ve(en.some(vt))):Ve(en.from(Ae))}).then(Ve=>Ve.bind(En_sanitizeWith(ce)).map(vt=>vt.length>0?[{text:"None",value:""}].concat(vt):vt))})(J).then(Ae=>{const Ve=((J,ce)=>{const Ae=J.dom,vt=rt(J)?en.some(Xs(J.selection,ce)):en.none(),an=ce.bind(ns=>en.from(Ae.getAttrib(ns,"href"))),Eo=ce.bind(ns=>en.from(Ae.getAttrib(ns,"target"))),xr=ce.bind(ns=>ao(Ae,ns,"rel")),hs=ce.bind(ns=>ao(Ae,ns,"class"));return{url:an,text:vt,title:ce.bind(ns=>ao(Ae,ns,"title")),target:Eo,rel:xr,linkClass:hs}})(J,ce);return{anchor:Ve,catalogs:{targets:Mn_getTargets(J),rels:gn_getRels(J,Ve.target),classes:ge_getClasses(J),anchor:be_getAnchors(J),link:Ae},optNode:ce,flags:{titleEnabled:Be(J)}}}),gs=J=>{(J=>{const ce=tn(J);return gc_collect(J,ce)})(J).then(Ae=>{const Ve=((J,ce)=>Ae=>{const Ve=Ae.getData();if(!Ve.url.value)return Da(J),void Ae.close();const vt=xr=>en.from(Ve[xr]).filter(hs=>!dr(ce.anchor[xr],hs)),an={href:Ve.url.value,text:vt("text"),target:vt("target"),rel:vt("rel"),class:vt("linkClass"),title:vt("title")},Eo={href:Ve.url.value,attach:void 0!==Ve.url.meta&&Ve.url.meta.attach?Ve.url.meta.attach:Wn};((J,ce)=>Se([et,Kt(oo(J),xo(J))],Ae=>Ae(ce)).fold(()=>Promise.resolve(ce),Ae=>new Promise(Ve=>{((J,ce,Ae)=>{const Ve=J.selection.getRng();ie.setEditorTimeout(J,()=>{J.windowManager.confirm(ce,vt=>{J.selection.setRng(Ve),Ae(vt)})})})(J,Ae.message,vt=>{Ve(vt?Ae.preprocess(ce):ce)})})))(J,an).then(xr=>{qr(J,Eo,xr)}),Ae.close()})(J,Ae);return((J,ce,Ae)=>{const vt=J.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),an=J.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],xr=((J,ce)=>{const Ae=J.anchor,Ve=Ae.url.getOr("");return{url:{value:Ve,meta:{original:{value:Ve}}},text:Ae.text.getOr(""),title:Ae.title.getOr(""),anchor:Ve,link:Ve,rel:Ae.rel.getOr(""),target:Ae.target.or(ce).getOr(""),linkClass:Ae.linkClass.getOr("")}})(J,en.from(U(Ae))),hs=J.catalogs,Zs=le_init(xr,hs);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:ko([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],vt,an,De([hs.anchor.map(En_createUi("anchor","Anchors")),hs.rels.map(En_createUi("rel","Rel")),hs.targets.map(En_createUi("target","Open link in...")),hs.link.map(En_createUi("link","Link list")),hs.classes.map(En_createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:xr,onChange:(ls,{name:Lc})=>{Zs.onChange(ls.getData,{name:Lc}).each(zr=>{ls.setData(zr)})},onSubmit:ce}})(Ae,Ve,J)}).then(Ae=>{J.windowManager.open(Ae)})};var ga=tinymce.util.Tools.resolve("tinymce.util.VK");const Sc=(J,ce)=>J.dom.getParent(ce,"a[href]"),Qi=J=>Sc(J,J.selection.getStart()),Cr=(J,ce)=>{if(ce){const Ae=Ye(ce);if(/^#/.test(Ae)){const Ve=J.dom.select(Ae);Ve.length&&J.selection.scrollIntoView(Ve[0],!0)}else(J=>{const ce=document.createElement("a");ce.target="_blank",ce.href=J,ce.rel="noreferrer noopener";const Ae=document.createEvent("MouseEvents");Ae.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((J,ce)=>{document.body.appendChild(J),J.dispatchEvent(ce),document.body.removeChild(J)})(ce,Ae)})(ce.href)}},cr=J=>()=>{J.execCommand("mceLink",!1,{dialog:!0})},Us=J=>()=>{Cr(J,Qi(J))},wo=(J,ce)=>(J.on("NodeChange",ce),()=>J.off("NodeChange",ce)),Kr=J=>ce=>{const Ae=()=>{ce.setActive(!J.mode.isReadOnly()&&Kn(J,J.selection.getNode())),ce.setEnabled(J.selection.isEditable())};return Ae(),wo(J,Ae)},Ic=J=>ce=>{const Ae=()=>{ce.setEnabled(J.selection.isEditable())};return Ae(),wo(J,Ae)},wt=J=>ce=>{const Ae=()=>ce.setEnabled((J=>1===(J.selection.isCollapsed()?jr(J.dom.getParents(J.selection.getStart())):sr(J.selection.getRng())).length)(J));return Ae(),wo(J,Ae)},kc=J=>ce=>{const Ve=J.dom.getParents(J.selection.getStart()),vt=an=>{ce.setEnabled((an=>Es(an)||(J=>sr(J).length>0)(J.selection.getRng()))(an)&&J.selection.isEditable())};return vt(Ve),wo(J,an=>vt(an.parents))};da.add("link",J=>{(J=>{const ce=J.options.register;ce("link_assume_external_targets",{processor:Ae=>{const Ve=As(Ae)||Oo(Ae);return Ve?!0===Ae?{value:1,valid:Ve}:"http"===Ae||"https"===Ae?{value:Ae,valid:Ve}:{value:0,valid:Ve}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ce("link_context_toolbar",{processor:"boolean",default:!1}),ce("link_list",{processor:Ae=>As(Ae)||Mo(Ae)||Ro(Ae,bn)}),ce("link_default_target",{processor:"string"}),ce("link_default_protocol",{processor:"string",default:"https"}),ce("link_target_list",{processor:Ae=>Oo(Ae)||Ro(Ae,bn),default:!0}),ce("link_rel_list",{processor:"object[]",default:[]}),ce("link_class_list",{processor:"object[]",default:[]}),ce("link_title",{processor:"boolean",default:!0}),ce("allow_unsafe_link_target",{processor:"boolean",default:!1}),ce("link_quicklink",{processor:"boolean",default:!1})})(J),(J=>{J.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:cr(J),onSetup:Kr(J)}),J.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Us(J),onSetup:wt(J)}),J.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Da(J),onSetup:kc(J)})})(J),(J=>{J.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Us(J),onSetup:wt(J)}),J.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Ic(J),onAction:cr(J)}),J.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Da(J),onSetup:kc(J)})})(J),(J=>{J.ui.registry.addContextMenu("link",{update:Ve=>J.dom.isEditable(Ve)?Es(J.dom.getParents(Ve,"a"))?"link unlink openlink":"link":""})})(J),(J=>{const Ae=vt=>{const an=J.selection.getNode();return vt.setEnabled(Kn(J,an)),Wn};J.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Kr(J)},label:"Link",predicate:vt=>yn(J)&&Kn(J,vt),initValue:()=>tn(J).fold(()=>"",Ye),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:vt=>{const an=J.selection.getNode();return vt.setActive(Kn(J,an)),Kr(J)(vt)},onAction:vt=>{const an=vt.getValue(),Eo=(vt=>{const an=tn(J),Eo=rt(J);if(an.isNone()&&Eo){const xr=Xs(J.selection,an);return Ot(0===xr.length,vt)}return en.none()})(an);qr(J,{href:an,attach:Wn},{href:an,text:Eo,title:en.none(),rel:en.none(),target:en.none(),class:en.none()}),(vt=>{vt.selection.collapse(!1)})(J),vt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ae,onAction:vt=>{Da(J),vt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ae,onAction:vt=>{Us(J)(),vt.hide()}}]})})(J),(J=>{J.on("click",ce=>{const Ae=Sc(J,ce.target);Ae&&ga.metaKeyPressed(ce)&&(ce.preventDefault(),Cr(J,Ae))}),J.on("keydown",ce=>{if(!ce.isDefaultPrevented()&&13===ce.keyCode&&(J=>!0===J.altKey&&!1===J.shiftKey&&!1===J.ctrlKey&&!1===J.metaKey)(ce)){const Ae=Qi(J);Ae&&(ce.preventDefault(),Cr(J,Ae))}})})(J),(J=>{J.addCommand("mceLink",(ce,Ae)=>{!0!==Ae?.dialog&&ln(J)?J.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):gs(J)})})(J),(J=>{J.addShortcut("Meta+K","",()=>{J.execCommand("mceLink")})})(J)})}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ks=le=>ie=>(le=>{const ie=typeof le;return null===le?"null":"object"===ie&&Array.isArray(le)?"array":"object"===ie&&((le,ie,je)=>{var et;return!!((je,et)=>et.isPrototypeOf(je))(le,ie.prototype)||(null===(et=le.constructor)||void 0===et?void 0:et.name)===ie.name})(le,String)?"string":ie})(ie)===le,Os=Ks("string"),vr=Ks("object"),As=Ks("array"),qn=le=>!(le=>null==le)(le);class qo{constructor(ie,je){this.tag=ie,this.value=je}static some(ie){return new qo(!0,ie)}static none(){return qo.singletonNone}fold(ie,je){return this.tag?je(this.value):ie()}isSome(){return this.tag}isNone(){return!this.tag}map(ie){return this.tag?qo.some(ie(this.value)):qo.none()}bind(ie){return this.tag?ie(this.value):qo.none()}exists(ie){return this.tag&&ie(this.value)}forall(ie){return!this.tag||ie(this.value)}filter(ie){return!this.tag||ie(this.value)?this:qo.none()}getOr(ie){return this.tag?this.value:ie}or(ie){return this.tag?this:ie}getOrThunk(ie){return this.tag?this.value:ie()}orThunk(ie){return this.tag?this:ie()}getOrDie(ie){if(this.tag)return this.value;throw new Error(ie??"Called getOrDie on None")}static from(ie){return qn(ie)?qo.some(ie):qo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ie){this.tag&&ie(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qo.singletonNone=new qo(!1);const Oo=Array.prototype.push,ys=(le,ie)=>{for(let je=0,et=le.length;je<et;je++)ie(le[je],je)},zt=le=>{const ie=[];for(let je=0,et=le.length;je<et;++je){if(!As(le[je]))throw new Error("Arr.flatten item "+je+" was not an array, input: "+le);Oo.apply(ie,le[je])}return ie},Ro=Object.keys,Wn=Object.hasOwnProperty,Ln=(le,ie)=>en(le,ie)?qo.from(le[ie]):qo.none(),en=(le,ie)=>Wn.call(le,ie),ve=le=>ie=>ie.options.get(le),mo=ve("audio_template_callback"),Vo=ve("video_template_callback"),re=ve("iframe_template_callback"),gt=ve("media_live_embeds"),Is=ve("media_filter_html"),ko=ve("media_url_resolver"),qe=ve("media_alt_source"),Se=ve("media_poster"),dr=ve("media_dimensions");var De=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ot=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B=tinymce.util.Tools.resolve("tinymce.html.DomParser");const An=Ot.DOM,oo=le=>le.replace(/px$/,""),yn=le=>{const ie=le.attr("style"),je=ie?An.parseStyle(ie):{};return{type:"ephox-embed-iri",source:le.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Ln(je,"max-width").map(oo).getOr(""),height:Ln(je,"max-height").map(oo).getOr("")}},Lt=(le,ie)=>{let je={};for(let hn=B({validate:!1,forced_root_block:!1},ie).parse(le);hn;hn=hn.walk())if(1===hn.type){const Rn=hn.name;if(hn.attr("data-ephox-embed-iri")){je=yn(hn);break}!je.source&&"param"===Rn&&(je.source=hn.attr("movie")),("iframe"===Rn||"object"===Rn||"embed"===Rn||"video"===Rn||"audio"===Rn)&&(je.type||(je.type=Rn),je=De.extend(hn.attributes.map,je)),"source"===Rn&&(je.source?je.altsource||(je.altsource=hn.attr("src")):je.source=hn.attr("src")),"img"===Rn&&!je.poster&&(je.poster=hn.attr("src"))}return je.source=je.source||je.src||"",je.altsource=je.altsource||"",je.poster=je.poster||"",je},U=le=>{var ie;const et=null!==(ie=le.toLowerCase().split(".").pop())&&void 0!==ie?ie:"";return Ln({mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},et).getOr("")};var xo=tinymce.util.Tools.resolve("tinymce.html.Node"),Ys=tinymce.util.Tools.resolve("tinymce.html.Serializer");const bt=(le,ie={})=>B({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...ie},le),vn=Ot.DOM,Be=le=>/^[0-9.]+$/.test(le)?le+"px":le,lt=(le,ie)=>{const je=ie.attr("style"),et=je?vn.parseStyle(je):{};qn(le.width)&&(et["max-width"]=Be(le.width)),qn(le.height)&&(et["max-height"]=Be(le.height)),ie.attr("style",vn.serializeStyle(et))},ln=["source","altsource"],Je=(le,ie,je,et)=>{let Kt=0,hn=0;const Rn=bt(et);Rn.addNodeFilter("source",be=>Kt=be.length);const ps=Rn.parse(le);for(let be=ps;be;be=be.walk())if(1===be.type){const Vn=be.name;if(be.attr("data-ephox-embed-iri")){lt(ie,be);break}switch(Vn){case"video":case"object":case"embed":case"img":case"iframe":void 0!==ie.height&&void 0!==ie.width&&(be.attr("width",ie.width),be.attr("height",ie.height))}if(je)switch(Vn){case"video":be.attr("poster",ie.poster),be.attr("src",null);for(let he=Kt;he<2;he++)if(ie[ln[he]]){const at=new xo("source",1);at.attr("src",ie[ln[he]]),at.attr("type",ie[ln[he]+"mime"]||null),be.append(at)}break;case"iframe":be.attr("src",ie.source);break;case"object":const ge=be.getAll("img").length>0;if(ie.poster&&!ge){be.attr("src",ie.poster);const he=new xo("img",1);he.attr("src",ie.poster),he.attr("width",ie.width),he.attr("height",ie.height),be.append(he)}break;case"source":if(hn<2&&(be.attr("src",ie[ln[hn]]),be.attr("type",ie[ln[hn]+"mime"]||null),!ie[ln[hn]])){be.remove();continue}hn++;break;case"img":ie.poster||be.remove()}}return Ys({},et).serialize(ps)},so=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Ht=(le,ie)=>{const je=(le=>{const ie=le.match(/^(https?:\/\/|www\.)(.+)$/i);return ie&&ie.length>1?"www."===ie[1]?"https://":ie[1]:"https://"})(ie),et=le.regex.exec(ie);let Kt=je+le.url;if(qn(et))for(let hn=0;hn<et.length;hn++)Kt=Kt.replace("$"+hn,()=>et[hn]?et[hn]:"");return Kt.replace(/\?$/,"")},ro=le=>{const ie=so.filter(je=>je.regex.test(le));return ie.length>0?De.extend({},ie[0],{url:Ht(ie[0],le)}):null},yr=(le,ie)=>{var je;const et=De.extend({},ie);if(!et.source&&(De.extend(et,Lt(null!==(je=et.embed)&&void 0!==je?je:"",le.schema)),!et.source))return"";et.altsource||(et.altsource=""),et.poster||(et.poster=""),et.source=le.convertURL(et.source,"source"),et.altsource=le.convertURL(et.altsource,"source"),et.sourcemime=U(et.source),et.altsourcemime=U(et.altsource),et.poster=le.convertURL(et.poster,"poster");const Kt=ro(et.source);if(Kt&&(et.source=Kt.url,et.type=Kt.type,et.allowfullscreen=Kt.allowFullscreen,et.width=et.width||String(Kt.w),et.height=et.height||String(Kt.h)),et.embed)return Je(et.embed,et,!0,le.schema);{const hn=mo(le),Rn=Vo(le),ps=re(le);return et.width=et.width||"300",et.height=et.height||"150",De.each(et,(be,Vn)=>{et[Vn]=le.dom.encode(""+be)}),"iframe"===et.type?((le,ie)=>ie?ie(le):'<iframe src="'+le.source+'" width="'+le.width+'" height="'+le.height+'"'+(le.allowfullscreen?' allowFullscreen="1"':"")+"></iframe>")(et,ps):"application/x-shockwave-flash"===et.sourcemime?(le=>{let ie='<object data="'+le.source+'" width="'+le.width+'" height="'+le.height+'" type="application/x-shockwave-flash">';return le.poster&&(ie+='<img src="'+le.poster+'" width="'+le.width+'" height="'+le.height+'" />'),ie+="</object>",ie})(et):-1!==et.sourcemime.indexOf("audio")?((le,ie)=>ie?ie(le):'<audio controls="controls" src="'+le.source+'">'+(le.altsource?'\n<source src="'+le.altsource+'"'+(le.altsourcemime?' type="'+le.altsourcemime+'"':"")+" />\n":"")+"</audio>")(et,hn):((le,ie)=>ie?ie(le):'<video width="'+le.width+'" height="'+le.height+'"'+(le.poster?' poster="'+le.poster+'"':"")+' controls="controls">\n<source src="'+le.source+'"'+(le.sourcemime?' type="'+le.sourcemime+'"':"")+" />\n"+(le.altsource?'<source src="'+le.altsource+'"'+(le.altsourcemime?' type="'+le.altsourcemime+'"':"")+" />\n":"")+"</video>")(et,Rn)}},Ao=le=>le.hasAttribute("data-mce-object")||le.hasAttribute("data-ephox-embed-iri"),Qr={},Hs=le=>ie=>yr(le,ie),Ps=(le,ie)=>{const je=ko(le);return je?((le,ie,je)=>new Promise((et,Kt)=>{const hn=Rn=>(Rn.html&&(Qr[le.source]=Rn),et({url:le.source,html:Rn.html?Rn.html:ie(le)}));Qr[le.source]?hn(Qr[le.source]):je({url:le.source},hn,Kt)}))(ie,Hs(le),je):((le,ie)=>Promise.resolve({html:ie(le),url:le.source}))(ie,Hs(le))},Xo=(le,ie)=>{const je={};return Ln(le,"dimensions").each(et=>{ys(["width","height"],Kt=>{Ln(ie,Kt).orThunk(()=>Ln(et,Kt)).each(hn=>je[Kt]=hn)})}),je},Vs=(le,ie)=>{const je=ie&&"dimensions"!==ie?((le,ie)=>Ln(ie,le).bind(je=>Ln(je,"meta")))(ie,le).getOr({}):{},et=((le,ie,je)=>et=>{const Kt=()=>Ln(le,et),hn=()=>Ln(ie,et),Rn=Vn=>Ln(Vn,"value").bind(ge=>ge.length>0?qo.some(ge):qo.none());return{[et]:(et===je?Kt().bind(Vn=>vr(Vn)?Rn(Vn).orThunk(hn):hn().orThunk(()=>qo.from(Vn))):hn().orThunk(()=>Kt().bind(Vn=>vr(Vn)?Rn(Vn):qo.from(Vn)))).getOr("")}})(le,je,ie);return{...et("source"),...et("altsource"),...et("poster"),...et("embed"),...Xo(le,je)}},Ye=le=>{const ie={...le,source:{value:Ln(le,"source").getOr("")},altsource:{value:Ln(le,"altsource").getOr("")},poster:{value:Ln(le,"poster").getOr("")}};return ys(["width","height"],je=>{Ln(le,je).each(et=>{const Kt=ie.dimensions||{};Kt[je]=et,ie.dimensions=Kt})}),ie},Ke=le=>ie=>{le.notificationManager.open({type:"error",text:ie&&ie.msg?"Media embed handler error: "+ie.msg:"Media embed handler threw unknown error."})},tn=(le,ie)=>je=>{if(Os(je.url)&&je.url.trim().length>0){const et=je.html,hn={...Lt(et,ie.schema),source:je.url,embed:et};le.setData(Ye(hn))}},Xs=(le,ie)=>{const je=le.dom.select("*[data-mce-object]");le.insertContent(ie),((le,ie)=>{const je=le.dom.select("*[data-mce-object]");for(let et=0;et<ie.length;et++)for(let Kt=je.length-1;Kt>=0;Kt--)ie[et]===je[Kt]&&je.splice(Kt,1);le.selection.select(je[0])})(le,je),le.nodeChanged()},sr=(le,ie)=>qn(ie)&&"ephox-embed-iri"===ie&&qn(ro(le)),jr=(le,ie)=>{return((et=le).width!==(Kt=ie).width||et.height!==Kt.height)&&sr(ie.source,le.type);var et,Kt},Uo=le=>{const ie=(le=>{const ie=le.selection.getNode(),je=Ao(ie)?le.serializer.serialize(ie,{selection:!0}):"",et=Lt(je,le.schema),hn=(()=>{if(sr(et.source,et.type)){const Rn=le.dom.getRect(ie);return{width:Rn.w.toString().replace(/px$/,""),height:Rn.h.toString().replace(/px$/,"")}}return{}})();return{embed:je,...et,...hn}})(le),je=(le=>{let ie=le;return{get:()=>ie,set:Kt=>{ie=Kt}}})(ie),et=Ye(ie),be=dr(le)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Vn={title:"General",name:"general",items:zt([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],be])},at=[];qe(le)&&at.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Se(le)&&at.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Ft=[Vn,{title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]}];at.length>0&&Ft.push({title:"Advanced",name:"advanced",items:at});const sn=le.windowManager.open({title:"Insert/Edit Media",size:"normal",body:{type:"tabpanel",tabs:Ft},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:rn=>{const Mn=Vs(rn.getData());((le,ie,je)=>{var et;ie.embed=jr(le,ie)&&dr(je)?yr(je,{...ie,embed:""}):Je(null!==(et=ie.embed)&&void 0!==et?et:"",ie,!1,je.schema),ie.embed&&(le.source===ie.source||(le=>en(Qr,le))(ie.source))?Xs(je,ie.embed):Ps(je,ie).then(Kt=>{Xs(je,Kt.html)}).catch(Ke(je))})(je.get(),Mn,le),rn.close()},onChange:(rn,Mn)=>{switch(Mn.name){case"source":((rn,Mn)=>{const ao=Vs(Mn.getData(),"source");rn.source!==ao.source&&(tn(sn,le)({url:ao.source,html:""}),Ps(le,ao).then(tn(sn,le)).catch(Ke(le)))})(je.get(),rn);break;case"embed":(rn=>{var Mn;const ao=Vs(rn.getData()),To=Lt(null!==(Mn=ao.embed)&&void 0!==Mn?Mn:"",le.schema);rn.setData(Ye(To))})(rn);break;case"dimensions":case"altsource":case"poster":((rn,Mn,ao)=>{const To=Vs(rn.getData(),Mn),ws=jr(ao,To)&&dr(le)?{...To,embed:""}:To,gc=yr(le,ws);rn.setData(Ye({...ws,embed:gc}))})(rn,Mn.name,je.get())}je.set(Vs(rn.getData()))},initialData:et})},ea=(le,ie)=>((le,ie,je)=>""===ie||le.length>=ie.length&&le.substr(0,0+ie.length)===ie)(le,ie);var Gr=tinymce.util.Tools.resolve("tinymce.Env");const Vr=le=>{const ie=le.name;return"iframe"===ie||"video"===ie||"audio"===ie},as=(le,ie,je,et=null)=>{const Kt=le.attr(je);return qn(Kt)?Kt:en(ie,je)?null:et},Sa=(le,ie,je)=>{const et="img"===ie.name||"video"===le.name,Rn=et?"audio"===le.name?"30":"150":null;ie.attr({width:as(le,je,"width",et?"300":null),height:as(le,je,"height",Rn)})},qa=(le,ie)=>{const je=ie.name,et=new xo("img",1);return zs(le,ie,et),Sa(ie,et,{}),et.attr({style:ie.attr("style"),src:Gr.transparentSrc,"data-mce-object":je,class:"mce-object mce-object-"+je}),et},rr=(le,ie)=>{var je;const et=ie.name,Kt=new xo("span",1);Kt.attr({contentEditable:"false",style:ie.attr("style"),"data-mce-object":et,class:"mce-preview-object mce-object-"+et}),zs(le,ie,Kt);const hn=le.dom.parseStyle(null!==(je=ie.attr("style"))&&void 0!==je?je:""),Rn=new xo(et,1);if(Sa(ie,Rn,hn),Rn.attr({src:ie.attr("src"),style:ie.attr("style"),class:ie.attr("class")}),"iframe"===et)Rn.attr({allowfullscreen:ie.attr("allowfullscreen"),frameborder:"0"});else{ys(["controls","crossorigin","currentTime","loop","muted","poster","preload"],ge=>{Rn.attr(ge,ie.attr(ge))});const Vn=Kt.attr("data-mce-html");qn(Vn)&&((le,ie,je,et)=>{const Kt=bt(le.schema).parse(et,{context:ie});for(;Kt.firstChild;)je.append(Kt.firstChild)})(le,et,Rn,unescape(Vn))}const ps=new xo("span",1);return ps.attr("class","mce-shim"),Kt.append(Rn),Kt.append(ps),Kt},zs=(le,ie,je)=>{var et;const Kt=null!==(et=ie.attributes)&&void 0!==et?et:[];let hn=Kt.length;for(;hn--;){const Vn=Kt[hn].name;let ge=Kt[hn].value;"width"!==Vn&&"height"!==Vn&&"style"!==Vn&&!ea(Vn,"data-mce-")&&(("data"===Vn||"src"===Vn)&&(ge=le.convertURL(ge,Vn)),je.attr("data-mce-p-"+Vn,ge))}const Rn=Ys({inner:!0},le.schema),ps=new xo("div",1);ys(ie.children(),Vn=>ps.append(Vn));const be=Rn.serialize(ps);be&&(je.attr("data-mce-html",escape(be)),je.empty())},qr=le=>{const ie=le.attr("class");return Os(ie)&&/\btiny-pageembed\b/.test(ie)},Da=le=>{let ie=le;for(;ie=ie.parent;)if(ie.attr("data-ephox-embed-iri")||qr(ie))return!0;return!1},ar=(le,ie,je)=>{const Kt=(0,le.options.get)("xss_sanitization"),hn=Is(le);return bt(le.schema,{sanitize:Kt,validate:hn}).parse(je,{context:ie})},cs=le=>ie=>{const je=()=>{ie.setEnabled(le.selection.isEditable())};return le.on("NodeChange",je),je(),()=>{le.off("NodeChange",je)}};da.add("media",le=>((le=>{const ie=le.options.register;ie("audio_template_callback",{processor:"function"}),ie("video_template_callback",{processor:"function"}),ie("iframe_template_callback",{processor:"function"}),ie("media_live_embeds",{processor:"boolean",default:!0}),ie("media_filter_html",{processor:"boolean",default:!0}),ie("media_url_resolver",{processor:"function"}),ie("media_alt_source",{processor:"boolean",default:!0}),ie("media_poster",{processor:"boolean",default:!0}),ie("media_dimensions",{processor:"boolean",default:!0})})(le),(le=>{le.addCommand("mceMedia",()=>{Uo(le)})})(le),(le=>{const ie=()=>le.execCommand("mceMedia");le.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:ie,onSetup:je=>{const et=le.selection;je.setActive(Ao(et.getNode()));const Kt=et.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",je.setActive).unbind,hn=cs(le)(je);return()=>{Kt(),hn()}}}),le.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:ie,onSetup:cs(le)})})(le),(le=>{le.on("ResolveName",ie=>{let je;1===ie.target.nodeType&&(je=ie.target.getAttribute("data-mce-object"))&&(ie.name=je)})})(le),(le=>{le.on("PreInit",()=>{const{schema:ie,serializer:je,parser:et}=le,Kt=ie.getBoolAttrs();ys("webkitallowfullscreen mozallowfullscreen".split(" "),hn=>{Kt[hn]={}}),((le,ie)=>{const je=Ro(le);for(let et=0,Kt=je.length;et<Kt;et++){const hn=je[et];ie(le[hn],hn)}})({embed:["wmode"]},(hn,Rn)=>{const ps=ie.getElementRule(Rn);ps&&ys(hn,be=>{ps.attributes[be]={},ps.attributesOrder.push(be)})}),et.addNodeFilter("iframe,video,audio,object,embed",(le=>ie=>{let et,je=ie.length;for(;je--;)et=ie[je],et.parent&&(et.parent.attr("data-mce-object")||(Vr(et)&&gt(le)?Da(et)||et.replace(rr(le,et)):Da(et)||et.replace(qa(le,et))))})(le)),je.addAttributeFilter("data-mce-object",(hn,Rn)=>{var ps;let be=hn.length;for(;be--;){const Vn=hn[be];if(!Vn.parent)continue;const ge=Vn.attr(Rn),he=new xo(ge,1);if("audio"!==ge){const gn=Vn.attr("class");gn&&-1!==gn.indexOf("mce-preview-object")&&Vn.firstChild?he.attr({width:Vn.firstChild.attr("width"),height:Vn.firstChild.attr("height")}):he.attr({width:Vn.attr("width"),height:Vn.attr("height")})}he.attr({style:Vn.attr("style")});const at=null!==(ps=Vn.attributes)&&void 0!==ps?ps:[];let ht=at.length;for(;ht--;){const gn=at[ht].name;0===gn.indexOf("data-mce-p-")&&he.attr(gn.substr(11),at[ht].value)}const Ft=Vn.attr("data-mce-html");if(Ft){const gn=ar(le,ge,unescape(Ft));ys(gn.children(),sn=>he.append(sn))}Vn.replace(he)}})}),le.on("SetContent",()=>{const ie=le.dom;ys(ie.select("span.mce-preview-object"),je=>{0===ie.select("span.mce-shim",je).length&&ie.add(je,"span",{class:"mce-shim"})})})})(le),(le=>{le.on("click keyup touchend",()=>{const ie=le.selection.getNode();ie&&le.dom.hasClass(ie,"mce-preview-object")&&le.dom.getAttrib(ie,"data-mce-selected")&&ie.setAttribute("data-mce-selected","2")}),le.on("ObjectResized",ie=>{const je=ie.target;if(je.getAttribute("data-mce-object")){let et=je.getAttribute("data-mce-html");et&&(et=unescape(et),je.setAttribute("data-mce-html",escape(Je(et,{width:String(ie.width),height:String(ie.height)},!1,le.schema))))}})})(le),(le=>({showDialog:()=>{Uo(le)}}))(le)))}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ks=T=>O=>(T=>{const O=typeof T;return null===T?"null":"object"===O&&Array.isArray(T)?"array":"object"===O&&((T,O,G)=>{var te;return!!((G,te)=>te.isPrototypeOf(G))(T,O.prototype)||(null===(te=T.constructor)||void 0===te?void 0:te.name)===O.name})(T,String)?"string":O})(O)===T,Os=T=>O=>typeof O===T,As=Ks("string"),bn=Ks("array"),qn=Os("boolean"),qo=(void 0,O=>undefined===O),ys=T=>!(T=>null==T)(T),zt=Os("function"),Mo=Os("number"),Ro=()=>{},_t=T=>()=>T,Ln=T=>T,en=(T,O)=>T===O;function ve(T,...O){return(...G)=>{const te=O.concat(G);return T.apply(null,te)}}const Le=T=>{T()},mo=_t(!1),Vo=_t(!0);class re{constructor(O,G){this.tag=O,this.value=G}static some(O){return new re(!0,O)}static none(){return re.singletonNone}fold(O,G){return this.tag?G(this.value):O()}isSome(){return this.tag}isNone(){return!this.tag}map(O){return this.tag?re.some(O(this.value)):re.none()}bind(O){return this.tag?O(this.value):re.none()}exists(O){return this.tag&&O(this.value)}forall(O){return!this.tag||O(this.value)}filter(O){return!this.tag||O(this.value)?this:re.none()}getOr(O){return this.tag?this.value:O}or(O){return this.tag?this:O}getOrThunk(O){return this.tag?this.value:O()}orThunk(O){return this.tag?this:O()}getOrDie(O){if(this.tag)return this.value;throw new Error(O??"Called getOrDie on None")}static from(O){return ys(O)?re.some(O):re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(O){this.tag&&O(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}re.singletonNone=new re(!1);const gt=Object.keys,Is=Object.hasOwnProperty,ko=(T,O)=>{const G=gt(T);for(let te=0,ye=G.length;te<ye;te++){const st=G[te];O(T[st],st)}},dr=(T,O)=>{const G={};return((T,O,G,te)=>{ko(T,(ye,st)=>{(O(ye,st)?G:te)(ye,st)})})(T,O,(T=>(O,G)=>{T[G]=O})(G),Ro),G},Ot=T=>((T,O)=>{const G=[];return ko(T,(te,ye)=>{G.push(O(te,ye))}),G})(T,Ln),B=T=>gt(T).length,An=(T,O)=>oo(T,O)?re.from(T[O]):re.none(),oo=(T,O)=>Is.call(T,O),yn=(T,O)=>oo(T,O)&&null!=T[O],U=Array.prototype.indexOf,xo=Array.prototype.push,bt=(T,O)=>((T,O)=>U.call(T,O))(T,O)>-1,vn=(T,O)=>{for(let G=0,te=T.length;G<te;G++)if(O(T[G],G))return!0;return!1},Be=(T,O)=>{const G=[];for(let te=0;te<T;te++)G.push(O(te));return G},lt=(T,O)=>{const G=T.length,te=new Array(G);for(let ye=0;ye<G;ye++)te[ye]=O(T[ye],ye);return te},ln=(T,O)=>{for(let G=0,te=T.length;G<te;G++)O(T[G],G)},jn=(T,O)=>{const G=[];for(let te=0,ye=T.length;te<ye;te++){const st=T[te];O(st,te)&&G.push(st)}return G},ro=(T,O,G)=>(ln(T,(te,ye)=>{G=O(G,te,ye)}),G),mr=(T,O)=>((T,O,G)=>{for(let te=0,ye=T.length;te<ye;te++){const st=T[te];if(O(st,te))return re.some(st);if(G(st,te))break}return re.none()})(T,O,mo),No=(T,O)=>(T=>{const O=[];for(let G=0,te=T.length;G<te;++G){if(!bn(T[G]))throw new Error("Arr.flatten item "+G+" was not an array, input: "+T);xo.apply(O,T[G])}return O})(lt(T,O)),yr=(T,O)=>{for(let G=0,te=T.length;G<te;++G)if(!0!==O(T[G],G))return!1;return!0},Ls=(T,O)=>O>=0&&O<T.length?re.some(T[O]):re.none(),Mr=(T,O)=>{for(let G=0;G<T.length;G++){const te=O(T[G],G);if(te.isSome())return te}return re.none()},Ke=T=>{if(null==T)throw new Error("Node cannot be null or undefined");return{dom:T}},tn={fromHtml:(T,O)=>{const te=(O||document).createElement("div");if(te.innerHTML=T,!te.hasChildNodes()||te.childNodes.length>1){const ye="HTML does not have a single root node";throw console.error(ye,T),new Error(ye)}return Ke(te.childNodes[0])},fromTag:(T,O)=>{const te=(O||document).createElement(T);return Ke(te)},fromText:(T,O)=>{const te=(O||document).createTextNode(T);return Ke(te)},fromDom:Ke,fromPoint:(T,O,G)=>re.from(T.dom.elementFromPoint(O,G)).map(Ke)},Kn=(T,O)=>{const G=T.dom;if(1!==G.nodeType)return!1;{const te=G;if(void 0!==te.matches)return te.matches(O);if(void 0!==te.msMatchesSelector)return te.msMatchesSelector(O);if(void 0!==te.webkitMatchesSelector)return te.webkitMatchesSelector(O);if(void 0!==te.mozMatchesSelector)return te.mozMatchesSelector(O);throw new Error("Browser lacks native selectors")}},Xs=T=>1!==T.nodeType&&9!==T.nodeType&&11!==T.nodeType||0===T.childElementCount,Es=(T,O)=>T.dom===O.dom,Uo=Kn;typeof window<"u"||Function("return this;")();const rt=T=>T.dom.nodeName.toLowerCase(),Qn=T=>T.dom.nodeType,_r=T=>O=>Qn(O)===T,Gr=_r(1),Vr=_r(3),as=_r(9),Sa=_r(11),Fr=T=>O=>Gr(O)&&rt(O)===T,rr=T=>as(T)?T:(T=>tn.fromDom(T.dom.ownerDocument))(T),zs=T=>re.from(T.dom.parentNode).map(tn.fromDom),Ma=T=>re.from(T.dom.nextSibling).map(tn.fromDom),ar=T=>lt(T.dom.childNodes,tn.fromDom),Ss=zt(Element.prototype.attachShadow)&&zt(Node.prototype.getRootNode)?T=>tn.fromDom(T.dom.getRootNode()):rr,ie=T=>tn.fromDom(T.dom.host),je=T=>{const O=Vr(T)?T.dom.parentNode:T.dom;if(null==O||null===O.ownerDocument)return!1;const G=O.ownerDocument;return(T=>{const O=Ss(T);return(T=>Sa(T)&&ys(T.dom.host))(O)?re.some(O):re.none()})(tn.fromDom(O)).fold(()=>G.body.contains(O),((T,O)=>G=>T(O(G)))(je,ie))};var et=(T,O,G,te,ye)=>T(G,te)?re.some(G):zt(ye)&&ye(G)?re.none():O(G,te,ye);const Kt=(T,O,G)=>{let te=T.dom;const ye=zt(G)?G:mo;for(;te.parentNode;){te=te.parentNode;const st=tn.fromDom(te);if(O(st))return re.some(st);if(ye(st))break}return re.none()},ps=(T,O,G)=>Kt(T,te=>Kn(te,O),G),Vn=(T,O)=>((T,O)=>{const G=void 0===O?document:O.dom;return Xs(G)?re.none():re.from(G.querySelector(T)).map(tn.fromDom)})(O,T),ge=(T,O,G)=>et((ye,st)=>Kn(ye,st),ps,T,O,G),at=(T,O=!1)=>je(T)?T.dom.isContentEditable:(T=>ge(T,"[contenteditable]"))(T).fold(_t(O),G=>"true"===ht(G)),ht=T=>T.dom.contentEditable,Ft=T=>T.nodeName.toLowerCase(),sn=T=>O=>Es(O,(T=>tn.fromDom(T.getBody()))(T)),Mn=T=>/^\d+(\.\d+)?$/.test(T)?T+"px":T,ao=T=>tn.fromDom(T.selection.getStart()),Ta=(T,O)=>{let G=[];return ln(ar(T),te=>{O(te)&&(G=G.concat([te])),G=G.concat(Ta(te,O))}),G},Ka=(T,O)=>((T,O)=>jn(ar(T),O))(T,G=>Kn(G,O)),co=(T,O)=>((T,O)=>{const G=void 0===O?document:O.dom;return Xs(G)?[]:lt(G.querySelectorAll(T),tn.fromDom)})(O,T),Wo=(T,O,G)=>{if(!(As(G)||qn(G)||Mo(G)))throw console.error("Invalid call to Attribute.set. Key ",O,":: Value ",G,":: Element ",T),new Error("Attribute value was not simple");T.setAttribute(O,G+"")},ga=(T,O)=>{const G=T.dom.getAttribute(O);return null===G?void 0:G},hc=(T,O)=>re.from(ga(T,O)),is=(T,O)=>{T.dom.removeAttribute(O)},Qi=(T,O,G=en)=>T.exists(te=>G(te,O)),Cr=(T,O,G)=>T.isSome()&&O.isSome()?re.some(G(T.getOrDie(),O.getOrDie())):re.none(),Ic=(T,O)=>((T,O,G)=>""===O||T.length>=O.length&&T.substr(0,0+O.length)===O)(T,O),wt=(T=>O=>O.replace(T,""))(/^\s+|\s+$/g),kc=T=>T.length>0,Ds=(T,O=10)=>{const G=parseInt(T,O);return isNaN(G)?re.none():re.some(G)},Si=T=>void 0!==T.style&&zt(T.style.getPropertyValue),ce=(T,O)=>{const G=T.dom,ye=window.getComputedStyle(G).getPropertyValue(O);return""!==ye||je(T)?ye:Ae(G,O)},Ae=(T,O)=>Si(T)?T.style.getPropertyValue(O):"",Ve=(T,O)=>{const te=Ae(T.dom,O);return re.from(te).filter(ye=>ye.length>0)},an=(T,O,G=0)=>hc(T,O).map(te=>parseInt(te,10)).getOr(G),Eo=(T,O)=>xr(T,O,Vo),xr=(T,O,G)=>No(ar(T),te=>Kn(te,O)?G(te)?[te]:[]:xr(te,O,G)),hs=["tfoot","thead","tbody","colgroup"],ns=(T,O)=>({rows:T,columns:O}),ls=(T,O,G)=>({element:T,rowspan:O,colspan:G}),zr=(T,O,G)=>({element:T,cells:O,section:G}),Bo=(T,O)=>({element:T,columns:O}),It=(T,O)=>ge(T,"table",O),go=T=>Eo(T,"tr"),Xt=T=>It(T).fold(_t([]),O=>Ka(O,"colgroup")),ka=T=>zs(T).map(O=>{const G=rt(O);return(T=>bt(hs,T))(G)?G:"tbody"}).getOr("tbody"),Ws=T=>hc(T,"data-snooker-locked-cols").bind(O=>re.from(O.match(/\d+/g))).map(O=>((T,O)=>{const G={};for(let te=0,ye=T.length;te<ye;te++){const st=T[te];G[String(st)]=O(st,te)}return G})(O,Vo)),Nr=(T,O)=>T+","+O,Sr_fromTable=T=>{const O=(T=>{const O=go(T);return((T,O)=>lt(T,G=>{if("colgroup"===rt(G)){const te=lt((T=>Kn(T,"colgroup")?Ka(T,"col"):No(Xt(T),O=>Ka(O,"col")))(G),ye=>{const st=an(ye,"span",1);return ls(ye,1,st)});return zr(G,te,"colgroup")}{const te=lt((T=>Eo(T,"th,td"))(G),ye=>{const st=an(ye,"rowspan",1),Ct=an(ye,"colspan",1);return ls(ye,st,Ct)});return zr(G,te,O(G))}}))([...Xt(T),...O],ka)})(T);return(T=>{const O={},G=[],ye=(T=>Ls(T,0))(T).map(nc=>nc.element).bind(It).bind(Ws).getOr({});let st=0,Ct=0,Zt=0;const{pass:Fn,fail:eo}=((T,O)=>{const G=[],te=[];for(let ye=0,st=T.length;ye<st;ye++){const Ct=T[ye];(nc=Ct,"colgroup"===nc.section?G:te).push(Ct)}var nc;return{pass:G,fail:te}})(T);ln(eo,nc=>{const $i=[];ln(nc.cells,Xl=>{let vs=0;for(;void 0!==O[Nr(Zt,vs)];)vs++;const Gu=yn(ye,vs.toString()),kl=((T,O,G,te,ye,st)=>({element:T,rowspan:O,colspan:G,row:te,column:ye,isLocked:st}))(Xl.element,Xl.rowspan,Xl.colspan,Zt,vs,Gu);for(let aa=0;aa<Xl.colspan;aa++)for(let Jl=0;Jl<Xl.rowspan;Jl++){const ca=vs+aa,_a=Nr(Zt+Jl,ca);O[_a]=kl,Ct=Math.max(Ct,ca+1)}$i.push(kl)}),st++,G.push(zr(nc.element,$i,nc.section)),Zt++});const{columns:Lr,colgroups:Qo}=(T=>Ls(T,T.length-1))(Fn).map(nc=>{const $i=(T=>{const O={};let G=0;return ln(T.cells,te=>{const ye=te.colspan;Be(ye,st=>{const Ct=G+st;O[Ct]=((T,O,G)=>({element:T,colspan:O,column:G}))(te.element,ye,Ct)}),G+=ye}),O})(nc);return{colgroups:[Bo(nc.element,Ot($i))],columns:$i}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ns(st,Ct),access:O,all:G,columns:Lr,colgroups:Qo}})(O)},Sr_getAt=(T,O,G)=>re.from(T.access[Nr(O,G)]),Sr_findItem=(T,O,G)=>{const te=((T,O)=>{const G=No(T.all,te=>te.cells);return jn(G,O)})(T,ye=>G(O,ye.element));return te.length>0?re.some(te[0]):re.none()},Sr_getColumnAt=(T,O)=>re.from(T.columns[O]);var Ts=tinymce.util.Tools.resolve("tinymce.util.Tools");const $r=(T,O,G)=>{const te=T.select("td,th",O);let ye;for(let st=0;st<te.length;st++){const Ct=T.getStyle(te[st],G);if(qo(ye)&&(ye=Ct),ye!==Ct)return""}return ye},_c=(T,O,G)=>{Ts.each("left center right".split(" "),te=>{te!==G&&T.formatter.remove("align"+te,{},O)}),G&&T.formatter.apply("align"+G,{},O)},Ti=(T,O,G)=>{T.dispatch("TableModified",{...G,table:O})},fa=(T,O,G)=>((T,O)=>(T=>{const O=parseFloat(T);return isNaN(O)?re.none():re.some(O)})(T).getOr(O))(ce(T,O),G);var jm=tinymce.util.Tools.resolve("tinymce.Env");const ei=Be(5,T=>{const O=`${T+1}px`;return{title:O,value:O}}),Fu=lt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],T=>({title:T,value:T.toLowerCase()})),vd=T=>{var O;const G=T.dom,te=null!==(O=G.getParent(T.selection.getStart(),G.isBlock))&&void 0!==O?O:T.getBody();return(T=>((T,O)=>{const G=T.dom,te=G.getBoundingClientRect().width||G.offsetWidth;return"border-box"===O?te:((T,O,G,te)=>O-fa(T,"padding-left",0)-fa(T,"padding-right",0)-fa(T,"border-left-width",0)-fa(T,"border-right-width",0))(T,te)})(T,"content-box"))(tn.fromDom(te))+"px"},na=T=>O=>O.options.get(T),Oc=na("table_sizing_mode"),Vc=na("table_border_widths"),el=na("table_border_styles"),fu=na("table_cell_advtab"),Ul=na("table_row_advtab"),Ba=na("table_advtab"),vl=na("table_appearance_options"),zc=na("table_grid"),ui=na("table_style_by_css"),$u=na("table_cell_class_list"),Qd=na("table_row_class_list"),Iu=na("table_class_list"),Ei=na("table_toolbar"),Gm=na("table_background_color_map"),tl=na("table_border_color_map"),qm=T=>"fixed"===Oc(T),yd=T=>"responsive"===Oc(T),Ya=T=>{const O=T.options,G=O.get("table_default_styles");return O.isSet("table_default_styles")?G:((T,O)=>yd(T)||!ui(T)?O:qm(T)?{...O,width:vd(T)}:{...O,width:"100%"})(T,G)},nl=T=>{const O=T.options,G=O.get("table_default_attributes");return O.isSet("table_default_attributes")?G:((T,O)=>yd(T)||ui(T)?O:qm(T)?{...O,width:vd(T)}:{...O,width:"100%"})(T,G)},em=(T,O)=>O.column>=T.startCol&&O.column+O.colspan-1<=T.finishCol&&O.row>=T.startRow&&O.row+O.rowspan-1<=T.finishRow,bu=(T,O,G)=>((T,O,G)=>{const te=Sr_findItem(T,O,Es),ye=Sr_findItem(T,G,Es);return te.bind(st=>ye.map(Ct=>((T,O)=>((T,O,G,te)=>({startRow:T,startCol:O,finishRow:G,finishCol:te}))(Math.min(T.row,O.row),Math.min(T.column,O.column),Math.max(T.row+T.rowspan-1,O.row+O.rowspan-1),Math.max(T.column+T.colspan-1,O.column+O.colspan-1)))(st,Ct)))})(T,O,G).bind(te=>((T,O)=>{let G=!0;const te=ve(em,O);for(let ye=O.startRow;ye<=O.finishRow;ye++)for(let st=O.startCol;st<=O.finishCol;st++)G=G&&Sr_getAt(T,ye,st).exists(te);return G?re.some(O):re.none()})(T,te)),Zl=Sr_fromTable,Hu=(T,O)=>{zs(T).each(te=>{te.dom.insertBefore(O.dom,T.dom)})},ol=(T,O)=>{Ma(T).fold(()=>{zs(T).each(ye=>{tm(ye,O)})},te=>{Hu(te,O)})},tm=(T,O)=>{T.dom.appendChild(O.dom)},Km=(T,O)=>{ln(O,(G,te)=>{ol(0===te?T:O[te-1],G)})},wd=T=>{const O=T.dom;null!==O.parentNode&&O.parentNode.removeChild(O)},vu=((T,O)=>{const te=st=>T(st)?re.from(st.dom.nodeValue):re.none();return{get:st=>{if(!T(st))throw new Error("Can only get text value of a text node");return te(st).getOr("")},getOption:te,set:(st,Ct)=>{if(!T(st))throw new Error("Can only set raw text value of a text node");st.dom.nodeValue=Ct}}})(Vr);var Ac=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const ir=(T,O,G,te)=>((T,O,G)=>(((T,O)=>{for(let G=T.length-1;G>=0;G--)O(T[G],G)})(T,(te,ye)=>{G=O(G,te)}),G))(te,(st,Ct)=>{const Zt=O(T,Ct);return La(T,st,Zt)},O(T,G)),La=(T,O,G)=>O.bind(te=>G.filter(ve(T.eq,te))),Qt={up:_t({selector:ps,closest:ge,predicate:Kt,all:(T,O)=>{const G=zt(O)?O:mo;let te=T.dom;const ye=[];for(;null!=te.parentNode;){const st=te.parentNode,Ct=tn.fromDom(st);if(ye.push(Ct),!0===G(Ct))break;te=st}return ye}}),down:_t({selector:co,predicate:Ta}),styles:_t({get:ce,getRaw:Ve,set:(T,O,G)=>{((T,O,G)=>{if(!As(G))throw console.error("Invalid call to CSS.set. Property ",O,":: Value ",G,":: Element ",T),new Error("CSS value must be a string: "+G);Si(T)&&T.style.setProperty(O,G)})(T.dom,O,G)},remove:(T,O)=>{((T,O)=>{Si(T)&&T.style.removeProperty(O)})(T.dom,O),Qi(hc(T,"style").map(wt),"")&&is(T,"style")}}),attrs:_t({get:ga,set:(T,O,G)=>{Wo(T.dom,O,G)},remove:is,copyTo:(eo,Lr)=>{const Qo=(T=>ro(T.dom.attributes,(O,G)=>(O[G.name]=G.value,O),{}))(eo);((T,O)=>{const G=T.dom;ko(O,(te,ye)=>{Wo(G,ye,te)})})(Lr,Qo)}}),insert:_t({before:Hu,after:ol,afterAll:Km,append:tm,appendAll:(T,O)=>{ln(O,G=>{tm(T,G)})},prepend:(T,O)=>{(T=>((T,O)=>re.from(T.dom.childNodes[0]).map(tn.fromDom))(T))(T).fold(()=>{tm(T,O)},te=>{T.dom.insertBefore(O.dom,te.dom)})},wrap:(T,O)=>{Hu(T,O),tm(O,T)}}),remove:_t({unwrap:T=>{const O=ar(T);O.length>0&&Km(T,O),wd(T)},remove:wd}),create:_t({nu:tn.fromTag,clone:eo=>tn.fromDom(eo.dom.cloneNode(!1)),text:tn.fromText}),query:_t({comparePosition:(eo,Lr)=>eo.dom.compareDocumentPosition(Lr.dom),prevSibling:T=>re.from(T.dom.previousSibling).map(tn.fromDom),nextSibling:Ma}),property:_t({children:ar,name:rt,parent:zs,document:eo=>rr(eo).dom,isText:Vr,isComment:T=>8===Qn(T)||"#comment"===rt(T),isElement:Gr,isSpecial:eo=>{const Lr=rt(eo);return bt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Lr)},getLanguage:eo=>Gr(eo)?hc(eo,"lang"):re.none(),getText:T=>vu.get(T),setText:(T,O)=>vu.set(T,O),isBoundary:eo=>!!Gr(eo)&&("body"===rt(eo)||bt(Ac,rt(eo))),isEmptyTag:eo=>!!Gr(eo)&&bt(["br","img","hr","input"],rt(eo)),isNonEditable:eo=>Gr(eo)&&"false"===ga(eo,"contenteditable")}),eq:Es,is:Uo},di=T=>ps(T,"table"),Xm=(T,O,G)=>Vn(T,O).bind(te=>Vn(T,G).bind(ye=>((T,O)=>((T,O,G)=>G.length>0?((T,O,G,te)=>te(T,O,G[0],G.slice(1)))(T,O,G,ir):re.none())(Qt,(G,te)=>T(te),O))(di,[te,ye]).map(st=>({first:te,last:ye,table:st})))),Wg=T=>lt(T,tn.fromDom),sl={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},M=T=>(O,G)=>{const te=rt(O),ye="col"===te||"colgroup"===te?(T=>It(T).bind(O=>((T,O)=>((T,O)=>{const G=co(T,O);return G.length>0?re.some(G):re.none()})(T,O))(O,sl.firstSelectedSelector)).fold(_t(T),O=>O[0]))(O):O;return ge(ye,T,G)},H=M("th,td,caption"),K=M("th,td"),me=T=>Wg(T.model.table.getSelectedCells()),Tt=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Hn=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,io=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,jo=T=>((T,O)=>Ic(T,"#")?((T,O)=>T.substring(O))(T,"#".length):T)(T).toUpperCase(),Ur=T=>{const O=T.toString(16);return(1===O.length?"0"+O:O).toUpperCase()},sa=T=>(T=>({value:jo(T)}))(Ur(T.red)+Ur(T.green)+Ur(T.blue)),Oi=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Ja=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,yu=(T,O,G,te)=>({red:T,green:O,blue:G,alpha:te}),ti=(T,O,G,te)=>{const ye=parseInt(T,10),st=parseInt(O,10),Ct=parseInt(G,10),Zt=parseFloat(te);return yu(ye,st,Ct,Zt)},Br=T=>{if("transparent"===T)return re.some(yu(0,0,0,0));const O=Oi.exec(T);if(null!==O)return re.some(ti(O[1],O[2],O[3],"1"));const G=Ja.exec(T);return null!==G?re.some(ti(G[1],G[2],G[3],G[4])):re.none()},Ai=T=>(T=>(T=>Hn.test(T)||io.test(T))(T)?re.some({value:jo(T)}):re.none())(T).orThunk(()=>Br(T).map(sa)).getOrThunk(()=>{const O=document.createElement("canvas");O.height=1,O.width=1;const G=O.getContext("2d");G.clearRect(0,0,O.width,O.height),G.fillStyle="#FFFFFF",G.fillStyle=T,G.fillRect(0,0,1,1);const te=G.getImageData(0,0,1,1).data;return sa(yu(te[0],te[1],te[2],te[3]))}),sm=T=>{let O=T;return{get:()=>O,set:ye=>{O=ye}}},Qm=(T,O,G)=>te=>{const ye=(T=>{const O=sm(re.none()),G=()=>O.get().each(T);return{clear:()=>{G(),O.set(re.none())},isSet:()=>O.get().isSome(),get:()=>O.get(),set:Zt=>{G(),O.set(re.some(Zt))}}})(T=>T.unbind()),st=(T=>!kc(T))(G),Ct=()=>{const Zt=me(T),Fn=eo=>T.formatter.match(O,{value:G},eo.dom,st);st?(te.setActive(!vn(Zt,Fn)),ye.set(T.formatter.formatChanged(O,eo=>te.setActive(!eo),!0))):(te.setActive(yr(Zt,Fn)),ye.set(T.formatter.formatChanged(O,te.setActive,!1,{value:G})))};return T.initialized?Ct():T.on("init",Ct),ye.clear},Js=T=>yn(T,"menu"),Gg=T=>lt(T,O=>{const G=O.text||O.title||"";return Js(O)?{text:G,items:Gg(O.menu)}:{text:G,value:O.value}}),ni=(T,O,G,te)=>lt(O,ye=>{const st=ye.text||ye.title;return Js(ye)?{type:"nestedmenuitem",text:st,getSubmenuItems:()=>ni(T,ye.menu,G,te)}:{text:st,type:"togglemenuitem",onAction:()=>te(ye.value),onSetup:Qm(T,G,ye.value)}}),yl=(T,O)=>G=>{T.execCommand("mceTableApplyCellStyle",!1,{[O]:G})},Ri=T=>No(T,O=>Js(O)?[{...O,menu:Ri(O.menu)}]:kc(O.value)?[O]:[]),eg=(T,O,G,te)=>ye=>ye(ni(T,O,G,te)),Pn=(T,O,G)=>{const te=lt(O,ye=>({text:ye.title,value:"#"+Ai(ye.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:te.length>0?te:void 0,allowCustomColors:!1},onAction:ye=>{T.execCommand("mceTableApplyCellStyle",!1,{[G]:"remove"===ye.value?"":ye.value})}}]},rm=T=>()=>{const G="header"===T.queryCommandValue("mceTableRowType")?"body":"header";T.execCommand("mceTableRowType",!1,{type:G})},ql=T=>()=>{const G="th"===T.queryCommandValue("mceTableColType")?"td":"th";T.execCommand("mceTableColType",!1,{type:G})},qg=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Tt}],am=T=>qg.concat((T=>{const O=Gg($u(T));return O.length>0?re.some({name:"class",type:"listbox",label:"Class",items:O}):re.none()})(T).toArray()),Kl=(T,O)=>{const te=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Gg(el(T)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===O?[{name:"borderwidth",type:"input",label:"Border width"}].concat(te):te}},tg_normal=(T,O)=>{const G=T.dom;return{setAttrib:(Ct,Zt)=>{G.setAttrib(O,Ct,Zt)},setStyle:(Ct,Zt)=>{G.setStyle(O,Ct,Zt)},setFormat:(Ct,Zt)=>{""===Zt?T.formatter.remove(Ct,{value:null},O,!0):T.formatter.apply(Ct,{value:Zt},O)}}},Sd=Fr("th"),tp=(T,O)=>T&&O?"sectionCells":T?"section":"cells",np=T=>{const O=lt(T,ye=>(T=>{const O="thead"===T.section,G=Qi((T=>{const O=jn(T,G=>Sd(G.element));return 0===O.length?re.some("td"):O.length===T.length?re.some("th"):re.none()})(T.cells),"th");return"tfoot"===T.section?{type:"footer"}:O||G?{type:"header",subType:tp(O,G)}:{type:"body"}})(ye).type),G=bt(O,"header"),te=bt(O,"footer");if(!G&&!te)return re.some("body");{const ye=bt(O,"body");return!G||ye||te?G||ye||!te?re.none():re.some("footer"):re.some("header")}},Cl=(T,O)=>Mr(T.all,G=>mr(G.cells,te=>Es(O,te.element))),j1=(T,O,G)=>{const ye=(T=>{const O=[],G=te=>{O.push(te)};for(let te=0;te<T.length;te++)T[te].each(G);return O})(lt(O.selection,st=>((T,O)=>((T,O,G=mo)=>G(O)?re.none():bt(T,rt(O))?re.some(O):ps(O,T.join(","),ye=>Kn(ye,"table")||G(ye)))(["td","th"],T,O))(st).bind(Ct=>Cl(T,Ct)).filter(G)));return((T,O)=>T?re.some(O):re.none())(ye.length>0,ye)},sp=(T,O)=>j1(T,O,Vo),ap=(T,O)=>yr(O,G=>((T,O)=>Cl(T,O).exists(G=>!G.isLocked))(T,G)),q1=(T,O)=>((T,O)=>O.mergable)(0,O).filter(G=>ap(T,G.cells)),gi=(T,O)=>((T,O)=>O.unmergable)(0,O).filter(G=>ap(T,G));(T=>{if(!bn(T))throw new Error("cases must be an array");if(0===T.length)throw new Error("there must be at least one case");const O=[],G={};ln(T,(te,ye)=>{const st=gt(te);if(1!==st.length)throw new Error("one and only one name per case");const Ct=st[0],Zt=te[Ct];if(void 0!==G[Ct])throw new Error("duplicate key detected:"+Ct);if("cata"===Ct)throw new Error("cannot have a case named cata (sorry)");if(!bn(Zt))throw new Error("case arguments must be an array");O.push(Ct),G[Ct]=(...Fn)=>{const eo=Fn.length;if(eo!==Zt.length)throw new Error("Wrong number of arguments to case "+Ct+". Expected "+Zt.length+" ("+Zt+"), got "+eo);return{fold:(...Qo)=>{if(Qo.length!==T.length)throw new Error("Wrong number of arguments to fold. Expected "+T.length+", got "+Qo.length);return Qo[ye].apply(null,Fn)},match:Qo=>{const hr=gt(Qo);if(O.length!==hr.length)throw new Error("Wrong number of arguments to match. Expected: "+O.join(",")+"\nActual: "+hr.join(","));if(!yr(O,$i=>bt(hr,$i)))throw new Error("Not all branches were specified when using match. Specified: "+hr.join(", ")+"\nRequired: "+O.join(", "));return Qo[Ct].apply(null,Fn)},log:Qo=>{console.log(Qo,{constructors:O,constructor:Ct,params:Fn})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]);const jh=T=>Ic(T,"rgb")?(T=>Br(T).map(sa).map(O=>"#"+O.value).getOr(T))(T):T,cp=T=>{const O=tn.fromDom(T);return{borderwidth:Ve(O,"border-width").getOr(""),borderstyle:Ve(O,"border-style").getOr(""),bordercolor:Ve(O,"border-color").map(jh).getOr(""),backgroundcolor:Ve(O,"background-color").map(jh).getOr("")}},Uu=T=>{const O=T[0],G=T.slice(1);return ln(G,te=>{ln(gt(O),ye=>{ko(te,(st,Ct)=>{const Zt=O[ye];""!==Zt&&ye===Ct&&Zt!==st&&(O[ye]="")})})}),O},hi=(T,O,G,te)=>mr(T,ye=>!qo(G.formatter.matchNode(te,O+ye))).getOr(""),ng=ve(hi,["left","center","right"],"align"),Gh=ve(hi,["top","middle","bottom"],"valign"),Td=T=>It(tn.fromDom(T)).map(O=>((T,O)=>{const G=Sr_fromTable(T);return sp(G,O).bind(ye=>{const st=ye[ye.length-1],Fn=G.all.slice(ye[0].row,st.row+st.rowspan);return np(Fn)}).getOr("")})(O,{selection:Wg(T.cells)})).getOr(""),qh=(T,O)=>{const G=Sr_fromTable(T),te=(T=>No(T.all,O=>O.cells))(G),ye=jn(te,st=>vn(O,Ct=>Es(st.element,Ct)));return lt(ye,st=>({element:st.element.dom,column:Sr_getColumnAt(G,st.column).map(Ct=>Ct.element.dom)}))},Ar=(T,O,G,te)=>{const ye=te.getData();te.close(),T.undoManager.transact(()=>{((T,O,G,te)=>{const ye=dr(te,(st,Ct)=>G[Ct]!==st);B(ye)>0&&O.length>=1&&It(O[0]).each(st=>{const Ct=qh(st,O),Zt=B(dr(ye,(eo,Lr)=>"scope"!==Lr&&"celltype"!==Lr))>0,Fn=oo(ye,"celltype");(Zt||oo(ye,"scope"))&&((T,O,G,te)=>{const ye=1===O.length;ln(O,st=>{const Ct=st.element,Zt=ye?Vo:te,Fn=tg_normal(T,Ct);((T,O,G,te)=>{te("scope")&&T.setAttrib("scope",G.scope),te("class")&&T.setAttrib("class",G.class),te("height")&&T.setStyle("height",Mn(G.height)),te("width")&&O.setStyle("width",Mn(G.width))})(Fn,st.column.map(Lr=>tg_normal(T,Lr)).getOr(Fn),G,Zt),fu(T)&&((T,O,G)=>{G("backgroundcolor")&&T.setFormat("tablecellbackgroundcolor",O.backgroundcolor),G("bordercolor")&&T.setFormat("tablecellbordercolor",O.bordercolor),G("borderstyle")&&T.setFormat("tablecellborderstyle",O.borderstyle),G("borderwidth")&&T.setFormat("tablecellborderwidth",Mn(O.borderwidth))})(Fn,G,Zt),te("halign")&&_c(T,Ct,G.halign),te("valign")&&((T,O,G)=>{Ts.each("top middle bottom".split(" "),te=>{te!==G&&T.formatter.remove("valign"+te,{},O)}),G&&T.formatter.apply("valign"+G,{},O)})(T,Ct,G.valign)})})(T,Ct,te,ve(oo,ye)),Fn&&((T,O)=>{T.execCommand("mceTableCellType",!1,{type:O.celltype,no_events:!0})})(T,te),Ti(T,st.dom,{structure:Fn,style:Zt})})})(T,O,G,ye),T.focus()})},oi=T=>{const O=me(T);if(0===O.length)return;const G=((T,O)=>{const G=It(O[0]).map(te=>lt(qh(te,O),ye=>((T,O,G,te)=>{const ye=T.dom,Ct=(Zt,Fn)=>ye.getStyle(Zt,Fn)||ye.getAttrib(Zt,Fn);return{width:Ct(te.getOr(O),"width"),height:Ct(O,"height"),scope:ye.getAttrib(O,"scope"),celltype:Ft(O),class:ye.getAttrib(O,"class",""),halign:ng(T,O),valign:Gh(T,O),...G?cp(O):{}}})(T,ye.element,fu(T),ye.column)));return Uu(G.getOrDie())})(T,O),te={type:"tabpanel",tabs:[{title:"General",name:"general",items:am(T)},Kl(T,"cell")]},ye={type:"panel",items:[{type:"grid",columns:2,items:am(T)}]};T.windowManager.open({title:"Cell Properties",size:"normal",body:fu(T)?te:ye,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:G,onSubmit:ve(Ar,T,O,G)})},Qa=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Xh=T=>Qa.concat((T=>{const O=Gg(Qd(T));return O.length>0?re.some({name:"class",type:"listbox",label:"Class",items:O}):re.none()})(T).toArray()),up=(T,O,G,te)=>{const ye=te.getData();te.close(),T.undoManager.transact(()=>{((T,O,G,te)=>{const ye=dr(te,(st,Ct)=>G[Ct]!==st);if(B(ye)>0){const st=oo(ye,"type"),Ct=!st||B(ye)>1;Ct&&((T,O,G,te)=>{const st=1===O.length?Vo:te;ln(O,Ct=>{const Zt=tg_normal(T,Ct);((T,O,G)=>{G("class")&&T.setAttrib("class",O.class),G("height")&&T.setStyle("height",Mn(O.height))})(Zt,G,st),Ul(T)&&((T,O,G)=>{G("backgroundcolor")&&T.setStyle("background-color",O.backgroundcolor),G("bordercolor")&&T.setStyle("border-color",O.bordercolor),G("borderstyle")&&T.setStyle("border-style",O.borderstyle)})(Zt,G,st),te("align")&&_c(T,Ct,G.align)})})(T,O,te,ve(oo,ye)),st&&((T,O)=>{T.execCommand("mceTableRowType",!1,{type:O.type,no_events:!0})})(T,te),It(tn.fromDom(O[0])).each(Zt=>Ti(T,Zt.dom,{structure:st,style:Ct}))}})(T,O,G,ye),T.focus()})},ra=T=>{const O=((T,O)=>{const G=K(T),te=G.bind(ye=>It(ye)).map(ye=>go(ye));return Cr(G,te,(ye,st)=>jn(st,Ct=>vn(Wg(Ct.dom.cells),Zt=>"1"===ga(Zt,O)||Es(Zt,ye)))).getOr([])})(ao(T),sl.selected);if(0===O.length)return;const G=lt(O,Ct=>((T,O,G)=>{const te=T.dom;return{height:te.getStyle(O,"height")||te.getAttrib(O,"height"),class:te.getAttrib(O,"class",""),type:Td(O),align:ng(T,O),...G?cp(O):{}}})(T,Ct.dom,Ul(T))),te=Uu(G),ye={type:"tabpanel",tabs:[{title:"General",name:"general",items:Xh(T)},Kl(T,"row")]},st={type:"panel",items:[{type:"grid",columns:2,items:Xh(T)}]};T.windowManager.open({title:"Row Properties",size:"normal",body:Ul(T)?ye:st,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:te,onSubmit:ve(up,T,lt(O,Ct=>Ct.dom),te)})},xl=(T,O,G)=>{const te=G?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],st=vl(T)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Zt=O.length>0?[{type:"listbox",name:"class",label:"Class",items:O}]:[];return te.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(st).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(Zt)},Qg=(T,O,G,te)=>{if("TD"===O.tagName||"TH"===O.tagName)As(G)&&ys(te)?T.setStyle(O,G,te):T.setStyles(O,G);else if(O.children)for(let ye=0;ye<O.children.length;ye++)Qg(T,O.children[ye],G,te)},hv=(T,O,G,te)=>{const ye=T.dom,st=te.getData(),Ct=dr(st,(Zt,Fn)=>G[Fn]!==Zt);te.close(),""===st.class&&delete st.class,T.undoManager.transact(()=>{if(!O){const Zt=Ds(st.cols).getOr(1),Fn=Ds(st.rows).getOr(1);T.execCommand("mceInsertTable",!1,{rows:Fn,columns:Zt}),O=K(ao(T),sn(T)).bind(eo=>It(eo,sn(T))).map(eo=>eo.dom).getOrDie()}if(B(Ct)>0){const Zt={border:oo(Ct,"border"),bordercolor:oo(Ct,"bordercolor"),cellpadding:oo(Ct,"cellpadding")};((T,O,G,te)=>{const ye=T.dom,st={},Ct={},Zt=ui(T),Fn=Ba(T);if(qo(G.class)||(st.class=G.class),Ct.height=Mn(G.height),Zt?Ct.width=Mn(G.width):ye.getAttrib(O,"width")&&(st.width=(T=>T?T.replace(/px$/,""):"")(G.width)),Zt?(Ct["border-width"]=Mn(G.border),Ct["border-spacing"]=Mn(G.cellspacing)):(st.border=G.border,st.cellpadding=G.cellpadding,st.cellspacing=G.cellspacing),Zt&&O.children){const eo={};if(te.border&&(eo["border-width"]=Mn(G.border)),te.cellpadding&&(eo.padding=Mn(G.cellpadding)),Fn&&te.bordercolor&&(eo["border-color"]=G.bordercolor),!(T=>{for(const O in T)if(Is.call(T,O))return!1;return!0})(eo))for(let Lr=0;Lr<O.children.length;Lr++)Qg(ye,O.children[Lr],eo)}if(Fn){const eo=G;Ct["background-color"]=eo.backgroundcolor,Ct["border-color"]=eo.bordercolor,Ct["border-style"]=eo.borderstyle}ye.setStyles(O,{...Ya(T),...Ct}),ye.setAttribs(O,{...nl(T),...st})})(T,O,st,Zt);const Fn=ye.select("caption",O)[0];(Fn&&!st.caption||!Fn&&st.caption)&&T.execCommand("mceTableToggleCaption"),_c(T,O,st.align)}if(T.focus(),T.addVisual(),B(Ct)>0){const Zt=oo(Ct,"caption"),Fn=!Zt||B(Ct)>1;Ti(T,O,{structure:Zt,style:Fn})}})},Wu=(T,O)=>{const G=T.dom;let te,ye=((T,O)=>{const G=Ya(T),te=nl(T),Zt=O?{borderstyle:An(G,"border-style").getOr(""),bordercolor:jh(An(G,"border-color").getOr("")),backgroundcolor:jh(An(G,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...G,...te,...Zt,...(()=>{const Lr=G["border-width"];return ui(T)&&Lr?{border:Lr}:An(te,"border").fold(()=>({}),Qo=>({border:Qo}))})(),...{...An(G,"border-spacing").or(An(te,"cellspacing")).fold(()=>({}),hr=>({cellspacing:hr})),...An(G,"border-padding").or(An(te,"cellpadding")).fold(()=>({}),hr=>({cellpadding:hr}))}}})(T,Ba(T));O?(ye.cols="1",ye.rows="1",Ba(T)&&(ye.borderstyle="",ye.bordercolor="",ye.backgroundcolor="")):(te=G.getParent(T.selection.getStart(),"table",T.getBody()),te?ye=((T,O,G)=>{const ye=T.dom,st=ui(T)?ye.getStyle(O,"border-spacing")||ye.getAttrib(O,"cellspacing"):ye.getAttrib(O,"cellspacing")||ye.getStyle(O,"border-spacing"),Ct=ui(T)?$r(ye,O,"padding")||ye.getAttrib(O,"cellpadding"):ye.getAttrib(O,"cellpadding")||$r(ye,O,"padding");return{width:ye.getStyle(O,"width")||ye.getAttrib(O,"width"),height:ye.getStyle(O,"height")||ye.getAttrib(O,"height"),cellspacing:st??"",cellpadding:Ct??"",border:((Zt,Fn)=>{const eo=Ve(tn.fromDom(Fn),"border-width");return ui(T)&&eo.isSome()?eo.getOr(""):Zt.getAttrib(Fn,"border")||$r(T.dom,Fn,"border-width")||$r(T.dom,Fn,"border")||""})(ye,O),caption:!!ye.select("caption",O)[0],class:ye.getAttrib(O,"class",""),align:ng(T,O),...G?cp(O):{}}})(T,te,Ba(T)):Ba(T)&&(ye.borderstyle="",ye.bordercolor="",ye.backgroundcolor=""));const st=Gg(Iu(T));st.length>0&&ye.class&&(ye.class=ye.class.replace(/\s*mce\-item\-table\s*/g,""));const Ct={type:"grid",columns:2,items:xl(T,st,O)},eo=Ba(T)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[Ct]},Kl(T,"table")]}:{type:"panel",items:[Ct]};T.windowManager.open({title:"Table Properties",size:"normal",body:eo,onSubmit:ve(hv,T,te,ye),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ye})},Ed=T=>{ko({mceTableProps:ve(Wu,T,!1),mceTableRowProps:ve(ra,T),mceTableCellProps:ve(oi,T),mceInsertTableDialog:ve(Wu,T,!0)},(G,te)=>T.addCommand(te,()=>(G=>{(T=>((T,O,G)=>et((ye,st)=>st(ye),Kt,T,O,void 0))(T,Fr("table")).forall(at))(ao(T))&&G()})(G)))},us=Ln,Tl=T=>{const O=(te,ye)=>hc(te,ye).exists(st=>parseInt(st,10)>1);return T.length>0&&yr(T,te=>O(te,"rowspan")||O(te,"colspan"))?re.some(T):re.none()},_d=(T,O,G)=>O.length<=1?re.none():((T,O,G)=>Xm(T,O,G).bind(te=>{const ye=Fn=>Es(T,Fn),st="thead,tfoot,tbody,table",Ct=ps(te.first,st,ye),Zt=ps(te.last,st,ye);return Ct.bind(Fn=>Zt.bind(eo=>Es(Fn,eo)?((T,O,G)=>{const te=Zl(T);return bu(te,O,G)})(te.table,te.first,te.last):re.none()))}))(T,G.firstSelectedSelector,G.lastSelectedSelector).map(te=>({bounds:te,cells:O})),Bi=T=>{const O=sm(re.none()),G=sm([]);let te=re.none();const ye=Fr("caption"),st=Po=>te.forall(ds=>!ds[Po]),Fn=()=>H(ao(T),sn(T)).bind(Po=>(T=>T.bind(Ln))(Cr(It(Po),H((T=>tn.fromDom(T.selection.getEnd()))(T),sn(T)).bind(It),(ds,Oa)=>Es(ds,Oa)?ye(Po)?re.some((T=>({element:T,mergable:re.none(),unmergable:re.none(),selection:[T]}))(Po)):re.some(((T,O,G)=>({element:G,mergable:_d(O,T,sl),unmergable:Tl(T),selection:us(T)}))(me(T),ds,Po)):re.none()))),eo=Po=>It(Po.element).map(Oa=>{const oc=Sr_fromTable(Oa),qu=sp(oc,Po).getOr([]),Ii=ro(qu,(Pa,wu)=>(wu.isLocked&&(Pa.onAny=!0,0===wu.column?Pa.onFirst=!0:wu.column+wu.colspan>=oc.grid.columns&&(Pa.onLast=!0)),Pa),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:q1(oc,Po).isSome(),unmergeable:gi(oc,Po).isSome(),locked:Ii}}),Lr=()=>{O.set((T=>{let G,O=!1;return(...te)=>(O||(O=!0,G=T.apply(null,te)),G)})(Fn)()),te=O.get().bind(eo),ln(G.get(),Le)},Qo=Po=>(Po(),G.set(G.get().concat([Po])),()=>{G.set(jn(G.get(),ds=>ds!==Po))}),hr=(Po,ds)=>Qo(()=>O.get().fold(()=>{Po.setEnabled(!1)},Oa=>{Po.setEnabled(!ds(Oa)&&T.selection.isEditable())})),nc=(Po,ds,Oa)=>Qo(()=>O.get().fold(()=>{Po.setEnabled(!1),Po.setActive(!1)},oc=>{Po.setEnabled(!ds(oc)&&T.selection.isEditable()),Po.setActive(Oa(oc))})),$i=Po=>te.exists(ds=>ds.locked[Po]),_a=(Po,ds)=>Oa=>nc(Oa,oc=>ye(oc.element),()=>T.queryCommandValue(Po)===ds),za=_a("mceTableRowType","header"),lm=_a("mceTableColType","th");return T.on("NodeChange ExecCommand TableSelectorChange",Lr),{onSetupTable:Po=>hr(Po,ds=>!1),onSetupCellOrRow:Po=>hr(Po,ds=>ye(ds.element)),onSetupColumn:Po=>ds=>hr(ds,Oa=>ye(Oa.element)||$i(Po)),onSetupPasteable:Po=>ds=>hr(ds,Oa=>ye(Oa.element)||Po().isNone()),onSetupPasteableColumn:(Po,ds)=>Oa=>hr(Oa,oc=>ye(oc.element)||Po().isNone()||$i(ds)),onSetupMergeable:Po=>hr(Po,ds=>st("mergeable")),onSetupUnmergeable:Po=>hr(Po,ds=>st("unmergeable")),resetTargets:Lr,onSetupTableWithCaption:Po=>nc(Po,mo,ds=>It(ds.element,sn(T)).exists(oc=>((T,O)=>((T,O)=>((T,O)=>mr(T.dom.childNodes,ye=>O(tn.fromDom(ye))).map(tn.fromDom))(T,G=>Kn(G,O)))(T,"caption").isSome())(oc))),onSetupTableRowHeaders:za,onSetupTableColumnHeaders:lm,targets:O.get}};var tc=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const pa=T=>{var O;const G=null!==(O=tc.read())&&void 0!==O?O:[];return Mr(G,te=>re.from(te.getType(T)))},Yl=()=>pa("x-tinymce/dom-table-rows"),Pi=()=>pa("x-tinymce/dom-table-columns"),rl=T=>O=>{const G=()=>{O.setEnabled(T.selection.isEditable())};return T.on("NodeChange",G),G(),()=>{T.off("NodeChange",G)}},ju=T=>O=>{const G=()=>{O.setEnabled(T.selection.isEditable())};return T.on("NodeChange",G),G(),()=>{T.off("NodeChange",G)}};da.add("table",T=>{const O=Bi(T);(T=>{const O=T.options.register;O("table_border_widths",{processor:"object[]",default:ei}),O("table_border_styles",{processor:"object[]",default:Fu}),O("table_cell_advtab",{processor:"boolean",default:!0}),O("table_row_advtab",{processor:"boolean",default:!0}),O("table_advtab",{processor:"boolean",default:!0}),O("table_appearance_options",{processor:"boolean",default:!0}),O("table_grid",{processor:"boolean",default:!jm.deviceType.isTouch()}),O("table_cell_class_list",{processor:"object[]",default:[]}),O("table_row_class_list",{processor:"object[]",default:[]}),O("table_class_list",{processor:"object[]",default:[]}),O("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),O("table_background_color_map",{processor:"object[]",default:[]}),O("table_border_color_map",{processor:"object[]",default:[]})})(T),Ed(T),((T,O)=>{const G=Qo=>()=>T.execCommand(Qo),te=(Qo,hr)=>!!T.queryCommandSupported(hr.command)&&(T.ui.registry.addMenuItem(Qo,{...hr,onAction:zt(hr.onAction)?hr.onAction:G(hr.command)}),!0),ye=(Qo,hr)=>{T.queryCommandSupported(hr.command)&&T.ui.registry.addToggleMenuItem(Qo,{...hr,onAction:zt(hr.onAction)?hr.onAction:G(hr.command)})},st=Qo=>{T.execCommand("mceInsertTable",!1,{rows:Qo.numRows,columns:Qo.numColumns})},Ct=[te("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:O.onSetupCellOrRow}),te("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:O.onSetupCellOrRow}),te("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:O.onSetupCellOrRow}),te("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:O.onSetupCellOrRow}),te("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:O.onSetupCellOrRow}),te("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:O.onSetupCellOrRow}),te("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:O.onSetupPasteable(Yl)}),te("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:O.onSetupPasteable(Yl)})],Zt=[te("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:O.onSetupColumn("onFirst")}),te("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:O.onSetupColumn("onLast")}),te("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:O.onSetupColumn("onAny")}),te("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:O.onSetupColumn("onAny")}),te("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:O.onSetupColumn("onAny")}),te("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:O.onSetupPasteableColumn(Pi,"onFirst")}),te("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:O.onSetupPasteableColumn(Pi,"onLast")})],Fn=[te("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:O.onSetupCellOrRow}),te("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:O.onSetupMergeable}),te("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:O.onSetupUnmergeable})];zc(T)?T.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:st}],onSetup:ju(T)}):T.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:G("mceInsertTableDialog"),onSetup:ju(T)}),T.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:G("mceInsertTableDialog"),onSetup:ju(T)}),te("tableprops",{text:"Table properties",onSetup:O.onSetupTable,command:"mceTableProps"}),te("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:O.onSetupTable,command:"mceTableDelete"}),bt(Ct,!0)&&T.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:_t("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),bt(Zt,!0)&&T.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:_t("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),bt(Fn,!0)&&T.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:_t("tablecellprops tablemergecells tablesplitcells")}),T.ui.registry.addContextMenu("table",{update:()=>(O.resetTargets(),O.targets().fold(_t(""),Qo=>"caption"===rt(Qo.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const eo=Ri(Iu(T));0!==eo.length&&T.queryCommandSupported("mceTableToggleClass")&&T.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>ni(T,eo,"tableclass",Qo=>T.execCommand("mceTableToggleClass",!1,Qo)),onSetup:O.onSetupTable});const Lr=Ri($u(T));0!==Lr.length&&T.queryCommandSupported("mceTableCellToggleClass")&&T.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>ni(T,Lr,"tablecellclass",Qo=>T.execCommand("mceTableCellToggleClass",!1,Qo)),onSetup:O.onSetupCellOrRow}),T.queryCommandSupported("mceTableApplyCellStyle")&&(T.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>ni(T,Tt,"tablecellverticalalign",yl(T,"vertical-align")),onSetup:O.onSetupCellOrRow}),T.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>ni(T,Vc(T),"tablecellborderwidth",yl(T,"border-width")),onSetup:O.onSetupCellOrRow}),T.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>ni(T,el(T),"tablecellborderstyle",yl(T,"border-style")),onSetup:O.onSetupCellOrRow}),T.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Pn(T,Gm(T),"background-color"),onSetup:O.onSetupCellOrRow}),T.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Pn(T,tl(T),"border-color"),onSetup:O.onSetupCellOrRow})),ye("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:O.onSetupTableWithCaption}),ye("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:rm(T),onSetup:O.onSetupTableRowHeaders}),ye("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ql(T),onSetup:O.onSetupTableRowHeaders})})(T,O),((T,O)=>{T.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:rl(T),fetch:Zt=>Zt("inserttable | cell row column | advtablesort | tableprops deletetable")});const G=Zt=>()=>T.execCommand(Zt),te=(Zt,Fn)=>{T.queryCommandSupported(Fn.command)&&T.ui.registry.addButton(Zt,{...Fn,onAction:zt(Fn.onAction)?Fn.onAction:G(Fn.command)})},ye=(Zt,Fn)=>{T.queryCommandSupported(Fn.command)&&T.ui.registry.addToggleButton(Zt,{...Fn,onAction:zt(Fn.onAction)?Fn.onAction:G(Fn.command)})};te("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:O.onSetupTable}),te("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:O.onSetupTable}),te("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:O.onSetupCellOrRow}),te("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:O.onSetupMergeable}),te("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:O.onSetupUnmergeable}),te("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:O.onSetupCellOrRow}),te("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:O.onSetupCellOrRow}),te("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:O.onSetupCellOrRow}),te("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:O.onSetupCellOrRow}),te("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:O.onSetupColumn("onFirst")}),te("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:O.onSetupColumn("onLast")}),te("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:O.onSetupColumn("onAny")}),te("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:O.onSetupCellOrRow}),te("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:O.onSetupCellOrRow}),te("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:O.onSetupPasteable(Yl)}),te("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:O.onSetupPasteable(Yl)}),te("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:O.onSetupColumn("onAny")}),te("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:O.onSetupColumn("onAny")}),te("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:O.onSetupPasteableColumn(Pi,"onFirst")}),te("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:O.onSetupPasteableColumn(Pi,"onLast")}),te("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:rl(T)});const st=Ri(Iu(T));0!==st.length&&T.queryCommandSupported("mceTableToggleClass")&&T.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:eg(T,st,"tableclass",Zt=>T.execCommand("mceTableToggleClass",!1,Zt)),onSetup:O.onSetupTable});const Ct=Ri($u(T));0!==Ct.length&&T.queryCommandSupported("mceTableCellToggleClass")&&T.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:eg(T,Ct,"tablecellclass",Zt=>T.execCommand("mceTableCellToggleClass",!1,Zt)),onSetup:O.onSetupCellOrRow}),T.queryCommandSupported("mceTableApplyCellStyle")&&(T.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:eg(T,Tt,"tablecellverticalalign",yl(T,"vertical-align")),onSetup:O.onSetupCellOrRow}),T.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:eg(T,Vc(T),"tablecellborderwidth",yl(T,"border-width")),onSetup:O.onSetupCellOrRow}),T.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:eg(T,el(T),"tablecellborderstyle",yl(T,"border-style")),onSetup:O.onSetupCellOrRow}),T.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Zt=>Zt(Pn(T,Gm(T),"background-color")),onSetup:O.onSetupCellOrRow}),T.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Zt=>Zt(Pn(T,tl(T),"border-color")),onSetup:O.onSetupCellOrRow})),ye("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:O.onSetupTableWithCaption}),ye("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:rm(T),onSetup:O.onSetupTableRowHeaders}),ye("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ql(T),onSetup:O.onSetupTableColumnHeaders})})(T,O),(T=>{const G=Ei(T);G.length>0&&T.ui.registry.addContextToolbar("table",{predicate:te=>T.dom.is(te,"table")&&T.getBody().contains(te)&&T.dom.isEditable(te.parentNode),items:G,scope:"node",position:"node"})})(T)})}(),function(){"use strict";const da=F=>{let ue=F;return{get:()=>ue,set:Ut=>{ue=Ut}}};var Dr=tinymce.util.Tools.resolve("tinymce.PluginManager");const vr=F=>ue=>(F=>{const ue=typeof F;return null===F?"null":"object"===ue&&Array.isArray(F)?"array":"object"===ue&&((F,ue,Pe)=>{var ot;return!!((Pe,ot)=>ot.isPrototypeOf(Pe))(F,ue.prototype)||(null===(ot=F.constructor)||void 0===ot?void 0:ot.name)===ue.name})(F,String)?"string":ue})(ue)===F,As=F=>ue=>typeof ue===F,bn=F=>ue=>F===ue,qn=vr("string"),qo=vr("array"),Oo=bn(null),ys=As("boolean"),zt=bn(void 0),Ro=F=>!(F=>null==F)(F),Wn=As("function"),_t=As("number"),Ln=()=>{},Le=F=>()=>F;function mo(F,...ue){return(...Pe)=>{const ot=ue.concat(Pe);return F.apply(null,ot)}}const Vo=Le(!1),re=Le(!0);class gt{constructor(ue,Pe){this.tag=ue,this.value=Pe}static some(ue){return new gt(!0,ue)}static none(){return gt.singletonNone}fold(ue,Pe){return this.tag?Pe(this.value):ue()}isSome(){return this.tag}isNone(){return!this.tag}map(ue){return this.tag?gt.some(ue(this.value)):gt.none()}bind(ue){return this.tag?ue(this.value):gt.none()}exists(ue){return this.tag&&ue(this.value)}forall(ue){return!this.tag||ue(this.value)}filter(ue){return!this.tag||ue(this.value)?this:gt.none()}getOr(ue){return this.tag?this.value:ue}or(ue){return this.tag?this:ue}getOrThunk(ue){return this.tag?this.value:ue()}orThunk(ue){return this.tag?this:ue()}getOrDie(ue){if(this.tag)return this.value;throw new Error(ue??"Called getOrDie on None")}static from(ue){return Ro(ue)?gt.some(ue):gt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ue){this.tag&&ue(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}gt.singletonNone=new gt(!1);const Is=F=>{const ue=da(gt.none()),Pe=()=>ue.get().each(F);return{clear:()=>{Pe(),ue.set(gt.none())},isSet:()=>ue.get().isSome(),get:()=>ue.get(),set:ta=>{Pe(),ue.set(gt.some(ta))}}},ko=()=>Is(F=>F.unbind()),dr=Array.prototype.push,De=(F,ue)=>{const Pe=F.length,ot=new Array(Pe);for(let Ut=0;Ut<Pe;Ut++)ot[Ut]=ue(F[Ut],Ut);return ot},Ot=(F,ue)=>{for(let Pe=0,ot=F.length;Pe<ot;Pe++)ue(F[Pe],Pe)},B=(F,ue)=>{const Pe=[];for(let ot=0,Ut=F.length;ot<Ut;ot++){const cn=F[ot];ue(cn,ot)&&Pe.push(cn)}return Pe},oo=(F,ue)=>((F,ue,Pe)=>{for(let ot=0,Ut=F.length;ot<Ut;ot++){const cn=F[ot];if(ue(cn,ot))return gt.some(cn);if(Pe(cn,ot))break}return gt.none()})(F,ue,Vo),bt=Object.keys,Be=(F,ue,Pe=0,ot)=>{const Ut=F.indexOf(ue,Pe);return-1!==Ut&&(!!zt(ot)||Ut+ue.length<=ot)},lt=F=>void 0!==F.style&&Wn(F.style.getPropertyValue),jn=F=>{if(null==F)throw new Error("Node cannot be null or undefined");return{dom:F}},ro_fromDom=jn;typeof window<"u"||Function("return this;")();const Ao=F=>ue=>(F=>F.dom.nodeType)(ue)===F,Ls=Ao(1),Qr=Ao(3),zo=Ao(9),Mr=Ao(11),Hs=(F,ue)=>{const Pe=F.dom;if(1!==Pe.nodeType)return!1;{const ot=Pe;if(void 0!==ot.matches)return ot.matches(ue);if(void 0!==ot.msMatchesSelector)return ot.msMatchesSelector(ue);if(void 0!==ot.webkitMatchesSelector)return ot.webkitMatchesSelector(ue);if(void 0!==ot.mozMatchesSelector)return ot.mozMatchesSelector(ue);throw new Error("Browser lacks native selectors")}},$o=F=>ro_fromDom(F.dom.ownerDocument),Sn=F=>De(F.dom.childNodes,ro_fromDom),Kn=Wn(Element.prototype.attachShadow)&&Wn(Node.prototype.getRootNode),Xs=Le(Kn),sr=Kn?F=>ro_fromDom(F.dom.getRootNode()):F=>zo(F)?F:$o(F),jr=F=>{const ue=sr(F);return(F=>Mr(F)&&Ro(F.dom.host))(ue)?gt.some(ue):gt.none()},Es=F=>ro_fromDom(F.dom.host),Qn=F=>{const ue=Qr(F)?F.dom.parentNode:F.dom;if(null==ue||null===ue.ownerDocument)return!1;const Pe=ue.ownerDocument;return jr(ro_fromDom(ue)).fold(()=>Pe.body.contains(ue),((F,ue)=>Pe=>F(ue(Pe)))(Qn,Es))},Vr=(F,ue)=>{const Pe=F.dom.getAttribute(ue);return null===Pe?void 0:Pe},as=(F,ue)=>{F.dom.removeAttribute(ue)},Fr=(F,ue)=>{const Pe=F.dom;((F,ue)=>{const Pe=bt(F);for(let ot=0,Ut=Pe.length;ot<Ut;ot++){const cn=Pe[ot];ue(F[cn],cn)}})(ue,(ot,Ut)=>{((F,ue,Pe)=>{if(!qn(Pe))throw console.error("Invalid call to CSS.set. Property ",ue,":: Value ",Pe,":: Element ",F),new Error("CSS value must be a string: "+Pe);lt(F)&&F.style.setProperty(ue,Pe)})(Pe,Ut,ot)})},qr=F=>{const ue=ro_fromDom((F=>{if(Xs()&&Ro(F.target)){const ue=ro_fromDom(F.target);if(Ls(ue)&&(F=>Ro(F.dom.shadowRoot))(ue)&&F.composed&&F.composedPath){const Pe=F.composedPath();if(Pe)return(F=>((F,ue)=>0<F.length?gt.some(F[0]):gt.none())(F))(Pe)}}return gt.from(F.target)})(F).getOr(F.target)),Pe=()=>F.stopPropagation(),ot=()=>F.preventDefault(),Ut=((F,ue)=>(...Pe)=>F(ue.apply(null,Pe)))(ot,Pe);return((F,ue,Pe,ot,Ut,cn,bs)=>({target:F,x:ue,y:Pe,stop:ot,prevent:Ut,kill:cn,raw:bs}))(ue,F.clientX,F.clientY,Pe,ot,Ut,F)},ts=(F,ue,Pe,ot)=>{F.dom.removeEventListener(ue,Pe,ot)},Rs=re,cs=(F,ue,Pe)=>((F,ue,Pe,ot)=>((F,ue,Pe,ot,Ut)=>{const cn=((F,ue)=>Pe=>{F(Pe)&&ue(qr(Pe))})(Pe,ot);return F.dom.addEventListener(ue,cn,Ut),{unbind:mo(ts,F,ue,cn,Ut)}})(F,ue,Pe,ot,!1))(F,ue,Rs,Pe),et=()=>Kt(0,0),Kt=(F,ue)=>({major:F,minor:ue}),hn={nu:Kt,detect:(F,ue)=>{const Pe=String(ue).toLowerCase();return 0===F.length?et():((F,ue)=>{const Pe=((F,ue)=>{for(let Pe=0;Pe<F.length;Pe++){const ot=F[Pe];if(ot.test(ue))return ot}})(F,ue);if(!Pe)return{major:0,minor:0};const ot=Ut=>Number(ue.replace(Pe,"$"+Ut));return Kt(ot(1),ot(2))})(F,Pe)},unknown:et},ps=(F,ue)=>{const Pe=String(ue).toLowerCase();return oo(F,ot=>ot.search(Pe))},ge=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,he=F=>ue=>Be(ue,F),at=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:F=>Be(F,"edge/")&&Be(F,"chrome")&&Be(F,"safari")&&Be(F,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ge],search:F=>Be(F,"chrome")&&!Be(F,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:F=>Be(F,"msie")||Be(F,"trident")},{name:"Opera",versionRegexes:[ge,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:he("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:he("firefox")},{name:"Safari",versionRegexes:[ge,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:F=>(Be(F,"safari")||Be(F,"mobile/"))&&Be(F,"applewebkit")}],ht=[{name:"Windows",search:he("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:F=>Be(F,"iphone")||Be(F,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:he("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:he("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:he("linux"),versionRegexes:[]},{name:"Solaris",search:he("sunos"),versionRegexes:[]},{name:"FreeBSD",search:he("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:he("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ft={browsers:Le(at),oses:Le(ht)},sn="Chromium",ao="Firefox",gc=F=>{const ue=F.current,ot=Ut=>()=>ue===Ut;return{current:ue,version:F.version,isEdge:ot("Edge"),isChromium:ot(sn),isIE:ot("IE"),isOpera:ot("Opera"),isFirefox:ot(ao),isSafari:ot("Safari")}},Ta_unknown=()=>gc({current:void 0,version:hn.unknown()}),Ta_nu=gc,Ka=(Le("Edge"),Le(sn),Le("IE"),Le("Opera"),Le(ao),Le("Safari"),"Windows"),Wo="Android",ga="Solaris",hc="FreeBSD",is="ChromeOS",Qi=F=>{const ue=F.current,ot=Ut=>()=>ue===Ut;return{current:ue,version:F.version,isWindows:ot(Ka),isiOS:ot("iOS"),isAndroid:ot(Wo),isMacOS:ot("macOS"),isLinux:ot("Linux"),isSolaris:ot(ga),isFreeBSD:ot(hc),isChromeOS:ot(is)}},Jo_unknown=()=>Qi({current:void 0,version:hn.unknown()}),Jo_nu=Qi,cr_detect=(Le(Ka),Le("iOS"),Le(Wo),Le("Linux"),Le("macOS"),Le(ga),Le(hc),Le(is),(F,ue,Pe)=>{const ot=Ft.browsers(),Ut=Ft.oses(),cn=ue.bind(po=>((F,ue)=>((F,ue)=>{for(let Pe=0;Pe<F.length;Pe++){const ot=ue(F[Pe]);if(ot.isSome())return ot}return gt.none()})(ue.brands,Pe=>{const ot=Pe.brand.toLowerCase();return oo(F,Ut=>{var cn;return ot===(null===(cn=Ut.brand)||void 0===cn?void 0:cn.toLowerCase())}).map(Ut=>({current:Ut.name,version:hn.nu(parseInt(Pe.version,10),0)}))}))(ot,po)).orThunk(()=>((F,ue)=>ps(F,ue).map(Pe=>{const ot=hn.detect(Pe.versionRegexes,ue);return{current:Pe.name,version:ot}}))(ot,F)).fold(Ta_unknown,Ta_nu),bs=((F,ue)=>ps(F,ue).map(Pe=>{const ot=hn.detect(Pe.versionRegexes,ue);return{current:Pe.name,version:ot}}))(Ut,F).fold(Jo_unknown,Jo_nu),ta=((F,ue,Pe,ot)=>{const Ut=F.isiOS()&&!0===/ipad/i.test(Pe),cn=F.isiOS()&&!Ut,bs=F.isiOS()||F.isAndroid(),ta=bs||ot("(pointer:coarse)"),po=Ut||!cn&&bs&&ot("(min-device-width:768px)"),Sr=cn||bs&&!po,Ts=ue.isSafari()&&F.isiOS()&&!1===/safari/i.test(Pe),$r=!Sr&&!po&&!Ts;return{isiPad:Le(Ut),isiPhone:Le(cn),isTablet:Le(po),isPhone:Le(Sr),isTouch:Le(ta),isAndroid:F.isAndroid,isiOS:F.isiOS,isWebView:Le(Ts),isDesktop:Le($r)}})(bs,cn,F,Pe);return{browser:cn,os:bs,deviceType:ta}}),Us=F=>window.matchMedia(F).matches;let xi=(F=>{let Pe,ue=!1;return(...ot)=>(ue||(ue=!0,Pe=F.apply(null,ot)),Pe)})(()=>cr_detect(navigator.userAgent,gt.from(navigator.userAgentData),Us));const Kr=(F,ue)=>({left:F,top:ue,translate:(ot,Ut)=>Kr(F+ot,ue+Ut)}),Ic=Kr,wt=F=>{const ue=void 0===F?window:F;return xi().browser.isFirefox()?gt.none():gt.from(ue.visualViewport)},kc=(F,ue,Pe,ot)=>({x:F,y:ue,width:Pe,height:ot,right:F+Pe,bottom:ue+ot}),Qc=F=>{const ue=void 0===F?window:F,ot=(F=>{const ue=void 0!==F?F.dom:document;return Ic(ue.body.scrollLeft||ue.documentElement.scrollLeft,ue.body.scrollTop||ue.documentElement.scrollTop)})(ro_fromDom(ue.document));return wt(ue).fold(()=>{const Ut=ue.document.documentElement;return kc(ot.left,ot.top,Ut.clientWidth,Ut.clientHeight)},Ut=>kc(Math.max(Ut.pageLeft,ot.left),Math.max(Ut.pageTop,ot.top),Ut.width,Ut.height))},Ds=(F,ue,Pe)=>wt(Pe).map(ot=>{const Ut=cn=>ue(qr(cn));return ot.addEventListener(F,Ut),{unbind:()=>ot.removeEventListener(F,Ut)}}).getOrThunk(()=>({unbind:Ln}));var Ia=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Si=tinymce.util.Tools.resolve("tinymce.Env");const Ec=(F,ue)=>{F.dispatch("FullscreenStateChanged",{state:ue}),F.dispatch("ResizeEditor")},ce=("fullscreen_native",ue=>ue.options.get("fullscreen_native")),xr=F=>F.dom===(F=>void 0!==F.fullscreenElement?F.fullscreenElement:void 0!==F.msFullscreenElement?F.msFullscreenElement:void 0!==F.webkitFullscreenElement?F.webkitFullscreenElement:null)($o(F).dom),Lc=(F,ue)=>((F,ue)=>B((F=>(F=>gt.from(F.dom.parentNode).map(ro_fromDom))(F).map(Sn).map(Pe=>B(Pe,ot=>!((F,ue)=>F.dom===ue.dom)(F,ot))).getOr([]))(F),ue))(F,Pe=>Hs(Pe,ue)),zr="data-ephox-mobile-fullscreen-style",pl="position:absolute!important;",Bo="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ne=Si.os.isAndroid(),ae=F=>{const ue=((F,ue)=>{const Pe=F.dom,Ut=window.getComputedStyle(Pe).getPropertyValue(ue);return""!==Ut||Qn(F)?Ut:((F,ue)=>lt(F)?F.style.getPropertyValue(ue):"")(Pe,ue)})(F,"background-color");return void 0!==ue&&""!==ue?"background-color:"+ue+"!important":"background-color:rgb(255,255,255)!important;"},Ze=(F,ue,Pe)=>{const Ut=Sr=>Ts=>{const $r=Vr(Ts,"style"),_c=void 0===$r?"no-styles":$r.trim();_c!==Sr&&(((F,ue,Pe)=>{((F,ue,Pe)=>{if(!(qn(Pe)||ys(Pe)||_t(Pe)))throw console.error("Invalid call to Attribute.set. Key ",ue,":: Value ",Pe,":: Element ",F),new Error("Attribute value was not simple");F.setAttribute(ue,Pe+"")})(F.dom,ue,Pe)})(Ts,zr,_c),Fr(Ts,F.parseStyle(Sr)))},cn=((F,ue,Pe)=>((F,ue,Pe)=>B(((F,ue)=>{const Pe=Wn(ue)?ue:Vo;let ot=F.dom;const Ut=[];for(;null!=ot.parentNode;){const cn=ot.parentNode,bs=ro_fromDom(cn);if(Ut.push(bs),!0===Pe(bs))break;ot=cn}return Ut})(F,Pe),ue))(F,ot=>Hs(ot,"*"),void 0))(ue),bs=((F,ue)=>(F=>{const ue=[];for(let Pe=0,ot=F.length;Pe<ot;++Pe){if(!qo(F[Pe]))throw new Error("Arr.flatten item "+Pe+" was not an array, input: "+F);dr.apply(ue,F[Pe])}return ue})(De(F,ue)))(cn,Sr=>Lc(Sr,"*:not(.tox-silver-sink)")),ta=ae(Pe);Ot(bs,Ut("display:none!important;")),Ot(cn,Ut(pl+Bo+ta)),Ut((!0===ne?"":pl)+Bo+ta)(ue)},go=Ia.DOM,ka=wt().fold(()=>({bind:Ln,unbind:Ln}),F=>{const ue=(()=>{const F=Is(Ln);return{...F,on:Pe=>F.get().each(Pe)}})(),Pe=ko(),ot=ko(),bs=((F,ue)=>{let Pe=null;return{cancel:()=>{Oo(Pe)||(clearTimeout(Pe),Pe=null)},throttle:(...cn)=>{Oo(Pe)&&(Pe=setTimeout(()=>{Pe=null,F.apply(null,cn)},50))}}})(()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(()=>{ue.on(Sr=>Fr(Sr,{top:F.offsetTop+"px",left:F.offsetLeft+"px",height:F.height+"px",width:F.width+"px"}))})});return{bind:Sr=>{ue.set(Sr),bs.throttle(),Pe.set(Ds("resize",bs.throttle)),ot.set(Ds("scroll",bs.throttle))},unbind:()=>{ue.on(()=>{Pe.clear(),ot.clear()}),ue.clear()}}}),Ns=(F,ue)=>{const Pe=document.body,ot=document.documentElement,Ut=F.getContainer(),cn=ro_fromDom(Ut),bs=(F=>{const ue=ro_fromDom(F.getElement());return jr(ue).map(Es).getOrThunk(()=>(F=>{const ue=F.dom.body;if(null==ue)throw new Error("Body is not available yet");return ro_fromDom(ue)})($o(ue)))})(F),ta=ue.get(),po=ro_fromDom(F.getBody()),Sr=Si.deviceType.isTouch(),Ts=Ut.style,_c=F.iframeElement?.style,Hc=Fs=>{Fs(Pe,"tox-fullscreen"),Fs(ot,"tox-fullscreen"),Fs(Ut,"tox-fullscreen"),jr(cn).map(fa=>Es(fa).dom).each(fa=>{Fs(fa,"tox-fullscreen"),Fs(fa,"tox-shadowhost")})},Ti=()=>{Sr&&(F=>{const ue=(F=>((F,ue)=>{const Pe=document;return(F=>1!==F.nodeType&&9!==F.nodeType&&11!==F.nodeType||0===F.childElementCount)(Pe)?[]:De(Pe.querySelectorAll(F),ro_fromDom)})(F))("["+zr+"]");Ot(ue,Pe=>{const ot=Vr(Pe,zr);ot&&"no-styles"!==ot?Fr(Pe,F.parseStyle(ot)):as(Pe,"style"),as(Pe,zr)})})(F.dom),Hc(go.removeClass),ka.unbind(),gt.from(ue.get()).each(Fs=>Fs.fullscreenChangeHandler.unbind())};if(ta)ta.fullscreenChangeHandler.unbind(),ce(F)&&xr(bs)&&(F=>{const ue=F.dom;ue.exitFullscreen?ue.exitFullscreen():ue.msExitFullscreen?ue.msExitFullscreen():ue.webkitCancelFullScreen&&ue.webkitCancelFullScreen()})($o(bs)),_c.width=ta.iframeWidth,_c.height=ta.iframeHeight,Ts.width=ta.containerWidth,Ts.height=ta.containerHeight,Ts.top=ta.containerTop,Ts.left=ta.containerLeft,Ti(),(F=>{window.scrollTo(F.x,F.y)})(ta.scrollPos),ue.set(null),Ec(F,!1),F.off("remove",Ti);else{const Fs=cs($o(bs),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",Na=>{ce(F)&&!xr(bs)&&null!==ue.get()&&Ns(F,ue)}),fa={scrollPos:Qc(window),containerWidth:Ts.width,containerHeight:Ts.height,containerTop:Ts.top,containerLeft:Ts.left,iframeWidth:_c.width,iframeHeight:_c.height,fullscreenChangeHandler:Fs};Sr&&Ze(F.dom,cn,po),_c.width=_c.height="100%",Ts.width=Ts.height="",Hc(go.addClass),ka.bind(cn),F.on("remove",Ti),ue.set(fa),ce(F)&&(F=>{const ue=F.dom;ue.requestFullscreen?ue.requestFullscreen():ue.msRequestFullscreen?ue.msRequestFullscreen():ue.webkitRequestFullScreen&&ue.webkitRequestFullScreen()})(bs),Ec(F,!0)}},Ws=(F,ue)=>Pe=>{Pe.setActive(null!==ue.get());const ot=Ut=>Pe.setActive(Ut.state);return F.on("FullscreenStateChanged",ot),()=>F.off("FullscreenStateChanged",ot)};Dr.add("fullscreen",F=>{const ue=da(null);return F.inline||((F=>{(0,F.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(F),((F,ue)=>{F.addCommand("mceFullScreen",()=>{Ns(F,ue)})})(F,ue),((F,ue)=>{const Pe=()=>F.execCommand("mceFullScreen");F.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Pe,onSetup:Ws(F,ue)}),F.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Pe,onSetup:Ws(F,ue)})})(F,ue),F.addShortcut("Meta+Shift+F","","mceFullScreen")),(F=>({isFullscreen:()=>null!==F.get()}))(ue)})}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Dr=(De,Ot,B)=>{De.execCommand("UL"===Ot?"InsertUnorderedList":"InsertOrderedList",!1,!1===B?null:{"list-style-type":B})},Ks=De=>Ot=>Ot.options.get(De),vr=Ks("advlist_number_styles"),As=Ks("advlist_bullet_styles"),bn=De=>null==De,qn=De=>!bn(De);var qo=tinymce.util.Tools.resolve("tinymce.util.Tools");class Oo{constructor(Ot,B){this.tag=Ot,this.value=B}static some(Ot){return new Oo(!0,Ot)}static none(){return Oo.singletonNone}fold(Ot,B){return this.tag?B(this.value):Ot()}isSome(){return this.tag}isNone(){return!this.tag}map(Ot){return this.tag?Oo.some(Ot(this.value)):Oo.none()}bind(Ot){return this.tag?Ot(this.value):Oo.none()}exists(Ot){return this.tag&&Ot(this.value)}forall(Ot){return!this.tag||Ot(this.value)}filter(Ot){return!this.tag||Ot(this.value)?this:Oo.none()}getOr(Ot){return this.tag?this.value:Ot}or(Ot){return this.tag?this:Ot}getOrThunk(Ot){return this.tag?this.value:Ot()}orThunk(Ot){return this.tag?this:Ot()}getOrDie(Ot){if(this.tag)return this.value;throw new Error(Ot??"Called getOrDie on None")}static from(Ot){return qn(Ot)?Oo.some(Ot):Oo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ot){this.tag&&Ot(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Oo.singletonNone=new Oo(!1);const Ro=De=>Ot=>qn(Ot)&&De.test(Ot.nodeName),Wn=Ro(/^(OL|UL|DL)$/),_t=Ro(/^(TH|TD)$/),re=De=>bn(De)||"default"===De?"":De,gt=(De,Ot)=>B=>((De,Ot)=>{const B=De.selection.getNode();return Ot({parents:De.dom.getParents(B),element:B}),De.on("NodeChange",Ot),()=>De.off("NodeChange",Ot)})(De,yn=>((yn,Lt)=>{const U=yn.selection.getStart(!0);B.setActive(((De,Ot,B)=>((De,Ot,B)=>{for(let An=0,oo=De.length;An<oo;An++){const yn=De[An];if(Ot(yn))return Oo.some(yn);if(B(yn,An))break}return Oo.none()})(Ot,An=>Wn(An)&&!(De=>/\btox\-/.test(De.className))(An),_t).exists(An=>An.nodeName===B&&((De,Ot)=>De.dom.isChildOf(Ot,De.getBody()))(De,An)))(yn,Lt,Ot)),B.setEnabled(!((De,Ot)=>{const B=De.dom.getParent(Ot,"ol,ul,dl");return((De,Ot)=>null!==Ot&&!De.dom.isEditable(Ot))(De,B)&&De.selection.isEditable()})(yn,U)&&yn.selection.isEditable())})(De,yn.parents)),qe=(De,Ot,B,An,oo,yn)=>{yn.length>1?((De,Ot,B,An,oo,yn)=>{De.ui.registry.addSplitButton(Ot,{tooltip:B,icon:"OL"===oo?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Lt=>{const U=qo.map(yn,xo=>{const Ys="OL"===oo?"num":"bull",bt="disc"===xo||"decimal"===xo?"default":xo,vn=re(xo),Be=(De=>De.replace(/\-/g," ").replace(/\b\w/g,Ot=>Ot.toUpperCase()))(xo);return{type:"choiceitem",value:vn,icon:"list-"+Ys+"-"+bt,text:Be}});Lt(U)},onAction:()=>De.execCommand(An),onItemAction:(Lt,U)=>{Dr(De,oo,U)},select:Lt=>(De=>{const Ot=De.dom.getParent(De.selection.getNode(),"ol,ul"),B=De.dom.getStyle(Ot,"listStyleType");return Oo.from(B)})(De).map(xo=>Lt===xo).getOr(!1),onSetup:gt(De,oo)})})(De,Ot,B,An,oo,yn):((De,Ot,B,An,oo,yn)=>{De.ui.registry.addToggleButton(Ot,{active:!1,tooltip:B,icon:"OL"===oo?"ordered-list":"unordered-list",onSetup:gt(De,oo),onAction:()=>De.queryCommandState(An)||""===yn?De.execCommand(An):Dr(De,oo,yn)})})(De,Ot,B,An,oo,re(yn[0]))};da.add("advlist",De=>{De.hasPlugin("lists")?((De=>{const Ot=De.options.register;Ot("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Ot("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})})(De),(De=>{qe(De,"numlist","Numbered list","InsertOrderedList","OL",vr(De)),qe(De,"bullist","Bullet list","InsertUnorderedList","UL",As(De))})(De),(De=>{De.addCommand("ApplyUnorderedListStyle",(Ot,B)=>{Dr(De,"UL",B["list-style-type"])}),De.addCommand("ApplyOrderedListStyle",(Ot,B)=>{Dr(De,"OL",B["list-style-type"])})})(De)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}(),function(){"use strict";const da=ge=>{let he=ge;return{get:()=>he,set:Ft=>{he=Ft}}};var Dr=tinymce.util.Tools.resolve("tinymce.PluginManager");const Os=ge=>he=>(ge=>{const he=typeof ge;return null===ge?"null":"object"===he&&Array.isArray(ge)?"array":"object"===he&&((ge,he,at)=>{var ht;return!!((at,ht)=>ht.isPrototypeOf(at))(ge,he.prototype)||(null===(ht=ge.constructor)||void 0===ht?void 0:ht.name)===he.name})(ge,String)?"string":he})(he)===ge,vr=ge=>he=>typeof he===ge,As=Os("string"),bn=Os("array"),qn=vr("boolean"),ys=vr("number"),zt=()=>{},Mo=ge=>()=>ge,Ro=Mo(!0),_t=Mo("[~\u2116|!-*+-\\/:;?@\\[-`{}\xa1\xab\xb7\xbb\xbf;\xb7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]");class Ln{constructor(he,at){this.tag=he,this.value=at}static some(he){return new Ln(!0,he)}static none(){return Ln.singletonNone}fold(he,at){return this.tag?at(this.value):he()}isSome(){return this.tag}isNone(){return!this.tag}map(he){return this.tag?Ln.some(he(this.value)):Ln.none()}bind(he){return this.tag?he(this.value):Ln.none()}exists(he){return this.tag&&he(this.value)}forall(he){return!this.tag||he(this.value)}filter(he){return!this.tag||he(this.value)?this:Ln.none()}getOr(he){return this.tag?this.value:he}or(he){return this.tag?this:he}getOrThunk(he){return this.tag?this.value:he()}orThunk(he){return this.tag?this:he()}getOrDie(he){if(this.tag)return this.value;throw new Error(he??"Called getOrDie on None")}static from(he){return null==he?Ln.none():Ln.some(he)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(he){this.tag&&he(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ln.singletonNone=new Ln(!1);const en=_t;var ve=tinymce.util.Tools.resolve("tinymce.Env"),Le=tinymce.util.Tools.resolve("tinymce.util.Tools");const mo=Array.prototype.slice,Vo=Array.prototype.push,re=(ge,he)=>{const at=ge.length,ht=new Array(at);for(let Ft=0;Ft<at;Ft++)ht[Ft]=he(ge[Ft],Ft);return ht},gt=(ge,he)=>{for(let at=0,ht=ge.length;at<ht;at++)he(ge[at],at)},Is=(ge,he)=>{for(let at=ge.length-1;at>=0;at--)he(ge[at],at)},dr=(ge,he)=>(ge=>{const he=[];for(let at=0,ht=ge.length;at<ht;++at){if(!bn(ge[at]))throw new Error("Arr.flatten item "+at+" was not an array, input: "+ge);Vo.apply(he,ge[at])}return he})(re(ge,he)),Ot=Object.hasOwnProperty,B=(ge,he)=>Ot.call(ge,he);typeof window<"u"||Function("return this;")();const Je=ge=>{if(null==ge)throw new Error("Node cannot be null or undefined");return{dom:ge}},jn_fromDom=Je,En=(ge,he)=>({element:ge,offset:he}),Ls=(ge,he)=>{((ge,he)=>{(ge=>Ln.from(ge.dom.parentNode).map(jn_fromDom))(ge).each(ht=>{ht.dom.insertBefore(he.dom,ge.dom)})})(ge,he),((ge,he)=>{ge.dom.appendChild(he.dom)})(he,ge)},zo=((ge,he)=>{const ht=gn=>ge(gn)?Ln.from(gn.dom.nodeValue):Ln.none();return{get:gn=>{if(!ge(gn))throw new Error("Can only get text value of a text node");return ht(gn).getOr("")},getOption:ht,set:(gn,sn)=>{if(!ge(gn))throw new Error("Can only set raw text value of a text node");gn.dom.nodeValue=sn}}})(he=>3===he.dom.nodeType),Mr=ge=>zo.get(ge);var wr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const $o=(ge,he)=>ge.isBlock(he)||B(ge.schema.getVoidElements(),he.nodeName),Xo=(ge,he)=>"false"===ge.getContentEditable(he),Ye=(ge,he)=>!ge.isBlock(he)&&B(ge.schema.getWhitespaceElements(),he.nodeName),Sn=ge=>3===ge.nodeType,Kn=(ge,he)=>((ge,he)=>{const at=(ge=>re(ge.dom.childNodes,jn_fromDom))(ge);return at.length>0&&he<at.length?En(at[he],0):En(ge,he)})(jn_fromDom(ge),he),Xs=(ge,he,at,ht,Ft,gn=!0)=>{let sn=gn?he(!1):at;for(;sn;){const rn=Xo(ge,sn);if(rn||Ye(ge,sn)){if(rn?ht.cef(sn):ht.boundary(sn))break;sn=he(!0)}else{if($o(ge,sn)){if(ht.boundary(sn))break}else Sn(sn)&&ht.text(sn);if(sn===Ft)break;sn=he(!1)}}},sr=(ge,he,at,ht,Ft)=>{var gn;if(((ge,he)=>$o(ge,he)||Xo(ge,he)||Ye(ge,he)||((ge,he)=>"true"===ge.getContentEditable(he)&&he.parentNode&&"false"===ge.getContentEditableParent(he.parentNode))(ge,he))(ge,at))return;const sn=null!==(gn=ge.getParent(ht,ge.isBlock))&&void 0!==gn?gn:ge.getRoot(),rn=new wr(at,sn),Mn=Ft?rn.next.bind(rn):rn.prev.bind(rn);Xs(ge,Mn,at,{boundary:Ro,cef:Ro,text:ao=>{Ft?he.fOffset+=ao.length:he.sOffset+=ao.length,he.elements.push(jn_fromDom(ao))}})},jr=(ge,he,at,ht,Ft,gn=!0)=>{const sn=new wr(at,he),rn=[];let Mn={sOffset:0,fOffset:0,elements:[]};sr(ge,Mn,at,he,!1);const ao=()=>(Mn.elements.length>0&&(rn.push(Mn),Mn={sOffset:0,fOffset:0,elements:[]}),!1);return Xs(ge,sn.next.bind(sn),at,{boundary:ao,cef:To=>(ao(),Ft&&rn.push(...Ft.cef(To)),!1),text:To=>{Mn.elements.push(jn_fromDom(To)),Ft&&Ft.text(To,Mn)}},ht,gn),ht&&sr(ge,Mn,ht,he,!0),ao(),rn},Es=(ge,he)=>{const at=Kn(he.startContainer,he.startOffset),ht=at.element.dom,Ft=Kn(he.endContainer,he.endOffset),gn=Ft.element.dom;return jr(ge,he.commonAncestorContainer,ht,gn,{text:(sn,rn)=>{sn===gn?rn.fOffset+=sn.length-Ft.offset:sn===ht&&(rn.sOffset+=at.offset)},cef:sn=>((ge,he)=>{const at=mo.call(ge,0);return at.sort((Mn,ao)=>((ge,he)=>((ge,he,at)=>0!=(ge.compareDocumentPosition(he)&at))(ge,he,Node.DOCUMENT_POSITION_PRECEDING))(Mn.elements[0].dom,ao.elements[0].dom)?1:-1),at})(dr(((ge,he)=>((ge,he)=>{const at=void 0===he?document:he.dom;return(ge=>1!==ge.nodeType&&9!==ge.nodeType&&11!==ge.nodeType||0===ge.childElementCount)(at)?[]:re(at.querySelectorAll(ge),jn_fromDom)})(he,ge))(jn_fromDom(sn),"*[contenteditable=true]"),Mn=>{const ao=Mn.dom;return jr(ge,ao,ao)}))},!1)},Uo=(ge,he)=>he.collapsed?[]:Es(ge,he),rt=(ge,he)=>{const at=ge.createRng();return at.selectNode(he),Uo(ge,at)},Gr=(ge,he)=>dr(he,at=>{const ht=at.elements,Ft=re(ht,Mr).join(""),gn=((ge,he,at=0,ht=ge.length)=>{const Ft=he.regex;Ft.lastIndex=at;const gn=[];let sn;for(;sn=Ft.exec(ge);){const rn=sn[he.matchIndex],Mn=sn.index+sn[0].indexOf(rn),ao=Mn+rn.length;if(ao>ht)break;gn.push({start:Mn,finish:ao}),Ft.lastIndex=ao}return gn})(Ft,ge,at.sOffset,Ft.length-at.fOffset);return((ge,he)=>{const at=((ge,he,at)=>(gt(ge,(ht,Ft)=>{at=he(at,ht)}),at))(ge,(ht,Ft)=>{const gn=Mr(Ft),sn=ht.last,rn=sn+gn.length,Mn=dr(he,(ao,To)=>ao.start<rn&&ao.finish>sn?[{element:Ft,start:Math.max(sn,ao.start)-sn,finish:Math.min(rn,ao.finish)-sn,matchId:To}]:[]);return{results:ht.results.concat(Mn),last:rn}},{results:[],last:0}).results;return((ge,he)=>{if(0===ge.length)return[];{let at=he(ge[0]);const ht=[];let Ft=[];for(let gn=0,sn=ge.length;gn<sn;gn++){const rn=ge[gn],Mn=he(rn);Mn!==at&&(ht.push(Ft),Ft=[]),at=Mn,Ft.push(rn)}return 0!==Ft.length&&ht.push(Ft),ht}})(at,ht=>ht.matchId)})(ht,gn)}),Vr=(ge,he)=>{Is(ge,(at,ht)=>{Is(at,Ft=>{const gn=jn_fromDom(he.cloneNode(!1));((ge,he,at)=>{((ge,he,at)=>{if(!(As(at)||qn(at)||ys(at)))throw console.error("Invalid call to Attribute.set. Key ",he,":: Value ",at,":: Element ",ge),new Error("Attribute value was not simple");ge.setAttribute(he,at+"")})(ge.dom,he,at)})(gn,"data-mce-index",ht);const sn=Ft.element.dom;if(sn.length===Ft.finish&&0===Ft.start)Ls(Ft.element,gn);else{sn.length!==Ft.finish&&sn.splitText(Ft.finish);const rn=sn.splitText(Ft.start);Ls(jn_fromDom(rn),gn)}})})},Fr=ge=>ge.getAttribute("data-mce-index"),qa=(ge,he,at,ht)=>{const Ft=ge.dom.create("span",{"data-mce-bogus":1});Ft.className="mce-match-marker";const gn=ge.getBody();return Ss(ge,he,!1),ht?((ge,he,at,ht)=>{const Ft=at.getBookmark(),gn=ge.select("td[data-mce-selected],th[data-mce-selected]"),sn=gn.length>0?((ge,he)=>dr(he,at=>rt(ge,at)))(ge,gn):Uo(ge,at.getRng()),rn=Gr(he,sn);return Vr(rn,ht),at.moveToBookmark(Ft),rn.length})(ge.dom,at,ge.selection,Ft):((ge,he,at,ht)=>{const Ft=rt(ge,at),gn=Gr(he,Ft);return Vr(gn,ht),gn.length})(ge.dom,at,gn,Ft)},rr=ge=>{var he;ge.firstChild&&ge.parentNode.insertBefore(ge.firstChild,ge),null===(he=ge.parentNode)||void 0===he||he.removeChild(ge)},zs=(ge,he)=>{const at=[],ht=Le.toArray(ge.getBody().getElementsByTagName("span"));if(ht.length)for(let Ft=0;Ft<ht.length;Ft++){const gn=Fr(ht[Ft]);null===gn||!gn.length||gn===he.toString()&&at.push(ht[Ft])}return at},qr=(ge,he,at)=>{const ht=he.get();let Ft=ht.index;const gn=ge.dom;at?Ft+1===ht.count?Ft=0:Ft++:Ft-1==-1?Ft=ht.count-1:Ft--,gn.removeClass(zs(ge,ht.index),"mce-match-marker-selected");const sn=zs(ge,Ft);return sn.length?(gn.addClass(zs(ge,Ft),"mce-match-marker-selected"),ge.selection.scrollIntoView(sn[0]),Ft):-1},Da=(ge,he)=>{const at=he.parentNode;ge.remove(he),at&&ge.isEmpty(at)&&ge.remove(at)},ar=(ge,he,at,ht,Ft,gn)=>{const sn=ge.selection,rn=((ge,he)=>{const ht="("+ge.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return he?`(?:^|\\s|${en()})`+ht+`(?=$|\\s|${en()})`:ht})(at,Ft),Mn=sn.isForward(),ao={regex:new RegExp(rn,ht?"g":"gi"),matchIndex:1},To=qa(ge,he,ao,gn);if(ve.browser.isSafari()&&sn.setRng(sn.getRng(),Mn),To){const ws=qr(ge,he,!0);he.set({index:ws,count:To,text:at,matchCase:ht,wholeWord:Ft,inSelection:gn})}return To},ts=(ge,he)=>{const at=qr(ge,he,!0);he.set({...he.get(),index:at})},Rs=(ge,he)=>{const at=qr(ge,he,!1);he.set({...he.get(),index:at})},cs=ge=>{const he=Fr(ge);return null!==he&&he.length>0},ms=(ge,he,at,ht,Ft)=>{const gn=he.get(),sn=gn.index;let rn,Mn=sn;ht=!1!==ht;const ao=ge.getBody(),To=Le.grep(Le.toArray(ao.getElementsByTagName("span")),cs);for(let ws=0;ws<To.length;ws++){const gc=Fr(To[ws]);let Ta=rn=parseInt(gc,10);if(Ft||Ta===gn.index){for(at.length?(To[ws].innerText=at,rr(To[ws])):Da(ge.dom,To[ws]);To[++ws];){if(Ta=parseInt(Fr(To[ws]),10),Ta!==rn){ws--;break}Da(ge.dom,To[ws])}ht&&Mn--}else rn>sn&&To[ws].setAttribute("data-mce-index",String(rn-1))}return he.set({...gn,count:Ft?0:gn.count-1,index:Mn}),ht?ts(ge,he):Rs(ge,he),!Ft&&he.get().count>0},Ss=(ge,he,at)=>{let ht,Ft;const gn=he.get(),sn=Le.toArray(ge.getBody().getElementsByTagName("span"));for(let rn=0;rn<sn.length;rn++){const Mn=Fr(sn[rn]);null!==Mn&&Mn.length&&(Mn===gn.index.toString()&&(ht||(ht=sn[rn].firstChild),Ft=sn[rn].firstChild),rr(sn[rn]))}if(he.set({...gn,index:-1,count:0,text:""}),ht&&Ft){const rn=ge.dom.createRng();return rn.setStart(ht,0),rn.setEnd(Ft,Ft.data.length),!1!==at&&ge.selection.setRng(rn),rn}},hn=(ge,he)=>{const at=(()=>{const ge=(ge=>{const he=da(Ln.none()),at=()=>he.get().each(ge);return{clear:()=>{at(),he.set(Ln.none())},isSet:()=>he.get().isSome(),get:()=>he.get(),set:rn=>{at(),he.set(Ln.some(rn))}}})(zt);return{...ge,on:at=>ge.get().each(at)}})();ge.undoManager.add();const ht=Le.trim(ge.selection.getContent({format:"text"})),Ft=co=>{co.setEnabled("next",((ge,he)=>he.get().count>1)(0,he)),co.setEnabled("prev",((ge,he)=>he.get().count>1)(0,he))},sn=(co,Wo)=>{gt(["replace","replaceall","prev","next"],ga=>co.setEnabled(ga,!Wo))},rn=(co,Wo)=>{Wo.redial(Ka(co,Wo.getData()))},Mn=(co,Wo)=>{ve.browser.isSafari()&&ve.deviceType.isTouch()&&("find"===Wo||"replace"===Wo||"replaceall"===Wo)&&co.focus(Wo)},ao=co=>{Ss(ge,he,!1),sn(co,!0),Ft(co)},To=co=>{const Wo=co.getData(),gs=he.get();if(Wo.findtext.length){if(gs.text===Wo.findtext&&gs.matchCase===Wo.matchcase&&gs.wholeWord===Wo.wholewords)ts(ge,he);else{const ma=ar(ge,he,Wo.findtext,Wo.matchcase,Wo.wholewords,Wo.inselection);ma<=0&&rn(!0,co),sn(co,0===ma)}Ft(co)}else ao(co)},ws=he.get(),Ta=co=>{const Wo=[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}];return co&&Wo.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),Wo},Ka=(co,Wo)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Ta(co)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:Wo,onChange:(gs,ma)=>{co&&rn(!1,gs),"findtext"===ma.name&&he.get().count>0&&ao(gs)},onAction:(gs,ma)=>{const ga=gs.getData();switch(ma.name){case"find":To(gs);break;case"replace":ms(ge,he,ga.replacetext)?Ft(gs):ao(gs);break;case"replaceall":ms(ge,he,ga.replacetext,!0,!0),ao(gs);break;case"prev":Rs(ge,he),Ft(gs);break;case"next":ts(ge,he),Ft(gs);break;case"matchcase":case"wholewords":case"inselection":rn(!1,gs),(co=>{const Wo=co.getData(),gs=he.get();he.set({...gs,matchCase:Wo.matchcase,wholeWord:Wo.wholewords,inSelection:Wo.inselection})})(gs),ao(gs)}Mn(gs,ma.name)},onSubmit:gs=>{To(gs),Mn(gs,"find")},onClose:()=>{ge.focus(),Ss(ge,he),ge.undoManager.add()}});at.set(ge.windowManager.open(Ka(!1,{findtext:ht,replacetext:"",wholewords:ws.wholeWord,matchcase:ws.matchCase,inselection:ws.inSelection}),{inline:"toolbar"}))},ps=(ge,he)=>()=>{hn(ge,he)};Dr.add("searchreplace",ge=>{const he=da({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return((ge,he)=>{ge.addCommand("SearchReplace",()=>{hn(ge,he)})})(ge,he),((ge,he)=>{ge.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:ps(ge,he),icon:"search"}),ge.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:ps(ge,he),icon:"search"}),ge.shortcuts.add("Meta+F","",ps(ge,he))})(ge,he),((ge,he)=>({done:rn=>Ss(ge,he,rn),find:(rn,Mn,ao,To=!1)=>ar(ge,he,rn,Mn,ao,To),next:()=>ts(ge,he),prev:()=>Rs(ge,he),replace:(rn,Mn,ao)=>ms(ge,he,rn,Mn,ao)}))(ge,he)})}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Wr=bt=>vn=>vn.options.get(bt),Os=Wr("autolink_pattern"),vr=Wr("link_default_target"),As=Wr("link_default_protocol"),bn=Wr("allow_unsafe_link_target"),zt=("string",vn=>"string"===(bt=>{const vn=typeof bt;return null===bt?"null":"object"===vn&&Array.isArray(bt)?"array":"object"===vn&&((bt,vn,Be)=>{var lt;return!!((Be,lt)=>lt.isPrototypeOf(Be))(bt,vn.prototype)||(null===(lt=bt.constructor)||void 0===lt?void 0:lt.name)===vn.name})(bt,String)?"string":vn})(vn)),Mo=vn=>void 0===vn,Wn=bt=>!(bt=>null==bt)(bt),Ln=Object.hasOwnProperty,re=bt=>"\ufeff"===bt;var Is=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const ko=bt=>3===bt.nodeType,qe=bt=>1===bt.nodeType,Se=bt=>/^[(\[{ \u00a0]$/.test(bt),Ot=(bt,vn,Be)=>{for(let lt=vn-1;lt>=0;lt--){const ln=bt.charAt(lt);if(!re(ln)&&Be(ln))return lt}return-1},An=(bt,vn)=>{var Be;const lt=bt.schema.getVoidElements(),ln=Os(bt),{dom:Je,selection:so}=bt;if(null!==Je.getParent(so.getNode(),"a[href]"))return null;const jn=so.getRng(),Ht=Is(Je,zo=>Je.isBlock(zo)||((bt,vn)=>Ln.call(bt,vn))(lt,zo.nodeName.toLowerCase())||"false"===Je.getContentEditable(zo)),{container:ro,offset:fo}=((bt,vn)=>{let Be=bt,lt=vn;for(;qe(Be)&&Be.childNodes[lt];)Be=Be.childNodes[lt],lt=ko(Be)?Be.data.length:Be.childNodes.length;return{container:Be,offset:lt}})(jn.endContainer,jn.endOffset),mr=null!==(Be=Je.getParent(ro,Je.isBlock))&&void 0!==Be?Be:Je.getRoot(),En=Ht.backwards(ro,fo+vn,(zo,Mr)=>{const Hs=zo.data,Ps=Ot(Hs,Mr,(bt=>vn=>!bt(vn))(Se));return-1===Ps||(bt=>/[?!,.;:]/.test(bt))(Hs[Ps])?Ps:Ps+1},mr);if(!En)return null;let No=En.container;const yr=Ht.backwards(En.container,En.offset,(zo,Mr)=>{No=zo;const Hs=Ot(zo.data,Mr,Se);return-1===Hs?Hs:Hs+1},mr),Ao=Je.createRng();yr?Ao.setStart(yr.container,yr.offset):Ao.setStart(No,0),Ao.setEnd(En.container,En.offset);const Qr=(bt=>bt.replace(/\uFEFF/g,""))(Ao.toString()).match(ln);if(Qr){let zo=Qr[0];return((bt,vn)=>((bt,vn,Be)=>bt.length>=vn.length&&bt.substr(0,0+vn.length)===vn)(bt,"www."))(zo)?zo=As(bt)+"://"+zo:((bt,vn,Be=0,lt)=>{const ln=bt.indexOf(vn,Be);return-1!==ln&&(!!Mo(lt)||ln+vn.length<=lt)})(zo,"@")&&!(bt=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(bt))(zo)&&(zo="mailto:"+zo),{rng:Ao,url:zo}}return null},oo=(bt,vn)=>{const{dom:Be,selection:lt}=bt,{rng:ln,url:Je}=vn,so=lt.getBookmark();lt.setRng(ln);const jn="createlink",Ht={command:jn,ui:!1,value:Je};if(!bt.dispatch("BeforeExecCommand",Ht).isDefaultPrevented()){bt.getDoc().execCommand(jn,!1,Je),bt.dispatch("ExecCommand",Ht);const fo=vr(bt);if(zt(fo)){const mr=lt.getNode();Be.setAttrib(mr,"target",fo),"_blank"===fo&&!bn(bt)&&Be.setAttrib(mr,"rel","noopener")}}lt.moveToBookmark(so),bt.nodeChanged()},yn=bt=>{const vn=An(bt,-1);Wn(vn)&&oo(bt,vn)},Lt=yn;da.add("autolink",bt=>{(bt=>{const vn=bt.options.register;vn("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),vn("link_default_target",{processor:"string"}),vn("link_default_protocol",{processor:"string",default:"https"})})(bt),(bt=>{bt.on("keydown",vn=>{13===vn.keyCode&&!vn.isDefaultPrevented()&&(bt=>{const vn=An(bt,0);Wn(vn)&&oo(bt,vn)})(bt)}),bt.on("keyup",vn=>{32===vn.keyCode?yn(bt):(48===vn.keyCode&&vn.shiftKey||221===vn.keyCode)&&Lt(bt)})})(bt)})}(),function(){"use strict";var da=tinymce.util.Tools.resolve("tinymce.PluginManager");const Os=Ye=>Ke=>typeof Ke===Ye,vr=("string",Ke=>"string"===(Ye=>{const Ke=typeof Ye;return null===Ye?"null":"object"===Ke&&Array.isArray(Ye)?"array":"object"===Ke&&((Ye,Ke,Sn)=>{var tn;return!!((Sn,tn)=>tn.isPrototypeOf(Sn))(Ye,Ke.prototype)||(null===(tn=Ye.constructor)||void 0===tn?void 0:tn.name)===Ke.name})(Ye,String)?"string":Ke})(Ke)),As=Os("boolean"),qn=Ye=>!(Ye=>null==Ye)(Ye),qo=Os("function"),Oo=Os("number"),Mo=()=>!1;class Ro{constructor(Ke,Sn){this.tag=Ke,this.value=Sn}static some(Ke){return new Ro(!0,Ke)}static none(){return Ro.singletonNone}fold(Ke,Sn){return this.tag?Sn(this.value):Ke()}isSome(){return this.tag}isNone(){return!this.tag}map(Ke){return this.tag?Ro.some(Ke(this.value)):Ro.none()}bind(Ke){return this.tag?Ke(this.value):Ro.none()}exists(Ke){return this.tag&&Ke(this.value)}forall(Ke){return!this.tag||Ke(this.value)}filter(Ke){return!this.tag||Ke(this.value)?this:Ro.none()}getOr(Ke){return this.tag?this.value:Ke}or(Ke){return this.tag?this:Ke}getOrThunk(Ke){return this.tag?this.value:Ke()}orThunk(Ke){return this.tag?this:Ke()}getOrDie(Ke){if(this.tag)return this.value;throw new Error(Ke??"Called getOrDie on None")}static from(Ke){return qn(Ke)?Ro.some(Ke):Ro.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ke){this.tag&&Ke(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ro.singletonNone=new Ro(!1);const _t=(Ye,Ke)=>{for(let Sn=0,tn=Ye.length;Sn<tn;Sn++)Ke(Ye[Sn],Sn)},Is=Ye=>{if(null==Ye)throw new Error("Node cannot be null or undefined");return{dom:Ye}},qe_fromDom=Is,Se=(Ye,Ke)=>{const Sn=Ye.dom;if(1!==Sn.nodeType)return!1;{const tn=Sn;if(void 0!==tn.matches)return tn.matches(Ke);if(void 0!==tn.msMatchesSelector)return tn.msMatchesSelector(Ke);if(void 0!==tn.webkitMatchesSelector)return tn.webkitMatchesSelector(Ke);if(void 0!==tn.mozMatchesSelector)return tn.mozMatchesSelector(Ke);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const Ot=Ye=>Ke=>(Ye=>Ye.dom.nodeType)(Ke)===Ye,B=Ot(1),An=Ot(3),oo=Ot(9),yn=Ot(11),lt=(Ye,Ke)=>{Ye.dom.removeAttribute(Ke)},so=qo(Element.prototype.attachShadow)&&qo(Node.prototype.getRootNode)?Ye=>qe_fromDom(Ye.dom.getRootNode()):Ye=>oo(Ye)?Ye:(Ye=>qe_fromDom(Ye.dom.ownerDocument))(Ye),Ht=Ye=>qe_fromDom(Ye.dom.host),ro=Ye=>{const Ke=An(Ye)?Ye.dom.parentNode:Ye.dom;if(null==Ke||null===Ke.ownerDocument)return!1;const Sn=Ke.ownerDocument;return(Ye=>{const Ke=so(Ye);return(Ye=>yn(Ye)&&qn(Ye.dom.host))(Ke)?Ro.some(Ke):Ro.none()})(qe_fromDom(Ke)).fold(()=>Sn.body.contains(Ke),((Ye,Ke)=>Sn=>Ye(Ke(Sn)))(ro,Ht))},Ao=Ye=>"rtl"===((Ye,Ke)=>{const Sn=Ye.dom,Kn=window.getComputedStyle(Sn).getPropertyValue(Ke);return""!==Kn||ro(Ye)?Kn:((Ye,Ke)=>(Ye=>void 0!==Ye.style&&qo(Ye.style.getPropertyValue))(Ye)?Ye.style.getPropertyValue(Ke):"")(Sn,Ke)})(Ye,"direction")?"rtl":"ltr",Qr=(Ye,Ke)=>((Ye,Ke)=>((Ye,Ke)=>{const Sn=[];for(let tn=0,Kn=Ye.length;tn<Kn;tn++){const Xs=Ye[tn];Ke(Xs,tn)&&Sn.push(Xs)}return Sn})((Ye=>((Ye,Ke)=>{const Sn=Ye.length,tn=new Array(Sn);for(let Kn=0;Kn<Sn;Kn++)tn[Kn]=Ke(Ye[Kn],Kn);return tn})(Ye.dom.childNodes,qe_fromDom))(Ye),Ke))(Ye,Sn=>Se(Sn,Ke)),Hs=Ke=>B(Ke)&&"li"===(Ye=>Ye.dom.nodeName.toLowerCase())(Ke),Ps=(Ye,Ke,Sn)=>{_t(Ke,tn=>{const Kn=qe_fromDom(tn),Xs=Hs(Kn),sr=((Ye,Ke)=>(Ke?((Ye,Ke,Sn)=>((Ye,Ke,Sn)=>{let tn=Ye.dom;const Kn=qo(Sn)?Sn:Mo;for(;tn.parentNode;){tn=tn.parentNode;const Xs=qe_fromDom(tn);if(Ke(Xs))return Ro.some(Xs);if(Kn(Xs))break}return Ro.none()})(Ye,tn=>Se(tn,Ke),Sn))(Ye,"ol,ul"):Ro.some(Ye)).getOr(Ye))(Kn,Xs);(Ye=>(Ye=>Ro.from(Ye.dom.parentNode).map(qe_fromDom))(Ye).filter(B))(sr).each(Es=>{if(Ye.setStyle(sr.dom,"direction",null),Ao(Es)===Sn?lt(sr,"dir"):((Ye,Ke,Sn)=>{((Ye,Ke,Sn)=>{if(!(vr(Sn)||As(Sn)||Oo(Sn)))throw console.error("Invalid call to Attribute.set. Key ",Ke,":: Value ",Sn,":: Element ",Ye),new Error("Attribute value was not simple");Ye.setAttribute(Ke,Sn+"")})(Ye.dom,Ke,Sn)})(sr,"dir",Sn),Ao(sr)!==Sn&&Ye.setStyle(sr.dom,"direction",Sn),Xs){const rt=Qr(sr,"li[dir],li[style]");_t(rt,Qn=>{lt(Qn,"dir"),Ye.setStyle(Qn.dom,"direction",null)})}})})},or=(Ye,Ke)=>{Ye.selection.isEditable()&&(Ps(Ye.dom,Ye.selection.getSelectedBlocks(),Ke),Ye.nodeChanged())},$o=(Ye,Ke)=>Sn=>{const tn=Kn=>{const Xs=qe_fromDom(Kn.element);Sn.setActive(Ao(Xs)===Ke),Sn.setEnabled(Ye.selection.isEditable())};return Ye.on("NodeChange",tn),Sn.setEnabled(Ye.selection.isEditable()),()=>Ye.off("NodeChange",tn)};da.add("directionality",Ye=>{(Ye=>{Ye.addCommand("mceDirectionLTR",()=>{or(Ye,"ltr")}),Ye.addCommand("mceDirectionRTL",()=>{or(Ye,"rtl")})})(Ye),(Ye=>{Ye.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>Ye.execCommand("mceDirectionLTR"),onSetup:$o(Ye,"ltr")}),Ye.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>Ye.execCommand("mceDirectionRTL"),onSetup:$o(Ye,"rtl")})})(Ye)})}();